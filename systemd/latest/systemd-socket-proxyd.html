<html><head><style data-id="immersive-translate-default-injected-css">:root {
  --immersive-translate-theme-underline-borderColor: #72ece9;
  --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
  --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
  --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
  --immersive-translate-theme-highlight-backgroundColor: #ffff00;
  --immersive-translate-theme-dashed-borderColor: #59c1bd;
  --immersive-translate-theme-blockquote-borderColor: #cc3355;
  --immersive-translate-theme-thinDashed-borderColor: #ff374f;
  --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
  --immersive-translate-theme-dashedBorder-borderRadius: 0;
  --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
  --immersive-translate-theme-solidBorder-borderRadius: 0;
  --immersive-translate-theme-dotted-borderColor: #94a3b8;
  --immersive-translate-theme-wavy-borderColor: #72ece9;
  --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
  --immersive-translate-theme-grey-textColor: #2f4f4f;
  --immersive-translate-theme-marker-backgroundColor: #fbda41;
  --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
  --immersive-translate-theme-marker2-backgroundColor: #ffff00;
  --immersive-translate-theme-opacity-opacity: 10;
}

.immersive-translate-target-translation-pre-whitespace {
  white-space: pre-wrap !important;
}

.immersive-translate-pdf-target-container {
  position: absolute;
  background-color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
    sans-serif;
  top: 0;
  width: 600px;
  height: 100%;
  z-index: 2;
  line-height: 1.3;
  font-size: 16px;
}
.immersive-translate-target-wrapper[dir='rtl'] {
  text-align: right;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
  color: rgb(0, 0, 0);
  white-space: normal;
  position: absolute;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
  color: inherit;
  white-space: inherit;
  position: unset;
}

.immersive-translate-state-dual>br {
  display: none;
}

.immersive-translate-target-translation-block-wrapper {
  margin: 8px 0 !important;
  display: inline-block;
}

.immersive-translate-target-translation-pdf-block-wrapper {
  margin: 0 !important;
  display: block;
}

.immersive-translate-target-translation-theme-grey-inner {
  color: var(--immersive-translate-theme-grey-textColor);
}


.immersive-translate-target-translation-theme-underline-inner {
  border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
}

.immersive-translate-target-translation-theme-nativeUnderline-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
}

.immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-theme-nativeDashed-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
  text-decoration-style: dashed !important;
}

.immersive-translate-target-translation-theme-thinDashed-inner {
  border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
}

.immersive-translate-target-translation-theme-dotted-inner {
  background-image: linear-gradient(to right,
      var(--immersive-translate-theme-dotted-borderColor) 30%,
      rgba(255, 255, 255, 0) 0%);
  background-position: bottom;
  background-size: 5px 1px;
  background-repeat: repeat-x;
  padding-bottom: 3px;
}

.immersive-translate-target-translation-theme-nativeDotted-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
  text-decoration-style: dotted !important;
}

.immersive-translate-target-translation-theme-wavy-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
  text-decoration-style: wavy !important;
}

.immersive-translate-target-translation-theme-dashed-inner {
  background: linear-gradient(to right,
      var(--immersive-translate-theme-dashed-borderColor) 0%,
      var(--immersive-translate-theme-dashed-borderColor) 50%,
      transparent 50%,
      transparent 100%) repeat-x left bottom;
  background-size: 8px 2px;
  padding-bottom: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
  content: "";
  display: block;
  max-width: 80px;
  width: 10%;
  border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  padding-top: 8px;
}

.immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
  content: "";
  border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  max-height: 16px;
  height: 16px;
  padding-left: 8px;
}

.immersive-translate-target-translation-theme-highlight-inner {
  background: var(--immersive-translate-theme-highlight-backgroundColor);
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-block-wrapper-theme-marker {
  line-height: 1.5em;
}

.immersive-translate-target-translation-theme-marker2-inner {
  font-weight: bold;
  text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
    16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
    2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
    -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
}

.immersive-translate-target-translation-theme-marker-inner {
  /* TODO: add more texture */
  background: linear-gradient(to right,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-theme-weakening {
  opacity: 0.618 !important;
}

.immersive-translate-target-translation-theme-italic {
  font-style: italic !important;
}

.immersive-translate-target-translation-theme-bold {
  font-weight: bold !important;
}

.immersive-translate-target-translation-block-wrapper-theme-paper {
  margin: 8px 0;
  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
  padding: 16px 32px;
  display: block;
}

.immersive-translate-target-translation-block-wrapper-theme-blockquote {
  border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
  padding-left: 12px !important;
  margin-top: 4px;
  margin-bottom: 4px;
  padding-top: 4px;
  padding-bottom: 4px;
  display: block;
}

.immersive-translate-target-translation-theme-mask-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
  filter: none !important;
}

[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}


/* opacity theme start */

.immersive-translate-target-translation-theme-opacity-inner {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: none !important;
}


.immersive-translate-target-translation-theme-mask-inner:hover {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
  filter: none !important;
}


[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
  filter: none !important;
}

/* opacity theme end */

/* vertical css , please remain it in the last one. */
.immersive-translate-target-translation-vertical-block-wrapper {
  margin: 0px 8px !important;
}

.immersive-translate-text {
  font-size: 15px !important;
}

.immersive-translate-error-toast {
  position: fixed;
  top: 5%;
  z-index: 99999999;
  left: 0;
  right: 0;
  margin: auto;
  max-width: 300px;
  padding: 16px;
  border-radius: 12px;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}

@media all and (min-width: 750px) {
  .immersive-translate-error-toast {
    max-width: 400px;
  }
}


.immersive-translate-clickable-button {
  cursor: pointer;
}

.immersive-translate-help-button {
  cursor: pointer;
}

.immersive-translate-loading-text:before {
  content: "...";
}


/* dark mode for loading */

@media only screen and (prefers-color-scheme: dark) {
  .immersive-translate-loading {
    border: 2px rgba(255, 255, 255, 0.25) solid !important;
    border-top: 2px rgba(255, 255, 255, 1) solid !important;
  }
}

.immersive-translate-error-wrapper {
  position: relative;
  display: inline-flex;
  padding: 6px;
  margin: 0 12px;
  white-space: nowrap;
  font-size: 0.9em;
}
[lang="zh-CN"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}
[lang="zh-TW"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}


.immersive-translate-tooltip {
  position: relative;
  display: inline-flex;
  /* little indicater to indicate it's hoverable */
}

.immersive-translate-tooltip-content {
  /* here's the magic */
  position: absolute;
  z-index: 100000000000;

  left: 50%;
  bottom: 0;
  transform: translate(-50%, 110%);
  line-height: 1;
  /* and add a small left margin */

  /* basic styles */
  width: max-content;
  max-width: 250px;
  word-wrap: break-word;
  white-space: pre-line;
  padding: 10px;
  border-radius: 10px;
  background: #000C;
  color: #fff;
  text-align: center;
  font-size: 14px;
  display: none;
  /* hide by default */
}

.immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip-content-table {
  left: unset !important;
  bottom: unset !important;
  transform: translate(-10%, 50%) !important;
}


.immersive-translate-tooltip:hover:before {
  display: block;
}



.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}
</style><style data-id="immersive-translate-user-custom-style">:root {

.immersive-translate-target-inner { font-family: inherit; }
}
</style><style data-id="immersive-translate-dynamic-injected-css">.immersive-translate-target-wrapper[dir='rtl'] {text-align: right;}
.immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {display:block;}
.immersive-translate-target-wrapper {word-break: break-word;}
</style></head><body data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>systemd-socket-proxyd</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><script src="https://code.jquery.com/jquery-3.7.1.min.js"></script><script src="../nav.js"></script><style>
    a.headerlink {
      color: #c60f0f;
      font-size: 0.8em;
      padding: 0 4px 0 4px;
      text-decoration: none;
      visibility: hidden;
    }

    a.headerlink:hover {
      background-color: #c60f0f;
      color: white;
    }

    h1:hover > a.headerlink, h2:hover > a.headerlink, h3:hover > a.headerlink, dt:hover > a.headerlink {
      visibility: visible;
    }
  </style><a href="index.html" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">Index </a>·
  <a href="systemd.directives.html" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">Directives </a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">索引 · 指令</font></font></font><span style="float:right" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">systemd 255</span><hr><div class="refentry" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><a name="systemd-socket-proxyd" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"></a><div class="titlepage" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"></div><div class="refnamediv" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><h2 data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">Name<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">名称</font></font></font></h2><p data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">systemd-socket-proxyd — Bidirectionally proxy local sockets to another (possibly remote) socket<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">systemd-socket-proxyd — 双向代理本地套接字到另一个（可能是远程的）套接字</font></font></font></p></div><div class="refsynopsisdiv" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><h2 data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">Synopsis<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">简介</font></font></font></h2><div class="cmdsynopsis" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><p data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1"><code class="command" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">systemd-socket-proxyd</code>  [<em class="replaceable" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><code data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">OPTIONS</code></em>...]  <em class="replaceable" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><code data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">HOST</code></em>:<em class="replaceable" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><code data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">PORT</code></em> </p></div><div class="cmdsynopsis" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><p data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1"><code class="command" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">systemd-socket-proxyd</code>  [<em class="replaceable" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><code data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">OPTIONS</code></em>...]  <em class="replaceable" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><code data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">UNIX-DOMAIN-SOCKET-PATH</code></em>
       </p></div></div><div class="refsect1" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><a name="id-1.5" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"></a><h2 id="Description" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">Description<a class="headerlink" title="Permalink to this headline" href="#Description" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">描述</font></font></font></h2><p data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">
    <span class="command" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><strong data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">systemd-socket-proxyd</strong></span> is a generic
    socket-activated network socket forwarder proxy daemon for IPv4,
    IPv6 and UNIX stream sockets. It may be used to bi-directionally
    forward traffic from a local listening socket to a local or remote
    destination socket.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">systemd-socket-proxyd 是一个通用的套接字激活网络套接字转发代理守护程序，支持 IPv4、IPv6 和 UNIX 流套接字。它可用于双向转发来自本地监听套接字的流量到本地或远程目标套接字。</font></font></font></p><p data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">One use of this tool is to provide socket activation support
    for services that do not natively support socket activation. On
    behalf of the service to activate, the proxy inherits the socket
    from systemd, accepts each client connection, opens a connection
    to a configured server for each client, and then bidirectionally
    forwards data between the two.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这个工具的一个用途是为那些不原生支持套接字激活的服务提供套接字激活支持。代表要激活的服务，代理从 systemd 继承套接字，接受每个客户端连接，为每个客户端打开到配置的服务器的连接，然后在两者之间双向转发数据。</font></font></font></p><p data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">This utility's behavior is similar to
    <a href="http://linux.die.net/man/1/socat" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><span class="citerefentry" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><span class="refentrytitle" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">socat</span>(1)</span></a>.
    The main differences for <span class="command" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><strong data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">systemd-socket-proxyd</strong></span>
    are support for socket activation with
    "<code class="literal" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">Accept=no</code>" and an event-driven
    design that scales better with the number of
    connections.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这个实用程序的行为类似于 socat(1)。systemd-socket-proxyd 的主要区别在于支持使用 " <code class="literal" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">Accept=no</code> " 进行套接字激活，以及一个随着连接数量扩展更好的事件驱动设计。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><a name="id-1.6" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"></a><h2 id="Options" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">Options<a class="headerlink" title="Permalink to this headline" href="#Options" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">选项</font></font></font></h2><p data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">The following options are understood:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">以下选项已被理解:</font></font></font></p><div class="variablelist" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><dl class="variablelist" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><dt id="-h" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><code class="option" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">-h</code>, </span><span class="term" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><code class="option" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">--help</code></span><a class="headerlink" title="Permalink to this term" href="#-h" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="option" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">-h</code> ， <code class="option" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">--help</code> ¶</font></font></font></dt><dd data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><p data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1"><a name="help-text" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"></a>Print a short help text and exit.
    <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">打印简短的帮助文本并退出。</font></font></font></p></dd><dt id="--version" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><code class="option" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">--version</code></span><a class="headerlink" title="Permalink to this term" href="#--version" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">¶</a></dt><dd data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><p data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1"><a name="version-text" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"></a>Print a short version string and exit.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">打印简短的版本字符串并退出。</font></font></font></p></dd><dt id="--connections-max=" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><code class="option" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">--connections-max=</code>, </span><span class="term" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><code class="option" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">-c</code></span><a class="headerlink" title="Permalink to this term" href="#--connections-max=" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="option" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">--connections-max=</code> ， <code class="option" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">-c</code> ¶</font></font></font></dt><dd data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><p data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">Sets the maximum number of simultaneous connections, defaults to 256.
        If the limit of concurrent connections is reached further connections will be refused.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">设置最大同时连接数，默认为 256。如果达到并发连接限制，将拒绝进一步连接。</font></font></font></p><p data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1"><a name="v233" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"></a>Added in version 233.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在版本 233 中添加。</font></font></font></p></dd><dt id="--exit-idle-time=" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><code class="option" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">--exit-idle-time=</code></span><a class="headerlink" title="Permalink to this term" href="#--exit-idle-time=" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">¶</a></dt><dd data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><p data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">Sets the time before exiting when there are no connections, defaults to
        <code class="constant" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">infinity</code>. Takes a unit-less value in seconds, or a time span value such
        as "<code class="literal" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">5min 20s</code>".<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">设置没有连接时退出的时间，默认为 <code class="constant" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">infinity</code> 。以秒为单位的无单位值，或类似“ <code class="literal" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">5min 20s</code> ”的时间跨度值。</font></font></font></p><p data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1"><a name="v246" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"></a>Added in version 246.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加在版本 246 中。</font></font></font></p></dd></dl></div></div><div class="refsect1" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><a name="id-1.7" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"></a><h2 id="Exit status" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">Exit status<a class="headerlink" title="Permalink to this headline" href="#Exit%20status" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">退出状态 ¶</font></font></font></h2><p data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">On success, 0 is returned, a non-zero failure
    code otherwise.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">成功时返回 0，否则返回非零失败代码。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><a name="id-1.8" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"></a><h2 id="Examples" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">Examples<a class="headerlink" title="Permalink to this headline" href="#Examples" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 ¶</font></font></font></h2><div class="refsect2" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><a name="id-1.8.2" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"></a><h3 id="Simple Example" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">Simple Example<a class="headerlink" title="Permalink to this headline" href="#Simple%20Example" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">简单示例 ¶</font></font></font></h3><p data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">Use two services with a dependency and no namespace
      isolation.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用具有依赖关系和无命名空间隔离的两个服务。</font></font></font></p><div class="example" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><a name="id-1.8.2.3" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"></a><p class="title" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><b data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">Example&nbsp;1.&nbsp;proxy-to-nginx.socket<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 1. proxy-to-nginx.socket</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><pre class="programlisting">[Socket]
ListenStream=80

[Install]
WantedBy=sockets.target</pre></div></div><br class="example-break" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><div class="example" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><a name="id-1.8.2.4" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"></a><p class="title" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><b data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">Example&nbsp;2.&nbsp;proxy-to-nginx.service<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 2. proxy-to-nginx.service</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><pre class="programlisting">[Unit]
Requires=nginx.service
After=nginx.service
Requires=proxy-to-nginx.socket
After=proxy-to-nginx.socket

[Service]
Type=notify
ExecStart=/usr/lib/systemd/systemd-socket-proxyd /run/nginx/socket
PrivateTmp=yes
PrivateNetwork=yes</pre></div></div><br class="example-break" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><div class="example" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><a name="id-1.8.2.5" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"></a><p class="title" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><b data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">Example&nbsp;3.&nbsp;nginx.conf<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 3. nginx.conf</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><pre class="programlisting">[…]
server {
    listen       unix:/run/nginx/socket;
    […]
</pre></div></div><br class="example-break" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><div class="example" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><a name="id-1.8.2.6" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"></a><p class="title" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><b data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">Example&nbsp;4.&nbsp;Enabling the proxy<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 4. 启用代理</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><pre class="programlisting"># systemctl enable --now proxy-to-nginx.socket
$ curl http://localhost:80/</pre></div></div><br class="example-break" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><p data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">If <code class="filename" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">nginx.service</code> has <code class="varname" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">StopWhenUnneeded=</code> set, then
      passing <code class="option" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">--exit-idle-time=</code> to <span class="command" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><strong data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">systemd-socket-proxyd</strong></span> allows
      both services to stop during idle periods.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果 <code class="filename" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">nginx.service</code> 已设置 <code class="varname" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">StopWhenUnneeded=</code> ，那么将 <code class="option" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">--exit-idle-time=</code> 传递给 systemd-socket-proxyd 允许两个服务在空闲时期停止。</font></font></font></p></div><div class="refsect2" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><a name="id-1.8.3" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"></a><h3 id="Namespace Example" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">Namespace Example<a class="headerlink" title="Permalink to this headline" href="#Namespace%20Example" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">命名空间示例 ¶</font></font></font></h3><p data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">Similar as above, but runs the socket proxy and the main
      service in the same private namespace, assuming that
      <code class="filename" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">nginx.service</code> has
      <code class="varname" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">PrivateTmp=</code> and
      <code class="varname" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">PrivateNetwork=</code> set, too.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">与上述类似，但在同一个私有命名空间中运行套接字代理和主服务，假设 <code class="filename" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">nginx.service</code> 也设置了 <code class="varname" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">PrivateTmp=</code> 和 <code class="varname" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">PrivateNetwork=</code> 。</font></font></font></p><div class="example" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><a name="id-1.8.3.3" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"></a><p class="title" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><b data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">Example&nbsp;5.&nbsp;proxy-to-nginx.socket<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 5. proxy-to-nginx.socket</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><pre class="programlisting">[Socket]
ListenStream=80

[Install]
WantedBy=sockets.target</pre></div></div><br class="example-break" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><div class="example" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><a name="id-1.8.3.4" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"></a><p class="title" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><b data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">Example&nbsp;6.&nbsp;proxy-to-nginx.service<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 6. 代理到 nginx 服务</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><pre class="programlisting">[Unit]
Requires=nginx.service
After=nginx.service
Requires=proxy-to-nginx.socket
After=proxy-to-nginx.socket
JoinsNamespaceOf=nginx.service

[Service]
Type=notify
ExecStart=/usr/lib/systemd/systemd-socket-proxyd 127.0.0.1:8080
PrivateTmp=yes
PrivateNetwork=yes</pre></div></div><br class="example-break" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><div class="example" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><a name="id-1.8.3.5" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"></a><p class="title" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><b data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">Example&nbsp;7.&nbsp;nginx.conf<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 7. nginx.conf</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><pre class="programlisting">[…]
server {
    listen       8080;
    […]</pre></div></div><br class="example-break" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><div class="example" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><a name="id-1.8.3.6" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"></a><p class="title" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><b data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">Example&nbsp;8.&nbsp;Enabling the proxy<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 8. 启用代理</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><pre class="programlisting"># systemctl enable --now proxy-to-nginx.socket
$ curl http://localhost:80/</pre></div></div><br class="example-break" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"></div></div><div class="refsect1" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><a name="id-1.9" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"></a><h2 id="See Also" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">See Also<a class="headerlink" title="Permalink to this headline" href="#See%20Also" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">参见 ¶</font></font></font></h2><p data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059" data-immersive-translate-paragraph="1">
      <a href="systemd.html#" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><span class="citerefentry" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><span class="refentrytitle" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">systemd</span>(1)</span></a>,
      <a href="systemd.socket.html#" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><span class="citerefentry" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><span class="refentrytitle" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">systemd.socket</span>(5)</span></a>,
      <a href="systemd.service.html#" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><span class="citerefentry" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><span class="refentrytitle" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">systemd.service</span>(5)</span></a>,
      <a href="systemctl.html#" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><span class="citerefentry" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><span class="refentrytitle" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">systemctl</span>(1)</span></a>,
      <a href="http://linux.die.net/man/1/socat" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><span class="citerefentry" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><span class="refentrytitle" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">socat</span>(1)</span></a>,
      <a href="http://linux.die.net/man/1/nginx" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><span class="citerefentry" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><span class="refentrytitle" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">nginx</span>(1)</span></a>,
      <a href="http://linux.die.net/man/1/curl" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><span class="citerefentry" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059"><span class="refentrytitle" data-immersive-translate-walked="370c6c0d-4839-493f-bc73-981ef45b4059">curl</span>(1)</span></a>
    </p></div></div>
</body></html>