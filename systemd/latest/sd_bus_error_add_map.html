<html><head><style data-id="immersive-translate-default-injected-css">:root {
  --immersive-translate-theme-underline-borderColor: #72ece9;
  --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
  --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
  --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
  --immersive-translate-theme-highlight-backgroundColor: #ffff00;
  --immersive-translate-theme-dashed-borderColor: #59c1bd;
  --immersive-translate-theme-blockquote-borderColor: #cc3355;
  --immersive-translate-theme-thinDashed-borderColor: #ff374f;
  --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
  --immersive-translate-theme-dashedBorder-borderRadius: 0;
  --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
  --immersive-translate-theme-solidBorder-borderRadius: 0;
  --immersive-translate-theme-dotted-borderColor: #94a3b8;
  --immersive-translate-theme-wavy-borderColor: #72ece9;
  --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
  --immersive-translate-theme-grey-textColor: #2f4f4f;
  --immersive-translate-theme-marker-backgroundColor: #fbda41;
  --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
  --immersive-translate-theme-marker2-backgroundColor: #ffff00;
  --immersive-translate-theme-opacity-opacity: 10;
}

.immersive-translate-target-translation-pre-whitespace {
  white-space: pre-wrap !important;
}

.immersive-translate-pdf-target-container {
  position: absolute;
  background-color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
    sans-serif;
  top: 0;
  width: 600px;
  height: 100%;
  z-index: 2;
  line-height: 1.3;
  font-size: 16px;
}
.immersive-translate-target-wrapper[dir='rtl'] {
  text-align: right;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
  color: rgb(0, 0, 0);
  white-space: normal;
  position: absolute;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
  color: inherit;
  white-space: inherit;
  position: unset;
}

.immersive-translate-state-dual>br {
  display: none;
}

.immersive-translate-target-translation-block-wrapper {
  margin: 8px 0 !important;
  display: inline-block;
}

.immersive-translate-target-translation-pdf-block-wrapper {
  margin: 0 !important;
  display: block;
}

.immersive-translate-target-translation-theme-grey-inner {
  color: var(--immersive-translate-theme-grey-textColor);
}


.immersive-translate-target-translation-theme-underline-inner {
  border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
}

.immersive-translate-target-translation-theme-nativeUnderline-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
}

.immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-theme-nativeDashed-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
  text-decoration-style: dashed !important;
}

.immersive-translate-target-translation-theme-thinDashed-inner {
  border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
}

.immersive-translate-target-translation-theme-dotted-inner {
  background-image: linear-gradient(to right,
      var(--immersive-translate-theme-dotted-borderColor) 30%,
      rgba(255, 255, 255, 0) 0%);
  background-position: bottom;
  background-size: 5px 1px;
  background-repeat: repeat-x;
  padding-bottom: 3px;
}

.immersive-translate-target-translation-theme-nativeDotted-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
  text-decoration-style: dotted !important;
}

.immersive-translate-target-translation-theme-wavy-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
  text-decoration-style: wavy !important;
}

.immersive-translate-target-translation-theme-dashed-inner {
  background: linear-gradient(to right,
      var(--immersive-translate-theme-dashed-borderColor) 0%,
      var(--immersive-translate-theme-dashed-borderColor) 50%,
      transparent 50%,
      transparent 100%) repeat-x left bottom;
  background-size: 8px 2px;
  padding-bottom: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
  content: "";
  display: block;
  max-width: 80px;
  width: 10%;
  border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  padding-top: 8px;
}

.immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
  content: "";
  border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  max-height: 16px;
  height: 16px;
  padding-left: 8px;
}

.immersive-translate-target-translation-theme-highlight-inner {
  background: var(--immersive-translate-theme-highlight-backgroundColor);
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-block-wrapper-theme-marker {
  line-height: 1.5em;
}

.immersive-translate-target-translation-theme-marker2-inner {
  font-weight: bold;
  text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
    16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
    2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
    -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
}

.immersive-translate-target-translation-theme-marker-inner {
  /* TODO: add more texture */
  background: linear-gradient(to right,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-theme-weakening {
  opacity: 0.618 !important;
}

.immersive-translate-target-translation-theme-italic {
  font-style: italic !important;
}

.immersive-translate-target-translation-theme-bold {
  font-weight: bold !important;
}

.immersive-translate-target-translation-block-wrapper-theme-paper {
  margin: 8px 0;
  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
  padding: 16px 32px;
  display: block;
}

.immersive-translate-target-translation-block-wrapper-theme-blockquote {
  border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
  padding-left: 12px !important;
  margin-top: 4px;
  margin-bottom: 4px;
  padding-top: 4px;
  padding-bottom: 4px;
  display: block;
}

.immersive-translate-target-translation-theme-mask-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
  filter: none !important;
}

[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}


/* opacity theme start */

.immersive-translate-target-translation-theme-opacity-inner {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: none !important;
}


.immersive-translate-target-translation-theme-mask-inner:hover {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
  filter: none !important;
}


[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
  filter: none !important;
}

/* opacity theme end */

/* vertical css , please remain it in the last one. */
.immersive-translate-target-translation-vertical-block-wrapper {
  margin: 0px 8px !important;
}

.immersive-translate-text {
  font-size: 15px !important;
}

.immersive-translate-error-toast {
  position: fixed;
  top: 5%;
  z-index: 99999999;
  left: 0;
  right: 0;
  margin: auto;
  max-width: 300px;
  padding: 16px;
  border-radius: 12px;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}

@media all and (min-width: 750px) {
  .immersive-translate-error-toast {
    max-width: 400px;
  }
}


.immersive-translate-clickable-button {
  cursor: pointer;
}

.immersive-translate-help-button {
  cursor: pointer;
}

.immersive-translate-loading-text:before {
  content: "...";
}


/* dark mode for loading */

@media only screen and (prefers-color-scheme: dark) {
  .immersive-translate-loading {
    border: 2px rgba(255, 255, 255, 0.25) solid !important;
    border-top: 2px rgba(255, 255, 255, 1) solid !important;
  }
}

.immersive-translate-error-wrapper {
  position: relative;
  display: inline-flex;
  padding: 6px;
  margin: 0 12px;
  white-space: nowrap;
  font-size: 0.9em;
}
[lang="zh-CN"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}
[lang="zh-TW"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}


.immersive-translate-tooltip {
  position: relative;
  display: inline-flex;
  /* little indicater to indicate it's hoverable */
}

.immersive-translate-tooltip-content {
  /* here's the magic */
  position: absolute;
  z-index: 100000000000;

  left: 50%;
  bottom: 0;
  transform: translate(-50%, 110%);
  line-height: 1;
  /* and add a small left margin */

  /* basic styles */
  width: max-content;
  max-width: 250px;
  word-wrap: break-word;
  white-space: pre-line;
  padding: 10px;
  border-radius: 10px;
  background: #000C;
  color: #fff;
  text-align: center;
  font-size: 14px;
  display: none;
  /* hide by default */
}

.immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip-content-table {
  left: unset !important;
  bottom: unset !important;
  transform: translate(-10%, 50%) !important;
}


.immersive-translate-tooltip:hover:before {
  display: block;
}



.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}
</style><style data-id="immersive-translate-user-custom-style">:root {

.immersive-translate-target-inner { font-family: inherit; }
}
</style><style data-id="immersive-translate-dynamic-injected-css">.immersive-translate-target-wrapper[dir='rtl'] {text-align: right;}
.immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {display:block;}
.immersive-translate-target-wrapper {word-break: break-word;}
</style></head><body data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>sd_bus_error_add_map</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><script src="https://code.jquery.com/jquery-3.7.1.min.js"></script><script src="../nav.js"></script><style>
    a.headerlink {
      color: #c60f0f;
      font-size: 0.8em;
      padding: 0 4px 0 4px;
      text-decoration: none;
      visibility: hidden;
    }

    a.headerlink:hover {
      background-color: #c60f0f;
      color: white;
    }

    h1:hover > a.headerlink, h2:hover > a.headerlink, h3:hover > a.headerlink, dt:hover > a.headerlink {
      visibility: visible;
    }
  </style><a href="index.html" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">Index </a>·
  <a href="systemd.directives.html" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">Directives </a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">索引 · 指令</font></font></font><span style="float:right" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1">systemd 255</span><hr><div class="refentry" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><a name="sd_bus_error_add_map" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"></a><div class="titlepage" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"></div><div class="refnamediv" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><h2 data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1">Name<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">名称</font></font></font></h2><p data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1">sd_bus_error_add_map, sd_bus_error_map, SD_BUS_ERROR_MAP, SD_BUS_ERROR_END — Additional sd-dbus error mappings<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">sd_bus_error_add_map, sd_bus_error_map, SD_BUS_ERROR_MAP, SD_BUS_ERROR_END — 附加的 sd-dbus 错误映射</font></font></font></p></div><div class="refsynopsisdiv" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><h2 data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1">Synopsis<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">简介</font></font></font></h2><div class="funcsynopsis"><pre class="funcsynopsisinfo">#include &lt;systemd/sd-bus.h&gt;</pre><pre class="funcsynopsisinfo">typedef struct {
        const char *name;
        int code;
        …
} sd_bus_error_map;</pre><pre class="funcsynopsisinfo"><code class="constant">SD_BUS_ERROR_MAP(<em class="replaceable"><code>name</code></em>, <em class="replaceable"><code>code</code></em>)</code></pre><pre class="funcsynopsisinfo"><code class="constant">SD_BUS_ERROR_MAP_END</code></pre><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_bus_error_add_map</b>(</code></td><td>const sd_bus_error_map *<var class="pdparam">map</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div></div></div><div class="refsect1" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><a name="id-1.5" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"></a><h2 id="Description" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1">Description<a class="headerlink" title="Permalink to this headline" href="#Description" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">描述</font></font></font></h2><p data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1">The <code class="function" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">sd_bus_error_add_map()</code> call may be
    used to register additional mappings for converting D-Bus errors
    to Linux <code class="varname" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">errno</code>-style errors. The mappings
    defined with this call are consulted by calls such as
    <a href="sd_bus_error_set.html#" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="citerefentry" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="refentrytitle" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">sd_bus_error_set</span>(3)</span></a>
    or
    <a href="sd_bus_error_get_errno.html#" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="citerefentry" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="refentrytitle" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">sd_bus_error_get_errno</span>(3)</span></a>. By
    default, a number of generic, standardized mappings are known, as
    documented in
    <a href="sd-bus-errors.html#" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="citerefentry" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="refentrytitle" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">sd-bus-errors</span>(3)</span></a>. Use
    this call to add further, application-specific mappings.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">sd_bus_error_add_map()</code> 调用可用于注册将 D-Bus 错误转换为 Linux <code class="varname" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">errno</code> 风格错误的附加映射。使用此调用定义的映射将被 sd_bus_error_set(3) 或 sd_bus_error_get_errno(3) 等调用所查询。默认情况下，已知一些通用的标准映射，如 sd-bus-errors(3) 中所述。使用此调用添加更多应用程序特定的映射。</font></font></font></p><p data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1">The function takes a pointer to an array of
    <span class="structname" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">sd_bus_error_map</span> structures. A reference
    to the specified array is added to the lookup tables for error
    mappings. Note that the structure is not copied, and that it is hence
    essential that the array stays available and constant during the
    entire remaining runtime of the process.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">该函数接受一个指向 sd_bus_error_map 结构数组的指针。对指定数组的引用将被添加到错误映射的查找表中。请注意，结构体不会被复制，因此在整个进程的剩余运行时间内，数组保持可用和恒定是至关重要的。</font></font></font></p><p data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1">The mapping array should be put together with a series of
    <code class="constant" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">SD_BUS_ERROR_MAP()</code> macro invocations that
    take a literal name string and a (positive)
    <code class="varname" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">errno</code>-style error number. The last entry of the
    array should be an invocation of the
    <code class="constant" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">SD_BUS_ERROR_MAP_END</code> macro. The array should not be
    put together without use of these two macros.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">映射数组应与一系列 <code class="constant" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">SD_BUS_ERROR_MAP()</code> 宏调用一起放置，这些宏调用采用文字名称字符串和（正） <code class="varname" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">errno</code> -样式错误编号。数组的最后一个条目应该是 <code class="constant" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">SD_BUS_ERROR_MAP_END</code> 宏的调用。数组不应在没有使用这两个宏的情况下放在一起。</font></font></font></p><p data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1">Note that the call is idempotent: it is safe to invoke it
    multiple times with the parameter, which will only add the passed
    mapping array once.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，调用是幂等的：可以安全地多次使用参数调用它，这只会一次添加传递的映射数组。</font></font></font></p><p data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1">Note that the memory allocated by this call is not intended
    to be freed during the lifetime of the process. It should not be
    freed explicitly.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，此调用分配的内存不打算在进程的生命周期内释放。不应显式释放它。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><a name="id-1.6" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"></a><h2 id="Return Value" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1">Return Value<a class="headerlink" title="Permalink to this headline" href="#Return%20Value" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">返回值 ¶</font></font></font></h2><p data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">sd_bus_error_add_map()</code> returns a
    positive value when the new array was added to the lookup
    tables. It returns zero when the same array was already added
    before. On error, a negative <code class="varname" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">errno</code>-style error
    code is returned. See below for known error codes.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当新数组添加到查找表时， <code class="function" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">sd_bus_error_add_map()</code> 返回正值。当相同数组之前已经添加时，返回零。出错时，返回一个负的 <code class="varname" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">errno</code> 风格的错误代码。请参阅下面已知的错误代码。</font></font></font></p><div class="refsect2" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><a name="id-1.6.3" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"></a><h3 id="Errors" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1">Errors<a class="headerlink" title="Permalink to this headline" href="#Errors" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">错误 ¶</font></font></font></h3><p data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1">Returned errors may indicate the following problems:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">返回的错误可能表示以下问题：</font></font></font></p><div class="variablelist" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><dl class="variablelist" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><dt id="-EINVAL" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><code class="constant" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">-EINVAL</code></span><a class="headerlink" title="Permalink to this term" href="#-EINVAL" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">¶</a></dt><dd data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><p data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1">The specified mapping array is invalid.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">指定的映射数组无效。</font></font></font></p></dd><dt id="-ENOMEM" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><code class="constant" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">-ENOMEM</code></span><a class="headerlink" title="Permalink to this term" href="#-ENOMEM" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">¶</a></dt><dd data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><p data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1">Memory allocation failed.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">内存分配失败。</font></font></font></p></dd></dl></div></div></div><div class="refsect1" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><a name="id-1.7" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"></a><h2 id="Notes" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1">Notes<a class="headerlink" title="Permalink to this headline" href="#Notes" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意事项 ¶</font></font></font></h2><p data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1"><a name="pkgconfig-text" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"></a>Functions described here are available as a shared
  library, which can be compiled against and linked to with the
  <code class="constant" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">libsystemd</code>&nbsp;<a href="http://linux.die.net/man/1/pkg-config" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="citerefentry" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="refentrytitle" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">pkg-config</span>(1)</span></a>
  file.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此处描述的函数可作为共享库使用，可以通过 <code class="constant" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">libsystemd</code> pkg-config(1) 文件进行编译和链接。</font></font></font></p><p data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1"><a name="getenv" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"></a>The code described here uses
<a href="https://man7.org/linux/man-pages/man3/getenv.3.html" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="citerefentry" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="refentrytitle" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">getenv</span>(3)</span></a>,
which is declared to be not multi-thread-safe. This means that the code calling the functions described
here must not call
<a href="https://man7.org/linux/man-pages/man3/setenv.3.html" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="citerefentry" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="refentrytitle" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">setenv</span>(3)</span></a>
from a parallel thread. It is recommended to only do calls to <code class="function" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">setenv()</code>
from an early phase of the program when no other threads have been started.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此处描述的代码使用了 getenv(3)，该函数被声明为非多线程安全。这意味着调用此处描述的函数的代码不能从并行线程中调用 setenv(3)。建议仅在程序的早期阶段进行对 <code class="function" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">setenv()</code> 的调用，此时尚未启动其他线程。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><a name="id-1.8" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"></a><h2 id="History" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1">History<a class="headerlink" title="Permalink to this headline" href="#History" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">历史 ¶</font></font></font></h2><p data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">sd_bus_error_add_map()</code> was added in version 223.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">sd_bus_error_add_map()</code> 在版本 223 中添加。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><a name="id-1.9" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"></a><h2 id="See Also" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1">See Also<a class="headerlink" title="Permalink to this headline" href="#See%20Also" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">参见 ¶</font></font></font></h2><p data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610" data-immersive-translate-paragraph="1">
      <a href="systemd.html#" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="citerefentry" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="refentrytitle" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">systemd</span>(1)</span></a>,
      <a href="sd-bus.html#" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="citerefentry" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="refentrytitle" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">sd-bus</span>(3)</span></a>,
      <a href="sd_bus_error.html#" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="citerefentry" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="refentrytitle" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">sd_bus_error</span>(3)</span></a>,
      <a href="sd-bus-errors.html#" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="citerefentry" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="refentrytitle" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">sd-bus-errors</span>(3)</span></a>,
      <a href="https://man7.org/linux/man-pages/man3/errno.3.html" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="citerefentry" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="refentrytitle" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">errno</span>(3)</span></a>,
      <a href="https://man7.org/linux/man-pages/man3/strerror_r.3.html" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="citerefentry" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610"><span class="refentrytitle" data-immersive-translate-walked="2732c44c-bc2d-47de-bb4f-63aba0ad6610">strerror_r</span>(3)</span></a>
    </p></div></div>
</body></html>