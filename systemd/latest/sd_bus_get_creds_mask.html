<html><head><style data-id="immersive-translate-default-injected-css">:root {
  --immersive-translate-theme-underline-borderColor: #72ece9;
  --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
  --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
  --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
  --immersive-translate-theme-highlight-backgroundColor: #ffff00;
  --immersive-translate-theme-dashed-borderColor: #59c1bd;
  --immersive-translate-theme-blockquote-borderColor: #cc3355;
  --immersive-translate-theme-thinDashed-borderColor: #ff374f;
  --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
  --immersive-translate-theme-dashedBorder-borderRadius: 0;
  --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
  --immersive-translate-theme-solidBorder-borderRadius: 0;
  --immersive-translate-theme-dotted-borderColor: #94a3b8;
  --immersive-translate-theme-wavy-borderColor: #72ece9;
  --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
  --immersive-translate-theme-grey-textColor: #2f4f4f;
  --immersive-translate-theme-marker-backgroundColor: #fbda41;
  --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
  --immersive-translate-theme-marker2-backgroundColor: #ffff00;
  --immersive-translate-theme-opacity-opacity: 10;
}

.immersive-translate-target-translation-pre-whitespace {
  white-space: pre-wrap !important;
}

.immersive-translate-pdf-target-container {
  position: absolute;
  background-color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
    sans-serif;
  top: 0;
  width: 600px;
  height: 100%;
  z-index: 2;
  line-height: 1.3;
  font-size: 16px;
}
.immersive-translate-target-wrapper[dir='rtl'] {
  text-align: right;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
  color: rgb(0, 0, 0);
  white-space: normal;
  position: absolute;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
  color: inherit;
  white-space: inherit;
  position: unset;
}

.immersive-translate-state-dual>br {
  display: none;
}

.immersive-translate-target-translation-block-wrapper {
  margin: 8px 0 !important;
  display: inline-block;
}

.immersive-translate-target-translation-pdf-block-wrapper {
  margin: 0 !important;
  display: block;
}

.immersive-translate-target-translation-theme-grey-inner {
  color: var(--immersive-translate-theme-grey-textColor);
}


.immersive-translate-target-translation-theme-underline-inner {
  border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
}

.immersive-translate-target-translation-theme-nativeUnderline-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
}

.immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-theme-nativeDashed-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
  text-decoration-style: dashed !important;
}

.immersive-translate-target-translation-theme-thinDashed-inner {
  border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
}

.immersive-translate-target-translation-theme-dotted-inner {
  background-image: linear-gradient(to right,
      var(--immersive-translate-theme-dotted-borderColor) 30%,
      rgba(255, 255, 255, 0) 0%);
  background-position: bottom;
  background-size: 5px 1px;
  background-repeat: repeat-x;
  padding-bottom: 3px;
}

.immersive-translate-target-translation-theme-nativeDotted-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
  text-decoration-style: dotted !important;
}

.immersive-translate-target-translation-theme-wavy-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
  text-decoration-style: wavy !important;
}

.immersive-translate-target-translation-theme-dashed-inner {
  background: linear-gradient(to right,
      var(--immersive-translate-theme-dashed-borderColor) 0%,
      var(--immersive-translate-theme-dashed-borderColor) 50%,
      transparent 50%,
      transparent 100%) repeat-x left bottom;
  background-size: 8px 2px;
  padding-bottom: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
  content: "";
  display: block;
  max-width: 80px;
  width: 10%;
  border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  padding-top: 8px;
}

.immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
  content: "";
  border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  max-height: 16px;
  height: 16px;
  padding-left: 8px;
}

.immersive-translate-target-translation-theme-highlight-inner {
  background: var(--immersive-translate-theme-highlight-backgroundColor);
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-block-wrapper-theme-marker {
  line-height: 1.5em;
}

.immersive-translate-target-translation-theme-marker2-inner {
  font-weight: bold;
  text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
    16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
    2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
    -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
}

.immersive-translate-target-translation-theme-marker-inner {
  /* TODO: add more texture */
  background: linear-gradient(to right,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-theme-weakening {
  opacity: 0.618 !important;
}

.immersive-translate-target-translation-theme-italic {
  font-style: italic !important;
}

.immersive-translate-target-translation-theme-bold {
  font-weight: bold !important;
}

.immersive-translate-target-translation-block-wrapper-theme-paper {
  margin: 8px 0;
  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
  padding: 16px 32px;
  display: block;
}

.immersive-translate-target-translation-block-wrapper-theme-blockquote {
  border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
  padding-left: 12px !important;
  margin-top: 4px;
  margin-bottom: 4px;
  padding-top: 4px;
  padding-bottom: 4px;
  display: block;
}

.immersive-translate-target-translation-theme-mask-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
  filter: none !important;
}

[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}


/* opacity theme start */

.immersive-translate-target-translation-theme-opacity-inner {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: none !important;
}


.immersive-translate-target-translation-theme-mask-inner:hover {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
  filter: none !important;
}


[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
  filter: none !important;
}

/* opacity theme end */

/* vertical css , please remain it in the last one. */
.immersive-translate-target-translation-vertical-block-wrapper {
  margin: 0px 8px !important;
}

.immersive-translate-text {
  font-size: 15px !important;
}

.immersive-translate-error-toast {
  position: fixed;
  top: 5%;
  z-index: 99999999;
  left: 0;
  right: 0;
  margin: auto;
  max-width: 300px;
  padding: 16px;
  border-radius: 12px;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}

@media all and (min-width: 750px) {
  .immersive-translate-error-toast {
    max-width: 400px;
  }
}


.immersive-translate-clickable-button {
  cursor: pointer;
}

.immersive-translate-help-button {
  cursor: pointer;
}

.immersive-translate-loading-text:before {
  content: "...";
}


/* dark mode for loading */

@media only screen and (prefers-color-scheme: dark) {
  .immersive-translate-loading {
    border: 2px rgba(255, 255, 255, 0.25) solid !important;
    border-top: 2px rgba(255, 255, 255, 1) solid !important;
  }
}

.immersive-translate-error-wrapper {
  position: relative;
  display: inline-flex;
  padding: 6px;
  margin: 0 12px;
  white-space: nowrap;
  font-size: 0.9em;
}
[lang="zh-CN"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}
[lang="zh-TW"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}


.immersive-translate-tooltip {
  position: relative;
  display: inline-flex;
  /* little indicater to indicate it's hoverable */
}

.immersive-translate-tooltip-content {
  /* here's the magic */
  position: absolute;
  z-index: 100000000000;

  left: 50%;
  bottom: 0;
  transform: translate(-50%, 110%);
  line-height: 1;
  /* and add a small left margin */

  /* basic styles */
  width: max-content;
  max-width: 250px;
  word-wrap: break-word;
  white-space: pre-line;
  padding: 10px;
  border-radius: 10px;
  background: #000C;
  color: #fff;
  text-align: center;
  font-size: 14px;
  display: none;
  /* hide by default */
}

.immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip-content-table {
  left: unset !important;
  bottom: unset !important;
  transform: translate(-10%, 50%) !important;
}


.immersive-translate-tooltip:hover:before {
  display: block;
}



.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}
</style><style data-id="immersive-translate-user-custom-style">:root {

.immersive-translate-target-inner { font-family: inherit; }
}
</style><style data-id="immersive-translate-dynamic-injected-css">.immersive-translate-target-wrapper[dir='rtl'] {text-align: right;}
.immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {display:block;}
.immersive-translate-target-wrapper {word-break: break-word;}
</style></head><body data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>sd_bus_negotiate_fds</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><script src="https://code.jquery.com/jquery-3.7.1.min.js"></script><script src="../nav.js"></script><style>
    a.headerlink {
      color: #c60f0f;
      font-size: 0.8em;
      padding: 0 4px 0 4px;
      text-decoration: none;
      visibility: hidden;
    }

    a.headerlink:hover {
      background-color: #c60f0f;
      color: white;
    }

    h1:hover > a.headerlink, h2:hover > a.headerlink, h3:hover > a.headerlink, dt:hover > a.headerlink {
      visibility: visible;
    }
  </style><a href="index.html" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">Index </a>·
  <a href="systemd.directives.html" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">Directives </a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">索引 · 指令</font></font></font><span style="float:right" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1">systemd 255</span><hr><div class="refentry" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><a name="sd_bus_negotiate_fds" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"></a><div class="titlepage" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"></div><div class="refnamediv" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><h2 data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1">Name<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">名称</font></font></font></h2><p data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1">sd_bus_negotiate_fds, sd_bus_negotiate_timestamp, sd_bus_negotiate_creds, sd_bus_get_creds_mask — Control feature negotiation on bus connections<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">sd_bus_negotiate_fds, sd_bus_negotiate_timestamp, sd_bus_negotiate_creds, sd_bus_get_creds_mask — 控制总线连接上的功能协商</font></font></font></p></div><div class="refsynopsisdiv" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><h2 data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1">Synopsis<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">简介</font></font></font></h2><div class="funcsynopsis"><pre class="funcsynopsisinfo">#include &lt;systemd/sd-bus.h&gt;</pre><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_bus_negotiate_fds</b>(</code></td><td>sd_bus *<var class="pdparam">bus</var>, </td></tr><tr><td>&nbsp;</td><td>int <var class="pdparam">b</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_bus_negotiate_timestamp</b>(</code></td><td>sd_bus *<var class="pdparam">bus</var>, </td></tr><tr><td>&nbsp;</td><td>int <var class="pdparam">b</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_bus_negotiate_creds</b>(</code></td><td>sd_bus *<var class="pdparam">bus</var>, </td></tr><tr><td>&nbsp;</td><td>int <var class="pdparam">b</var>, </td></tr><tr><td>&nbsp;</td><td>uint64_t <var class="pdparam">mask</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_bus_get_creds_mask</b>(</code></td><td>sd_bus *<var class="pdparam">bus</var>, </td></tr><tr><td>&nbsp;</td><td>uint64_t *<var class="pdparam">mask</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div></div></div><div class="refsect1" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><a name="id-1.5" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"></a><h2 id="Description" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1">Description<a class="headerlink" title="Permalink to this headline" href="#Description" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">描述</font></font></font></h2><p data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_negotiate_fds()</code> controls whether file descriptor passing shall be
    negotiated for the specified bus connection. It takes a bus object and a boolean, which, when true,
    enables file descriptor passing, and, when false, disables it. Note that not all transports and servers
    support file descriptor passing. In particular, networked transports generally do not support file
    descriptor passing. To find out whether file descriptor passing is available after negotiation, use
    <a href="sd_bus_can_send.html#" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="citerefentry" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="refentrytitle" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_can_send</span>(3)</span></a>
    and pass <code class="constant" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">SD_BUS_TYPE_UNIX_FD</code>. Note that file descriptor passing is always enabled
    for both sending and receiving or for neither, but never only in one direction. By default, file
    descriptor passing is negotiated for all connections.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_negotiate_fds()</code> 控制是否应为指定的总线连接协商文件描述符传递。它接受一个总线对象和一个布尔值，当为真时启用文件描述符传递，当为假时禁用。请注意，并非所有传输和服务器都支持文件描述符传递。特别是，网络传输通常不支持文件描述符传递。要在协商后找出文件描述符传递是否可用，请使用 sd_bus_can_send(3)并传递 <code class="constant" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">SD_BUS_TYPE_UNIX_FD</code> 。请注意，文件描述符传递始终对发送和接收启用或禁用，但从不仅在一个方向上启用。默认情况下，为所有连接协商文件描述符传递。</font></font></font></p><p data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_negotiate_timestamp()</code> controls whether implicit sender timestamps shall
    be attached automatically to all incoming messages. Takes a bus object and a boolean, which, when true,
    enables timestamping, and, when false, disables it.  Use
    <a href="sd_bus_message_get_monotonic_usec.html#" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="citerefentry" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="refentrytitle" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_message_get_monotonic_usec</span>(3)</span></a>,
    <a href="sd_bus_message_get_realtime_usec.html#" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="citerefentry" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="refentrytitle" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_message_get_realtime_usec</span>(3)</span></a>,
    <a href="sd_bus_message_get_seqnum.html#" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="citerefentry" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="refentrytitle" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_message_get_seqnum</span>(3)</span></a>
    to query the timestamps of incoming messages. If negotiation is disabled or not supported, these calls
    will fail with <code class="constant" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">-ENODATA</code>. Note that currently no transports support timestamping of
    messages. By default, message timestamping is not negotiated for connections.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_negotiate_timestamp()</code> 控制是否自动附加隐式发件人时间戳到所有传入消息。接受一个总线对象和一个布尔值，当为真时启用时间戳，为假时禁用。使用 sd_bus_message_get_monotonic_usec(3)、sd_bus_message_get_realtime_usec(3)、sd_bus_message_get_seqnum(3) 查询传入消息的时间戳。如果协商被禁用或不受支持，这些调用将失败并显示 <code class="constant" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">-ENODATA</code> 。请注意，目前没有传输支持消息的时间戳。默认情况下，不为连接协商消息时间戳。</font></font></font></p><p data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_negotiate_creds()</code> controls whether and which implicit sender
    credentials shall be attached automatically to all incoming messages. Takes a bus object and a boolean
    indicating whether to enable or disable the credential parts encoded in the bit mask value argument. Note
    that not all transports support attaching sender credentials to messages, or do not support all types of
    sender credential parameters, or might suppress them under certain circumstances for individual messages.
    Specifically, dbus1 only supports <code class="constant" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">SD_BUS_CREDS_UNIQUE_NAME</code>. The sender credentials
    are suitable for authorization decisions. By default, only
    <code class="constant" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">SD_BUS_CREDS_WELL_KNOWN_NAMES</code> and <code class="constant" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">SD_BUS_CREDS_UNIQUE_NAME</code> are
    enabled. In fact, these two credential fields are always sent along and cannot be turned off.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_negotiate_creds()</code> 控制是否自动附加隐式发送方凭据以及应将哪些凭据自动附加到所有传入消息。接受一个总线对象和一个布尔值，指示是否启用或禁用位掩码值参数中编码的凭据部分。请注意，并非所有传输都支持将发送方凭据附加到消息，或者不支持所有类型的发送方凭据参数，或者在某些情况下可能会针对个别消息抑制它们。具体来说，dbus1 仅支持 <code class="constant" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">SD_BUS_CREDS_UNIQUE_NAME</code> 。发送方凭据适用于授权决策。默认情况下，仅启用 <code class="constant" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">SD_BUS_CREDS_WELL_KNOWN_NAMES</code> 和 <code class="constant" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">SD_BUS_CREDS_UNIQUE_NAME</code> 。实际上，这两个凭据字段始终会被发送，并且无法关闭。</font></font></font></p><p data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_get_creds_mask()</code> returns the set of sender credentials that was
    negotiated to be attached to all incoming messages in <em class="parameter" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><code data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">mask</code></em>. This value is an
    upper boundary only. Hence, always make sure to explicitly check which credentials are attached to a
    specific message before using it.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_get_creds_mask()</code> 返回协商要附加到 <code data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">mask</code> 中所有传入消息的发送方凭据集。此值仅是一个上限。因此，在使用特定消息之前，请务必明确检查附加到特定消息的凭据。</font></font></font></p><p data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1">The <code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_negotiate_fds()</code> function may be called only before the connection
    has been started with
    <a href="sd_bus_start.html#" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="citerefentry" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="refentrytitle" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_start</span>(3)</span></a>. Both
    <code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_negotiate_timestamp()</code> and <code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_negotiate_creds()</code> may
    also be called after a connection has been set up. Note that, when operating on a connection that is
    shared between multiple components of the same program (for example via
    <a href="sd_bus_default.html#" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="citerefentry" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="refentrytitle" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_default</span>(3)</span></a>), it
    is highly recommended to only enable additional per message metadata fields, but never disable them
    again, in order not to disable functionality needed by other components.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_negotiate_fds()</code> 函数只能在使用 sd_bus_start(3) 启动连接之前调用。 <code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_negotiate_timestamp()</code> 和 <code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_negotiate_creds()</code> 也可以在建立连接后调用。请注意，当操作在同一程序的多个组件之间共享的连接时（例如通过 sd_bus_default(3)），强烈建议仅启用额外的每条消息元数据字段，但永远不要再次禁用它们，以免禁用其他组件所需的功能。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><a name="id-1.6" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"></a><h2 id="Return Value" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1">Return Value<a class="headerlink" title="Permalink to this headline" href="#Return%20Value" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">返回值 ¶</font></font></font></h2><p data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1">On success, these functions return a non-negative integer. On failure, they return a negative
    errno-style error code.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">成功时，这些函数返回一个非负整数。失败时，它们返回一个负的 errno 风格的错误代码。</font></font></font></p><div class="refsect2" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><a name="id-1.6.3" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"></a><h3 id="Errors" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1">Errors<a class="headerlink" title="Permalink to this headline" href="#Errors" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">错误 ¶</font></font></font></h3><p data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1">Returned errors may indicate the following problems:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">返回的错误可能表示以下问题：</font></font></font></p><div class="variablelist" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><dl class="variablelist" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><dt id="-EPERM" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><code class="constant" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">-EPERM</code></span><a class="headerlink" title="Permalink to this term" href="#-EPERM" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">¶</a></dt><dd data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><p data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1">The bus connection has already been started.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">公交连接已经启动。</font></font></font></p></dd><dt id="-EINVAL" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><code class="constant" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">-EINVAL</code></span><a class="headerlink" title="Permalink to this term" href="#-EINVAL" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">¶</a></dt><dd data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><p data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1">An argument is invalid.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">参数无效。</font></font></font></p><p data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1"><a name="v246" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"></a>Added in version 246.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加在版本 246 中。</font></font></font></p></dd><dt id="-ENOPKG" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><code class="constant" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">-ENOPKG</code></span><a class="headerlink" title="Permalink to this term" href="#-ENOPKG" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">¶</a></dt><dd data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><p data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1">The bus cannot be resolved.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">公交车无法解决。</font></font></font></p><p data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1"><a name="v246" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"></a>Added in version 246.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加在版本 246 中。</font></font></font></p></dd><dt id="-ECHILD" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><code class="constant" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">-ECHILD</code></span><a class="headerlink" title="Permalink to this term" href="#-ECHILD" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">¶</a></dt><dd data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><p data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1">The bus was created in a different process, library or module instance.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">公交车是在不同的进程、库或模块实例中创建的。</font></font></font></p><p data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1"><a name="v246" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"></a>Added in version 246.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加在版本 246 中。</font></font></font></p></dd></dl></div></div></div><div class="refsect1" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><a name="id-1.7" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"></a><h2 id="Notes" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1">Notes<a class="headerlink" title="Permalink to this headline" href="#Notes" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意事项 ¶</font></font></font></h2><p data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1"><a name="pkgconfig-text" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"></a>Functions described here are available as a shared
  library, which can be compiled against and linked to with the
  <code class="constant" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">libsystemd</code>&nbsp;<a href="http://linux.die.net/man/1/pkg-config" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="citerefentry" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="refentrytitle" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">pkg-config</span>(1)</span></a>
  file.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此处描述的函数可作为共享库使用，可以通过 <code class="constant" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">libsystemd</code> pkg-config(1) 文件进行编译和链接。</font></font></font></p><p data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1"><a name="getenv" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"></a>The code described here uses
<a href="https://man7.org/linux/man-pages/man3/getenv.3.html" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="citerefentry" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="refentrytitle" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">getenv</span>(3)</span></a>,
which is declared to be not multi-thread-safe. This means that the code calling the functions described
here must not call
<a href="https://man7.org/linux/man-pages/man3/setenv.3.html" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="citerefentry" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="refentrytitle" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">setenv</span>(3)</span></a>
from a parallel thread. It is recommended to only do calls to <code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">setenv()</code>
from an early phase of the program when no other threads have been started.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此处描述的代码使用了 getenv(3)，该函数被声明为非多线程安全。这意味着调用此处描述的函数的代码不能从并行线程中调用 setenv(3)。建议仅在程序的早期阶段进行对 <code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">setenv()</code> 的调用，此时尚未启动其他线程。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><a name="id-1.8" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"></a><h2 id="History" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1">History<a class="headerlink" title="Permalink to this headline" href="#History" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">历史 ¶</font></font></font></h2><p data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_negotiate_fds()</code>,
    <code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_negotiate_timestamp()</code>, and
    <code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_negotiate_creds()</code> were added in version 212.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_negotiate_fds()</code> ， <code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_negotiate_timestamp()</code> 和 <code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_negotiate_creds()</code> 是在版本 212 中添加的。</font></font></font></p><p data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_get_creds_mask()</code> was added in version 246.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">版本 246 中添加了 <code class="function" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_get_creds_mask()</code> 。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><a name="id-1.9" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"></a><h2 id="See Also" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1">See Also<a class="headerlink" title="Permalink to this headline" href="#See%20Also" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">参见 ¶</font></font></font></h2><p data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277" data-immersive-translate-paragraph="1">
      <a href="systemd.html#" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="citerefentry" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="refentrytitle" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">systemd</span>(1)</span></a>,
      <a href="sd-bus.html#" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="citerefentry" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="refentrytitle" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd-bus</span>(3)</span></a>,
      <a href="sd_bus_start.html#" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="citerefentry" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="refentrytitle" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_start</span>(3)</span></a>,
      <a href="sd_bus_can_send.html#" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="citerefentry" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="refentrytitle" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_can_send</span>(3)</span></a>,
      <a href="sd_bus_message_get_monotonic_usec.html#" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="citerefentry" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="refentrytitle" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_message_get_monotonic_usec</span>(3)</span></a>,
      <a href="sd_bus_message_get_realtime_usec.html#" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="citerefentry" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="refentrytitle" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_message_get_realtime_usec</span>(3)</span></a>,
      <a href="sd_bus_message_get_seqnum.html#" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="citerefentry" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="refentrytitle" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_message_get_seqnum</span>(3)</span></a>,
      <a href="sd_bus_message_get_creds.html#" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="citerefentry" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277"><span class="refentrytitle" data-immersive-translate-walked="fc18e355-822f-4568-8a7d-0e436cdf7277">sd_bus_message_get_creds</span>(3)</span></a>
    </p></div></div>
</body></html>