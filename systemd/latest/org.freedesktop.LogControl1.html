<html><head><style data-id="immersive-translate-default-injected-css">:root {
  --immersive-translate-theme-underline-borderColor: #72ece9;
  --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
  --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
  --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
  --immersive-translate-theme-highlight-backgroundColor: #ffff00;
  --immersive-translate-theme-dashed-borderColor: #59c1bd;
  --immersive-translate-theme-blockquote-borderColor: #cc3355;
  --immersive-translate-theme-thinDashed-borderColor: #ff374f;
  --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
  --immersive-translate-theme-dashedBorder-borderRadius: 0;
  --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
  --immersive-translate-theme-solidBorder-borderRadius: 0;
  --immersive-translate-theme-dotted-borderColor: #94a3b8;
  --immersive-translate-theme-wavy-borderColor: #72ece9;
  --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
  --immersive-translate-theme-grey-textColor: #2f4f4f;
  --immersive-translate-theme-marker-backgroundColor: #fbda41;
  --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
  --immersive-translate-theme-marker2-backgroundColor: #ffff00;
  --immersive-translate-theme-opacity-opacity: 10;
}

.immersive-translate-target-translation-pre-whitespace {
  white-space: pre-wrap !important;
}

.immersive-translate-pdf-target-container {
  position: absolute;
  background-color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
    sans-serif;
  top: 0;
  width: 600px;
  height: 100%;
  z-index: 2;
  line-height: 1.3;
  font-size: 16px;
}
.immersive-translate-target-wrapper[dir='rtl'] {
  text-align: right;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
  color: rgb(0, 0, 0);
  white-space: normal;
  position: absolute;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
  color: inherit;
  white-space: inherit;
  position: unset;
}

.immersive-translate-state-dual>br {
  display: none;
}

.immersive-translate-target-translation-block-wrapper {
  margin: 8px 0 !important;
  display: inline-block;
}

.immersive-translate-target-translation-pdf-block-wrapper {
  margin: 0 !important;
  display: block;
}

.immersive-translate-target-translation-theme-grey-inner {
  color: var(--immersive-translate-theme-grey-textColor);
}


.immersive-translate-target-translation-theme-underline-inner {
  border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
}

.immersive-translate-target-translation-theme-nativeUnderline-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
}

.immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-theme-nativeDashed-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
  text-decoration-style: dashed !important;
}

.immersive-translate-target-translation-theme-thinDashed-inner {
  border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
}

.immersive-translate-target-translation-theme-dotted-inner {
  background-image: linear-gradient(to right,
      var(--immersive-translate-theme-dotted-borderColor) 30%,
      rgba(255, 255, 255, 0) 0%);
  background-position: bottom;
  background-size: 5px 1px;
  background-repeat: repeat-x;
  padding-bottom: 3px;
}

.immersive-translate-target-translation-theme-nativeDotted-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
  text-decoration-style: dotted !important;
}

.immersive-translate-target-translation-theme-wavy-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
  text-decoration-style: wavy !important;
}

.immersive-translate-target-translation-theme-dashed-inner {
  background: linear-gradient(to right,
      var(--immersive-translate-theme-dashed-borderColor) 0%,
      var(--immersive-translate-theme-dashed-borderColor) 50%,
      transparent 50%,
      transparent 100%) repeat-x left bottom;
  background-size: 8px 2px;
  padding-bottom: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
  content: "";
  display: block;
  max-width: 80px;
  width: 10%;
  border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  padding-top: 8px;
}

.immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
  content: "";
  border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  max-height: 16px;
  height: 16px;
  padding-left: 8px;
}

.immersive-translate-target-translation-theme-highlight-inner {
  background: var(--immersive-translate-theme-highlight-backgroundColor);
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-block-wrapper-theme-marker {
  line-height: 1.5em;
}

.immersive-translate-target-translation-theme-marker2-inner {
  font-weight: bold;
  text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
    16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
    2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
    -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
}

.immersive-translate-target-translation-theme-marker-inner {
  /* TODO: add more texture */
  background: linear-gradient(to right,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-theme-weakening {
  opacity: 0.618 !important;
}

.immersive-translate-target-translation-theme-italic {
  font-style: italic !important;
}

.immersive-translate-target-translation-theme-bold {
  font-weight: bold !important;
}

.immersive-translate-target-translation-block-wrapper-theme-paper {
  margin: 8px 0;
  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
  padding: 16px 32px;
  display: block;
}

.immersive-translate-target-translation-block-wrapper-theme-blockquote {
  border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
  padding-left: 12px !important;
  margin-top: 4px;
  margin-bottom: 4px;
  padding-top: 4px;
  padding-bottom: 4px;
  display: block;
}

.immersive-translate-target-translation-theme-mask-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
  filter: none !important;
}

[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}


/* opacity theme start */

.immersive-translate-target-translation-theme-opacity-inner {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: none !important;
}


.immersive-translate-target-translation-theme-mask-inner:hover {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
  filter: none !important;
}


[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
  filter: none !important;
}

/* opacity theme end */

/* vertical css , please remain it in the last one. */
.immersive-translate-target-translation-vertical-block-wrapper {
  margin: 0px 8px !important;
}

.immersive-translate-text {
  font-size: 15px !important;
}

.immersive-translate-error-toast {
  position: fixed;
  top: 5%;
  z-index: 99999999;
  left: 0;
  right: 0;
  margin: auto;
  max-width: 300px;
  padding: 16px;
  border-radius: 12px;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}

@media all and (min-width: 750px) {
  .immersive-translate-error-toast {
    max-width: 400px;
  }
}


.immersive-translate-clickable-button {
  cursor: pointer;
}

.immersive-translate-help-button {
  cursor: pointer;
}

.immersive-translate-loading-text:before {
  content: "...";
}


/* dark mode for loading */

@media only screen and (prefers-color-scheme: dark) {
  .immersive-translate-loading {
    border: 2px rgba(255, 255, 255, 0.25) solid !important;
    border-top: 2px rgba(255, 255, 255, 1) solid !important;
  }
}

.immersive-translate-error-wrapper {
  position: relative;
  display: inline-flex;
  padding: 6px;
  margin: 0 12px;
  white-space: nowrap;
  font-size: 0.9em;
}
[lang="zh-CN"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}
[lang="zh-TW"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}


.immersive-translate-tooltip {
  position: relative;
  display: inline-flex;
  /* little indicater to indicate it's hoverable */
}

.immersive-translate-tooltip-content {
  /* here's the magic */
  position: absolute;
  z-index: 100000000000;

  left: 50%;
  bottom: 0;
  transform: translate(-50%, 110%);
  line-height: 1;
  /* and add a small left margin */

  /* basic styles */
  width: max-content;
  max-width: 250px;
  word-wrap: break-word;
  white-space: pre-line;
  padding: 10px;
  border-radius: 10px;
  background: #000C;
  color: #fff;
  text-align: center;
  font-size: 14px;
  display: none;
  /* hide by default */
}

.immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip-content-table {
  left: unset !important;
  bottom: unset !important;
  transform: translate(-10%, 50%) !important;
}


.immersive-translate-tooltip:hover:before {
  display: block;
}



.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}
</style><style data-id="immersive-translate-user-custom-style">:root {

.immersive-translate-target-inner { font-family: inherit; }
}
</style><style data-id="immersive-translate-dynamic-injected-css">.immersive-translate-target-wrapper[dir='rtl'] {text-align: right;}
.immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {display:block;}
.immersive-translate-target-wrapper {word-break: break-word;}
</style></head><body data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8" data-immersive-translate-paragraph="1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>org.freedesktop.LogControl1</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><script src="https://code.jquery.com/jquery-3.7.1.min.js"></script><script src="../nav.js"></script><style>
    a.headerlink {
      color: #c60f0f;
      font-size: 0.8em;
      padding: 0 4px 0 4px;
      text-decoration: none;
      visibility: hidden;
    }

    a.headerlink:hover {
      background-color: #c60f0f;
      color: white;
    }

    h1:hover > a.headerlink, h2:hover > a.headerlink, h3:hover > a.headerlink, dt:hover > a.headerlink {
      visibility: visible;
    }
  </style><a href="index.html" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">Index </a>·
  <a href="systemd.directives.html" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">Directives </a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">索引 · 指令</font></font></font><span style="float:right" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8" data-immersive-translate-paragraph="1">systemd 255</span><hr><div class="refentry" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><a name="org.freedesktop.LogControl1" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"></a><div class="titlepage" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"></div><div class="refnamediv" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><h2 data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8" data-immersive-translate-paragraph="1">Name<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">名称</font></font></font></h2><p data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8" data-immersive-translate-paragraph="1">org.freedesktop.LogControl1 — D-Bus interface to query and set logging configuration<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">org.freedesktop.LogControl1 — 用于查询和设置日志配置的 D-Bus 接口</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><a name="id-1.4" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"></a><h2 id="Introduction" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8" data-immersive-translate-paragraph="1">Introduction<a class="headerlink" title="Permalink to this headline" href="#Introduction" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">简介 ¶</font></font></font></h2><p data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8" data-immersive-translate-paragraph="1"><code class="interfacename" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">org.freedesktop.LogControl1</code> is a generic interface that is intended
    to be used by any daemon which allows the log level and target to be set over D-Bus. It is implemented by
    various daemons that are part of the
    <a href="systemd.html#" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="citerefentry" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="refentrytitle" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">systemd</span>(1)</span></a> suite.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="interfacename" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">org.freedesktop.LogControl1</code> 是一个通用接口，旨在供任何允许通过 D-Bus 设置日志级别和目标的守护程序使用。它由 systemd(1) 套件中的各种守护程序实现。</font></font></font></p><p data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8" data-immersive-translate-paragraph="1">It is assumed that those settings are global for the whole program, so a fixed object path is
    used. The interface should always be available under the path
    <code class="filename" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">/org/freedesktop/LogControl1</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">假定这些设置对整个程序是全局的，因此使用固定的对象路径。该接口应始终在路径 <code class="filename" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">/org/freedesktop/LogControl1</code> 下可用。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><a name="id-1.5" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"></a><h2 id="Description" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8" data-immersive-translate-paragraph="1">Description<a class="headerlink" title="Permalink to this headline" href="#Description" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">描述</font></font></font></h2><p data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8" data-immersive-translate-paragraph="1">The following interface is exposed:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">以下是暴露的接口:</font></font></font></p><pre class="programlisting">node /org/freedesktop/LogControl1 {
  interface org.freedesktop.LogControl1 {
    properties:
      @org.freedesktop.DBus.Property.EmitsChangedSignal("false")
      @org.freedesktop.systemd1.Privileged("true")
      readwrite s LogLevel = '...';
      @org.freedesktop.DBus.Property.EmitsChangedSignal("false")
      @org.freedesktop.systemd1.Privileged("true")
      readwrite s LogTarget = '...';
      @org.freedesktop.DBus.Property.EmitsChangedSignal("false")
      readonly s SyslogIdentifier = '...';
  };
  interface org.freedesktop.DBus.Peer { ... };
  interface org.freedesktop.DBus.Introspectable { ... };
  interface org.freedesktop.DBus.Properties { ... };
};
    </pre><div class="variablelist" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><dl class="variablelist" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"></dl></div><div class="variablelist" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><dl class="variablelist" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"></dl></div><div class="variablelist" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><dl class="variablelist" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"></dl></div><div class="variablelist" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><dl class="variablelist" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"></dl></div><div class="variablelist" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><dl class="variablelist" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"></dl></div><div class="refsect2" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><a name="id-1.5.9" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"></a><h3 id="Properties" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8" data-immersive-translate-paragraph="1">Properties<a class="headerlink" title="Permalink to this headline" href="#Properties" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">属性</font></font></font></h3><p data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8" data-immersive-translate-paragraph="1"><code class="varname" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">LogLevel</code> describes the
      <a href="https://man7.org/linux/man-pages/man3/syslog.3.html" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="citerefentry" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="refentrytitle" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">syslog</span>(3)</span></a>-style
      log-level, and should be one of "<code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">emerg</code>", "<code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">alert</code>",
      "<code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">crit</code>", "<code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">err</code>", "<code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">warning</code>", "<code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">notice</code>",
      "<code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">info</code>", "<code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">debug</code>", in order of increasing verbosity.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="varname" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">LogLevel</code> 描述了 syslog(3) 风格的日志级别，应该是 " <code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">emerg</code> ", " <code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">alert</code> ", " <code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">crit</code> ", " <code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">err</code> ", " <code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">warning</code> ", " <code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">notice</code> ", " <code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">info</code> ", " <code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">debug</code> " 中的一个，按照递增的详细程度顺序排列。</font></font></font></p><p data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8" data-immersive-translate-paragraph="1"><code class="varname" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">LogTarget</code> describes the log target (mechanism). It should be one of
      "<code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">console</code>" (log to the console or standard output),
      "<code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">kmsg</code>" (log to the kernel ring buffer),
      "<code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">journal</code>" (log to the journal natively, see
      <a href="systemd-journald.service.html#" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="citerefentry" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="refentrytitle" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">systemd-journald.service</span>(8)</span></a>),
      "<code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">syslog</code>" (log using the
      <a href="https://man7.org/linux/man-pages/man3/syslog.3.html" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="citerefentry" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="refentrytitle" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">syslog</span>(3)</span></a> call).
      <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="varname" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">LogTarget</code> 描述了日志目标（机制）。它应该是 " <code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">console</code> "（日志输出到控制台或标准输出），" <code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">kmsg</code> "（日志输出到内核环形缓冲区），" <code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">journal</code> "（原生地日志到日志记录，参见 systemd-journald.service(8)），" <code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">syslog</code> "（使用 syslog(3) 调用记录日志）。</font></font></font></p><p data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8" data-immersive-translate-paragraph="1">Those two properties are writable, so they may be set by sufficiently privileged users.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这两个属性是可写的，因此可以由具有足够权限的用户设置。</font></font></font></p><p data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8" data-immersive-translate-paragraph="1"><code class="varname" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">SyslogIdentifier</code> is a read-only property that shows the "syslog identifier".
      It is a short string that identifies the program that is the source of log messages that is passed to
      the <a href="https://man7.org/linux/man-pages/man3/syslog.3.html" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="citerefentry" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="refentrytitle" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">syslog</span>(3)</span></a> call.
      <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="varname" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">SyslogIdentifier</code> 是一个只读属性，显示“syslog 标识符”。它是一个短字符串，用于标识生成日志消息的程序，该程序传递给 syslog(3) 调用。</font></font></font></p></div></div><div class="refsect1" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><a name="id-1.6" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"></a><h2 id="Tools" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8" data-immersive-translate-paragraph="1">Tools<a class="headerlink" title="Permalink to this headline" href="#Tools" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">工具</font></font></font></h2><p data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8" data-immersive-translate-paragraph="1"><span class="command" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><strong data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">journalctl</strong></span> option <code class="option" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">-p</code>/<code class="option" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">--priority=</code> may be used
    to filter log messages by log level, option <code class="option" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">-t</code>/<code class="option" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">--identifier=</code> may be
    used to by the syslog identifier, and filters like "<code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">_TRANSPORT=syslog</code>",
    "<code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">_TRANSPORT=journal</code>", and "<code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">_TRANSPORT=kernel</code>" may be used to filter
    messages by the mechanism through which they reached <span class="command" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><strong data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">systemd-journald</strong></span>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">journalctl 选项 <code class="option" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">-p</code> / <code class="option" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">--priority=</code> 可用于按日志级别过滤日志消息，选项 <code class="option" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">-t</code> / <code class="option" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">--identifier=</code> 可用于按 syslog 标识符过滤，而像 " <code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">_TRANSPORT=syslog</code> "、" <code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">_TRANSPORT=journal</code> " 和 " <code class="literal" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">_TRANSPORT=kernel</code> " 这样的过滤器可用于按消息到达 systemd-journald 的机制进行过滤。</font></font></font></p><p data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8" data-immersive-translate-paragraph="1"><span class="command" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><strong data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">systemctl log-level</strong></span> and <span class="command" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><strong data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">systemctl log-target</strong></span> verbs may be
    used to query and set the <code class="varname" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">LogLevel</code> and <code class="varname" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">LogTarget</code> properties of the
    service manager. <span class="command" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><strong data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">systemctl service-log-level</strong></span> and <span class="command" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><strong data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">systemctl
    service-log-target</strong></span> may similarly be used for individual services. (Services must have the
    <code class="varname" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">BusName=</code> property set and must implement the interface described here. See
    <a href="systemd.service.html#" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="citerefentry" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="refentrytitle" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">systemd.service</span>(5)</span></a>
    for details about <code class="varname" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">BusName=</code>.)<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">systemctl log-level 和 systemctl log-target 命令可用于查询和设置服务管理器的 <code class="varname" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">LogLevel</code> 和 <code class="varname" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">LogTarget</code> 属性。systemctl service-log-level 和 systemctl service-log-target 可以类似地用于单个服务。（服务必须设置 <code class="varname" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">BusName=</code> 属性并实现此处描述的接口。有关 <code class="varname" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">BusName=</code> 的详细信息，请参阅 systemd.service(5)。）</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><a name="id-1.7" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"></a><h2 id="Example" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8" data-immersive-translate-paragraph="1">Example<a class="headerlink" title="Permalink to this headline" href="#Example" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 ¶</font></font></font></h2><div class="example" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><a name="id-1.7.2" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"></a><p class="title" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><b data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8" data-immersive-translate-paragraph="1">Example&nbsp;1.&nbsp;Create a simple listener on the bus that implements LogControl1<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 1. 在总线上创建一个简单的监听器，实现 LogControl1</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><pre class="programlisting">/* SPDX-License-Identifier: MIT-0 */

/* Implements the LogControl1 interface as per specification:
 * https://www.freedesktop.org/software/systemd/man/org.freedesktop.LogControl1.html
 *
 * Compile with 'cc logcontrol-example.c $(pkg-config --libs --cflags libsystemd)'
 *
 * To get and set properties via busctl:
 *
 * $ busctl --user get-property org.freedesktop.Example \
 *                              /org/freedesktop/LogControl1 \
 *                              org.freedesktop.LogControl1 \
 *                              SyslogIdentifier
 *   s "example"
 * $ busctl --user get-property org.freedesktop.Example \
 *                              /org/freedesktop/LogControl1 \
 *                              org.freedesktop.LogControl1 \
 *                              LogTarget
 *   s "journal"
 * $ busctl --user get-property org.freedesktop.Example \
 *                              /org/freedesktop/LogControl1 \
 *                              org.freedesktop.LogControl1 \
 *                              LogLevel
 *   s "info"
 * $ busctl --user set-property org.freedesktop.Example \
 *                              /org/freedesktop/LogControl1 \
 *                              org.freedesktop.LogControl1 \
 *                              LogLevel \
 *                              "s" debug
 * $ busctl --user get-property org.freedesktop.Example \
 *                              /org/freedesktop/LogControl1 \
 *                              org.freedesktop.LogControl1 \
 *                              LogLevel
 *   s "debug"
 */

#include &lt;errno.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;syslog.h&gt;
#include &lt;systemd/sd-bus.h&gt;
#include &lt;systemd/sd-journal.h&gt;

#define _cleanup_(f) __attribute__((cleanup(f)))

#define check(log_level, x) ({                  \
  int _r = (x);                                 \
  errno = _r &lt; 0 ? -_r : 0;                     \
  sd_journal_print((log_level), #x ": %m");     \
  if (_r &lt; 0)                                   \
    return EXIT_FAILURE;                        \
  })

typedef enum LogTarget {
  LOG_TARGET_JOURNAL,
  LOG_TARGET_KMSG,
  LOG_TARGET_SYSLOG,
  LOG_TARGET_CONSOLE,
  _LOG_TARGET_MAX,
} LogTarget;

static const char* const log_target_table[_LOG_TARGET_MAX] = {
  [LOG_TARGET_JOURNAL] = "journal",
  [LOG_TARGET_KMSG]    = "kmsg",
  [LOG_TARGET_SYSLOG]  = "syslog",
  [LOG_TARGET_CONSOLE] = "console",
};

static const char* const log_level_table[LOG_DEBUG + 1] = {
  [LOG_EMERG]   = "emerg",
  [LOG_ALERT]   = "alert",
  [LOG_CRIT]    = "crit",
  [LOG_ERR]     = "err",
  [LOG_WARNING] = "warning",
  [LOG_NOTICE]  = "notice",
  [LOG_INFO]    = "info",
  [LOG_DEBUG]   = "debug",
};

typedef struct object {
  const char *syslog_identifier;
  LogTarget log_target;
  int log_level;
} object;

static int property_get(
                sd_bus *bus,
                const char *path,
                const char *interface,
                const char *property,
                sd_bus_message *reply,
                void *userdata,
                sd_bus_error *error) {

  object *o = userdata;

  if (strcmp(property, "LogLevel") == 0)
    return sd_bus_message_append(reply, "s", log_level_table[o-&gt;log_level]);

  if (strcmp(property, "LogTarget") == 0)
    return sd_bus_message_append(reply, "s", log_target_table[o-&gt;log_target]);

  if (strcmp(property, "SyslogIdentifier") == 0)
    return sd_bus_message_append(reply, "s", o-&gt;syslog_identifier);

  return sd_bus_error_setf(error,
                           SD_BUS_ERROR_UNKNOWN_PROPERTY,
                           "Unknown property '%s'",
                           property);
}

static int property_set(
                sd_bus *bus,
                const char *path,
                const char *interface,
                const char *property,
                sd_bus_message *message,
                void *userdata,
                sd_bus_error *error) {

  object *o = userdata;
  const char *value;
  int r;

  r = sd_bus_message_read(message, "s", &amp;value);
  if (r &lt; 0)
    return r;

  if (strcmp(property, "LogLevel") == 0) {
    for (int i = 0; i &lt; LOG_DEBUG + 1; i++)
      if (strcmp(value, log_level_table[i]) == 0) {
        o-&gt;log_level = i;
        setlogmask(LOG_UPTO(i));
        return 0;
      }

    return sd_bus_error_setf(error,
                             SD_BUS_ERROR_INVALID_ARGS,
                             "Invalid value for LogLevel: '%s'",
                             value);
  }

  if (strcmp(property, "LogTarget") == 0) {
    for (LogTarget i = 0; i &lt; _LOG_TARGET_MAX; i++)
      if (strcmp(value, log_target_table[i]) == 0) {
        o-&gt;log_target = i;
        return 0;
      }

    return sd_bus_error_setf(error,
                             SD_BUS_ERROR_INVALID_ARGS,
                             "Invalid value for LogTarget: '%s'",
                             value);
  }

  return sd_bus_error_setf(error,
                           SD_BUS_ERROR_UNKNOWN_PROPERTY,
                           "Unknown property '%s'",
                           property);
}

/* https://www.freedesktop.org/software/systemd/man/sd_bus_add_object.html
 */
static const sd_bus_vtable vtable[] = {
  SD_BUS_VTABLE_START(0),
  SD_BUS_WRITABLE_PROPERTY(
    "LogLevel", "s",
    property_get, property_set,
    0,
    0),
  SD_BUS_WRITABLE_PROPERTY(
    "LogTarget", "s",
    property_get, property_set,
    0,
    0),
  SD_BUS_PROPERTY(
    "SyslogIdentifier", "s",
    property_get,
    0,
    SD_BUS_VTABLE_PROPERTY_CONST),
  SD_BUS_VTABLE_END
};

int main(int argc, char **argv) {
  /* The bus should be relinquished before the program terminates. The cleanup
   * attribute allows us to do it nicely and cleanly whenever we exit the
   * block.
   */
  _cleanup_(sd_bus_flush_close_unrefp) sd_bus *bus = NULL;

  object o = {
    .log_level = LOG_INFO,
    .log_target = LOG_TARGET_JOURNAL,
    .syslog_identifier = "example",
  };

  /* https://man7.org/linux/man-pages/man3/setlogmask.3.html
   * Programs using syslog() instead of sd_journal can use this API to cut logs
   * emission at the source.
   */
  setlogmask(LOG_UPTO(o.log_level));

  /* Acquire a connection to the bus, letting the library work out the details.
   * https://www.freedesktop.org/software/systemd/man/sd_bus_default.html
   */
  check(o.log_level, sd_bus_default(&amp;bus));

  /* Publish an interface on the bus, specifying our well-known object access
   * path and public interface name.
   * https://www.freedesktop.org/software/systemd/man/sd_bus_add_object.html
   * https://dbus.freedesktop.org/doc/dbus-tutorial.html
   */
  check(o.log_level, sd_bus_add_object_vtable(bus, NULL,
                                              "/org/freedesktop/LogControl1",
                                              "org.freedesktop.LogControl1",
                                              vtable,
                                              &amp;o));

  /* By default the service is assigned an ephemeral name. Also add a fixed
   * one, so that clients know whom to call.
   * https://www.freedesktop.org/software/systemd/man/sd_bus_request_name.html
   */
  check(o.log_level, sd_bus_request_name(bus, "org.freedesktop.Example", 0));

  for (;;) {
    /* https://www.freedesktop.org/software/systemd/man/sd_bus_wait.html
     */
    check(o.log_level, sd_bus_wait(bus, UINT64_MAX));
    /* https://www.freedesktop.org/software/systemd/man/sd_bus_process.html
     */
    check(o.log_level, sd_bus_process(bus, NULL));
  }

  /* https://www.freedesktop.org/software/systemd/man/sd_bus_release_name.html
   */
  check(o.log_level, sd_bus_release_name(bus, "org.freedesktop.Example"));

  return 0;
}
</pre><p data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8" data-immersive-translate-paragraph="1">This creates a simple server on the bus. It implements the LogControl1 interface by providing
      the required properties and allowing to set the writable ones. It logs at the configured log level using
      <a href="sd_journal_print.html#" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="citerefentry" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="refentrytitle" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">sd_journal_print</span>(3)</span></a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这在总线上创建了一个简单的服务器。它通过提供所需的属性并允许设置可写属性来实现 LogControl1 接口。它使用 sd_journal_print(3)在配置的日志级别记录。</font></font></font></p></div></div><br class="example-break" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"></div><div class="refsect1" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><a name="id-1.8" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"></a><h2 id="See Also" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8" data-immersive-translate-paragraph="1">See Also<a class="headerlink" title="Permalink to this headline" href="#See%20Also" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">参见 ¶</font></font></font></h2><p data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8" data-immersive-translate-paragraph="1">
      <a href="systemd.html#" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="citerefentry" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="refentrytitle" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">systemd</span>(1)</span></a>,
      <a href="journalctl.html#" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="citerefentry" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="refentrytitle" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">journalctl</span>(1)</span></a>,
      <a href="systemctl.html#" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="citerefentry" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="refentrytitle" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">systemctl</span>(1)</span></a>,
      <a href="systemd.service.html#" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="citerefentry" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="refentrytitle" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">systemd.service</span>(5)</span></a>,
      <a href="https://man7.org/linux/man-pages/man3/syslog.3.html" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="citerefentry" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8"><span class="refentrytitle" data-immersive-translate-walked="d633961a-6b8d-4d44-b7ec-32ba930112e8">syslog</span>(3)</span></a>
    </p></div></div>
</body></html>