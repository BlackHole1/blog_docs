<html><head><style data-id="immersive-translate-default-injected-css">:root {
  --immersive-translate-theme-underline-borderColor: #72ece9;
  --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
  --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
  --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
  --immersive-translate-theme-highlight-backgroundColor: #ffff00;
  --immersive-translate-theme-dashed-borderColor: #59c1bd;
  --immersive-translate-theme-blockquote-borderColor: #cc3355;
  --immersive-translate-theme-thinDashed-borderColor: #ff374f;
  --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
  --immersive-translate-theme-dashedBorder-borderRadius: 0;
  --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
  --immersive-translate-theme-solidBorder-borderRadius: 0;
  --immersive-translate-theme-dotted-borderColor: #94a3b8;
  --immersive-translate-theme-wavy-borderColor: #72ece9;
  --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
  --immersive-translate-theme-grey-textColor: #2f4f4f;
  --immersive-translate-theme-marker-backgroundColor: #fbda41;
  --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
  --immersive-translate-theme-marker2-backgroundColor: #ffff00;
  --immersive-translate-theme-opacity-opacity: 10;
}

.immersive-translate-target-translation-pre-whitespace {
  white-space: pre-wrap !important;
}

.immersive-translate-pdf-target-container {
  position: absolute;
  background-color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
    sans-serif;
  top: 0;
  width: 600px;
  height: 100%;
  z-index: 2;
  line-height: 1.3;
  font-size: 16px;
}
.immersive-translate-target-wrapper[dir='rtl'] {
  text-align: right;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
  color: rgb(0, 0, 0);
  white-space: normal;
  position: absolute;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
  color: inherit;
  white-space: inherit;
  position: unset;
}

.immersive-translate-state-dual>br {
  display: none;
}

.immersive-translate-target-translation-block-wrapper {
  margin: 8px 0 !important;
  display: inline-block;
}

.immersive-translate-target-translation-pdf-block-wrapper {
  margin: 0 !important;
  display: block;
}

.immersive-translate-target-translation-theme-grey-inner {
  color: var(--immersive-translate-theme-grey-textColor);
}


.immersive-translate-target-translation-theme-underline-inner {
  border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
}

.immersive-translate-target-translation-theme-nativeUnderline-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
}

.immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-theme-nativeDashed-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
  text-decoration-style: dashed !important;
}

.immersive-translate-target-translation-theme-thinDashed-inner {
  border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
}

.immersive-translate-target-translation-theme-dotted-inner {
  background-image: linear-gradient(to right,
      var(--immersive-translate-theme-dotted-borderColor) 30%,
      rgba(255, 255, 255, 0) 0%);
  background-position: bottom;
  background-size: 5px 1px;
  background-repeat: repeat-x;
  padding-bottom: 3px;
}

.immersive-translate-target-translation-theme-nativeDotted-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
  text-decoration-style: dotted !important;
}

.immersive-translate-target-translation-theme-wavy-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
  text-decoration-style: wavy !important;
}

.immersive-translate-target-translation-theme-dashed-inner {
  background: linear-gradient(to right,
      var(--immersive-translate-theme-dashed-borderColor) 0%,
      var(--immersive-translate-theme-dashed-borderColor) 50%,
      transparent 50%,
      transparent 100%) repeat-x left bottom;
  background-size: 8px 2px;
  padding-bottom: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
  content: "";
  display: block;
  max-width: 80px;
  width: 10%;
  border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  padding-top: 8px;
}

.immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
  content: "";
  border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  max-height: 16px;
  height: 16px;
  padding-left: 8px;
}

.immersive-translate-target-translation-theme-highlight-inner {
  background: var(--immersive-translate-theme-highlight-backgroundColor);
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-block-wrapper-theme-marker {
  line-height: 1.5em;
}

.immersive-translate-target-translation-theme-marker2-inner {
  font-weight: bold;
  text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
    16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
    2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
    -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
}

.immersive-translate-target-translation-theme-marker-inner {
  /* TODO: add more texture */
  background: linear-gradient(to right,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-theme-weakening {
  opacity: 0.618 !important;
}

.immersive-translate-target-translation-theme-italic {
  font-style: italic !important;
}

.immersive-translate-target-translation-theme-bold {
  font-weight: bold !important;
}

.immersive-translate-target-translation-block-wrapper-theme-paper {
  margin: 8px 0;
  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
  padding: 16px 32px;
  display: block;
}

.immersive-translate-target-translation-block-wrapper-theme-blockquote {
  border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
  padding-left: 12px !important;
  margin-top: 4px;
  margin-bottom: 4px;
  padding-top: 4px;
  padding-bottom: 4px;
  display: block;
}

.immersive-translate-target-translation-theme-mask-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
  filter: none !important;
}

[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}


/* opacity theme start */

.immersive-translate-target-translation-theme-opacity-inner {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: none !important;
}


.immersive-translate-target-translation-theme-mask-inner:hover {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
  filter: none !important;
}


[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
  filter: none !important;
}

/* opacity theme end */

/* vertical css , please remain it in the last one. */
.immersive-translate-target-translation-vertical-block-wrapper {
  margin: 0px 8px !important;
}

.immersive-translate-text {
  font-size: 15px !important;
}

.immersive-translate-error-toast {
  position: fixed;
  top: 5%;
  z-index: 99999999;
  left: 0;
  right: 0;
  margin: auto;
  max-width: 300px;
  padding: 16px;
  border-radius: 12px;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}

@media all and (min-width: 750px) {
  .immersive-translate-error-toast {
    max-width: 400px;
  }
}


.immersive-translate-clickable-button {
  cursor: pointer;
}

.immersive-translate-help-button {
  cursor: pointer;
}

.immersive-translate-loading-text:before {
  content: "...";
}


/* dark mode for loading */

@media only screen and (prefers-color-scheme: dark) {
  .immersive-translate-loading {
    border: 2px rgba(255, 255, 255, 0.25) solid !important;
    border-top: 2px rgba(255, 255, 255, 1) solid !important;
  }
}

.immersive-translate-error-wrapper {
  position: relative;
  display: inline-flex;
  padding: 6px;
  margin: 0 12px;
  white-space: nowrap;
  font-size: 0.9em;
}
[lang="zh-CN"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}
[lang="zh-TW"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}


.immersive-translate-tooltip {
  position: relative;
  display: inline-flex;
  /* little indicater to indicate it's hoverable */
}

.immersive-translate-tooltip-content {
  /* here's the magic */
  position: absolute;
  z-index: 100000000000;

  left: 50%;
  bottom: 0;
  transform: translate(-50%, 110%);
  line-height: 1;
  /* and add a small left margin */

  /* basic styles */
  width: max-content;
  max-width: 250px;
  word-wrap: break-word;
  white-space: pre-line;
  padding: 10px;
  border-radius: 10px;
  background: #000C;
  color: #fff;
  text-align: center;
  font-size: 14px;
  display: none;
  /* hide by default */
}

.immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip-content-table {
  left: unset !important;
  bottom: unset !important;
  transform: translate(-10%, 50%) !important;
}


.immersive-translate-tooltip:hover:before {
  display: block;
}



.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}
</style><style data-id="immersive-translate-user-custom-style">:root {

.immersive-translate-target-inner { font-family: inherit; }
}
</style><style data-id="immersive-translate-dynamic-injected-css">.immersive-translate-target-wrapper[dir='rtl'] {text-align: right;}
.immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {display:block;}
.immersive-translate-target-wrapper {word-break: break-word;}
</style></head><body data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>systemd-measure</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><script src="https://code.jquery.com/jquery-3.7.1.min.js"></script><script src="../nav.js"></script><style>
    a.headerlink {
      color: #c60f0f;
      font-size: 0.8em;
      padding: 0 4px 0 4px;
      text-decoration: none;
      visibility: hidden;
    }

    a.headerlink:hover {
      background-color: #c60f0f;
      color: white;
    }

    h1:hover > a.headerlink, h2:hover > a.headerlink, h3:hover > a.headerlink, dt:hover > a.headerlink {
      visibility: visible;
    }
  </style><a href="index.html" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">Index </a>·
  <a href="systemd.directives.html" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">Directives </a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">索引 · 指令</font></font></font><span style="float:right" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">systemd 255</span><hr><div class="refentry" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><a name="systemd-measure" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></a><div class="titlepage" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></div><div class="refnamediv" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><h2 data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">Name<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">名称</font></font></font></h2><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">systemd-measure — Pre-calculate and sign expected TPM2 PCR values for booted unified kernel images<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">systemd-measure — 预先计算并签署引导的统一内核镜像的预期 TPM2 PCR 值</font></font></font></p></div><div class="refsynopsisdiv" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><h2 data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">Synopsis<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">简介</font></font></font></h2><div class="cmdsynopsis" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">/usr/lib/systemd/systemd-measure [OPTIONS...]</code> </p></div></div><div class="refsect1" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><a name="id-1.5" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></a><h2 id="Description" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">Description<a class="headerlink" title="Permalink to this headline" href="#Description" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">描述</font></font></font></h2><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">Note: this command is experimental for now. While it is likely to become a regular component of
    systemd, it might still change in behaviour and interface.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意：此命令目前处于实验阶段。虽然它可能成为 systemd 的常规组件，但行为和接口仍可能发生变化。</font></font></font></p><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-measure</strong></span> is a tool that may be used to pre-calculate and sign the
    expected TPM2 PCR 11 values that should be seen when a Linux <a class="ulink" href="https://uapi-group.org/specifications/specs/unified_kernel_image/" target="_top" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">Unified Kernel Image
    (UKI)</a> based on
    <a href="systemd-stub.html#" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="citerefentry" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="refentrytitle" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-stub</span>(7)</span></a> is
    booted up. It accepts paths to the ELF kernel image file, initrd image file, devicetree file, kernel
    command line file,
    <a href="os-release.html#" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="citerefentry" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="refentrytitle" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">os-release</span>(5)</span></a> file, boot
    splash file, and TPM2 PCR PEM public key file that make up the unified kernel image, and determines the
    PCR values expected to be in place after booting the image. Calculation starts with a zero-initialized
    PCR 11, and is executed in a fashion compatible with what <code class="filename" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-stub</code> does at boot.
    The result may optionally be signed cryptographically, to allow TPM2 policies that can only be unlocked
    if a certain set of kernels is booted, for which such a PCR signature can be provided.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">systemd-measure 是一个工具，可用于预先计算并签署基于 systemd-stub(7) 的 Linux 统一内核镜像 (UKI) 引导时应看到的预期 TPM2 PCR 11 值。它接受指向 ELF 内核镜像文件、initrd 镜像文件、设备树文件、内核命令行文件、os-release(5) 文件、引导闪屏文件和 TPM2 PCR PEM 公钥文件的路径，这些文件组成了统一内核镜像，并确定引导镜像后应处于位的 PCR 值。计算从零初始化的 PCR 11 开始，并以与 <code class="filename" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-stub</code> 引导时兼容的方式执行。结果可以选择进行密码签名，以允许仅在引导某一组内核时才能解锁的 TPM2 策略，为此可以提供这样的 PCR 签名。</font></font></font></p><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">It usually doesn't make sense to call this tool directly when constructing a UKI. Instead,
    <a href="ukify.html#" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="citerefentry" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="refentrytitle" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">ukify</span>(1)</span></a> should be used;
    it will invoke <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-measure</strong></span> and take care of embedding the resulting measurements
    into the UKI.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在构建 UKI 时通常没有直接调用此工具的意义。相反，应使用 ukify(1)；它将调用 systemd-measure 并负责将生成的测量嵌入到 UKI 中。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><a name="id-1.6" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></a><h2 id="Commands" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">Commands<a class="headerlink" title="Permalink to this headline" href="#Commands" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">命令 ¶</font></font></font></h2><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">The following commands are understood:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">以下命令已被理解：</font></font></font></p><div class="variablelist" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><dl class="variablelist" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><dt id="status" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">status</strong></span></span><a class="headerlink" title="Permalink to this term" href="#status" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">状态 ¶</font></font></font></dt><dd data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">This is the default command if none is specified. This queries the local system's
        TPM2 PCR 11+12+13 values and displays them. The data is written in a similar format as the
        <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">calculate</strong></span> command below, and may be used to quickly compare expectation with
        reality.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果未指定命令，则这是默认命令。此命令查询本地系统的 TPM2 PCR 11+12+13 值并显示它们。数据以与下面的 calculate 命令类似的格式编写，可用于快速比较期望与实际情况。</font></font></font></p><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><a name="v252" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></a>Added in version 252.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在版本 252 中添加。</font></font></font></p></dd><dt id="calculate" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">calculate</strong></span></span><a class="headerlink" title="Permalink to this term" href="#calculate" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">计算 ¶</font></font></font></dt><dd data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">Pre-calculate the expected values seen in PCR register 11 after boot-up of a unified
        kernel image consisting of the components specified with <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--linux=</code>,
        <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--osrel=</code>, <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--cmdline=</code>, <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--initrd=</code>,
        <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--splash=</code>, <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--dtb=</code>, <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--uname=</code>,
        <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--sbat=</code>, <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--pcrpkey=</code> see below. Only <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--linux=</code> is
        mandatory. (Alternatively, specify <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--current</code> to use the current values of PCR
        register 11 instead.)<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在由下面的组件指定的统一内核映像启动后预先计算在 PCR 寄存器 11 中看到的预期值，这些组件包括 <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--linux=</code> ， <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--osrel=</code> ， <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--cmdline=</code> ， <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--initrd=</code> ， <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--splash=</code> ， <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--dtb=</code> ， <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--uname=</code> ， <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--sbat=</code> ， <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--pcrpkey=</code> ，请参见下文。只有 <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--linux=</code> 是强制的。（或者，指定 <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--current</code> 以使用 PCR 寄存器 11 的当前值。）</font></font></font></p><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><a name="v252" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></a>Added in version 252.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在版本 252 中添加。</font></font></font></p></dd><dt id="sign" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">sign</strong></span></span><a class="headerlink" title="Permalink to this term" href="#sign" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">签名 ¶</font></font></font></dt><dd data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">As with the <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">calculate</strong></span> command, pre-calculate the expected value
        seen in TPM2 PCR register 11 after boot-up of a unified kernel image. Then, cryptographically sign
        the resulting values with the private/public key pair (RSA) configured via
        <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--private-key=</code> and <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--public-key=</code>. This will write a JSON object to
        standard output that contains signatures for all specified PCR banks (see the
        <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--bank=</code> option below), which may be used to unlock encrypted credentials (see
        <a href="systemd-creds.html#" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="citerefentry" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="refentrytitle" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-creds</span>(1)</span></a>) or
        LUKS volumes (see
        <a href="systemd-cryptsetup@.service.html#" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="citerefentry" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="refentrytitle" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-cryptsetup@.service</span>(8)</span></a>).
        This allows binding secrets to a set of kernels for which such PCR 11 signatures can be
        provided.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">与 calculate 命令一样，在统一内核映像启动后，预先计算 TPM2 PCR 寄存器 11 中预期值。然后，使用通过 <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--private-key=</code> 和 <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--public-key=</code> 配置的私钥/公钥对（RSA）对结果值进行加密签名。这将向标准输出写入一个包含所有指定 PCR 银行的签名的 JSON 对象（请参阅下面的 <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--bank=</code> 选项），这些签名可用于解锁加密凭据（请参阅 systemd-creds(1)）或 LUKS 卷（请参阅 systemd-cryptsetup@.service(8)）。这允许将密钥绑定到一组内核，为这些内核提供了 PCR 11 签名。</font></font></font></p><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">Note that a TPM2 device must be available for this signing to take place, even though the
        result is not tied to any TPM2 device or its state.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，必须有一个 TPM2 设备可用才能进行此签名，即使结果与任何 TPM2 设备或其状态无关。</font></font></font></p><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><a name="v252" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></a>Added in version 252.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在版本 252 中添加。</font></font></font></p></dd></dl></div></div><div class="refsect1" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><a name="id-1.7" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></a><h2 id="Options" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">Options<a class="headerlink" title="Permalink to this headline" href="#Options" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">选项</font></font></font></h2><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">The following options are understood:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">以下选项已被理解:</font></font></font></p><div class="variablelist" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><dl class="variablelist" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><dt id="--linux=PATH" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--linux=<em class="replaceable"><code>PATH</code></em></code>, </span><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--osrel=<em class="replaceable"><code>PATH</code></em></code>, </span><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--cmdline=<em class="replaceable"><code>PATH</code></em></code>, </span><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--initrd=<em class="replaceable"><code>PATH</code></em></code>, </span><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--splash=<em class="replaceable"><code>PATH</code></em></code>, </span><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--dtb=<em class="replaceable"><code>PATH</code></em></code>, </span><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--uname=<em class="replaceable"><code>PATH</code></em></code>, </span><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--sbat=<em class="replaceable"><code>PATH</code></em></code>, </span><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--pcrpkey=<em class="replaceable"><code>PATH</code></em></code></span><a class="headerlink" title="Permalink to this term" href="#--linux=PATH" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--linux=<em class="replaceable"><code>PATH</code></em></code> ， <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--osrel=<em class="replaceable"><code>PATH</code></em></code> ， <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--cmdline=<em class="replaceable"><code>PATH</code></em></code> ， <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--initrd=<em class="replaceable"><code>PATH</code></em></code> ， <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--splash=<em class="replaceable"><code>PATH</code></em></code> ， <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--dtb=<em class="replaceable"><code>PATH</code></em></code> ， <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--uname=<em class="replaceable"><code>PATH</code></em></code> ， <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--sbat=<em class="replaceable"><code>PATH</code></em></code> ， <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--pcrpkey=<em class="replaceable"><code>PATH</code></em></code> ¶</font></font></font></dt><dd data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">When used with the <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">calculate</strong></span> or <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">sign</strong></span> verb,
        configures the files to read the unified kernel image components from. Each option corresponds with
        the equally named section in the unified kernel PE file. The <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--linux=</code> switch expects
        the path to the ELF kernel file that the unified PE kernel will wrap. All switches except
        <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--linux=</code> are optional. Each option may be used at most once.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当与 calculate 或 sign 动词一起使用时，配置要从中读取统一内核映像组件的文件。每个选项对应于统一内核 PE 文件中同名的部分。 <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--linux=</code> 开关期望提供 ELF 内核文件的路径，该文件将包装统一 PE 内核。除 <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--linux=</code> 外，所有开关都是可选的。每个选项最多只能使用一次。</font></font></font></p><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><a name="v252" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></a>Added in version 252.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在版本 252 中添加。</font></font></font></p></dd><dt id="--current" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--current</code></span><a class="headerlink" title="Permalink to this term" href="#--current" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">¶</a></dt><dd data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">When used with the <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">calculate</strong></span> or <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">sign</strong></span> verb,
        takes the PCR 11 values currently in effect for the system (which should typically reflect the hashes
        of the currently booted kernel). This can be used in place of <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--linux=</code> and the other
        switches listed above.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当与 calculate 或 sign 动词一起使用时，获取当前系统生效的 PCR 11 值（通常应反映当前引导的内核的哈希值）。这可以代替上面列出的 <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--linux=</code> 和其他开关。</font></font></font></p><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><a name="v252" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></a>Added in version 252.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在版本 252 中添加。</font></font></font></p></dd><dt id="--bank=DIGEST" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--bank=<em class="replaceable"><code>DIGEST</code></em></code></span><a class="headerlink" title="Permalink to this term" href="#--bank=DIGEST" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">¶</a></dt><dd data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">Controls the PCR banks to pre-calculate the PCR values for – in case
        <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">calculate</strong></span> or <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">sign</strong></span> is invoked –, or the banks to show in the
        <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">status</strong></span> output. May be used more then once to specify multiple banks. If not
        specified, defaults to the four banks "<code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">sha1</code>", "<code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">sha256</code>",
        "<code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">sha384</code>", "<code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">sha512</code>".<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">控制 PCR 银行以预先计算 PCR 值，以备调用计算或签名时使用，或者在状态输出中显示的银行。可以多次使用以指定多个银行。如果未指定，默认为四个银行 " <code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">sha1</code> ", " <code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">sha256</code> ", " <code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">sha384</code> ", " <code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">sha512</code> "。</font></font></font></p><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><a name="v252" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></a>Added in version 252.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在版本 252 中添加。</font></font></font></p></dd><dt id="--private-key=PATH" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--private-key=<em class="replaceable"><code>PATH</code></em></code>, </span><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--public-key=<em class="replaceable"><code>PATH</code></em></code></span><a class="headerlink" title="Permalink to this term" href="#--private-key=PATH" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--private-key=<em class="replaceable"><code>PATH</code></em></code> ， <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--public-key=<em class="replaceable"><code>PATH</code></em></code> ¶</font></font></font></dt><dd data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">These switches take paths to a pair of PEM encoded RSA key files, for use with
        the <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">sign</strong></span> command.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这些开关接受一对 PEM 编码的 RSA 密钥文件的路径，用于签名命令。</font></font></font></p><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">Note the difference between the <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--pcrpkey=</code> and <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--public-key=</code>
        switches. The former selects the data to include in the "<code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">.pcrpkey</code>" PE section of the
        unified kernel image, the latter picks the public key of the key pair used to sign the resulting PCR
        11 values. The former is the key that the booted system will likely use to lock disk and credential
        encryption to, the latter is the key used for unlocking such resources again. Hence, typically the
        same PEM key should be supplied in both cases.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意 <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--pcrpkey=</code> 和 <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--public-key=</code> 开关之间的区别。前者选择要包含在统一内核映像的 " <code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">.pcrpkey</code> " PE 部分中的数据，后者选择用于签署生成的 PCR 11 值的密钥对的公钥。前者是引导系统可能用于将磁盘和凭据加密锁定到的密钥，后者是用于再次解锁这些资源的密钥。因此，通常应在两种情况下提供相同的 PEM 密钥。</font></font></font></p><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">If the <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--public-key=</code> is not specified but <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--private-key=</code> is
        specified the public key is automatically derived from the private key.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果未指定 <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--public-key=</code> 但指定了 <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--private-key=</code> ，则公钥将自动从私钥派生。</font></font></font></p><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><a name="v252" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></a>Added in version 252.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在版本 252 中添加。</font></font></font></p></dd><dt id="--tpm2-device=PATH" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--tpm2-device=</code><em class="replaceable" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">PATH</code></em></span><a class="headerlink" title="Permalink to this term" href="#--tpm2-device=PATH" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">¶</a></dt><dd data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">Controls which TPM2 device to use. Expects a device node path referring to the TPM2
        chip (e.g. <code class="filename" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">/dev/tpmrm0</code>). Alternatively the special value "<code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">auto</code>"
        may be specified, in order to automatically determine the device node of a suitable TPM2 device (of
        which there must be exactly one). The special value "<code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">list</code>" may be used to enumerate
        all suitable TPM2 devices currently discovered.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">控制要使用的 TPM2 设备。期望一个指向 TPM2 芯片的设备节点路径（例如 <code class="filename" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">/dev/tpmrm0</code> ）。或者可以指定特殊值 " <code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">auto</code> "，以自动确定适当的 TPM2 设备的设备节点（必须恰好有一个）。特殊值 " <code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">list</code> " 可用于列举当前发现的所有适用的 TPM2 设备。</font></font></font></p><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><a name="v252" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></a>Added in version 252.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在版本 252 中添加。</font></font></font></p></dd><dt id="--phase=PHASE" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--phase=</code><em class="replaceable" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">PHASE</code></em></span><a class="headerlink" title="Permalink to this term" href="#--phase=PHASE" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">¶</a></dt><dd data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">Controls which boot phases to calculate expected PCR 11 values for. This takes a
        series of colon-separated strings that encode boot "paths" for entering a specific phase of the boot
        process. Each of the specified strings is measured by the
        <code class="filename" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-pcrphase-initrd.service</code>,
        <code class="filename" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-pcrphase-sysinit.service</code>, and
        <a href="systemd-pcrphase.service.html#" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="citerefentry" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="refentrytitle" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-pcrphase.service</span>(8)</span></a>
        into PCR 11 during different milestones of the boot process. This switch may be specified multiple
        times to calculate PCR values for multiple boot phases at once. If not used defaults to
        "<code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">enter-initrd</code>", "<code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">enter-initrd:leave-initrd</code>",
        "<code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">enter-initrd:leave-initrd:sysinit</code>",
        "<code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">enter-initrd:leave-initrd:sysinit:ready</code>", i.e. calculates expected PCR values for
        the boot phase in the initrd, during early boot, during later boot, and during system runtime, but
        excluding the phases before the initrd or when shutting down. This setting is honoured both by
        <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">calculate</strong></span> and <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">sign</strong></span>. When used with the latter it's particularly
        useful for generating PCR signatures that can only be used for unlocking resources during specific
        parts of the boot process.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">控制要计算预期 PCR 11 值的引导阶段。这需要一系列以冒号分隔的字符串，编码进入引导过程特定阶段的引导“路径”。每个指定的字符串在引导过程的不同里程碑上由 <code class="filename" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-pcrphase-initrd.service</code> 、 <code class="filename" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-pcrphase-sysinit.service</code> 和 systemd-pcrphase.service(8)测量到 PCR 11 中。可以多次指定此开关，以一次计算多个引导阶段的 PCR 值。如果未使用，默认为“ <code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">enter-initrd</code> ”、“ <code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">enter-initrd:leave-initrd</code> ”、“ <code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">enter-initrd:leave-initrd:sysinit</code> ”、“ <code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">enter-initrd:leave-initrd:sysinit:ready</code> ”，即计算 initrd 阶段、早期引导阶段、后期引导阶段和系统运行时的预期 PCR 值，但不包括 initrd 之前的阶段或关机时的阶段。此设置被 calculate 和 sign 均支持。与后者一起使用时，特别适用于生成只能用于在引导过程的特定部分解锁资源的 PCR 签名。</font></font></font></p><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">For further details about PCR boot phases, see
        <a href="systemd-pcrphase.service.html#" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="citerefentry" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="refentrytitle" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-pcrphase.service</span>(8)</span></a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有关 PCR 引导阶段的更多详细信息，请参阅 systemd-pcrphase.service(8)。</font></font></font></p><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><a name="v252" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></a>Added in version 252.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在版本 252 中添加。</font></font></font></p></dd><dt id="--append=PATH" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--append=</code><em class="replaceable" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">PATH</code></em></span><a class="headerlink" title="Permalink to this term" href="#--append=PATH" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">¶</a></dt><dd data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">When generating a PCR JSON signature (via the <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">sign</strong></span> command),
        combine it with a previously generated PCR JSON signature, and output it as one. The specified path
        must refer to a regular file that contains a valid JSON PCR signature object. The specified file is
        not modified. It will be read first, then the newly generated signature appended to it, and the
        resulting object is written to standard output. Use this to generate a single JSON object consisting
        from signatures made with a number of signing keys (for example, to have one key per boot phase). The
        command will suppress duplicates: if a specific signature is already included in a JSON signature
        object it is not added a second time.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在生成 PCR JSON 签名（通过 sign 命令）时，将其与先前生成的 PCR JSON 签名结合，并将其输出为一个。指定的路径必须引用包含有效 JSON PCR 签名对象的常规文件。指定的文件不会被修改。首先将读取它，然后将新生成的签名附加到其中，并将生成的对象写入标准输出。使用此功能生成由多个签名密钥生成的单个 JSON 对象（例如，每个启动阶段一个密钥）。该命令将抑制重复项：如果特定签名已包含在 JSON 签名对象中，则不会第二次添加。</font></font></font></p><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><a name="v253" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></a>Added in version 253.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加在版本 253 中。</font></font></font></p></dd><dt id="--json=MODE" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--json=</code><em class="replaceable" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">MODE</code></em></span><a class="headerlink" title="Permalink to this term" href="#--json=MODE" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">¶</a></dt><dd data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">Shows output formatted as JSON. Expects one of "<code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">short</code>" (for the
    shortest possible output without any redundant whitespace or line breaks), "<code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">pretty</code>"
    (for a pretty version of the same, with indentation and line breaks) or "<code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">off</code>" (to turn
    off JSON output, the default).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">以 JSON 格式显示输出。期望其中之一为 " <code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">short</code> "（以最短可能的输出形式，不包含任何多余的空格或换行符），" <code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">pretty</code> "（以缩进和换行符的漂亮版本）或 " <code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">off</code> "（关闭 JSON 输出，默认设置）。</font></font></font></p></dd><dt id="--no-pager" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--no-pager</code></span><a class="headerlink" title="Permalink to this term" href="#--no-pager" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">¶</a></dt><dd data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">Do not pipe output into a pager.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">不要将输出传输到分页程序中。</font></font></font></p></dd><dt id="-h" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">-h</code>, </span><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--help</code></span><a class="headerlink" title="Permalink to this term" href="#-h" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">-h</code> ， <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--help</code> ¶</font></font></font></dt><dd data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><a name="help-text" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></a>Print a short help text and exit.
    <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">打印简短的帮助文本并退出。</font></font></font></p></dd><dt id="--version" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--version</code></span><a class="headerlink" title="Permalink to this term" href="#--version" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">¶</a></dt><dd data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><a name="version-text" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></a>Print a short version string and exit.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">打印简短的版本字符串并退出。</font></font></font></p></dd></dl></div></div><div class="refsect1" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><a name="id-1.8" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></a><h2 id="Examples" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">Examples<a class="headerlink" title="Permalink to this headline" href="#Examples" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 ¶</font></font></font></h2><div class="example" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><a name="id-1.8.2" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></a><p class="title" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><b data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">Example&nbsp;1.&nbsp;Generate a unified kernel image, and calculate the expected TPM PCR 11 value<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 1. 生成统一的内核映像，并计算预期的 TPM PCR 11 值</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><pre class="programlisting">$ ukify --output=vmlinux.efi \
     --os-release=@os-release.txt \
     --cmdline=@cmdline.txt \
     --splash=splash.bmp \
     --devicetree=devicetree.dtb \
     --measure \
     vmlinux initrd.cpio
11:sha1=d775a7b4482450ac77e03ee19bda90bd792d6ec7
11:sha256=bc6170f9ce28eb051ab465cd62be8cf63985276766cf9faf527ffefb66f45651
11:sha384=1cf67dff4757e61e5...7f49ad720be02fd07263e1f93061243aec599d1ee4b4
11:sha512=8e79acd3ddbbc8282...0c3e8ec0c714821032038f525f744960bcd082d937da
</pre><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><a href="ukify.html#" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="citerefentry" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="refentrytitle" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">ukify</span>(1)</span></a>
      internally calls <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-measure</strong></span>. The output with hashes is from
      <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-measure</strong></span>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">ukify(1) 内部调用 systemd-measure。带有哈希的输出来自 systemd-measure。</font></font></font></p></div></div><br class="example-break" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><div class="example" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><a name="id-1.8.3" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></a><p class="title" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><b data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">Example&nbsp;2.&nbsp;Generate a private/public key pair, a unified kernel image, and a TPM PCR 11 signature for
      it, and embed the signature and the public key in the image<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 2. 生成私钥/公钥对、统一内核映像以及 TPM PCR 11 签名，并将签名和公钥嵌入映像中</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><pre class="programlisting">$ openssl genpkey -algorithm RSA -pkeyopt rsa_keygen_bits:2048 -out tpm2-pcr-private.pem
..+.+++++++++......+.........+......+.......+....+.....+.+...+..........
$ openssl rsa -pubout -in tpm2-pcr-private.pem -out tpm2-pcr-public.pem
# systemd-measure sign \
     --linux=vmlinux \
     --osrel=os-release.txt \
     --cmdline=cmdline.txt \
     --initrd=initrd.cpio \
     --splash=splash.bmp \
     --dtb=devicetree.dtb \
     --pcrpkey=tpm2-pcr-public.pem \
     --bank=sha1 \
     --bank=sha256 \
     --private-key=tpm2-pcr-private.pem \
     --public-key=tpm2-pcr-public.pem &gt;tpm2-pcr-signature.json
# ukify --output=vmlinuz.efi \
     --os-release=@os-release.txt \
     --cmdline=@cmdline.txt \
     --splash=splash.bmp \
     --devicetree=devicetree.dtb \
     --pcr-private-key=tpm2-pcr-private.pem \
     --pcr-public-key=tpm2-pcr-public.pem \
     --pcr-banks=sha1,sha256 \
     vmlinux initrd.cpio</pre><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">Later on, enroll the signed PCR policy on a LUKS volume:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">稍后，在 LUKS 卷上注册已签名的 PCR 策略：</font></font></font></p><pre class="programlisting"># systemd-cryptenroll --tpm2-device=auto \
     --tpm2-public-key=tpm2-pcr-public.pem \
     --tpm2-signature=tpm2-pcr-signature.json \
     /dev/sda5</pre><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">And then unlock the device with the signature:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后使用签名解锁设备：</font></font></font></p><pre class="programlisting"># systemd-cryptsetup attach \
     volume5 /dev/sda5 - \
     tpm2-device=auto,tpm2-signature=/path/to/tpm2-pcr-signature.json</pre><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">Note that when the generated unified kernel image <code class="filename" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">vmlinux.efi</code> is booted, the
     signature and public key files will be placed at locations <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-cryptenroll</strong></span> and
     <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-cryptsetup</strong></span> will look for anyway, and thus these paths do not actually need to
     be specified.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，当生成的统一内核映像 <code class="filename" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">vmlinux.efi</code> 启动时，签名和公钥文件将被放置在 systemd-cryptenroll 和 systemd-cryptsetup 将搜索的位置，因此这些路径实际上不需要被指定。</font></font></font></p></div></div><br class="example-break" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><div class="example" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><a name="id-1.8.4" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></a><p class="title" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><b data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">Example&nbsp;3.&nbsp;Introduce a second public key, signing the same kernel PCR measurements, but only for the initrd boot phase<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 3. 引入第二个公钥，签署相同的内核 PCR 测量，但仅用于 initrd 引导阶段</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">This example extends the previous one, but we now introduce a second signing key that is only
      used to sign PCR policies restricted to the initrd boot phase. This can be used to lock down root
      volumes in a way that they can only be unlocked before the transition to the host system. Thus we have
      two classes of secrets or credentials: one that can be unlocked during the entire runtime, and the
      other that can only be used in the initrd.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">本示例扩展了上一个示例，但现在我们引入了第二个签名密钥，该密钥仅用于签署限制为 initrd 引导阶段的 PCR 策略。这可以用于锁定根卷，使其只能在转换到主机系统之前解锁。因此，我们有两类秘密或凭据：一类可以在整个运行时解锁，另一类只能在 initrd 中使用。</font></font></font></p><pre class="programlisting">$ openssl genpkey -algorithm RSA -pkeyopt rsa_keygen_bits:2048 -out tpm2-pcr-private.pem
.+........+.+........+.......+...+...+........+....+......+..+..........
$ openssl rsa -pubout -in tpm2-pcr-private.pem -out tpm2-pcr-public.pem
$ openssl genpkey -algorithm RSA -pkeyopt rsa_keygen_bits:2048 -out tpm2-pcr-initrd-private.pem
..+.......++........+........+......+........+....+.....+.+..+..........
$ openssl rsa -pubout -in tpm2-pcr-initrd-private.pem -out tpm2-pcr-initrd-public.pem
# ukify --output vmlinux-1.2.3.efi \
     --os-release=@os-release.txt \
     --cmdline=@cmdline.txt \
     --splash=splash.bmp \
     --devicetree=devicetree.dtb \
     --pcr-private-key=tpm2-pcr-private.pem \
     --pcr-public-key=tpm2-pcr-public.pem \
     --phases=enter-initrd,enter-initrd:leave-initrd,enter-initrd:leave-initrd:sysinit,enter-initrd:leave-initrd:sysinit:ready \
     --pcr-banks=sha1,sha256 \
     --pcr-private-key=tpm2-pcr-initrd-private.pem \
     --pcr-public-key=tpm2-pcr-initrd-public.pem \
     --phases=enter-initrd \
     vmlinux-1.2.3 initrd.cpio \
     --uname=1.2.3
+ /usr/lib/systemd/systemd-measure sign --linux=vmlinux-1.2.3 \
--osrel=os-release.txt --cmdline=cmdline.txt --dtb=devicetree.dtb \
--splash=splash.bmp --initrd=initrd.cpio --bank=sha1 --bank=sha256 \
--private-key=tpm2-pcr-private.pem --public-key=tpm2-pcr-public.pem \
--phase=enter-initrd --phase=enter-initrd:leave-initrd \
--phase=enter-initrd:leave-initrd:sysinit \
--phase=enter-initrd:leave-initrd:sysinit:ready
+ /usr/lib/systemd/systemd-measure sign --linux=vmlinux-1.2.3 \
--osrel=os-release.txt --cmdline=cmdline.txt --dtb=devicetree.dtb \
--splash=splash.bmp --initrd=initrd.cpio --bank=sha1 --bank=sha256 \
--private-key=tpm2-pcr-initrd-private.pem \
--public-key=tpm2-pcr-initrd-public.pem \
--phase=enter-initrd
Wrote unsigned vmlinux-1.2.3.efi
      </pre><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1"><span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">ukify</strong></span> prints out both invocations of <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-measure</strong></span> as
      informative output (the lines starting with "<code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">+</code>"); this allows us to see how
      <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-measure</strong></span> is called. It then merges the output of both invocations into the
      "<code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">.pcrsig</code>" section. <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-measure</strong></span> may also do this merge itself
      using the <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--append=</code> option.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">ukify 打印出 systemd-measure 的两次调用作为信息输出（以“ <code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">+</code> ”开头的行）；这样我们可以看到 systemd-measure 是如何被调用的。然后将两次调用的输出合并到“ <code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">.pcrsig</code> ”部分。systemd-measure 也可以使用 <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--append=</code> 选项自行进行合并。</font></font></font></p><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">Note that in this example the "<code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">.pcrpkey</code>" PE section contains the key specified
      by the first <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--pcr-private-key=</code> option, covering all boot phases. The
      "<code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">.pcrpkey</code>" section is used in the default policies of
      <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-cryptenroll</strong></span> and <span class="command" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><strong data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-creds</strong></span>. To use the stricter policy
      bound to <code class="filename" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">tpm-pcr-initrd-public.pem</code>, specify <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--tpm2-public-key=</code> on
      the command line of those tools.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，在这个例子中，“ <code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">.pcrpkey</code> ” PE 部分包含了由第一个 <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--pcr-private-key=</code> 选项指定的关键，涵盖了所有的引导阶段。“ <code class="literal" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">.pcrpkey</code> ” 部分用于 systemd-cryptenroll 和 systemd-creds 的默认策略。要使用绑定到 <code class="filename" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">tpm-pcr-initrd-public.pem</code> 的更严格策略，请在这些工具的命令行上指定 <code class="option" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">--tpm2-public-key=</code> 。</font></font></font></p></div></div><br class="example-break" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></div><div class="refsect1" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><a name="id-1.9" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></a><h2 id="Exit status" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">Exit status<a class="headerlink" title="Permalink to this headline" href="#Exit%20status" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">退出状态 ¶</font></font></font></h2><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">On success, 0 is returned, a non-zero failure code otherwise.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">成功时返回 0，否则返回非零失败代码。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><a name="id-1.10" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"></a><h2 id="See Also" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">See Also<a class="headerlink" title="Permalink to this headline" href="#See%20Also" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">参见 ¶</font></font></font></h2><p data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453" data-immersive-translate-paragraph="1">
      <a href="systemd.html#" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="citerefentry" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="refentrytitle" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd</span>(1)</span></a>,
      <a href="systemd-stub.html#" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="citerefentry" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="refentrytitle" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-stub</span>(7)</span></a>,
      <a href="ukify.html#" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="citerefentry" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="refentrytitle" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">ukify</span>(1)</span></a>,
      <a href="systemd-creds.html#" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="citerefentry" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="refentrytitle" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-creds</span>(1)</span></a>,
      <a href="systemd-cryptsetup@.service.html#" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="citerefentry" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="refentrytitle" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-cryptsetup@.service</span>(8)</span></a>,
      <a href="systemd-pcrphase.service.html#" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="citerefentry" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453"><span class="refentrytitle" data-immersive-translate-walked="a7045763-94b4-4819-ad89-704969b5d453">systemd-pcrphase.service</span>(8)</span></a>
     </p></div></div>
</body></html>