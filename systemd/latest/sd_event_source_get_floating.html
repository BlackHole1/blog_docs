<html><head><style data-id="immersive-translate-default-injected-css">:root {
  --immersive-translate-theme-underline-borderColor: #72ece9;
  --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
  --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
  --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
  --immersive-translate-theme-highlight-backgroundColor: #ffff00;
  --immersive-translate-theme-dashed-borderColor: #59c1bd;
  --immersive-translate-theme-blockquote-borderColor: #cc3355;
  --immersive-translate-theme-thinDashed-borderColor: #ff374f;
  --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
  --immersive-translate-theme-dashedBorder-borderRadius: 0;
  --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
  --immersive-translate-theme-solidBorder-borderRadius: 0;
  --immersive-translate-theme-dotted-borderColor: #94a3b8;
  --immersive-translate-theme-wavy-borderColor: #72ece9;
  --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
  --immersive-translate-theme-grey-textColor: #2f4f4f;
  --immersive-translate-theme-marker-backgroundColor: #fbda41;
  --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
  --immersive-translate-theme-marker2-backgroundColor: #ffff00;
  --immersive-translate-theme-opacity-opacity: 10;
}

.immersive-translate-target-translation-pre-whitespace {
  white-space: pre-wrap !important;
}

.immersive-translate-pdf-target-container {
  position: absolute;
  background-color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
    sans-serif;
  top: 0;
  width: 600px;
  height: 100%;
  z-index: 2;
  line-height: 1.3;
  font-size: 16px;
}
.immersive-translate-target-wrapper[dir='rtl'] {
  text-align: right;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
  color: rgb(0, 0, 0);
  white-space: normal;
  position: absolute;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
  color: inherit;
  white-space: inherit;
  position: unset;
}

.immersive-translate-state-dual>br {
  display: none;
}

.immersive-translate-target-translation-block-wrapper {
  margin: 8px 0 !important;
  display: inline-block;
}

.immersive-translate-target-translation-pdf-block-wrapper {
  margin: 0 !important;
  display: block;
}

.immersive-translate-target-translation-theme-grey-inner {
  color: var(--immersive-translate-theme-grey-textColor);
}


.immersive-translate-target-translation-theme-underline-inner {
  border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
}

.immersive-translate-target-translation-theme-nativeUnderline-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
}

.immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-theme-nativeDashed-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
  text-decoration-style: dashed !important;
}

.immersive-translate-target-translation-theme-thinDashed-inner {
  border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
}

.immersive-translate-target-translation-theme-dotted-inner {
  background-image: linear-gradient(to right,
      var(--immersive-translate-theme-dotted-borderColor) 30%,
      rgba(255, 255, 255, 0) 0%);
  background-position: bottom;
  background-size: 5px 1px;
  background-repeat: repeat-x;
  padding-bottom: 3px;
}

.immersive-translate-target-translation-theme-nativeDotted-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
  text-decoration-style: dotted !important;
}

.immersive-translate-target-translation-theme-wavy-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
  text-decoration-style: wavy !important;
}

.immersive-translate-target-translation-theme-dashed-inner {
  background: linear-gradient(to right,
      var(--immersive-translate-theme-dashed-borderColor) 0%,
      var(--immersive-translate-theme-dashed-borderColor) 50%,
      transparent 50%,
      transparent 100%) repeat-x left bottom;
  background-size: 8px 2px;
  padding-bottom: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
  content: "";
  display: block;
  max-width: 80px;
  width: 10%;
  border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  padding-top: 8px;
}

.immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
  content: "";
  border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  max-height: 16px;
  height: 16px;
  padding-left: 8px;
}

.immersive-translate-target-translation-theme-highlight-inner {
  background: var(--immersive-translate-theme-highlight-backgroundColor);
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-block-wrapper-theme-marker {
  line-height: 1.5em;
}

.immersive-translate-target-translation-theme-marker2-inner {
  font-weight: bold;
  text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
    16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
    2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
    -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
}

.immersive-translate-target-translation-theme-marker-inner {
  /* TODO: add more texture */
  background: linear-gradient(to right,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-theme-weakening {
  opacity: 0.618 !important;
}

.immersive-translate-target-translation-theme-italic {
  font-style: italic !important;
}

.immersive-translate-target-translation-theme-bold {
  font-weight: bold !important;
}

.immersive-translate-target-translation-block-wrapper-theme-paper {
  margin: 8px 0;
  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
  padding: 16px 32px;
  display: block;
}

.immersive-translate-target-translation-block-wrapper-theme-blockquote {
  border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
  padding-left: 12px !important;
  margin-top: 4px;
  margin-bottom: 4px;
  padding-top: 4px;
  padding-bottom: 4px;
  display: block;
}

.immersive-translate-target-translation-theme-mask-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
  filter: none !important;
}

[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}


/* opacity theme start */

.immersive-translate-target-translation-theme-opacity-inner {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: none !important;
}


.immersive-translate-target-translation-theme-mask-inner:hover {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
  filter: none !important;
}


[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
  filter: none !important;
}

/* opacity theme end */

/* vertical css , please remain it in the last one. */
.immersive-translate-target-translation-vertical-block-wrapper {
  margin: 0px 8px !important;
}

.immersive-translate-text {
  font-size: 15px !important;
}

.immersive-translate-error-toast {
  position: fixed;
  top: 5%;
  z-index: 99999999;
  left: 0;
  right: 0;
  margin: auto;
  max-width: 300px;
  padding: 16px;
  border-radius: 12px;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}

@media all and (min-width: 750px) {
  .immersive-translate-error-toast {
    max-width: 400px;
  }
}


.immersive-translate-clickable-button {
  cursor: pointer;
}

.immersive-translate-help-button {
  cursor: pointer;
}

.immersive-translate-loading-text:before {
  content: "...";
}


/* dark mode for loading */

@media only screen and (prefers-color-scheme: dark) {
  .immersive-translate-loading {
    border: 2px rgba(255, 255, 255, 0.25) solid !important;
    border-top: 2px rgba(255, 255, 255, 1) solid !important;
  }
}

.immersive-translate-error-wrapper {
  position: relative;
  display: inline-flex;
  padding: 6px;
  margin: 0 12px;
  white-space: nowrap;
  font-size: 0.9em;
}
[lang="zh-CN"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}
[lang="zh-TW"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}


.immersive-translate-tooltip {
  position: relative;
  display: inline-flex;
  /* little indicater to indicate it's hoverable */
}

.immersive-translate-tooltip-content {
  /* here's the magic */
  position: absolute;
  z-index: 100000000000;

  left: 50%;
  bottom: 0;
  transform: translate(-50%, 110%);
  line-height: 1;
  /* and add a small left margin */

  /* basic styles */
  width: max-content;
  max-width: 250px;
  word-wrap: break-word;
  white-space: pre-line;
  padding: 10px;
  border-radius: 10px;
  background: #000C;
  color: #fff;
  text-align: center;
  font-size: 14px;
  display: none;
  /* hide by default */
}

.immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip-content-table {
  left: unset !important;
  bottom: unset !important;
  transform: translate(-10%, 50%) !important;
}


.immersive-translate-tooltip:hover:before {
  display: block;
}



.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}
</style><style data-id="immersive-translate-user-custom-style">:root {

.immersive-translate-target-inner { font-family: inherit; }
}
</style><style data-id="immersive-translate-dynamic-injected-css">.immersive-translate-target-wrapper[dir='rtl'] {text-align: right;}
.immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {display:block;}
.immersive-translate-target-wrapper {word-break: break-word;}
</style></head><body data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>sd_event_source_set_floating</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><script src="https://code.jquery.com/jquery-3.7.1.min.js"></script><script src="../nav.js"></script><style>
    a.headerlink {
      color: #c60f0f;
      font-size: 0.8em;
      padding: 0 4px 0 4px;
      text-decoration: none;
      visibility: hidden;
    }

    a.headerlink:hover {
      background-color: #c60f0f;
      color: white;
    }

    h1:hover > a.headerlink, h2:hover > a.headerlink, h3:hover > a.headerlink, dt:hover > a.headerlink {
      visibility: visible;
    }
  </style><a href="index.html" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">Index </a>·
  <a href="systemd.directives.html" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">Directives </a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">索引 · 指令</font></font></font><span style="float:right" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1">systemd 255</span><hr><div class="refentry" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><a name="sd_event_source_set_floating" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"></a><div class="titlepage" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"></div><div class="refnamediv" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><h2 data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1">Name<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">名称</font></font></font></h2><p data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1">sd_event_source_set_floating, sd_event_source_get_floating — Set or retrieve 'floating' state of event sources<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">sd_event_source_set_floating, sd_event_source_get_floating — 设置或检索事件源的“floating”状态</font></font></font></p></div><div class="refsynopsisdiv" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><h2 data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1">Synopsis<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">简介</font></font></font></h2><div class="funcsynopsis"><pre class="funcsynopsisinfo">#include &lt;systemd/sd-event.h&gt;</pre><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_event_source_set_floating</b>(</code></td><td>sd_event_source *<var class="pdparam">source</var>, </td></tr><tr><td>&nbsp;</td><td>int <var class="pdparam">floating</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_event_source_get_floating</b>(</code></td><td>sd_event_source *<var class="pdparam">source</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div></div></div><div class="refsect1" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><a name="id-1.5" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"></a><h2 id="Description" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1">Description<a class="headerlink" title="Permalink to this headline" href="#Description" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">描述</font></font></font></h2><p data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_source_set_floating()</code> takes a boolean and sets the 'floating' state
    of the specified event source object. This is used to change the direction of reference counts for the
    object and the event loop it is associated with. In non-floating mode, the event source object holds a
    reference to the event loop object, but not vice versa. The creator of the event source object must hold
    a reference to it as long as the source should exist. In floating mode, the event loop holds a reference
    to the source object, and will decrease the reference count when being freed. This means that a reference
    to the event loop should be held to prevent both from being destroyed.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_source_set_floating()</code> 接受一个布尔值，并设置指定事件源对象的“floating”状态。这用于改变对象和其关联的事件循环的引用计数方向。在非浮动模式下，事件源对象保留对事件循环对象的引用，但反之则不然。事件源对象的创建者必须在源对象应存在时保留对其的引用。在浮动模式下，事件循环保留对源对象的引用，并在释放时减少引用计数。这意味着必须保留对事件循环的引用以防止两者被销毁。</font></font></font></p><p data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1">Various calls that allocate event source objects (i.e.
    <a href="sd_event_add_io.html#" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="citerefentry" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="refentrytitle" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_add_io</span>(3)</span></a>,
    <a href="sd_event_add_time.html#" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="citerefentry" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="refentrytitle" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_add_time</span>(3)</span></a> and
    similar) will automatically set an event source object to 'floating' mode if the caller passed
    <code class="constant" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">NULL</code> in the parameter used to return a reference to the event source object.
    Nevertheless, it may be necessary to gain temporary access to the source object, for example to adjust
    event source properties after allocation (e.g. its priority or description string). In those cases the
    object may be created in non-floating mode, and the returned reference used to adjust the properties, and
    the object marked as floating afterwards, and the reference in the caller dropped.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">分配事件源对象的各种调用（例如 sd_event_add_io(3)、sd_event_add_time(3)等）将自动将事件源对象设置为“浮动”模式，如果调用者在用于返回事件源对象引用的参数中传递了 <code class="constant" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">NULL</code> 。然而，可能需要临时访问源对象，例如在分配后调整事件源属性（例如其优先级或描述字符串）。在这些情况下，对象可能以非浮动模式创建，并返回的引用用于调整属性，然后将对象标记为浮动，调用者中的引用被丢弃。</font></font></font></p><p data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_source_get_floating()</code> may be used to query the current 'floating'
    state of the event source object <em class="parameter" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><code data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">source</code></em>. It returns zero if 'floating' mode is
    off, positive if it is on.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_source_get_floating()</code> 可用于查询事件源对象 <code data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">source</code> 的当前“浮动”状态。如果“浮动”模式关闭，则返回零，如果打开则返回正数。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><a name="id-1.6" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"></a><h2 id="Return Value" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1">Return Value<a class="headerlink" title="Permalink to this headline" href="#Return%20Value" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">返回值 ¶</font></font></font></h2><p data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1">On success, <code class="function" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_source_set_floating()</code> and
    <code class="function" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_source_get_floating()</code> return a non-negative integer. On failure, they
    return a negative errno-style error code.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">成功时， <code class="function" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_source_set_floating()</code> 和 <code class="function" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_source_get_floating()</code> 返回一个非负整数。失败时，它们返回一个负的 errno 风格的错误代码。</font></font></font></p><div class="refsect2" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><a name="id-1.6.3" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"></a><h3 id="Errors" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1">Errors<a class="headerlink" title="Permalink to this headline" href="#Errors" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">错误 ¶</font></font></font></h3><p data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1">Returned errors may indicate the following problems:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">返回的错误可能表示以下问题：</font></font></font></p><div class="variablelist" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><dl class="variablelist" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><dt id="-EINVAL" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><code class="constant" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">-EINVAL</code></span><a class="headerlink" title="Permalink to this term" href="#-EINVAL" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">¶</a></dt><dd data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><p data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1"><em class="parameter" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><code data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">source</code></em> is not a valid pointer to an
          <span class="structname" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_source</span> object.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">source</code> 不是有效的指向 sd_event_source 对象的指针。</font></font></font></p><p data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1"><a name="v244" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"></a>Added in version 244.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在版本 244 中添加。</font></font></font></p></dd><dt id="-ECHILD" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><code class="constant" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">-ECHILD</code></span><a class="headerlink" title="Permalink to this term" href="#-ECHILD" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">¶</a></dt><dd data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><p data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1">The event loop has been created in a different process, library or module instance.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">事件循环已在不同的进程、库或模块实例中创建。</font></font></font></p><p data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1"><a name="v244" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"></a>Added in version 244.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在版本 244 中添加。</font></font></font></p></dd></dl></div></div></div><div class="refsect1" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><a name="id-1.7" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"></a><h2 id="Notes" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1">Notes<a class="headerlink" title="Permalink to this headline" href="#Notes" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意事项 ¶</font></font></font></h2><p data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1"><a name="pkgconfig-text" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"></a>Functions described here are available as a shared
  library, which can be compiled against and linked to with the
  <code class="constant" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">libsystemd</code>&nbsp;<a href="http://linux.die.net/man/1/pkg-config" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="citerefentry" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="refentrytitle" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">pkg-config</span>(1)</span></a>
  file.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此处描述的函数可作为共享库使用，可以通过 <code class="constant" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">libsystemd</code> pkg-config(1) 文件进行编译和链接。</font></font></font></p><p data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1"><a name="getenv" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"></a>The code described here uses
<a href="https://man7.org/linux/man-pages/man3/getenv.3.html" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="citerefentry" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="refentrytitle" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">getenv</span>(3)</span></a>,
which is declared to be not multi-thread-safe. This means that the code calling the functions described
here must not call
<a href="https://man7.org/linux/man-pages/man3/setenv.3.html" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="citerefentry" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="refentrytitle" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">setenv</span>(3)</span></a>
from a parallel thread. It is recommended to only do calls to <code class="function" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">setenv()</code>
from an early phase of the program when no other threads have been started.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此处描述的代码使用了 getenv(3)，该函数被声明为非多线程安全。这意味着调用此处描述的函数的代码不能从并行线程中调用 setenv(3)。建议仅在程序的早期阶段进行对 <code class="function" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">setenv()</code> 的调用，此时尚未启动其他线程。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><a name="id-1.8" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"></a><h2 id="History" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1">History<a class="headerlink" title="Permalink to this headline" href="#History" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">历史 ¶</font></font></font></h2><p data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_source_set_floating()</code> and
    <code class="function" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_source_get_floating()</code> were added in version 244.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_source_set_floating()</code> 和 <code class="function" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_source_get_floating()</code> 在版本 244 中添加。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><a name="id-1.9" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"></a><h2 id="See Also" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1">See Also<a class="headerlink" title="Permalink to this headline" href="#See%20Also" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">参见 ¶</font></font></font></h2><p data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df" data-immersive-translate-paragraph="1">
      <a href="sd-event.html#" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="citerefentry" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="refentrytitle" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd-event</span>(3)</span></a>,
      <a href="sd_event_add_io.html#" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="citerefentry" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="refentrytitle" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_add_io</span>(3)</span></a>,
      <a href="sd_event_add_time.html#" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="citerefentry" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="refentrytitle" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_add_time</span>(3)</span></a>,
      <a href="sd_event_add_signal.html#" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="citerefentry" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="refentrytitle" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_add_signal</span>(3)</span></a>,
      <a href="sd_event_add_child.html#" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="citerefentry" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="refentrytitle" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_add_child</span>(3)</span></a>,
      <a href="sd_event_add_inotify.html#" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="citerefentry" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="refentrytitle" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_add_inotify</span>(3)</span></a>,
      <a href="sd_event_add_defer.html#" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="citerefentry" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="refentrytitle" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_add_defer</span>(3)</span></a>,
      <a href="sd_event_source_set_description.html#" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="citerefentry" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="refentrytitle" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_source_set_description</span>(3)</span></a>,
      <a href="sd_event_source_set_priority.html#" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="citerefentry" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df"><span class="refentrytitle" data-immersive-translate-walked="d048c35d-41fc-43d4-8951-97664310b1df">sd_event_source_set_priority</span>(3)</span></a>
    </p></div></div>
</body></html>