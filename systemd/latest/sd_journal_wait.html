<html><head><style data-id="immersive-translate-default-injected-css">:root {
  --immersive-translate-theme-underline-borderColor: #72ece9;
  --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
  --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
  --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
  --immersive-translate-theme-highlight-backgroundColor: #ffff00;
  --immersive-translate-theme-dashed-borderColor: #59c1bd;
  --immersive-translate-theme-blockquote-borderColor: #cc3355;
  --immersive-translate-theme-thinDashed-borderColor: #ff374f;
  --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
  --immersive-translate-theme-dashedBorder-borderRadius: 0;
  --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
  --immersive-translate-theme-solidBorder-borderRadius: 0;
  --immersive-translate-theme-dotted-borderColor: #94a3b8;
  --immersive-translate-theme-wavy-borderColor: #72ece9;
  --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
  --immersive-translate-theme-grey-textColor: #2f4f4f;
  --immersive-translate-theme-marker-backgroundColor: #fbda41;
  --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
  --immersive-translate-theme-marker2-backgroundColor: #ffff00;
  --immersive-translate-theme-opacity-opacity: 10;
}

.immersive-translate-target-translation-pre-whitespace {
  white-space: pre-wrap !important;
}

.immersive-translate-pdf-target-container {
  position: absolute;
  background-color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
    sans-serif;
  top: 0;
  width: 600px;
  height: 100%;
  z-index: 2;
  line-height: 1.3;
  font-size: 16px;
}
.immersive-translate-target-wrapper[dir='rtl'] {
  text-align: right;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
  color: rgb(0, 0, 0);
  white-space: normal;
  position: absolute;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
  color: inherit;
  white-space: inherit;
  position: unset;
}

.immersive-translate-state-dual>br {
  display: none;
}

.immersive-translate-target-translation-block-wrapper {
  margin: 8px 0 !important;
  display: inline-block;
}

.immersive-translate-target-translation-pdf-block-wrapper {
  margin: 0 !important;
  display: block;
}

.immersive-translate-target-translation-theme-grey-inner {
  color: var(--immersive-translate-theme-grey-textColor);
}


.immersive-translate-target-translation-theme-underline-inner {
  border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
}

.immersive-translate-target-translation-theme-nativeUnderline-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
}

.immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-theme-nativeDashed-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
  text-decoration-style: dashed !important;
}

.immersive-translate-target-translation-theme-thinDashed-inner {
  border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
}

.immersive-translate-target-translation-theme-dotted-inner {
  background-image: linear-gradient(to right,
      var(--immersive-translate-theme-dotted-borderColor) 30%,
      rgba(255, 255, 255, 0) 0%);
  background-position: bottom;
  background-size: 5px 1px;
  background-repeat: repeat-x;
  padding-bottom: 3px;
}

.immersive-translate-target-translation-theme-nativeDotted-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
  text-decoration-style: dotted !important;
}

.immersive-translate-target-translation-theme-wavy-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
  text-decoration-style: wavy !important;
}

.immersive-translate-target-translation-theme-dashed-inner {
  background: linear-gradient(to right,
      var(--immersive-translate-theme-dashed-borderColor) 0%,
      var(--immersive-translate-theme-dashed-borderColor) 50%,
      transparent 50%,
      transparent 100%) repeat-x left bottom;
  background-size: 8px 2px;
  padding-bottom: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
  content: "";
  display: block;
  max-width: 80px;
  width: 10%;
  border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  padding-top: 8px;
}

.immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
  content: "";
  border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  max-height: 16px;
  height: 16px;
  padding-left: 8px;
}

.immersive-translate-target-translation-theme-highlight-inner {
  background: var(--immersive-translate-theme-highlight-backgroundColor);
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-block-wrapper-theme-marker {
  line-height: 1.5em;
}

.immersive-translate-target-translation-theme-marker2-inner {
  font-weight: bold;
  text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
    16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
    2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
    -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
}

.immersive-translate-target-translation-theme-marker-inner {
  /* TODO: add more texture */
  background: linear-gradient(to right,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-theme-weakening {
  opacity: 0.618 !important;
}

.immersive-translate-target-translation-theme-italic {
  font-style: italic !important;
}

.immersive-translate-target-translation-theme-bold {
  font-weight: bold !important;
}

.immersive-translate-target-translation-block-wrapper-theme-paper {
  margin: 8px 0;
  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
  padding: 16px 32px;
  display: block;
}

.immersive-translate-target-translation-block-wrapper-theme-blockquote {
  border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
  padding-left: 12px !important;
  margin-top: 4px;
  margin-bottom: 4px;
  padding-top: 4px;
  padding-bottom: 4px;
  display: block;
}

.immersive-translate-target-translation-theme-mask-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
  filter: none !important;
}

[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}


/* opacity theme start */

.immersive-translate-target-translation-theme-opacity-inner {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: none !important;
}


.immersive-translate-target-translation-theme-mask-inner:hover {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
  filter: none !important;
}


[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
  filter: none !important;
}

/* opacity theme end */

/* vertical css , please remain it in the last one. */
.immersive-translate-target-translation-vertical-block-wrapper {
  margin: 0px 8px !important;
}

.immersive-translate-text {
  font-size: 15px !important;
}

.immersive-translate-error-toast {
  position: fixed;
  top: 5%;
  z-index: 99999999;
  left: 0;
  right: 0;
  margin: auto;
  max-width: 300px;
  padding: 16px;
  border-radius: 12px;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}

@media all and (min-width: 750px) {
  .immersive-translate-error-toast {
    max-width: 400px;
  }
}


.immersive-translate-clickable-button {
  cursor: pointer;
}

.immersive-translate-help-button {
  cursor: pointer;
}

.immersive-translate-loading-text:before {
  content: "...";
}


/* dark mode for loading */

@media only screen and (prefers-color-scheme: dark) {
  .immersive-translate-loading {
    border: 2px rgba(255, 255, 255, 0.25) solid !important;
    border-top: 2px rgba(255, 255, 255, 1) solid !important;
  }
}

.immersive-translate-error-wrapper {
  position: relative;
  display: inline-flex;
  padding: 6px;
  margin: 0 12px;
  white-space: nowrap;
  font-size: 0.9em;
}
[lang="zh-CN"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}
[lang="zh-TW"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}


.immersive-translate-tooltip {
  position: relative;
  display: inline-flex;
  /* little indicater to indicate it's hoverable */
}

.immersive-translate-tooltip-content {
  /* here's the magic */
  position: absolute;
  z-index: 100000000000;

  left: 50%;
  bottom: 0;
  transform: translate(-50%, 110%);
  line-height: 1;
  /* and add a small left margin */

  /* basic styles */
  width: max-content;
  max-width: 250px;
  word-wrap: break-word;
  white-space: pre-line;
  padding: 10px;
  border-radius: 10px;
  background: #000C;
  color: #fff;
  text-align: center;
  font-size: 14px;
  display: none;
  /* hide by default */
}

.immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip-content-table {
  left: unset !important;
  bottom: unset !important;
  transform: translate(-10%, 50%) !important;
}


.immersive-translate-tooltip:hover:before {
  display: block;
}



.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}
</style><style data-id="immersive-translate-user-custom-style">:root {

.immersive-translate-target-inner { font-family: inherit; }
}
</style><style data-id="immersive-translate-dynamic-injected-css">.immersive-translate-target-wrapper[dir='rtl'] {text-align: right;}
.immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {display:block;}
.immersive-translate-target-wrapper {word-break: break-word;}
</style></head><body data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>sd_journal_get_fd</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><script src="https://code.jquery.com/jquery-3.7.1.min.js"></script><script src="../nav.js"></script><style>
    a.headerlink {
      color: #c60f0f;
      font-size: 0.8em;
      padding: 0 4px 0 4px;
      text-decoration: none;
      visibility: hidden;
    }

    a.headerlink:hover {
      background-color: #c60f0f;
      color: white;
    }

    h1:hover > a.headerlink, h2:hover > a.headerlink, h3:hover > a.headerlink, dt:hover > a.headerlink {
      visibility: visible;
    }
  </style><a href="index.html" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">Index </a>·
  <a href="systemd.directives.html" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">Directives </a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">索引 · 指令</font></font></font><span style="float:right" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1">systemd 255</span><hr><div class="refentry" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><a name="sd_journal_get_fd" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"></a><div class="titlepage" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"></div><div class="refnamediv" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><h2 data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1">Name<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">名称</font></font></font></h2><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1">sd_journal_get_fd, sd_journal_get_events, sd_journal_get_timeout, sd_journal_process, sd_journal_wait, sd_journal_reliable_fd, SD_JOURNAL_NOP, SD_JOURNAL_APPEND, SD_JOURNAL_INVALIDATE — Journal change notification
    interface<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">sd_journal_get_fd、sd_journal_get_events、sd_journal_get_timeout、sd_journal_process、sd_journal_wait、sd_journal_reliable_fd、SD_JOURNAL_NOP、SD_JOURNAL_APPEND、SD_JOURNAL_INVALIDATE — 日志变更通知接口</font></font></font></p></div><div class="refsynopsisdiv" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><h2 data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1">Synopsis<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">概要</font></font></font></h2><div class="funcsynopsis"><pre class="funcsynopsisinfo">#include &lt;systemd/sd-journal.h&gt;</pre><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_journal_get_fd</b>(</code></td><td>sd_journal *<var class="pdparam">j</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_journal_get_events</b>(</code></td><td>sd_journal *<var class="pdparam">j</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_journal_get_timeout</b>(</code></td><td>sd_journal *<var class="pdparam">j</var>, </td></tr><tr><td>&nbsp;</td><td>uint64_t *<var class="pdparam">timeout_usec</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_journal_process</b>(</code></td><td>sd_journal *<var class="pdparam">j</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_journal_wait</b>(</code></td><td>sd_journal *<var class="pdparam">j</var>, </td></tr><tr><td>&nbsp;</td><td>uint64_t <var class="pdparam">timeout_usec</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_journal_reliable_fd</b>(</code></td><td>sd_journal *<var class="pdparam">j</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div></div></div><div class="refsect1" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><a name="id-1.5" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"></a><h2 id="Description" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1">Description<a class="headerlink" title="Permalink to this headline" href="#Description" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">描述</font></font></font></h2><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_fd()</code> returns a file
    descriptor that may be asynchronously polled in an external event
    loop and is signaled as soon as the journal changes, because new
    entries or files were added, rotation took place, or files have
    been deleted, and similar. The file descriptor is suitable for
    usage in
    <a href="https://man7.org/linux/man-pages/man2/poll.2.html" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><span class="citerefentry" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><span class="refentrytitle" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">poll</span>(2)</span></a>.
    Use <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_events()</code> for an events
    mask to watch for. The call takes one argument: the journal
    context object. Note that not all file systems are capable of
    generating the necessary events for wakeups from this file
    descriptor for changes to be noticed immediately. In particular
    network files systems do not generate suitable file change events
    in all cases. Cases like this can be detected with
    <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_reliable_fd()</code>, below.
    <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_timeout()</code> will ensure in these
    cases that wake-ups happen frequently enough for changes to be
    noticed, although with a certain latency.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_fd()</code> 返回一个文件描述符，可以在外部事件循环中异步轮询，并在日志发生变化时发出信号，因为添加了新条目或文件，进行了旋转，或者文件已被删除，等等。该文件描述符适用于在 poll(2) 中使用。使用 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_events()</code> 来指定要监视的事件掩码。该调用接受一个参数：日志上下文对象。请注意，并非所有文件系统都能生成必要的事件以便从该文件描述符中唤醒以立即注意到更改。特别是网络文件系统并非在所有情况下生成适当的文件更改事件。像这样的情况可以通过下面的 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_reliable_fd()</code> 检测。在这些情况下， <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_timeout()</code> 将确保唤醒频率足够高，以便及时注意到更改，尽管会有一定的延迟。</font></font></font></p><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_events()</code> will return the
    <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">poll()</code> mask to wait for. This function will
    return a combination of <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">POLLIN</code> and
    <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">POLLOUT</code> and similar to fill into the
    "<code class="literal" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">.events</code>" field of <code class="varname" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">struct
    pollfd</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_events()</code> 将返回等待的 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">poll()</code> 掩码。此函数将返回 <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">POLLIN</code> 和 <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">POLLOUT</code> 的组合，并类似于填充到 <code class="varname" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">struct
    pollfd</code> 的 " <code class="literal" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">.events</code> " 字段中。</font></font></font></p><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_timeout()</code> will return a
    timeout value for usage in <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">poll()</code>. This
    returns a value in microseconds since the epoch of
    <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">CLOCK_MONOTONIC</code> for timing out
    <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">poll()</code> in <code class="varname" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">timeout_usec</code>.
    See
    <a href="https://man7.org/linux/man-pages/man2/clock_gettime.2.html" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><span class="citerefentry" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><span class="refentrytitle" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">clock_gettime</span>(2)</span></a>
    for details about <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">CLOCK_MONOTONIC</code>. If there
    is no timeout to wait for, this will fill in <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">(uint64_t)
    -1</code> instead. Note that <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">poll()</code> takes
    a relative timeout in milliseconds rather than an absolute timeout
    in microseconds. To convert the absolute 'us' timeout into
    relative 'ms', use code like the following:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_timeout()</code> 将返回用于 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">poll()</code> 的超时值。这将返回自 <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">CLOCK_MONOTONIC</code> 时代以来以微秒为单位的值，用于在 <code class="varname" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">timeout_usec</code> 中计时 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">poll()</code> 的超时。有关 <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">CLOCK_MONOTONIC</code> 的详细信息，请参阅 clock_gettime(2)。如果没有要等待的超时，这将填充 <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">(uint64_t)
    -1</code> 。请注意， <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">poll()</code> 接受相对超时（毫秒）而不是绝对超时（微秒）。要将绝对的 'us' 超时转换为相对的 'ms'，请使用以下代码：</font></font></font></p><pre class="programlisting">uint64_t t;
int msec;
sd_journal_get_timeout(m, &amp;t);
if (t == (uint64_t) -1)
  msec = -1;
else {
  struct timespec ts;
  uint64_t n;
  clock_gettime(CLOCK_MONOTONIC, &amp;ts);
  n = (uint64_t) ts.tv_sec * 1000000 + ts.tv_nsec / 1000;
  msec = t &gt; n ? (int) ((t - n + 999) / 1000) : 0;
}</pre><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1">The code above does not do any error checking for brevity's
    sake. The calculated <code class="varname" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">msec</code> integer can be passed
    directly as <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">poll()</code>'s timeout
    parameter.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为简洁起见，上述代码未执行任何错误检查。计算出的 <code class="varname" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">msec</code> 整数可以直接作为 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">poll()</code> 的超时参数传递。</font></font></font></p><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1">After each <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">poll()</code> wake-up
    <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_process()</code> needs to be called to
    process events. This call will also indicate what kind of change
    has been detected (see below; note that spurious wake-ups are
    possible).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">每次 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">poll()</code> 唤醒后，需要调用 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_process()</code> 来处理事件。此调用还将指示检测到了何种更改（请参见下文；请注意可能会出现虚假唤醒）。</font></font></font></p><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1">A synchronous alternative for using
    <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_fd()</code>,
    <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_events()</code>,
    <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_timeout()</code> and
    <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_process()</code> is
    <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_wait()</code>. It will synchronously wait
    until the journal gets changed. The maximum time this call sleeps
    may be controlled with the <em class="parameter" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><code data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">timeout_usec</code></em>
    parameter. Pass <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">(uint64_t) -1</code> to wait
    indefinitely. Internally this call simply combines
    <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_fd()</code>,
    <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_events()</code>,
    <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_timeout()</code>,
    <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">poll()</code> and
    <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_process()</code> into one.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一个同步的替代方案，用于使用 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_fd()</code> ， <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_events()</code> ， <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_timeout()</code> 和 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_process()</code> 是 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_wait()</code> 。它将同步等待直到日志发生更改。此调用睡眠的最长时间可以通过 <code data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">timeout_usec</code> 参数控制。传递 <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">(uint64_t) -1</code> 以无限期等待。在内部，此调用简单地将 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_fd()</code> ， <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_events()</code> ， <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_timeout()</code> ， <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">poll()</code> 和 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_process()</code> 组合成一个。</font></font></font></p><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_reliable_fd()</code> may be used to check whether the wake-up events from
    the file descriptor returned by <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_fd()</code> are known to be quickly
    triggered. On certain file systems where file change events from the OS are not available (such as NFS)
    changes need to be polled for repeatedly, and hence are detected only with a considerable latency. This
    call will return a positive value if the journal changes are detected quickly and zero when they need to
    be polled for. Note that there is usually no need to invoke this function directly as
    <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_timeout()</code> will request appropriate timeouts anyway.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_reliable_fd()</code> 可用于检查由 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_fd()</code> 返回的文件描述符的唤醒事件是否已知会被快速触发。在某些文件系统中，操作系统不提供文件更改事件（例如 NFS），因此需要重复轮询更改，因此仅在具有相当大延迟时检测到。如果快速检测到日志更改，则此调用将返回正值，否则将返回零。请注意，通常无需直接调用此函数，因为 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_timeout()</code> 将自动请求适当的超时。</font></font></font></p><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1">Note that all of the above change notification interfaces do not report changes
    instantly. Latencies are introduced for multiple reasons: as mentioned certain storage backends require
    time-based polling, in other cases wake-ups are optimized by coalescing events, and the OS introduces
    additional IO/CPU scheduling latencies.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，上述所有更改通知接口并非立即报告更改。由于多种原因引入了延迟：如上所述，某些存储后端需要基于时间的轮询，在其他情况下，唤醒通过合并事件进行优化，操作系统引入了额外的 IO/CPU 调度延迟。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><a name="id-1.6" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"></a><h2 id="Return Value" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1">Return Value<a class="headerlink" title="Permalink to this headline" href="#Return%20Value" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">返回值</font></font></font></h2><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_fd()</code> returns a valid
    file descriptor on success or a negative errno-style error
    code.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_fd()</code> 在成功时返回有效的文件描述符，或者返回负的 errno 风格的错误代码。</font></font></font></p><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_events()</code> returns a
    combination of <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">POLLIN</code>,
    <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">POLLOUT</code> and suchlike on success or a negative
    errno-style error code.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_events()</code> 在成功时返回 <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">POLLIN</code> 、 <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">POLLOUT</code> 等组合，或者返回负的 errno 风格的错误代码。</font></font></font></p><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_reliable_fd()</code> returns a
    positive integer if the file descriptor returned by
    <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_fd()</code> will generate wake-ups
    immediately for all journal changes. Returns 0 if there might be a
    latency involved.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_fd()</code> 返回的文件描述符立即为所有日志更改生成唤醒，则 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_reliable_fd()</code> 返回正整数。如果可能涉及延迟，则返回 0。</font></font></font></p><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_process()</code> and <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_wait()</code> return a negative
    errno-style error code, or one of <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">SD_JOURNAL_NOP</code>, <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">SD_JOURNAL_APPEND</code> or
    <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">SD_JOURNAL_INVALIDATE</code> on success:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_process()</code> 和 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_wait()</code> 返回负的 errno 风格的错误代码，或者在成功时返回 <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">SD_JOURNAL_NOP</code> 、 <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">SD_JOURNAL_APPEND</code> 或 <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">SD_JOURNAL_INVALIDATE</code> 之一：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><li class="listitem" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1">If <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">SD_JOURNAL_NOP</code> is returned, the journal did not change since the last
      invocation.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果返回 <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">SD_JOURNAL_NOP</code> ，则自上次调用以来日志未更改。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1">If <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">SD_JOURNAL_APPEND</code> is returned, new entries have been appended to the end
      of the journal. In this case it is sufficient to simply continue reading at the previous end location of the
      journal, to read the newly added entries.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果返回 <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">SD_JOURNAL_APPEND</code> ，则新条目已附加到日志的末尾。在这种情况下，只需继续阅读日志的先前结束位置，以阅读新添加的条目。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1">If <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">SD_JOURNAL_INVALIDATE</code>, journal files were added to or removed from the
      set of journal files watched (e.g. due to rotation or vacuuming), and thus entries might have appeared or
      disappeared at arbitrary places in the log stream, possibly before or after the previous end of the log
      stream. If <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">SD_JOURNAL_INVALIDATE</code> is returned, live-view UIs that want to reflect on screen
      the precise state of the log data on disk should probably refresh their entire display (relative to the cursor of
      the log entry on the top of the screen). Programs only interested in a strictly sequential stream of log data may
      treat <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">SD_JOURNAL_INVALIDATE</code> the same way as <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">SD_JOURNAL_APPEND</code>, thus
      ignoring any changes to the log view earlier than the old end of the log stream.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果 <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">SD_JOURNAL_INVALIDATE</code> ，则已添加或删除了监视的日志文件集（例如，由于旋转或清理），因此条目可能已在日志流中的任意位置出现或消失，可能在日志流的先前或后面。如果返回 <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">SD_JOURNAL_INVALIDATE</code> ，希望在屏幕上反映磁盘上日志数据精确状态的实时视图 UI 可能应该刷新整个显示（相对于屏幕顶部的日志条目光标）。只对严格顺序的日志数据流感兴趣的程序可能会将 <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">SD_JOURNAL_INVALIDATE</code> 视为 <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">SD_JOURNAL_APPEND</code> ，因此忽略日志视图早于日志流的旧结束的任何更改。</font></font></font></p></li></ul></div></div><div class="refsect1" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><a name="id-1.7" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"></a><h2 id="Signal safety" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1">Signal safety<a class="headerlink" title="Permalink to this headline" href="#Signal%20safety" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">信号安全</font></font></font></h2><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1">In general, <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_fd()</code>, <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_events()</code>, and
    <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_timeout()</code> are <span class="emphasis" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><em data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">not</em></span> "async signal safe" in the meaning of
    <a href="https://man7.org/linux/man-pages/man7/signal-safety.7.html" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><span class="citerefentry" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><span class="refentrytitle" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">signal-safety</span>(7)</span></a>.
    Nevertheless, only the first call to any of those three functions performs unsafe operations, so subsequent calls
    <span class="emphasis" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><em data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">are</em></span> safe.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一般来说， <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_fd()</code> ， <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_events()</code> 和 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_timeout()</code> 在信号安全性的意义上不是"异步信号安全"。然而，这三个函数中只有第一次调用会执行不安全的操作，因此后续的调用是安全的。</font></font></font></p><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_process()</code> and <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_wait()</code> are not
    safe. <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_reliable_fd()</code> is safe.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_process()</code> 和 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_wait()</code> 不安全。 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_reliable_fd()</code> 是安全的。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><a name="id-1.8" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"></a><h2 id="Notes" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1">Notes<a class="headerlink" title="Permalink to this headline" href="#Notes" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">笔记 ¶</font></font></font></h2><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1"><a name="strict" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"></a>All functions listed here are thread-agnostic and only a single specific thread may operate on a
given object during its entire lifetime. It's safe to allocate multiple independent objects and use each from a
specific thread in parallel. However, it's not safe to allocate such an object in one thread, and operate or free it
from any other, even if locking is used to ensure these threads don't operate on it at the very same time.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这里列出的所有函数都与线程无关，只能有一个特定的线程在其整个生命周期内操作给定的对象。可以安全地分配多个独立的对象，并在特定线程中并行使用每个对象。然而，不能在一个线程中分配这样的对象，然后在任何其他线程中操作或释放它，即使使用锁定来确保这些线程不会在同一时间操作它。</font></font></font></p><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1"><a name="pkgconfig-text" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"></a>Functions described here are available as a shared
  library, which can be compiled against and linked to with the
  <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">libsystemd</code>&nbsp;<a href="http://linux.die.net/man/1/pkg-config" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><span class="citerefentry" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><span class="refentrytitle" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">pkg-config</span>(1)</span></a>
  file.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此处描述的函数可作为共享库使用，可以与 <code class="constant" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">libsystemd</code> pkg-config(1) 文件一起编译并链接。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><a name="id-1.9" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"></a><h2 id="Examples" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1">Examples<a class="headerlink" title="Permalink to this headline" href="#Examples" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例</font></font></font></h2><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1">Iterating through the journal, in a live view tracking all
    changes:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过日志迭代，在实时视图中跟踪所有更改：</font></font></font></p><pre class="programlisting">/* SPDX-License-Identifier: MIT-0 */

#include &lt;errno.h&gt;
#include &lt;stdio.h&gt;
#include &lt;systemd/sd-journal.h&gt;

int main(int argc, char *argv[]) {
  int r;
  sd_journal *j;
  r = sd_journal_open(&amp;j, SD_JOURNAL_LOCAL_ONLY);
  if (r &lt; 0) {
    errno = -r;
    fprintf(stderr, "Failed to open journal: %m\n");
    return 1;
  }
  for (;;)  {
    const void *d;
    size_t l;
    r = sd_journal_next(j);
    if (r &lt; 0) {
      errno = -r;
      fprintf(stderr, "Failed to iterate to next entry: %m\n");
      break;
    }
    if (r == 0) {
      /* Reached the end, let's wait for changes, and try again */
      r = sd_journal_wait(j, (uint64_t) -1);
      if (r &lt; 0) {
        errno = -r;
        fprintf(stderr, "Failed to wait for changes: %m\n");
        break;
      }
      continue;
    }
    r = sd_journal_get_data(j, "MESSAGE", &amp;d, &amp;l);
    if (r &lt; 0) {
      errno = -r;
      fprintf(stderr, "Failed to read message field: %m\n");
      continue;
    }
    printf("%.*s\n", (int) l, (const char*) d);
  }
  sd_journal_close(j);
  return 0;
}
</pre><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1">Waiting with <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">poll()</code> (this
    example lacks all error checking for the sake of
    simplicity):<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">等待 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">poll()</code> （为简单起见，此示例缺少所有错误检查）：</font></font></font></p><pre class="programlisting">/* SPDX-License-Identifier: MIT-0 */

#include &lt;poll.h&gt;
#include &lt;time.h&gt;
#include &lt;systemd/sd-journal.h&gt;

int wait_for_changes(sd_journal *j) {
  uint64_t t;
  int msec;
  struct pollfd pollfd;

  sd_journal_get_timeout(j, &amp;t);
  if (t == (uint64_t) -1)
    msec = -1;
  else {
    struct timespec ts;
    uint64_t n;
    clock_gettime(CLOCK_MONOTONIC, &amp;ts);
    n = (uint64_t) ts.tv_sec * 1000000 + ts.tv_nsec / 1000;
    msec = t &gt; n ? (int) ((t - n + 999) / 1000) : 0;
  }

  pollfd.fd = sd_journal_get_fd(j);
  pollfd.events = sd_journal_get_events(j);
  poll(&amp;pollfd, 1, msec);
  return sd_journal_process(j);
}
</pre></div><div class="refsect1" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><a name="id-1.10" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"></a><h2 id="History" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1">History<a class="headerlink" title="Permalink to this headline" href="#History" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">历史 ¶</font></font></font></h2><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_fd()</code>,
    <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_process()</code>, and
    <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_wait()</code> were added in version 187.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_fd()</code> ， <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_process()</code> ，和 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_wait()</code> 在版本 187 中添加。</font></font></font></p><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_reliable_fd()</code> was added in version 196.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_reliable_fd()</code> 在版本 196 中添加。</font></font></font></p><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_events()</code> and
    <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_timeout()</code> were added in version 201.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_events()</code> 和 <code class="function" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_get_timeout()</code> 在版本 201 中添加。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><a name="id-1.11" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"></a><h2 id="See Also" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1">See Also<a class="headerlink" title="Permalink to this headline" href="#See%20Also" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">另请参阅 ¶</font></font></font></h2><p data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6" data-immersive-translate-paragraph="1">
      <a href="systemd.html#" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><span class="citerefentry" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><span class="refentrytitle" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">systemd</span>(1)</span></a>,
      <a href="sd-journal.html#" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><span class="citerefentry" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><span class="refentrytitle" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd-journal</span>(3)</span></a>,
      <a href="sd_journal_open.html#" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><span class="citerefentry" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><span class="refentrytitle" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_open</span>(3)</span></a>,
      <a href="sd_journal_next.html#" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><span class="citerefentry" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><span class="refentrytitle" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">sd_journal_next</span>(3)</span></a>,
      <a href="https://man7.org/linux/man-pages/man2/poll.2.html" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><span class="citerefentry" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><span class="refentrytitle" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">poll</span>(2)</span></a>,
      <a href="https://man7.org/linux/man-pages/man2/clock_gettime.2.html" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><span class="citerefentry" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6"><span class="refentrytitle" data-immersive-translate-walked="82e0a761-ff7f-4d62-9e74-d08820c525f6">clock_gettime</span>(2)</span></a>
    </p></div></div>
</body></html>