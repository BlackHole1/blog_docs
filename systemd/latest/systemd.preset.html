<html><head><style data-id="immersive-translate-default-injected-css">:root {
  --immersive-translate-theme-underline-borderColor: #72ece9;
  --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
  --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
  --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
  --immersive-translate-theme-highlight-backgroundColor: #ffff00;
  --immersive-translate-theme-dashed-borderColor: #59c1bd;
  --immersive-translate-theme-blockquote-borderColor: #cc3355;
  --immersive-translate-theme-thinDashed-borderColor: #ff374f;
  --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
  --immersive-translate-theme-dashedBorder-borderRadius: 0;
  --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
  --immersive-translate-theme-solidBorder-borderRadius: 0;
  --immersive-translate-theme-dotted-borderColor: #94a3b8;
  --immersive-translate-theme-wavy-borderColor: #72ece9;
  --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
  --immersive-translate-theme-grey-textColor: #2f4f4f;
  --immersive-translate-theme-marker-backgroundColor: #fbda41;
  --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
  --immersive-translate-theme-marker2-backgroundColor: #ffff00;
  --immersive-translate-theme-opacity-opacity: 10;
}

.immersive-translate-target-translation-pre-whitespace {
  white-space: pre-wrap !important;
}

.immersive-translate-pdf-target-container {
  position: absolute;
  background-color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
    sans-serif;
  top: 0;
  width: 600px;
  height: 100%;
  z-index: 2;
  line-height: 1.3;
  font-size: 16px;
}
.immersive-translate-target-wrapper[dir='rtl'] {
  text-align: right;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
  color: rgb(0, 0, 0);
  white-space: normal;
  position: absolute;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
  color: inherit;
  white-space: inherit;
  position: unset;
}

.immersive-translate-state-dual>br {
  display: none;
}

.immersive-translate-target-translation-block-wrapper {
  margin: 8px 0 !important;
  display: inline-block;
}

.immersive-translate-target-translation-pdf-block-wrapper {
  margin: 0 !important;
  display: block;
}

.immersive-translate-target-translation-theme-grey-inner {
  color: var(--immersive-translate-theme-grey-textColor);
}


.immersive-translate-target-translation-theme-underline-inner {
  border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
}

.immersive-translate-target-translation-theme-nativeUnderline-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
}

.immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-theme-nativeDashed-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
  text-decoration-style: dashed !important;
}

.immersive-translate-target-translation-theme-thinDashed-inner {
  border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
}

.immersive-translate-target-translation-theme-dotted-inner {
  background-image: linear-gradient(to right,
      var(--immersive-translate-theme-dotted-borderColor) 30%,
      rgba(255, 255, 255, 0) 0%);
  background-position: bottom;
  background-size: 5px 1px;
  background-repeat: repeat-x;
  padding-bottom: 3px;
}

.immersive-translate-target-translation-theme-nativeDotted-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
  text-decoration-style: dotted !important;
}

.immersive-translate-target-translation-theme-wavy-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
  text-decoration-style: wavy !important;
}

.immersive-translate-target-translation-theme-dashed-inner {
  background: linear-gradient(to right,
      var(--immersive-translate-theme-dashed-borderColor) 0%,
      var(--immersive-translate-theme-dashed-borderColor) 50%,
      transparent 50%,
      transparent 100%) repeat-x left bottom;
  background-size: 8px 2px;
  padding-bottom: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
  content: "";
  display: block;
  max-width: 80px;
  width: 10%;
  border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  padding-top: 8px;
}

.immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
  content: "";
  border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  max-height: 16px;
  height: 16px;
  padding-left: 8px;
}

.immersive-translate-target-translation-theme-highlight-inner {
  background: var(--immersive-translate-theme-highlight-backgroundColor);
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-block-wrapper-theme-marker {
  line-height: 1.5em;
}

.immersive-translate-target-translation-theme-marker2-inner {
  font-weight: bold;
  text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
    16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
    2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
    -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
}

.immersive-translate-target-translation-theme-marker-inner {
  /* TODO: add more texture */
  background: linear-gradient(to right,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-theme-weakening {
  opacity: 0.618 !important;
}

.immersive-translate-target-translation-theme-italic {
  font-style: italic !important;
}

.immersive-translate-target-translation-theme-bold {
  font-weight: bold !important;
}

.immersive-translate-target-translation-block-wrapper-theme-paper {
  margin: 8px 0;
  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
  padding: 16px 32px;
  display: block;
}

.immersive-translate-target-translation-block-wrapper-theme-blockquote {
  border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
  padding-left: 12px !important;
  margin-top: 4px;
  margin-bottom: 4px;
  padding-top: 4px;
  padding-bottom: 4px;
  display: block;
}

.immersive-translate-target-translation-theme-mask-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
  filter: none !important;
}

[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}


/* opacity theme start */

.immersive-translate-target-translation-theme-opacity-inner {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: none !important;
}


.immersive-translate-target-translation-theme-mask-inner:hover {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
  filter: none !important;
}


[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
  filter: none !important;
}

/* opacity theme end */

/* vertical css , please remain it in the last one. */
.immersive-translate-target-translation-vertical-block-wrapper {
  margin: 0px 8px !important;
}

.immersive-translate-text {
  font-size: 15px !important;
}

.immersive-translate-error-toast {
  position: fixed;
  top: 5%;
  z-index: 99999999;
  left: 0;
  right: 0;
  margin: auto;
  max-width: 300px;
  padding: 16px;
  border-radius: 12px;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}

@media all and (min-width: 750px) {
  .immersive-translate-error-toast {
    max-width: 400px;
  }
}


.immersive-translate-clickable-button {
  cursor: pointer;
}

.immersive-translate-help-button {
  cursor: pointer;
}

.immersive-translate-loading-text:before {
  content: "...";
}


/* dark mode for loading */

@media only screen and (prefers-color-scheme: dark) {
  .immersive-translate-loading {
    border: 2px rgba(255, 255, 255, 0.25) solid !important;
    border-top: 2px rgba(255, 255, 255, 1) solid !important;
  }
}

.immersive-translate-error-wrapper {
  position: relative;
  display: inline-flex;
  padding: 6px;
  margin: 0 12px;
  white-space: nowrap;
  font-size: 0.9em;
}
[lang="zh-CN"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}
[lang="zh-TW"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}


.immersive-translate-tooltip {
  position: relative;
  display: inline-flex;
  /* little indicater to indicate it's hoverable */
}

.immersive-translate-tooltip-content {
  /* here's the magic */
  position: absolute;
  z-index: 100000000000;

  left: 50%;
  bottom: 0;
  transform: translate(-50%, 110%);
  line-height: 1;
  /* and add a small left margin */

  /* basic styles */
  width: max-content;
  max-width: 250px;
  word-wrap: break-word;
  white-space: pre-line;
  padding: 10px;
  border-radius: 10px;
  background: #000C;
  color: #fff;
  text-align: center;
  font-size: 14px;
  display: none;
  /* hide by default */
}

.immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip-content-table {
  left: unset !important;
  bottom: unset !important;
  transform: translate(-10%, 50%) !important;
}


.immersive-translate-tooltip:hover:before {
  display: block;
}



.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}
</style><style data-id="immersive-translate-user-custom-style">:root {

.immersive-translate-target-inner { font-family: inherit; }
}
</style><style data-id="immersive-translate-dynamic-injected-css">.immersive-translate-target-wrapper[dir='rtl'] {text-align: right;}
.immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {display:block;}
.immersive-translate-target-wrapper {word-break: break-word;}
</style></head><body data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>systemd.preset</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><script src="https://code.jquery.com/jquery-3.7.1.min.js"></script><script src="../nav.js"></script><style>
    a.headerlink {
      color: #c60f0f;
      font-size: 0.8em;
      padding: 0 4px 0 4px;
      text-decoration: none;
      visibility: hidden;
    }

    a.headerlink:hover {
      background-color: #c60f0f;
      color: white;
    }

    h1:hover > a.headerlink, h2:hover > a.headerlink, h3:hover > a.headerlink, dt:hover > a.headerlink {
      visibility: visible;
    }
  </style><a href="index.html" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">Index </a>·
  <a href="systemd.directives.html" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">Directives </a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">索引 · 指令</font></font></font><span style="float:right" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">systemd 255</span><hr><div class="refentry" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><a name="systemd.preset" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"></a><div class="titlepage" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"></div><div class="refnamediv" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><h2 data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">Name<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">名称</font></font></font></h2><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">systemd.preset — Service enablement presets<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">systemd.preset — 服务启用预设</font></font></font></p></div><div class="refsynopsisdiv" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><h2 data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">Synopsis<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">简介</font></font></font></h2><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/etc/systemd/system-preset/*.preset</code></p><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/run/systemd/system-preset/*.preset</code></p><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/usr/lib/systemd/system-preset/*.preset</code></p><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/etc/systemd/user-preset/*.preset</code></p><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/run/systemd/user-preset/*.preset</code></p><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/usr/lib/systemd/user-preset/*.preset</code></p></div><div class="refsect1" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><a name="id-1.5" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"></a><h2 id="Description" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">Description<a class="headerlink" title="Permalink to this headline" href="#Description" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">描述</font></font></font></h2><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">Preset files may be used to encode policy which units shall be enabled by default and which ones
    shall be disabled. They are read by <span class="command" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><strong data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">systemctl preset</strong></span> which uses this information to
    enable or disable a unit. Depending on that policy, <span class="command" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><strong data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">systemctl preset</strong></span> is identical to
    <span class="command" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><strong data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">systemctl enable</strong></span> or <span class="command" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><strong data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">systemctl disable</strong></span>.

    <span class="command" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><strong data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">systemctl preset</strong></span> is used by the post install scriptlets of rpm packages (or other OS
    package formats), to enable/disable specific units by default on package installation, enforcing
    distribution, spin or administrator preset policy. This allows choosing a certain set of units to be
    enabled/disabled even before installing the actual package. For more information, see
    <a href="systemctl.html#" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><span class="citerefentry" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><span class="refentrytitle" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">systemctl</span>(1)</span></a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">预设文件可用于编码策略，指定哪些单元默认启用，哪些单元默认禁用。它们由 systemctl preset 读取，该命令使用此信息来启用或禁用一个单元。根据该策略，systemctl preset 与 systemctl enable 或 systemctl disable 相同。systemctl preset 被 rpm 包（或其他 OS 包格式）的安装后脚本使用，以在软件包安装时默认启用/禁用特定单元，强制执行发行版、衍生版或管理员预设策略。这允许在安装实际软件包之前选择一组特定的单元进行启用/禁用。有关更多信息，请参阅 systemctl(1)。</font></font></font></p><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">It is not recommended to ship preset files within the respective software packages implementing the
    units, but rather centralize them in a distribution or spin default policy, which can be amended by
    administrator policy, see below.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">不建议将预设文件与实现单元的各自软件包一起发布，而是将它们集中在发行版或衍生版的默认策略中，可以通过管理员策略进行修改，详见下文。</font></font></font></p><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">If no preset files exist, preset operations will enable all units that are installed by default. If
    this is not desired and all units shall rather be disabled, it is necessary to ship a preset file with a
    single, catchall "<code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">disable *</code>" line. (See example 1, below.)<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果没有预设文件存在，则预设操作将启用所有默认安装的单元。如果不希望这样，并且所有单元应该被禁用，那么需要使用一个带有单个通用“ <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">disable *</code> ”行的预设文件。 （请参见下面的示例 1。）</font></font></font></p><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">When the machine is booted for the first time,
    <a href="systemd.html#" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><span class="citerefentry" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><span class="refentrytitle" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">systemd</span>(1)</span></a> will
    enable/disable all units according to preset policy, similarly to <span class="command" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><strong data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">systemctl
    preset-all</strong></span>. Also see "First Boot Semantics" in
    <a href="machine-id.html#" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><span class="citerefentry" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><span class="refentrytitle" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">machine-id</span>(5)</span></a>.
    <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当机器首次启动时，systemd(1)将根据预设策略启用/禁用所有单元，类似于 systemctl preset-all。还请参阅 machine-id(5)中的“首次启动语义”。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><a name="id-1.6" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"></a><h2 id="Preset File Format" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">Preset File Format<a class="headerlink" title="Permalink to this headline" href="#Preset%20File%20Format" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">预设文件格式</font></font></font></h2><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">The preset files contain a list of directives, one per line. Empty lines and lines whose first
    non-whitespace character is "<code class="literal" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">#</code>" or "<code class="literal" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">;</code>" are ignored.  Each directive
    consists of one of the words "<code class="literal" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">enable</code>", "<code class="literal" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">disable</code>", or
    "<code class="literal" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">ignore</code>", followed by whitespace and a unit name. The unit name may contain shell-style
    wildcards.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">预设文件包含一系列指令，每行一个。空行和第一个非空格字符为 " <code class="literal" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">#</code> " 或 " <code class="literal" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">;</code> " 的行将被忽略。每个指令由 " <code class="literal" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">enable</code> "、" <code class="literal" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">disable</code> " 或 " <code class="literal" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">ignore</code> " 中的一个词组成，后面跟着空格和一个单位名称。单位名称可以包含类似 shell 风格的通配符。</font></font></font></p><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">For the enable directive for template units, one or more instance names may be specified as a
    space-separated list after the unit name. In this case, those instances will be enabled instead of the
    instance specified via DefaultInstance= in the unit.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于模板单位的启用指令，可以在单位名称后面以空格分隔的列表形式指定一个或多个实例名称。在这种情况下，这些实例将被启用，而不是通过单位中的 DefaultInstance= 指定的实例。</font></font></font></p><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">Presets must refer to the "real" unit file, and not to any aliases. See
    <a href="systemd.unit.html#" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><span class="citerefentry" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><span class="refentrytitle" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">systemd.unit</span>(5)</span></a>
    for a description of unit aliasing.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">预设必须引用“真实”的单位文件，而不是任何别名。有关单位别名的描述，请参阅 systemd.unit(5)。</font></font></font></p><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">Three different directives are understood: "<code class="literal" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">enable</code>" may be used to enable units by
    default, "<code class="literal" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">disable</code>" to disable units by default, and "<code class="literal" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">ignore</code>" to ignore
    units and leave existing configuration intact.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">三种不同的指令被理解为： " <code class="literal" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">enable</code> " 可以用于默认启用单位， " <code class="literal" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">disable</code> " 可以用于默认禁用单位， " <code class="literal" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">ignore</code> " 可以用于忽略单位并保留现有配置不变。</font></font></font></p><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">If multiple lines apply to a unit name, the first matching
    one takes precedence over all others.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果多行适用于一个单位名称，则第一个匹配的行优先于其他所有行。</font></font></font></p><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">Each preset file shall be named in the style of
    <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">&lt;priority&gt;-&lt;policy-name&gt;.preset</code>. Files
    in <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/etc/</code> override files with the same name in
    <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/usr/lib/</code> and <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/run/</code>.
    Files in <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/run/</code> override files with the same
    name in <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/usr/lib/</code>. Packages should install
    their preset files in <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/usr/lib/</code>. Files in
    <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/etc/</code> are reserved for the local
    administrator, who may use this logic to override the preset files
    installed by vendor packages. All preset files are sorted by their
    filename in lexicographic order, regardless of which of the
    directories they reside in. If multiple files specify the same
    unit name, the entry in the file with the lexicographically
    earliest name will be applied. It is recommended to prefix all
    filenames with a two-digit number and a dash, to simplify the
    ordering of the files.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">每个预设文件应以 <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">&lt;priority&gt;-&lt;policy-name&gt;.preset</code> 的样式命名。 <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/etc/</code> 中的文件会覆盖 <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/usr/lib/</code> 和 <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/run/</code> 中同名的文件。 <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/run/</code> 中的文件会覆盖 <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/usr/lib/</code> 中同名的文件。软件包应该将它们的预设文件安装在 <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/usr/lib/</code> 中。 <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/etc/</code> 中的文件为本地管理员保留，管理员可以使用此逻辑来覆盖供应商软件包安装的预设文件。所有预设文件都按照它们的文件名按字典顺序排序，无论它们位于哪个目录中。如果多个文件指定相同的单位名称，则将应用具有字典顺序最早名称的文件中的条目。建议所有文件名都以两位数字和破折号开头，以简化文件的排序。</font></font></font></p><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">If the administrator wants to disable a preset file supplied
    by the vendor, the recommended way is to place a symlink to
    <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/dev/null</code> in
    <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/etc/systemd/system-preset/</code> bearing the same
    filename.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果管理员想要禁用供应商提供的预设文件，推荐的方法是在 <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/etc/systemd/system-preset/</code> 中放置一个指向 <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">/dev/null</code> 的符号链接，其文件名相同。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><a name="id-1.7" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"></a><h2 id="Examples" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">Examples<a class="headerlink" title="Permalink to this headline" href="#Examples" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 ¶</font></font></font></h2><div class="example" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><a name="id-1.7.2" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"></a><p class="title" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><b data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">Example&nbsp;1.&nbsp;Default to off<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 1. 默认关闭</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><pre class="programlisting"># /usr/lib/systemd/system-preset/99-default.preset

disable *</pre></div></div><br class="example-break" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">This disables all units. Due to the filename prefix
    "<code class="literal" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">99-</code>", it will be read last and hence can easily
    be overridden by spin or administrator preset policy.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这会禁用所有单元。由于文件名前缀为 " <code class="literal" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">99-</code> "，它将被最后读取，因此可以很容易地被 spin 或管理员预设策略覆盖。</font></font></font></p><div class="example" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><a name="id-1.7.4" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"></a><p class="title" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><b data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">Example&nbsp;2.&nbsp;Enable multiple template instances<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 2. 启用多个模板实例</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><pre class="programlisting"># /usr/lib/systemd/system-preset/80-dirsrv.preset

enable dirsrv@.service foo bar baz</pre></div></div><br class="example-break" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">This enables all three of <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">dirsrv@foo.service</code>,
    <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">dirsrv@bar.service</code> and <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">dirsrv@baz.service</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这将启用 <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">dirsrv@foo.service</code> ， <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">dirsrv@bar.service</code> 和 <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">dirsrv@baz.service</code> 的所有三个。</font></font></font></p><div class="example" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><a name="id-1.7.6" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"></a><p class="title" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><b data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">Example&nbsp;3.&nbsp;A GNOME spin<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 3. 一个 GNOME 版本</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><pre class="programlisting"># /usr/lib/systemd/system-preset/50-gnome.preset

enable gdm.service
enable colord.service
enable accounts-daemon.service
enable avahi-daemon.*</pre></div></div><br class="example-break" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">This enables the three mentioned units, plus all
    <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">avahi-daemon</code> regardless of which unit type. A
    file like this could be useful for inclusion in a GNOME spin of a
    distribution. It will ensure that the units necessary for GNOME
    are properly enabled as they are installed. It leaves all other
    units untouched, and subject to other (later) preset files, for
    example like the one from the first example above.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这将启用三个提到的单元，以及所有 <code class="filename" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">avahi-daemon</code> ，无论单元类型如何。像这样的文件可能对于包含在发行版的 GNOME spin 中很有用。它将确保为 GNOME 所需的单元在安装时正确启用。它将保持所有其他单元不变，并受其他（稍后的）预设文件的影响，例如上面第一个示例中的文件。</font></font></font></p><div class="example" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><a name="id-1.7.8" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"></a><p class="title" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><b data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">Example&nbsp;4.&nbsp;Administrator policy<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 4. 管理员策略</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><pre class="programlisting"># /etc/systemd/system-preset/00-lennart.preset

enable httpd.service
enable sshd.service
enable postfix.service
disable *</pre></div></div><br class="example-break" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">This enables three specific services and disables all
    others. This is useful for administrators to specifically select
    the units to enable, and disable all others. Due to the filename
    prefix "<code class="literal" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">00-</code>" it will be read early and
    override all other preset policy files.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这将启用三个特定服务并禁用所有其他服务。这对于管理员来说很有用，可以专门选择要启用的单元，并禁用所有其他单元。由于文件名前缀 " <code class="literal" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">00-</code> "，它将被早期读取并覆盖所有其他预设策略文件。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><a name="id-1.8" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"></a><h2 id="Motivation for the preset logic" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">Motivation for the preset logic<a class="headerlink" title="Permalink to this headline" href="#Motivation%20for%20the%20preset%20logic" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">预设逻辑的动机 ¶</font></font></font></h2><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">Different distributions have different policies on which services shall be enabled by default when
    the package they are shipped in is installed. On Fedora all services stay off by default, so that
    installing a package will not cause a service to be enabled (with some exceptions). On Debian all
    services are immediately enabled by default, so that installing a package will cause its services to be
    enabled right-away.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">不同的发行版在安装软件包时默认启用哪些服务方面有不同的政策。在 Fedora 上，默认情况下所有服务都是关闭的，因此安装软件包不会导致服务被启用（有一些例外情况）。在 Debian 上，默认情况下所有服务都会立即启用，因此安装软件包将立即启用其服务。</font></font></font></p><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">Even within a single distribution, different spins (flavours, remixes, whatever you might want to
    call them) of a distribution also have different policies on what services to enable, and what services
    to leave off. For example, Fedora Workstation will enable <span class="command" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><strong data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">gdm</strong></span> as display manager by
    default, while the Fedora KDE spin will enable <span class="command" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><strong data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">sddm</strong></span> instead.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">即使在同一个发行版中，不同的衍生版本（风格、混搭版本，无论你想如何称呼它们）也有不同的政策，关于启用哪些服务，留下哪些服务。例如，Fedora Workstation 默认会启用 gdm 作为显示管理器，而 Fedora KDE 衍生版本会启用 sddm。</font></font></font></p><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">Different sites might also have different policies what to turn on by default and what to turn
    off. For example, one administrator would prefer to enforce the policy of "<span class="command" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><strong data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">sshd</strong></span> should
    be always on, but everything else off", while another one might say "<span class="command" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><strong data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">snmpd</strong></span> always on,
    and for everything else use the distribution policy defaults".<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">不同的站点可能也有不同的政策，关于默认启用和默认禁用哪些服务。例如，一个管理员可能更喜欢执行“sshd 应始终启用，但其他所有服务应禁用”的政策，而另一个管理员可能会说“snmpd 始终启用，其他服务使用发行版默认政策”。</font></font></font></p><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">Traditionally, policy about which services shall be enabled were implemented in each package
    individually. This made it cumbersome to implement different policies per spin or per site, or to create
    software packages that do the right thing on more than one distribution. The enablement mechanism was
    also encoding the enablement policy.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">传统上，关于启用哪些服务的政策是在每个软件包中单独实现的。这使得根据不同的发行版或站点实施不同的政策，或者创建能够在多个发行版上正确运行的软件包变得繁琐。启用机制也在编码启用政策。</font></font></font></p><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">The preset mechanism allows clean separation of the enablement mechanism (inside the package
    scriptlets, by invoking <span class="command" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><strong data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">systemctl preset</strong></span>) and enablement policy (centralized in the
    preset files), and lifts the configuration out of individual packages. Preset files may be written for
    specific distributions, for specific spins or for specific sites, in order to enforce different policies
    as needed. It is recommended to apply the policy encoded in preset files in package installation
    scriptlets.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">预设机制允许清晰地分离启用机制（在软件包脚本中，通过调用 systemctl preset）和启用政策（集中在预设文件中），并将配置从各个软件包中移出。预设文件可以针对特定的发行版、特定的发行版分支或特定的站点编写，以根据需要执行不同的政策。建议在软件包安装脚本中应用预设文件中编码的政策。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><a name="id-1.9" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"></a><h2 id="See Also" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">See Also<a class="headerlink" title="Permalink to this headline" href="#See%20Also" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">参见 ¶</font></font></font></h2><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">
      <a href="systemd.html#" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><span class="citerefentry" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><span class="refentrytitle" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">systemd</span>(1)</span></a>,
      <a href="systemctl.html#" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><span class="citerefentry" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><span class="refentrytitle" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">systemctl</span>(1)</span></a>,
      <a href="systemd-delta.html#" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><span class="citerefentry" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><span class="refentrytitle" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">systemd-delta</span>(1)</span></a>
    </p><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1"><a href="daemon.html#" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><span class="citerefentry" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18"><span class="refentrytitle" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">daemon</span>(7)</span></a>
    has a discussion of packaging scriptlets.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">daemon(7)讨论了打包脚本。</font></font></font></p><p data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18" data-immersive-translate-paragraph="1">Fedora page introducing the use of presets:
    <a class="ulink" href="https://fedoraproject.org/wiki/Features/PackagePresets" target="_top" data-immersive-translate-walked="769a784f-017d-486c-a8f4-6a74fb0c8c18">Features/PackagePresets</a>.
    <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Fedora 页面介绍了预设的使用：Features/PackagePresets.</font></font></font></p></div></div>
</body></html>