<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>sd_hwdb_new</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><script src="https://code.jquery.com/jquery-3.7.1.min.js"></script><script src="../nav.js"></script><style>
    a.headerlink {
      color: #c60f0f;
      font-size: 0.8em;
      padding: 0 4px 0 4px;
      text-decoration: none;
      visibility: hidden;
    }

    a.headerlink:hover {
      background-color: #c60f0f;
      color: white;
    }

    h1:hover > a.headerlink, h2:hover > a.headerlink, h3:hover > a.headerlink, dt:hover > a.headerlink {
      visibility: visible;
    }
  </style><a href="index.html">Index </a>·
  <a href="systemd.directives.html">Directives </a><span style="float:right">systemd 255</span><hr><div class="refentry"><a name="sd_hwdb_new"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>sd_hwdb_new, sd_hwdb_new_from_path, sd_hwdb_ref, sd_hwdb_unref — Create a new hwdb object and create or destroy references to it</p></div><div class="refsynopsisdiv"><h2>Synopsis</h2><div class="funcsynopsis"><pre class="funcsynopsisinfo">#include &lt;systemd/sd-hwdb.h&gt;</pre><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tr><td><code class="funcdef">int <b class="fsfunc">sd_hwdb_new</b>(</code></td><td>sd_hwdb **<var class="pdparam">hwdb</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tr><td><code class="funcdef">int <b class="fsfunc">sd_hwdb_new_from_path</b>(</code></td><td>const char *<var class="pdparam">path</var>, </td></tr><tr><td> </td><td>sd_hwdb **<var class="pdparam">hwdb</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tr><td><code class="funcdef">sd_hwdb* <b class="fsfunc">sd_hwdb_ref</b>(</code></td><td>sd_hwdb *<var class="pdparam">hwdb</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tr><td><code class="funcdef">sd_hwdb* <b class="fsfunc">sd_hwdb_unref</b>(</code></td><td>sd_hwdb *<var class="pdparam">hwdb</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer"> </div></div></div><div class="refsect1"><a name="id-1.5"></a><h2 id="Description">Description<a class="headerlink" title="Permalink to this headline" href="#Description">¶</a></h2><p><code class="function">sd_hwdb_new()</code> creates a new hwdb object to access the binary hwdb
    database. Upon initialization, the file containing the binary representation of the hardware database is
    located and opened. The new object is returned in <em class="parameter"><code>hwdb</code></em>.</p><p><code class="function">sd_hwdb_new_from_path()</code> may be used to specify the path from which the binary
    hardware database should be opened.</p><p>The <em class="parameter"><code>hwdb</code></em> object is reference counted. <code class="function">sd_hwdb_ref()</code> and
    <code class="function">sd_hwdb_unref()</code> may be used to get a new reference or destroy an existing reference
    to an object. The caller must dispose of the reference acquired with <code class="function">sd_hwdb_new()</code>
    by calling <code class="function">sd_hwdb_unref()</code> when done with the object.</p><p>Use
    <a href="sd_hwdb_seek.html#"><span class="citerefentry"><span class="refentrytitle">sd_hwdb_seek</span>(3)</span></a>,
    <a href="sd_hwdb_get.html#"><span class="citerefentry"><span class="refentrytitle">sd_hwdb_get</span>(3)</span></a>, and
    <a href="sd_hwdb_enumerate.html#"><span class="citerefentry"><span class="refentrytitle">sd_hwdb_enumerate</span>(3)</span></a> to
    access entries.</p></div><div class="refsect1"><a name="id-1.6"></a><h2 id="Return Value">Return Value<a class="headerlink" title="Permalink to this headline" href="#Return%20Value">¶</a></h2><p>On success, <code class="function">sd_hwdb_new()</code> and <code class="function">sd_hwdb_new_from_path()</code>
    return a non-negative integer. On failure, a negative errno-style error code is returned.</p><p><code class="function">sd_hwdb_ref()</code> always returns the argument.
    </p><p><code class="function">sd_hwdb_unref()</code> always returns <code class="constant">NULL</code>.
    </p><div class="refsect2"><a name="id-1.6.5"></a><h3 id="Errors">Errors<a class="headerlink" title="Permalink to this headline" href="#Errors">¶</a></h3><p>Returned errors may indicate the following problems:</p><div class="variablelist"><dl class="variablelist"><dt id="-ENOENT"><span class="term"><code class="constant">-ENOENT</code></span><a class="headerlink" title="Permalink to this term" href="#-ENOENT">¶</a></dt><dd><p>The binary hardware database file could not be located. See
          <a href="systemd-hwdb.html#"><span class="citerefentry"><span class="refentrytitle">systemd-hwdb</span>(8)</span></a>
          for more information.</p><p><a name="v246"></a>Added in version 246.</p></dd><dt id="-EINVAL"><span class="term"><code class="constant">-EINVAL</code></span><a class="headerlink" title="Permalink to this term" href="#-EINVAL">¶</a></dt><dd><p>The located binary hardware database file is in an incompatible format.
          </p><p><a name="v246"></a>Added in version 246.</p></dd><dt id="-ENOMEM"><span class="term"><code class="constant">-ENOMEM</code></span><a class="headerlink" title="Permalink to this term" href="#-ENOMEM">¶</a></dt><dd><p>Memory allocation failed.</p><p><a name="v246"></a>Added in version 246.</p></dd></dl></div></div></div><div class="refsect1"><a name="id-1.7"></a><h2 id="Notes">Notes<a class="headerlink" title="Permalink to this headline" href="#Notes">¶</a></h2><p><a name="pkgconfig-text"></a>Functions described here are available as a shared
  library, which can be compiled against and linked to with the
  <code class="constant">libsystemd</code> <a href="http://linux.die.net/man/1/pkg-config"><span class="citerefentry"><span class="refentrytitle">pkg-config</span>(1)</span></a>
  file.</p><p><a name="getenv"></a>The code described here uses
<a href="https://man7.org/linux/man-pages/man3/getenv.3.html"><span class="citerefentry"><span class="refentrytitle">getenv</span>(3)</span></a>,
which is declared to be not multi-thread-safe. This means that the code calling the functions described
here must not call
<a href="https://man7.org/linux/man-pages/man3/setenv.3.html"><span class="citerefentry"><span class="refentrytitle">setenv</span>(3)</span></a>
from a parallel thread. It is recommended to only do calls to <code class="function">setenv()</code>
from an early phase of the program when no other threads have been started.</p></div><div class="refsect1"><a name="id-1.8"></a><h2 id="History">History<a class="headerlink" title="Permalink to this headline" href="#History">¶</a></h2><p><code class="function">sd_hwdb_new()</code>,
    <code class="function">sd_hwdb_ref()</code>, and
    <code class="function">sd_hwdb_unref()</code> were added in version 246.</p><p><code class="function">sd_hwdb_new_from_path()</code> was added in version 252.</p></div><div class="refsect1"><a name="id-1.9"></a><h2 id="See Also">See Also<a class="headerlink" title="Permalink to this headline" href="#See%20Also">¶</a></h2><p>
      <a href="systemd.html#"><span class="citerefentry"><span class="refentrytitle">systemd</span>(1)</span></a>,
      <a href="systemd-udevd.service.html#"><span class="citerefentry"><span class="refentrytitle">systemd-udevd.service</span>(8)</span></a>,
      <a href="sd-hwdb.html#"><span class="citerefentry"><span class="refentrytitle">sd-hwdb</span>(3)</span></a>,
      <a href="systemd-hwdb.html#"><span class="citerefentry"><span class="refentrytitle">systemd-hwdb</span>(3)</span></a>
    </p></div></div></body></html>
