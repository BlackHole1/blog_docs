<html><head><style data-id="immersive-translate-default-injected-css">:root {
  --immersive-translate-theme-underline-borderColor: #72ece9;
  --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
  --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
  --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
  --immersive-translate-theme-highlight-backgroundColor: #ffff00;
  --immersive-translate-theme-dashed-borderColor: #59c1bd;
  --immersive-translate-theme-blockquote-borderColor: #cc3355;
  --immersive-translate-theme-thinDashed-borderColor: #ff374f;
  --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
  --immersive-translate-theme-dashedBorder-borderRadius: 0;
  --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
  --immersive-translate-theme-solidBorder-borderRadius: 0;
  --immersive-translate-theme-dotted-borderColor: #94a3b8;
  --immersive-translate-theme-wavy-borderColor: #72ece9;
  --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
  --immersive-translate-theme-grey-textColor: #2f4f4f;
  --immersive-translate-theme-marker-backgroundColor: #fbda41;
  --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
  --immersive-translate-theme-marker2-backgroundColor: #ffff00;
  --immersive-translate-theme-opacity-opacity: 10;
}

.immersive-translate-target-translation-pre-whitespace {
  white-space: pre-wrap !important;
}

.immersive-translate-pdf-target-container {
  position: absolute;
  background-color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
    sans-serif;
  top: 0;
  width: 600px;
  height: 100%;
  z-index: 2;
  line-height: 1.3;
  font-size: 16px;
}
.immersive-translate-target-wrapper[dir='rtl'] {
  text-align: right;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
  color: rgb(0, 0, 0);
  white-space: normal;
  position: absolute;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
  color: inherit;
  white-space: inherit;
  position: unset;
}

.immersive-translate-state-dual>br {
  display: none;
}

.immersive-translate-target-translation-block-wrapper {
  margin: 8px 0 !important;
  display: inline-block;
}

.immersive-translate-target-translation-pdf-block-wrapper {
  margin: 0 !important;
  display: block;
}

.immersive-translate-target-translation-theme-grey-inner {
  color: var(--immersive-translate-theme-grey-textColor);
}


.immersive-translate-target-translation-theme-underline-inner {
  border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
}

.immersive-translate-target-translation-theme-nativeUnderline-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
}

.immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-theme-nativeDashed-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
  text-decoration-style: dashed !important;
}

.immersive-translate-target-translation-theme-thinDashed-inner {
  border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
}

.immersive-translate-target-translation-theme-dotted-inner {
  background-image: linear-gradient(to right,
      var(--immersive-translate-theme-dotted-borderColor) 30%,
      rgba(255, 255, 255, 0) 0%);
  background-position: bottom;
  background-size: 5px 1px;
  background-repeat: repeat-x;
  padding-bottom: 3px;
}

.immersive-translate-target-translation-theme-nativeDotted-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
  text-decoration-style: dotted !important;
}

.immersive-translate-target-translation-theme-wavy-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
  text-decoration-style: wavy !important;
}

.immersive-translate-target-translation-theme-dashed-inner {
  background: linear-gradient(to right,
      var(--immersive-translate-theme-dashed-borderColor) 0%,
      var(--immersive-translate-theme-dashed-borderColor) 50%,
      transparent 50%,
      transparent 100%) repeat-x left bottom;
  background-size: 8px 2px;
  padding-bottom: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
  content: "";
  display: block;
  max-width: 80px;
  width: 10%;
  border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  padding-top: 8px;
}

.immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
  content: "";
  border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  max-height: 16px;
  height: 16px;
  padding-left: 8px;
}

.immersive-translate-target-translation-theme-highlight-inner {
  background: var(--immersive-translate-theme-highlight-backgroundColor);
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-block-wrapper-theme-marker {
  line-height: 1.5em;
}

.immersive-translate-target-translation-theme-marker2-inner {
  font-weight: bold;
  text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
    16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
    2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
    -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
}

.immersive-translate-target-translation-theme-marker-inner {
  /* TODO: add more texture */
  background: linear-gradient(to right,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-theme-weakening {
  opacity: 0.618 !important;
}

.immersive-translate-target-translation-theme-italic {
  font-style: italic !important;
}

.immersive-translate-target-translation-theme-bold {
  font-weight: bold !important;
}

.immersive-translate-target-translation-block-wrapper-theme-paper {
  margin: 8px 0;
  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
  padding: 16px 32px;
  display: block;
}

.immersive-translate-target-translation-block-wrapper-theme-blockquote {
  border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
  padding-left: 12px !important;
  margin-top: 4px;
  margin-bottom: 4px;
  padding-top: 4px;
  padding-bottom: 4px;
  display: block;
}

.immersive-translate-target-translation-theme-mask-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
  filter: none !important;
}

[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}


/* opacity theme start */

.immersive-translate-target-translation-theme-opacity-inner {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: none !important;
}


.immersive-translate-target-translation-theme-mask-inner:hover {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
  filter: none !important;
}


[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
  filter: none !important;
}

/* opacity theme end */

/* vertical css , please remain it in the last one. */
.immersive-translate-target-translation-vertical-block-wrapper {
  margin: 0px 8px !important;
}

.immersive-translate-text {
  font-size: 15px !important;
}

.immersive-translate-error-toast {
  position: fixed;
  top: 5%;
  z-index: 99999999;
  left: 0;
  right: 0;
  margin: auto;
  max-width: 300px;
  padding: 16px;
  border-radius: 12px;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}

@media all and (min-width: 750px) {
  .immersive-translate-error-toast {
    max-width: 400px;
  }
}


.immersive-translate-clickable-button {
  cursor: pointer;
}

.immersive-translate-help-button {
  cursor: pointer;
}

.immersive-translate-loading-text:before {
  content: "...";
}


/* dark mode for loading */

@media only screen and (prefers-color-scheme: dark) {
  .immersive-translate-loading {
    border: 2px rgba(255, 255, 255, 0.25) solid !important;
    border-top: 2px rgba(255, 255, 255, 1) solid !important;
  }
}

.immersive-translate-error-wrapper {
  position: relative;
  display: inline-flex;
  padding: 6px;
  margin: 0 12px;
  white-space: nowrap;
  font-size: 0.9em;
}
[lang="zh-CN"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}
[lang="zh-TW"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}


.immersive-translate-tooltip {
  position: relative;
  display: inline-flex;
  /* little indicater to indicate it's hoverable */
}

.immersive-translate-tooltip-content {
  /* here's the magic */
  position: absolute;
  z-index: 100000000000;

  left: 50%;
  bottom: 0;
  transform: translate(-50%, 110%);
  line-height: 1;
  /* and add a small left margin */

  /* basic styles */
  width: max-content;
  max-width: 250px;
  word-wrap: break-word;
  white-space: pre-line;
  padding: 10px;
  border-radius: 10px;
  background: #000C;
  color: #fff;
  text-align: center;
  font-size: 14px;
  display: none;
  /* hide by default */
}

.immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip-content-table {
  left: unset !important;
  bottom: unset !important;
  transform: translate(-10%, 50%) !important;
}


.immersive-translate-tooltip:hover:before {
  display: block;
}



.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}
</style><style data-id="immersive-translate-user-custom-style">:root {

.immersive-translate-target-inner { font-family: inherit; }
}
</style><style data-id="immersive-translate-dynamic-injected-css">.immersive-translate-target-wrapper[dir='rtl'] {text-align: right;}
.immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {display:block;}
.immersive-translate-target-wrapper {word-break: break-word;}
</style></head><body data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>bootup</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><script src="https://code.jquery.com/jquery-3.7.1.min.js"></script><script src="../nav.js"></script><style>
    a.headerlink {
      color: #c60f0f;
      font-size: 0.8em;
      padding: 0 4px 0 4px;
      text-decoration: none;
      visibility: hidden;
    }

    a.headerlink:hover {
      background-color: #c60f0f;
      color: white;
    }

    h1:hover > a.headerlink, h2:hover > a.headerlink, h3:hover > a.headerlink, dt:hover > a.headerlink {
      visibility: visible;
    }
  </style><a href="index.html" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">Index </a>·
  <a href="systemd.directives.html" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">Directives </a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">索引 · 指令</font></font></font><span style="float:right" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">systemd 255</span><hr><div class="refentry" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><a name="bootup" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"></a><div class="titlepage" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"></div><div class="refnamediv" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><h2 data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">Name<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">名称</font></font></font></h2><p data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">bootup — System bootup process<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">启动 — 系统启动过程</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><a name="id-1.4" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"></a><h2 id="Description" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">Description<a class="headerlink" title="Permalink to this headline" href="#Description" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">描述</font></font></font></h2><p data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">A number of different components are involved in the boot of a Linux system. Immediately after
    power-up, the system firmware will do minimal hardware initialization, and hand control over to a boot
    loader (e.g.
    <a href="systemd-boot.html#" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="citerefentry" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="refentrytitle" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd-boot</span>(7)</span></a> or
    <a class="ulink" href="https://www.gnu.org/software/grub/" target="_top" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">GRUB</a>) stored on a persistent storage device. This
    boot loader will then invoke an OS kernel from disk (or the network). On systems using EFI or other types
    of firmware, this firmware may also load the kernel directly.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Linux 系统启动涉及多个不同的组件。在通电后，系统固件将进行最小的硬件初始化，并将控制权交给存储在持久存储设备上的引导加载程序（例如 systemd-boot(7) 或 GRUB）。然后，这个引导加载程序将从磁盘（或网络）调用 OS 内核。在使用 EFI 或其他类型固件的系统上，这个固件也可能直接加载内核。</font></font></font></p><p data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">The kernel (optionally) mounts an in-memory file system, often generated by <a href="https://man7.org/linux/man-pages/man8/dracut.8.html" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="citerefentry" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="refentrytitle" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">dracut</span>(8)</span></a>, which
    looks for the root file system. Nowadays this is implemented as an "initramfs" — a compressed CPIO
    archive that the kernel extracts into a tmpfs. In the past normal file systems using an in-memory block
    device (ramdisk) were used, and the name "initrd" is still used to describe both concepts. It's the boot
    loader or the firmware that loads both the kernel and initrd/initramfs images into memory, but the kernel
    which interprets it as a file system.
    <a href="systemd.html#" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="citerefentry" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="refentrytitle" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd</span>(1)</span></a> may be used
    to manage services in the initrd, similarly to the real system.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">内核（可选地）挂载一个内存文件系统，通常由 dracut(8) 生成，用于查找根文件系统。现在这被实现为“initramfs” — 一个内核将其解压缩到 tmpfs 中的压缩 CPIO 存档。过去使用内存块设备（ramdisk）的普通文件系统，并且“initrd” 仍用于描述这两个概念。引导加载程序或固件将内核和 initrd/initramfs 映像加载到内存中，但内核将其解释为文件系统。systemd(1) 可用于管理 initrd 中的服务，类似于真实系统。</font></font></font></p><p data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">After the root file system is found and mounted, the initrd hands over control to the host's system
    manager (such as
    <a href="systemd.html#" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="citerefentry" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="refentrytitle" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd</span>(1)</span></a>) stored in
    the root file system, which is then responsible for probing all remaining hardware, mounting all
    necessary file systems and spawning all configured services.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">找到并挂载根文件系统后，initrd 将控制权交给存储在根文件系统中的主机系统管理器（如 systemd(1)），然后负责探测所有剩余的硬件、挂载所有必要的文件系统并启动所有配置的服务。</font></font></font></p><p data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">On shutdown, the system manager stops all services, unmounts
    all file systems (detaching the storage technologies backing
    them), and then (optionally) jumps back into the initrd code which
    unmounts/detaches the root file system and the storage it resides
    on. As a last step, the system is powered down.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在关机时，系统管理器停止所有服务，卸载所有文件系统（分离支持它们的存储技术），然后（可选地）跳回到 initrd 代码，该代码卸载/分离根文件系统及其所在的存储。作为最后一步，系统将被关闭。</font></font></font></p><p data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">Additional information about the system boot process may be
    found in
    <a href="https://man7.org/linux/man-pages/man7/boot.7.html" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="citerefentry" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="refentrytitle" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">boot</span>(7)</span></a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有关系统引导过程的其他信息可在 boot(7) 中找到。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><a name="id-1.5" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"></a><h2 id="System Manager Bootup" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">System Manager Bootup<a class="headerlink" title="Permalink to this headline" href="#System%20Manager%20Bootup" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">系统管理器引导 ¶</font></font></font></h2><p data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">At boot, the system manager on the OS image is responsible
    for initializing the required file systems, services and drivers
    that are necessary for operation of the system. On
    <a href="systemd.html#" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="citerefentry" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="refentrytitle" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd</span>(1)</span></a>
    systems, this process is split up in various discrete steps which
    are exposed as target units. (See
    <a href="systemd.target.html#" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="citerefentry" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="refentrytitle" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd.target</span>(5)</span></a>
    for detailed information about target units.) The boot-up process
    is highly parallelized so that the order in which specific target
    units are reached is not deterministic, but still adheres to a
    limited amount of ordering structure.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在引导时，OS 镜像上的系统管理器负责初始化必要的文件系统、服务和驱动程序，这些对系统的操作是必要的。在 systemd(1) 系统上，这个过程被分成各种离散的步骤，这些步骤被公开为目标单元。(有关目标单元的详细信息，请参阅 systemd.target(5)。) 引导过程是高度并行化的，因此特定目标单元到达的顺序是不确定的，但仍然遵循有限数量的排序结构。</font></font></font></p><p data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">When systemd starts up the system, it will activate all
    units that are dependencies of <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">default.target</code>
    (as well as recursively all dependencies of these dependencies).
    Usually, <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">default.target</code> is simply an alias of
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">graphical.target</code> or
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">multi-user.target</code>, depending on whether the
    system is configured for a graphical UI or only for a text
    console. To enforce minimal ordering between the units pulled in,
    a number of well-known target units are available, as listed on
    <a href="systemd.special.html#" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="citerefentry" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="refentrytitle" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd.special</span>(7)</span></a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当 systemd 启动系统时，它将激活所有依赖于 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">default.target</code> 的单元(以及递归地激活这些依赖的依赖)。通常， <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">default.target</code> 简单地是 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">graphical.target</code> 或 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">multi-user.target</code> 的别名，具体取决于系统是为图形用户界面配置还是仅为文本控制台配置。为了在引入的单元之间强制执行最小排序，有许多众所周知的目标单元可用，如 systemd.special(7) 中所列。</font></font></font></p><p data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">The following chart is a structural overview of these
    well-known units and their position in the boot-up logic. The
    arrows describe which units are pulled in and ordered before which
    other units. Units near the top are started before units nearer to
    the bottom of the chart.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">以下图表是这些知名单元的结构概述及其在启动逻辑中的位置。箭头描述了哪些单元被拉入并在哪些其他单元之前排序。靠近顶部的单元在图表底部的单元之前启动。</font></font></font></p><pre class="programlisting">                             cryptsetup-pre.target veritysetup-pre.target
                                                  |
(various low-level                                v
 API VFS mounts:             (various cryptsetup/veritysetup devices...)
 mqueue, configfs,                                |    |
 debugfs, ...)                                    v    |
 |                                  cryptsetup.target  |
 |  (various swap                                 |    |    remote-fs-pre.target
 |   devices...)                                  |    |     |        |
 |    |                                           |    |     |        v
 |    v                       local-fs-pre.target |    |     |  (network file systems)
 |  swap.target                       |           |    v     v                 |
 |    |                               v           |  remote-cryptsetup.target  |
 |    |  (various low-level  (various mounts and  |  remote-veritysetup.target |
 |    |   services: udevd,    fsck services...)   |             |              |
 |    |   tmpfiles, random            |           |             |    remote-fs.target
 |    |   seed, sysctl, ...)          v           |             |              |
 |    |      |                 local-fs.target    |             | _____________/
 |    |      |                        |           |             |/
 \____|______|_______________   ______|___________/             |
                             \ /                                |
                              v                                 |
                       sysinit.target                           |
                              |                                 |
       ______________________/|\_____________________           |
      /              |        |      |               \          |
      |              |        |      |               |          |
      v              v        |      v               |          |
 (various       (various      |  (various            |          |
  timers...)      paths...)   |   sockets...)        |          |
      |              |        |      |               |          |
      v              v        |      v               |          |
timers.target  paths.target   |  sockets.target      |          |
      |              |        |      |               v          |
      v              \_______ | _____/         rescue.service   |
                             \|/                     |          |
                              v                      v          |
                          basic.target         <span class="emphasis"><em>rescue.target</em></span>    |
                              |                                 |
                      ________v____________________             |
                     /              |              \            |
                     |              |              |            |
                     v              v              v            |
                 display-    (various system   (various system  |
             manager.service     services        services)      |
                     |         required for        |            |
                     |        graphical UIs)       v            v
                     |              |            <span class="emphasis"><em>multi-user.target</em></span>
emergency.service    |              |              |
        |            \_____________ | _____________/
        v                          \|/
<span class="emphasis"><em>emergency.target</em></span>                    v
                              <span class="emphasis"><em>graphical.target</em></span></pre><p data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">Target units that are commonly used as boot targets are
    <span class="emphasis" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><em data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">emphasized</em></span>. These units are good choices as
    goal targets, for example by passing them to the
    <code class="varname" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd.unit=</code> kernel command line option (see
    <a href="systemd.html#" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="citerefentry" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="refentrytitle" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd</span>(1)</span></a>)
    or by symlinking <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">default.target</code> to them.
    <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通常用作引导目标的目标单元被强调。这些单元是作为目标目标的良好选择，例如通过将它们传递给 <code class="varname" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd.unit=</code> 内核命令行选项（参见 systemd(1)）或通过将 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">default.target</code> 链接到它们。</font></font></font></p><p data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1"><code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">timers.target</code> is pulled-in by
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">basic.target</code> asynchronously. This allows
    timers units to depend on services which become only available
    later in boot.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">timers.target</code> 被 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">basic.target</code> 异步地拉入。这允许定时器单元依赖于稍后才可用的服务。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><a name="id-1.6" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"></a><h2 id="User manager startup" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">User manager startup<a class="headerlink" title="Permalink to this headline" href="#User%20manager%20startup" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">用户管理器启动</font></font></font></h2><p data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">The system manager starts the <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">user@<em class="replaceable"><code>uid</code></em>.service</code> unit
    for each user, which launches a separate unprivileged instance of <span class="command" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><strong data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd</strong></span> for each
    user — the user manager. Similarly to the system manager, the user manager starts units which are pulled
    in by <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">default.target</code>. The following chart is a structural overview of the well-known
    user units. For non-graphical sessions, <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">default.target</code> is used. Whenever the user
    logs into a graphical session, the login manager will start the
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">graphical-session.target</code> target that is used to pull in units required for the
    graphical session. A number of targets (shown on the right side) are started when specific hardware is
    available to the user.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">系统管理器为每个用户启动 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">user@<em class="replaceable"><code>uid</code></em>.service</code> 单元，为每个用户启动一个单独的非特权 systemd 实例 — 用户管理器。与系统管理器类似，用户管理器启动被 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">default.target</code> 拉取的单元。以下图表是众所周知的用户单元的结构概述。对于非图形会话，使用 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">default.target</code> 。每当用户登录到图形会话时，登录管理器将启动 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">graphical-session.target</code> 目标，用于拉取图形会话所需的单元。当特定硬件对用户可用时，将启动一些目标（显示在右侧）。</font></font></font></p><pre class="programlisting">   (various           (various         (various
    timers...)         paths...)        sockets...)    (sound devices)
        |                  |                 |               |
        v                  v                 v               v
  timers.target      paths.target     sockets.target    sound.target
        |                  |                 |
        \______________   _|_________________/         (bluetooth devices)
                       \ /                                   |
                        V                                    v
                  basic.target                          bluetooth.target
                        |
             __________/ \_______                      (smartcard devices)
            /                    \                           |
            |                    |                           v
            |                    v                      smartcard.target
            v            graphical-session-pre.target
(various user services)          |                       (printers)
            |                    v                           |
            |       (services for the graphical session)     v
            |                    |                       printer.target
            v                    v
     <span class="emphasis"><em>default.target</em></span>      graphical-session.target</pre></div><div class="refsect1" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><a name="id-1.7" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"></a><h2 id="Bootup in the initrd" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">Bootup in the initrd<a class="headerlink" title="Permalink to this headline" href="#Bootup%20in%20the%20initrd" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 initrd 中引导</font></font></font></h2><p data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">Systemd can be used in the initrd as well. It detects the initrd environment by checking for the
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">/etc/initrd-release</code> file. The default target in the initrd is
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">initrd.target</code>. The bootup process is identical to the system manager bootup until
    the target <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">basic.target</code>. After that, systemd executes the special target
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">initrd.target</code>.

    Before any file systems are mounted, the manager will determine whether the system shall resume from
    hibernation or proceed with normal boot. This is accomplished by
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd-hibernate-resume.service</code> which must be finished before
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">local-fs-pre.target</code>, so no filesystems can be mounted before the check is complete.

    When the root device becomes available,
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">initrd-root-device.target</code> is reached.
    If the root device can be mounted at
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">/sysroot</code>, the
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">sysroot.mount</code> unit becomes active and
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">initrd-root-fs.target</code> is reached. The service
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">initrd-parse-etc.service</code> scans
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">/sysroot/etc/fstab</code> for a possible
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">/usr/</code> mount point and additional entries
    marked with the <span class="emphasis" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><em data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">x-initrd.mount</em></span> option. All
    entries found are mounted below <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">/sysroot</code>, and
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">initrd-fs.target</code> is reached. The service
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">initrd-cleanup.service</code> isolates to the
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">initrd-switch-root.target</code>, where cleanup
    services can run. As the very last step, the
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">initrd-switch-root.service</code> is activated,
    which will cause the system to switch its root to
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">/sysroot</code>.
    <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Systemd 也可以在 initrd 中使用。它通过检查 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">/etc/initrd-release</code> 文件来检测 initrd 环境。initrd 中的默认目标是 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">initrd.target</code> 。引导过程与系统管理器引导过程相同，直到目标 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">basic.target</code> 。之后，systemd 执行特殊目标 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">initrd.target</code> 。在挂载任何文件系统之前，管理器将确定系统是从休眠中恢复还是继续正常引导。这是通过 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd-hibernate-resume.service</code> 完成的，必须在 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">local-fs-pre.target</code> 之前完成，因此在检查完成之前不能挂载任何文件系统。当根设备可用时，达到 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">initrd-root-device.target</code> 。如果根设备可以在 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">/sysroot</code> 处挂载， <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">sysroot.mount</code> 单元将变为活动状态，达到 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">initrd-root-fs.target</code> 。服务 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">initrd-parse-etc.service</code> 扫描 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">/sysroot/etc/fstab</code> ，寻找可能的 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">/usr/</code> 挂载点和带有 x-initrd.mount 选项的其他条目。找到的所有条目都挂载在 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">/sysroot</code> 下，达到 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">initrd-fs.target</code> 。服务 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">initrd-cleanup.service</code> 隔离到 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">initrd-switch-root.target</code> ，其中清理服务可以运行。作为最后一步，激活 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">initrd-switch-root.service</code> ，这将导致系统将其根切换到 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">/sysroot</code> 。</font></font></font></p><pre class="programlisting">                               : (beginning identical to above)
                               :
                               v
                         basic.target
                               |                       emergency.service
        ______________________/|                               |
       /                       |                               v
       |            initrd-root-device.target          <span class="emphasis"><em>emergency.target</em></span>
       |                       |
       |                       v
       |                  sysroot.mount
       |                       |
       |                       v
       |             initrd-root-fs.target
       |                       |
       |                       v
       v            initrd-parse-etc.service
(custom initrd                 |
 services...)                  v
       |            (sysroot-usr.mount and
       |             various mounts marked
       |               with fstab option
       |              x-initrd.mount...)
       |                       |
       |                       v
       |                initrd-fs.target
       \______________________ |
                              \|
                               v
                          initrd.target
                               |
                               v
                     initrd-cleanup.service
                          isolates to
                    initrd-switch-root.target
                               |
                               v
        ______________________/|
       /                       v
       |        initrd-udevadm-cleanup-db.service
       v                       |
(custom initrd                 |
 services...)                  |
       \______________________ |
                              \|
                               v
                   initrd-switch-root.target
                               |
                               v
                   initrd-switch-root.service
                               |
                               v
                     Transition to Host OS</pre></div><div class="refsect1" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><a name="id-1.8" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"></a><h2 id="System Manager Shutdown" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">System Manager Shutdown<a class="headerlink" title="Permalink to this headline" href="#System%20Manager%20Shutdown" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">系统管理器关机 ¶</font></font></font></h2><p data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">System shutdown with systemd also consists of various target
    units with some minimal ordering structure applied:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 systemd 进行系统关机还包括各种目标单元，应用了一些最小的排序结构：</font></font></font></p><pre class="programlisting">                       (conflicts with  (conflicts with
                          all system     all file system
                           services)     mounts, swaps,
                               |           cryptsetup/
                               |           veritysetup
                               |          devices, ...)
                               |                |
                               v                v
                        shutdown.target    umount.target
                               |                |
                               \_______   ______/
                                       \ /
                                        v
                               (various low-level
                                    services)
                                        |
                                        v
                                  final.target
                                        |
            ___________________________/ \_________________
           /               |               |               \
           |               |               |               |
           v               |               |               |
systemd-reboot.service     |               |               |
           |               v               |               |
           |    systemd-poweroff.service   |               |
           v               |               v               |
     <span class="emphasis"><em>reboot.target</em></span>         |      systemd-halt.service     |
                           v               |               v
                   <span class="emphasis"><em>poweroff.target</em></span>         |    systemd-kexec.service
                                           v               |
                                      <span class="emphasis"><em>halt.target</em></span>          |
                                                           v
                                                     <span class="emphasis"><em>kexec.target</em></span></pre><p data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">Commonly used system shutdown targets are <span class="emphasis" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><em data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">emphasized</em></span>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">常用的系统关机目标被强调。</font></font></font></p><p data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">Note that
    <a href="systemd-halt.service.html#" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="citerefentry" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="refentrytitle" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd-halt.service</span>(8)</span></a>,
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd-reboot.service</code>, <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd-poweroff.service</code> and
    <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd-kexec.service</code> will transition the system and server manager (PID 1) into the second
    phase of system shutdown (implemented in the <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd-shutdown</code> binary), which will unmount any
    remaining file systems, kill any remaining processes and release any other remaining resources, in a simple and
    robust fashion, without taking any service or unit concept into account anymore. At that point, regular
    applications and resources are generally terminated and released already, the second phase hence operates only as
    safety net for everything that couldn't be stopped or released for some reason during the primary, unit-based
    shutdown phase described above.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，systemd-halt.service(8), <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd-reboot.service</code> , <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd-poweroff.service</code> 和 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd-kexec.service</code> 将使系统和服务器管理器（PID 1）转入系统关机的第二阶段（在 <code class="filename" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd-shutdown</code> 二进制文件中实现），该阶段将卸载任何剩余的文件系统，终止任何剩余的进程并释放任何其他剩余的资源，以简单而稳健的方式进行，不再考虑任何服务或单元概念。在那一点上，常规应用程序和资源通常已经被终止和释放，因此第二阶段仅作为无法在上述基于单元的主要关机阶段中由于某种原因停止或释放的所有内容的安全网运行。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><a name="id-1.9" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"></a><h2 id="See Also" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">See Also<a class="headerlink" title="Permalink to this headline" href="#See%20Also" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">参见 ¶</font></font></font></h2><p data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06" data-immersive-translate-paragraph="1">
      <a href="systemd.html#" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="citerefentry" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="refentrytitle" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd</span>(1)</span></a>,
      <a href="https://man7.org/linux/man-pages/man7/boot.7.html" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="citerefentry" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="refentrytitle" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">boot</span>(7)</span></a>,
      <a href="systemd.special.html#" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="citerefentry" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="refentrytitle" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd.special</span>(7)</span></a>,
      <a href="systemd.target.html#" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="citerefentry" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="refentrytitle" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd.target</span>(5)</span></a>,
      <a href="systemd-halt.service.html#" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="citerefentry" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="refentrytitle" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">systemd-halt.service</span>(8)</span></a>,
      <a href="https://man7.org/linux/man-pages/man8/dracut.8.html" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="citerefentry" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06"><span class="refentrytitle" data-immersive-translate-walked="5ccd6bf9-08d4-448c-8f72-1cd0482e3b06">dracut</span>(8)</span></a>
    </p></div></div>
</body></html>