<html><head><style data-id="immersive-translate-default-injected-css">:root {
  --immersive-translate-theme-underline-borderColor: #72ece9;
  --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
  --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
  --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
  --immersive-translate-theme-highlight-backgroundColor: #ffff00;
  --immersive-translate-theme-dashed-borderColor: #59c1bd;
  --immersive-translate-theme-blockquote-borderColor: #cc3355;
  --immersive-translate-theme-thinDashed-borderColor: #ff374f;
  --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
  --immersive-translate-theme-dashedBorder-borderRadius: 0;
  --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
  --immersive-translate-theme-solidBorder-borderRadius: 0;
  --immersive-translate-theme-dotted-borderColor: #94a3b8;
  --immersive-translate-theme-wavy-borderColor: #72ece9;
  --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
  --immersive-translate-theme-grey-textColor: #2f4f4f;
  --immersive-translate-theme-marker-backgroundColor: #fbda41;
  --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
  --immersive-translate-theme-marker2-backgroundColor: #ffff00;
  --immersive-translate-theme-opacity-opacity: 10;
}

.immersive-translate-target-translation-pre-whitespace {
  white-space: pre-wrap !important;
}

.immersive-translate-pdf-target-container {
  position: absolute;
  background-color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
    sans-serif;
  top: 0;
  width: 600px;
  height: 100%;
  z-index: 2;
  line-height: 1.3;
  font-size: 16px;
}
.immersive-translate-target-wrapper[dir='rtl'] {
  text-align: right;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
  color: rgb(0, 0, 0);
  white-space: normal;
  position: absolute;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
  color: inherit;
  white-space: inherit;
  position: unset;
}

.immersive-translate-state-dual>br {
  display: none;
}

.immersive-translate-target-translation-block-wrapper {
  margin: 8px 0 !important;
  display: inline-block;
}

.immersive-translate-target-translation-pdf-block-wrapper {
  margin: 0 !important;
  display: block;
}

.immersive-translate-target-translation-theme-grey-inner {
  color: var(--immersive-translate-theme-grey-textColor);
}


.immersive-translate-target-translation-theme-underline-inner {
  border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
}

.immersive-translate-target-translation-theme-nativeUnderline-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
}

.immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-theme-nativeDashed-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
  text-decoration-style: dashed !important;
}

.immersive-translate-target-translation-theme-thinDashed-inner {
  border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
}

.immersive-translate-target-translation-theme-dotted-inner {
  background-image: linear-gradient(to right,
      var(--immersive-translate-theme-dotted-borderColor) 30%,
      rgba(255, 255, 255, 0) 0%);
  background-position: bottom;
  background-size: 5px 1px;
  background-repeat: repeat-x;
  padding-bottom: 3px;
}

.immersive-translate-target-translation-theme-nativeDotted-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
  text-decoration-style: dotted !important;
}

.immersive-translate-target-translation-theme-wavy-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
  text-decoration-style: wavy !important;
}

.immersive-translate-target-translation-theme-dashed-inner {
  background: linear-gradient(to right,
      var(--immersive-translate-theme-dashed-borderColor) 0%,
      var(--immersive-translate-theme-dashed-borderColor) 50%,
      transparent 50%,
      transparent 100%) repeat-x left bottom;
  background-size: 8px 2px;
  padding-bottom: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
  content: "";
  display: block;
  max-width: 80px;
  width: 10%;
  border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  padding-top: 8px;
}

.immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
  content: "";
  border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  max-height: 16px;
  height: 16px;
  padding-left: 8px;
}

.immersive-translate-target-translation-theme-highlight-inner {
  background: var(--immersive-translate-theme-highlight-backgroundColor);
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-block-wrapper-theme-marker {
  line-height: 1.5em;
}

.immersive-translate-target-translation-theme-marker2-inner {
  font-weight: bold;
  text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
    16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
    2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
    -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
}

.immersive-translate-target-translation-theme-marker-inner {
  /* TODO: add more texture */
  background: linear-gradient(to right,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-theme-weakening {
  opacity: 0.618 !important;
}

.immersive-translate-target-translation-theme-italic {
  font-style: italic !important;
}

.immersive-translate-target-translation-theme-bold {
  font-weight: bold !important;
}

.immersive-translate-target-translation-block-wrapper-theme-paper {
  margin: 8px 0;
  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
  padding: 16px 32px;
  display: block;
}

.immersive-translate-target-translation-block-wrapper-theme-blockquote {
  border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
  padding-left: 12px !important;
  margin-top: 4px;
  margin-bottom: 4px;
  padding-top: 4px;
  padding-bottom: 4px;
  display: block;
}

.immersive-translate-target-translation-theme-mask-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
  filter: none !important;
}

[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}


/* opacity theme start */

.immersive-translate-target-translation-theme-opacity-inner {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: none !important;
}


.immersive-translate-target-translation-theme-mask-inner:hover {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
  filter: none !important;
}


[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
  filter: none !important;
}

/* opacity theme end */

/* vertical css , please remain it in the last one. */
.immersive-translate-target-translation-vertical-block-wrapper {
  margin: 0px 8px !important;
}

.immersive-translate-text {
  font-size: 15px !important;
}

.immersive-translate-error-toast {
  position: fixed;
  top: 5%;
  z-index: 99999999;
  left: 0;
  right: 0;
  margin: auto;
  max-width: 300px;
  padding: 16px;
  border-radius: 12px;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}

@media all and (min-width: 750px) {
  .immersive-translate-error-toast {
    max-width: 400px;
  }
}


.immersive-translate-clickable-button {
  cursor: pointer;
}

.immersive-translate-help-button {
  cursor: pointer;
}

.immersive-translate-loading-text:before {
  content: "...";
}


/* dark mode for loading */

@media only screen and (prefers-color-scheme: dark) {
  .immersive-translate-loading {
    border: 2px rgba(255, 255, 255, 0.25) solid !important;
    border-top: 2px rgba(255, 255, 255, 1) solid !important;
  }
}

.immersive-translate-error-wrapper {
  position: relative;
  display: inline-flex;
  padding: 6px;
  margin: 0 12px;
  white-space: nowrap;
  font-size: 0.9em;
}
[lang="zh-CN"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}
[lang="zh-TW"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}


.immersive-translate-tooltip {
  position: relative;
  display: inline-flex;
  /* little indicater to indicate it's hoverable */
}

.immersive-translate-tooltip-content {
  /* here's the magic */
  position: absolute;
  z-index: 100000000000;

  left: 50%;
  bottom: 0;
  transform: translate(-50%, 110%);
  line-height: 1;
  /* and add a small left margin */

  /* basic styles */
  width: max-content;
  max-width: 250px;
  word-wrap: break-word;
  white-space: pre-line;
  padding: 10px;
  border-radius: 10px;
  background: #000C;
  color: #fff;
  text-align: center;
  font-size: 14px;
  display: none;
  /* hide by default */
}

.immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip-content-table {
  left: unset !important;
  bottom: unset !important;
  transform: translate(-10%, 50%) !important;
}


.immersive-translate-tooltip:hover:before {
  display: block;
}



.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}
</style><style data-id="immersive-translate-user-custom-style">:root {

.immersive-translate-target-inner { font-family: inherit; }
}
</style><style data-id="immersive-translate-dynamic-injected-css">.immersive-translate-target-wrapper[dir='rtl'] {text-align: right;}
.immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {display:block;}
.immersive-translate-target-wrapper {word-break: break-word;}
</style></head><body data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>systemd-pstore.service</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><script src="https://code.jquery.com/jquery-3.7.1.min.js"></script><script src="../nav.js"></script><style>
    a.headerlink {
      color: #c60f0f;
      font-size: 0.8em;
      padding: 0 4px 0 4px;
      text-decoration: none;
      visibility: hidden;
    }

    a.headerlink:hover {
      background-color: #c60f0f;
      color: white;
    }

    h1:hover > a.headerlink, h2:hover > a.headerlink, h3:hover > a.headerlink, dt:hover > a.headerlink {
      visibility: visible;
    }
  </style><a href="index.html" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">Index </a>·
  <a href="systemd.directives.html" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">Directives </a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">索引 · 指令</font></font></font><span style="float:right" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1">systemd 255</span><hr><div class="refentry" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><a name="systemd-pstore" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"></a><div class="titlepage" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"></div><div class="refnamediv" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><h2 data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1">Name<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">名称</font></font></font></h2><p data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1">systemd-pstore.service, systemd-pstore — A service to archive contents of pstore<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">systemd-pstore.service, systemd-pstore — 一个用于存档 pstore 内容的服务</font></font></font></p></div><div class="refsynopsisdiv" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><h2 data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1">Synopsis<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">简介</font></font></font></h2><p data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><code class="filename" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">/usr/lib/systemd/systemd-pstore</code></p><p data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><code class="filename" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">systemd-pstore.service</code></p></div><div class="refsect1" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><a name="id-1.5" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"></a><h2 id="Description" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1">Description<a class="headerlink" title="Permalink to this headline" href="#Description" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">描述</font></font></font></h2><p data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1"><code class="filename" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">systemd-pstore.service</code> is a system service that archives the
    contents of the Linux persistent storage filesystem, pstore, to other storage,
    thus preserving the existing information contained in the pstore, and clearing
    pstore storage for future error events.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="filename" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">systemd-pstore.service</code> 是一个系统服务，用于将 Linux 持久存储文件系统 pstore 的内容存档到其他存储介质，从而保留 pstore 中的现有信息，并为将来的错误事件清除 pstore 存储空间。</font></font></font></p><p data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1">Linux provides a persistent storage file system, pstore, that can store error records when the
    kernel dies (or reboots or powers-off). These records in turn can be referenced to debug kernel problems
    (currently the kernel stores the tail of the kernel log, which also contains a stack backtrace, into
    pstore).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Linux 提供了一个持久存储文件系统 pstore，当内核死机（或重新启动或关机）时，可以存储错误记录。这些记录反过来可以用于调试内核问题（目前内核将内核日志的尾部，其中还包含堆栈回溯，存储到 pstore 中）。</font></font></font></p><p data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1">The pstore file system supports a variety of backends that map onto persistent
    storage, such as the ACPI ERST and UEFI variables. The pstore backends
    typically offer a relatively small amount of persistent storage, e.g. 64KiB,
    which can quickly fill up and thus prevent subsequent kernel crashes from
    recording errors. Thus there is a need to monitor and extract the pstore
    contents so that future kernel problems can also record information in the
    pstore.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">pstore 文件系统支持各种后端，这些后端映射到持久存储，例如 ACPI ERST 和 UEFI 变量。 pstore 后端通常提供相对较小的持久存储空间，例如 64KiB，这可能会很快填满，从而阻止后续内核崩溃记录错误。因此，有必要监视和提取 pstore 内容，以便将来内核问题也可以在 pstore 中记录信息。</font></font></font></p><p data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1">The pstore service is independent of the kdump service. In cloud environments
    specifically, host and guest filesystems are on remote filesystems (e.g. iSCSI
    or NFS), thus kdump relies (implicitly and/or explicitly) upon proper operation
    of networking software *and* hardware *and* infrastructure. Thus it may not be
    possible to capture a kernel coredump to a file since writes over the network
    may not be possible.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">pstore 服务与 kdump 服务独立。在云环境中，主机和客户机文件系统位于远程文件系统（例如 iSCSI 或 NFS），因此 kdump 依赖于网络软件*和*硬件*和*基础设施的正常运行（隐式和/或显式）。因此，可能无法将内核核心转储到文件，因为可能无法通过网络进行写入。</font></font></font></p><p data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1">The pstore backend, on the other hand, is completely local and provides a path
    to store error records which will survive a reboot and aid in post-mortem
    debugging.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">另一方面，pstore 后端完全本地，并提供一条路径来存储错误记录，这些记录将在重启后存活，并有助于事后调试。</font></font></font></p><p data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1">The <span class="command" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><strong data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">systemd-pstore</strong></span> executable does the actual work. Upon starting,
    the <code class="filename" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">pstore.conf</code> file is read and the <code class="filename" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">/sys/fs/pstore/</code>
    directory contents are processed according to the options. Pstore files are written to the
    journal, and optionally saved into <code class="filename" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">/var/lib/systemd/pstore/</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">systemd-pstore 可执行文件执行实际工作。启动时，会读取 <code class="filename" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">pstore.conf</code> 文件，并根据选项处理 <code class="filename" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">/sys/fs/pstore/</code> 目录内容。Pstore 文件会写入日志，并可选择保存到 <code class="filename" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">/var/lib/systemd/pstore/</code> 中。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><a name="id-1.6" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"></a><h2 id="Configuration" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1">Configuration<a class="headerlink" title="Permalink to this headline" href="#Configuration" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">配置</font></font></font></h2><p data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1">The behavior of <span class="command" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><strong data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">systemd-pstore</strong></span> is configured through the configuration file
    <code class="filename" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">/etc/systemd/pstore.conf</code> and corresponding snippets
    <code class="filename" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">/etc/systemd/pstore.conf.d/*.conf</code>, see
    <a href="pstore.conf.html#" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><span class="citerefentry" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><span class="refentrytitle" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">pstore.conf</span>(5)</span></a>.
    <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">systemd-pstore 的行为通过配置文件 <code class="filename" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">/etc/systemd/pstore.conf</code> 和相应的片段 <code class="filename" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">/etc/systemd/pstore.conf.d/*.conf</code> 进行配置，请参阅 pstore.conf(5)。</font></font></font></p><div class="refsect2" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><a name="id-1.6.3" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"></a><h3 id="Disabling pstore processing" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1">Disabling pstore processing<a class="headerlink" title="Permalink to this headline" href="#Disabling%20pstore%20processing" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">禁用 pstore 处理 ¶</font></font></font></h3><p data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1">To disable pstore processing by <span class="command" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><strong data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">systemd-pstore</strong></span>,
      set <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要通过 systemd-pstore 禁用 pstore 处理，请设置</font></font></font></p><pre class="programlisting">Storage=none</pre><p data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1"> in
      <a href="pstore.conf.html#" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><span class="citerefentry" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><span class="refentrytitle" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">pstore.conf</span>(5)</span></a>.
      <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 pstore.conf(5) 中。</font></font></font></p></div><div class="refsect2" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><a name="id-1.6.4" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"></a><h3 id="Kernel parameters" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1">Kernel parameters<a class="headerlink" title="Permalink to this headline" href="#Kernel%20parameters" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">内核参数 ¶</font></font></font></h3><p data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1"> The kernel has two parameters,
      <code class="filename" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">/sys/module/kernel/parameters/crash_kexec_post_notifiers</code> and
      <code class="filename" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">/sys/module/printk/parameters/always_kmsg_dump</code>, that control writes into pstore.
      The first enables storing of the kernel log (including stack trace) into pstore upon a panic or crash,
      and the second enables storing of the kernel log upon a normal shutdown (shutdown, reboot, halt). These
      parameters can be managed via the
      <a href="tmpfiles.d.html#" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><span class="citerefentry" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><span class="refentrytitle" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">tmpfiles.d</span>(5)</span></a>
      mechanism, specifically the file <code class="filename" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">/usr/lib/tmpfiles/systemd-pstore.conf</code>.
      <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">内核有两个参数， <code class="filename" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">/sys/module/kernel/parameters/crash_kexec_post_notifiers</code> 和 <code class="filename" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">/sys/module/printk/parameters/always_kmsg_dump</code> ，用于控制写入 pstore。第一个参数在发生 panic 或崩溃时将内核日志（包括堆栈跟踪）存储到 pstore 中，第二个参数在正常关机（关机、重启、停机）时将内核日志存储到 pstore 中。这些参数可以通过 tmpfiles.d(5) 机制进行管理，具体来说是文件 <code class="filename" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">/usr/lib/tmpfiles/systemd-pstore.conf</code> 。</font></font></font></p></div></div><div class="refsect1" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><a name="id-1.7" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"></a><h2 id="Usage" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1">Usage<a class="headerlink" title="Permalink to this headline" href="#Usage" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">用法 ¶</font></font></font></h2><p data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1">Data stored in the journal can be viewed with
    <a href="journalctl.html#" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><span class="citerefentry" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><span class="refentrytitle" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">journalctl</span>(1)</span></a>
    as usual.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">期刊中存储的数据可以像往常一样使用 journalctl(1)查看。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><a name="id-1.8" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"></a><h2 id="See Also" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1">See Also<a class="headerlink" title="Permalink to this headline" href="#See%20Also" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">参见 ¶</font></font></font></h2><p data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">
      <a href="pstore.conf.html#" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453"><span class="citerefentry" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453" data-immersive-translate-paragraph="1"><span class="refentrytitle" data-immersive-translate-walked="d56c7bb9-05b7-4c8c-ab32-e6b3e4935453">pstore.conf</span>(5)</span></a>
    </p></div></div>
</body></html>