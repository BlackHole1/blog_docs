<html><head><style data-id="immersive-translate-default-injected-css">:root {
  --immersive-translate-theme-underline-borderColor: #72ece9;
  --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
  --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
  --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
  --immersive-translate-theme-highlight-backgroundColor: #ffff00;
  --immersive-translate-theme-dashed-borderColor: #59c1bd;
  --immersive-translate-theme-blockquote-borderColor: #cc3355;
  --immersive-translate-theme-thinDashed-borderColor: #ff374f;
  --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
  --immersive-translate-theme-dashedBorder-borderRadius: 0;
  --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
  --immersive-translate-theme-solidBorder-borderRadius: 0;
  --immersive-translate-theme-dotted-borderColor: #94a3b8;
  --immersive-translate-theme-wavy-borderColor: #72ece9;
  --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
  --immersive-translate-theme-grey-textColor: #2f4f4f;
  --immersive-translate-theme-marker-backgroundColor: #fbda41;
  --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
  --immersive-translate-theme-marker2-backgroundColor: #ffff00;
  --immersive-translate-theme-opacity-opacity: 10;
}

.immersive-translate-target-translation-pre-whitespace {
  white-space: pre-wrap !important;
}

.immersive-translate-pdf-target-container {
  position: absolute;
  background-color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
    sans-serif;
  top: 0;
  width: 600px;
  height: 100%;
  z-index: 2;
  line-height: 1.3;
  font-size: 16px;
}
.immersive-translate-target-wrapper[dir='rtl'] {
  text-align: right;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
  color: rgb(0, 0, 0);
  white-space: normal;
  position: absolute;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
  color: inherit;
  white-space: inherit;
  position: unset;
}

.immersive-translate-state-dual>br {
  display: none;
}

.immersive-translate-target-translation-block-wrapper {
  margin: 8px 0 !important;
  display: inline-block;
}

.immersive-translate-target-translation-pdf-block-wrapper {
  margin: 0 !important;
  display: block;
}

.immersive-translate-target-translation-theme-grey-inner {
  color: var(--immersive-translate-theme-grey-textColor);
}


.immersive-translate-target-translation-theme-underline-inner {
  border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
}

.immersive-translate-target-translation-theme-nativeUnderline-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
}

.immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-theme-nativeDashed-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
  text-decoration-style: dashed !important;
}

.immersive-translate-target-translation-theme-thinDashed-inner {
  border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
}

.immersive-translate-target-translation-theme-dotted-inner {
  background-image: linear-gradient(to right,
      var(--immersive-translate-theme-dotted-borderColor) 30%,
      rgba(255, 255, 255, 0) 0%);
  background-position: bottom;
  background-size: 5px 1px;
  background-repeat: repeat-x;
  padding-bottom: 3px;
}

.immersive-translate-target-translation-theme-nativeDotted-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
  text-decoration-style: dotted !important;
}

.immersive-translate-target-translation-theme-wavy-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
  text-decoration-style: wavy !important;
}

.immersive-translate-target-translation-theme-dashed-inner {
  background: linear-gradient(to right,
      var(--immersive-translate-theme-dashed-borderColor) 0%,
      var(--immersive-translate-theme-dashed-borderColor) 50%,
      transparent 50%,
      transparent 100%) repeat-x left bottom;
  background-size: 8px 2px;
  padding-bottom: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
  content: "";
  display: block;
  max-width: 80px;
  width: 10%;
  border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  padding-top: 8px;
}

.immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
  content: "";
  border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  max-height: 16px;
  height: 16px;
  padding-left: 8px;
}

.immersive-translate-target-translation-theme-highlight-inner {
  background: var(--immersive-translate-theme-highlight-backgroundColor);
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-block-wrapper-theme-marker {
  line-height: 1.5em;
}

.immersive-translate-target-translation-theme-marker2-inner {
  font-weight: bold;
  text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
    16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
    2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
    -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
}

.immersive-translate-target-translation-theme-marker-inner {
  /* TODO: add more texture */
  background: linear-gradient(to right,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-theme-weakening {
  opacity: 0.618 !important;
}

.immersive-translate-target-translation-theme-italic {
  font-style: italic !important;
}

.immersive-translate-target-translation-theme-bold {
  font-weight: bold !important;
}

.immersive-translate-target-translation-block-wrapper-theme-paper {
  margin: 8px 0;
  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
  padding: 16px 32px;
  display: block;
}

.immersive-translate-target-translation-block-wrapper-theme-blockquote {
  border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
  padding-left: 12px !important;
  margin-top: 4px;
  margin-bottom: 4px;
  padding-top: 4px;
  padding-bottom: 4px;
  display: block;
}

.immersive-translate-target-translation-theme-mask-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
  filter: none !important;
}

[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}


/* opacity theme start */

.immersive-translate-target-translation-theme-opacity-inner {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: none !important;
}


.immersive-translate-target-translation-theme-mask-inner:hover {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
  filter: none !important;
}


[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
  filter: none !important;
}

/* opacity theme end */

/* vertical css , please remain it in the last one. */
.immersive-translate-target-translation-vertical-block-wrapper {
  margin: 0px 8px !important;
}

.immersive-translate-text {
  font-size: 15px !important;
}

.immersive-translate-error-toast {
  position: fixed;
  top: 5%;
  z-index: 99999999;
  left: 0;
  right: 0;
  margin: auto;
  max-width: 300px;
  padding: 16px;
  border-radius: 12px;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}

@media all and (min-width: 750px) {
  .immersive-translate-error-toast {
    max-width: 400px;
  }
}


.immersive-translate-clickable-button {
  cursor: pointer;
}

.immersive-translate-help-button {
  cursor: pointer;
}

.immersive-translate-loading-text:before {
  content: "...";
}


/* dark mode for loading */

@media only screen and (prefers-color-scheme: dark) {
  .immersive-translate-loading {
    border: 2px rgba(255, 255, 255, 0.25) solid !important;
    border-top: 2px rgba(255, 255, 255, 1) solid !important;
  }
}

.immersive-translate-error-wrapper {
  position: relative;
  display: inline-flex;
  padding: 6px;
  margin: 0 12px;
  white-space: nowrap;
  font-size: 0.9em;
}
[lang="zh-CN"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}
[lang="zh-TW"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}


.immersive-translate-tooltip {
  position: relative;
  display: inline-flex;
  /* little indicater to indicate it's hoverable */
}

.immersive-translate-tooltip-content {
  /* here's the magic */
  position: absolute;
  z-index: 100000000000;

  left: 50%;
  bottom: 0;
  transform: translate(-50%, 110%);
  line-height: 1;
  /* and add a small left margin */

  /* basic styles */
  width: max-content;
  max-width: 250px;
  word-wrap: break-word;
  white-space: pre-line;
  padding: 10px;
  border-radius: 10px;
  background: #000C;
  color: #fff;
  text-align: center;
  font-size: 14px;
  display: none;
  /* hide by default */
}

.immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip-content-table {
  left: unset !important;
  bottom: unset !important;
  transform: translate(-10%, 50%) !important;
}


.immersive-translate-tooltip:hover:before {
  display: block;
}



.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}
</style><style data-id="immersive-translate-user-custom-style">:root {

.immersive-translate-target-inner { font-family: inherit; }
}
</style><style data-id="immersive-translate-dynamic-injected-css">.immersive-translate-target-wrapper[dir='rtl'] {text-align: right;}
.immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {display:block;}
.immersive-translate-target-wrapper {word-break: break-word;}
</style></head><body data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>sd_event_new</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><script src="https://code.jquery.com/jquery-3.7.1.min.js"></script><script src="../nav.js"></script><style>
    a.headerlink {
      color: #c60f0f;
      font-size: 0.8em;
      padding: 0 4px 0 4px;
      text-decoration: none;
      visibility: hidden;
    }

    a.headerlink:hover {
      background-color: #c60f0f;
      color: white;
    }

    h1:hover > a.headerlink, h2:hover > a.headerlink, h3:hover > a.headerlink, dt:hover > a.headerlink {
      visibility: visible;
    }
  </style><a href="index.html" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">Index </a>·
  <a href="systemd.directives.html" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">Directives </a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">索引 · 指令</font></font></font><span style="float:right" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1">systemd 255</span><hr><div class="refentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><a name="sd_event_new" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"></a><div class="titlepage" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"></div><div class="refnamediv" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><h2 data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1">Name<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">名称</font></font></font></h2><p data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1">sd_event_new, sd_event_default, sd_event_ref, sd_event_unref, sd_event_unrefp, sd_event_get_tid, sd_event — Acquire and release an event loop object<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">sd_event_new, sd_event_default, sd_event_ref, sd_event_unref, sd_event_unrefp, sd_event_get_tid, sd_event — 获取和释放事件循环对象</font></font></font></p></div><div class="refsynopsisdiv" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><h2 data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1">Synopsis<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">简介</font></font></font></h2><div class="funcsynopsis"><pre class="funcsynopsisinfo">#include &lt;systemd/sd-event.h&gt;</pre><pre class="funcsynopsisinfo"><span class="token">typedef</span> struct sd_event sd_event;</pre><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_event_new</b>(</code></td><td>sd_event **<var class="pdparam">event</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_event_default</b>(</code></td><td>sd_event **<var class="pdparam">event</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">sd_event *<b class="fsfunc">sd_event_ref</b>(</code></td><td>sd_event *<var class="pdparam">event</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">sd_event *<b class="fsfunc">sd_event_unref</b>(</code></td><td>sd_event *<var class="pdparam">event</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">void <b class="fsfunc">sd_event_unrefp</b>(</code></td><td>sd_event **<var class="pdparam">event</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_event_get_tid</b>(</code></td><td>sd_event *<var class="pdparam">event</var>, </td></tr><tr><td>&nbsp;</td><td>pid_t *<var class="pdparam">tid</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div></div></div><div class="refsect1" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><a name="id-1.5" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"></a><h2 id="Description" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1">Description<a class="headerlink" title="Permalink to this headline" href="#Description" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">描述</font></font></font></h2><p data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_new()</code> allocates a new event
    loop object. The event loop object is returned in the
    <em class="parameter" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><code data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">event</code></em> parameter. After use, drop
    the returned reference with
    <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_unref()</code>. When the last reference is
    dropped, the object is freed.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_new()</code> 分配一个新的事件循环对象。事件循环对象在 <code data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">event</code> 参数中返回。使用完毕后，请使用 <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_unref()</code> 释放返回的引用。当最后一个引用被释放时，对象将被释放。</font></font></font></p><p data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_default()</code> acquires a reference
    to the default event loop object of the calling thread, possibly
    allocating a new object if no default event loop object has been
    allocated yet for the thread. After use, drop the returned
    reference with <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_unref()</code>. When the
    last reference is dropped, the event loop is freed. If this
    function is called while the object returned from a previous call
    from the same thread is still referenced, the same object is
    returned again, but the reference is increased by one. It is
    recommended to use this call instead of
    <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_new()</code> in order to share event loop
    objects between various components that are dispatched in the same
    thread. All threads have exactly either zero or one default event loop
    objects associated, but never more.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_default()</code> 获取调用线程的默认事件循环对象的引用，如果尚未为线程分配默认事件循环对象，则可能会分配一个新对象。使用完毕后，请使用 <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_unref()</code> 释放返回的引用。当最后一个引用被释放时，事件循环将被释放。如果在同一线程的先前调用返回的对象仍被引用时调用此函数，则会再次返回相同的对象，但引用计数会增加一。建议使用此调用而不是 <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_new()</code> 来在同一线程中的各个组件之间共享事件循环对象。所有线程都有零个或一个默认事件循环对象关联，但从不会有更多。</font></font></font></p><p data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1">After allocating an event loop object, add event sources to
    it with
    <a href="sd_event_add_io.html#" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_add_io</span>(3)</span></a>,
    <a href="sd_event_add_time.html#" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_add_time</span>(3)</span></a>,
    <a href="sd_event_add_signal.html#" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_add_signal</span>(3)</span></a>,
    <a href="sd_event_add_child.html#" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_add_child</span>(3)</span></a>,
    <a href="sd_event_add_inotify.html#" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_add_inotify</span>(3)</span></a>,
    <a href="sd_event_add_defer.html#" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_add_defer</span>(3)</span></a>,
    <a href="sd_event_add_post.html#" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_add_post</span>(3)</span></a> or
    <a href="sd_event_add_exit.html#" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_add_exit</span>(3)</span></a>,
    and then execute the event loop using
    <a href="sd_event_loop.html#" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_loop</span>(3)</span></a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在分配事件循环对象后，使用 sd_event_add_io(3)、sd_event_add_time(3)、sd_event_add_signal(3)、sd_event_add_child(3)、sd_event_add_inotify(3)、sd_event_add_defer(3)、sd_event_add_post(3)或 sd_event_add_exit(3)向其添加事件源，然后使用 sd_event_loop(3)执行事件循环。</font></font></font></p><p data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_ref()</code> increases the reference
    count of the specified event loop object by one.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_ref()</code> 将指定的事件循环对象的引用计数增加一。</font></font></font></p><p data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_unref()</code> decreases the
    reference count of the specified event loop object by one. If
    the count hits zero, the object is freed. Note that it
    is freed regardless of whether it is the default event loop object for a
    thread or not. This means that allocating an event loop with
    <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_default()</code>, then releasing it, and
    then acquiring a new one with
    <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_default()</code> will result in two
    distinct objects. Note that, in order to free an event loop object,
    all remaining event sources of the event loop also need to be
    freed as each keeps a reference to it.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_unref()</code> 将指定的事件循环对象的引用计数减少一。如果计数达到零，则释放对象。请注意，无论是否为线程的默认事件循环对象，都会释放它。这意味着分配一个事件循环与 <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_default()</code> ，然后释放它，然后使用 <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_default()</code> 获取一个新的事件循环将导致两个不同的对象。请注意，为了释放事件循环对象，事件循环的所有剩余事件源也需要被释放，因为每个事件源都保留对它的引用。</font></font></font></p><p data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_unrefp()</code> is similar to
    <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_unref()</code> but takes a pointer to a
    pointer to an <span class="type" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event</span> object. This call is useful in
    conjunction with GCC's and LLVM's <a class="ulink" href="https://gcc.gnu.org/onlinedocs/gcc/Common-Variable-Attributes.html" target="_top" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">Clean-up
    Variable Attribute</a>. Note that this function is defined as
    inline function. Use a declaration like the following,
    in order to allocate an event loop object that is freed
    automatically as the code block is left:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_unrefp()</code> 类似于 <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_unref()</code> ，但接受一个指向 sd_event 对象的指针。此调用与 GCC 和 LLVM 的清理变量属性一起使用。请注意，此函数被定义为内联函数。使用以下声明，以便在离开代码块时自动释放事件循环对象：</font></font></font></p><pre class="programlisting">{
        __attribute__((cleanup(sd_event_unrefp))) sd_event *event = NULL;
        int r;
        …
        r = sd_event_default(&amp;event);
        if (r &lt; 0) {
          errno = -r;
          fprintf(stderr, "Failed to allocate event loop: %m\n");
        }
        …
}</pre><p data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_ref()</code>,
    <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_unref()</code> and
    <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_unrefp()</code> execute no operation if the
    passed in event loop object is <code class="constant" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">NULL</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果传入的事件循环对象是 <code class="constant" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">NULL</code> ，则 <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_ref()</code> 、 <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_unref()</code> 和 <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_unrefp()</code> 不执行任何操作。</font></font></font></p><p data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_get_tid()</code> retrieves the thread
    identifier ("TID") of the thread the specified event loop object
    is associated with. This call is only supported for event loops
    allocated with <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_default()</code>, and
    returns the identifier for the thread the event loop is the
    default event loop of. See <a href="https://man7.org/linux/man-pages/man2/gettid.2.html" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">gettid</span>(2)</span></a>
    for more information on thread identifiers.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_get_tid()</code> 检索与指定事件循环对象关联的线程标识符（"TID"）。此调用仅支持使用 <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_default()</code> 分配的事件循环，并返回事件循环是默认事件循环的线程的标识符。有关线程标识符的更多信息，请参阅 gettid(2)。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><a name="id-1.6" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"></a><h2 id="Return Value" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1">Return Value<a class="headerlink" title="Permalink to this headline" href="#Return%20Value" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">返回值 ¶</font></font></font></h2><p data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1">On success, <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_new()</code>, <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_default()</code> and
    <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_get_tid()</code> return 0 or a positive integer. On failure, they return a
    negative errno-style error code. <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_ref()</code> always returns a pointer to the
    event loop object passed in. <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_unref()</code> always returns
    <code class="constant" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">NULL</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在成功时， <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_new()</code> ， <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_default()</code> 和 <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_get_tid()</code> 返回 0 或正整数。在失败时，它们返回负的 errno 风格的错误代码。 <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_ref()</code> 总是返回传入的事件循环对象的指针。 <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_unref()</code> 总是返回 <code class="constant" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">NULL</code> 。</font></font></font></p><div class="refsect2" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><a name="id-1.6.3" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"></a><h3 id="Errors" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1">Errors<a class="headerlink" title="Permalink to this headline" href="#Errors" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">错误 ¶</font></font></font></h3><p data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1">Returned errors may indicate the following problems:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">返回的错误可能表示以下问题：</font></font></font></p><div class="variablelist" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><dl class="variablelist" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><dt id="-ENOMEM" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><code class="constant" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">-ENOMEM</code></span><a class="headerlink" title="Permalink to this term" href="#-ENOMEM" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">¶</a></dt><dd data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><p data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1">Not enough memory to allocate the object.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">没有足够的内存来分配对象。</font></font></font></p></dd><dt id="-EMFILE" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><code class="constant" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">-EMFILE</code></span><a class="headerlink" title="Permalink to this term" href="#-EMFILE" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">¶</a></dt><dd data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><p data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1">The maximum number of event loops has been allocated.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">已分配的事件循环数量已达到最大值。</font></font></font></p></dd><dt id="-ENXIO" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><code class="constant" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">-ENXIO</code></span><a class="headerlink" title="Permalink to this term" href="#-ENXIO" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">¶</a></dt><dd data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><p data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_get_tid()</code> was invoked on an event loop object that
          was not allocated with <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_default()</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_get_tid()</code> 在未分配 <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_default()</code> 的事件循环对象上被调用。</font></font></font></p></dd></dl></div></div></div><div class="refsect1" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><a name="id-1.7" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"></a><h2 id="Notes" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1">Notes<a class="headerlink" title="Permalink to this headline" href="#Notes" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意事项 ¶</font></font></font></h2><p data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1"><a name="pkgconfig-text" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"></a>Functions described here are available as a shared
  library, which can be compiled against and linked to with the
  <code class="constant" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">libsystemd</code>&nbsp;<a href="http://linux.die.net/man/1/pkg-config" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">pkg-config</span>(1)</span></a>
  file.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此处描述的函数可作为共享库使用，可以通过 <code class="constant" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">libsystemd</code> pkg-config(1) 文件进行编译和链接。</font></font></font></p><p data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1"><a name="getenv" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"></a>The code described here uses
<a href="https://man7.org/linux/man-pages/man3/getenv.3.html" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">getenv</span>(3)</span></a>,
which is declared to be not multi-thread-safe. This means that the code calling the functions described
here must not call
<a href="https://man7.org/linux/man-pages/man3/setenv.3.html" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">setenv</span>(3)</span></a>
from a parallel thread. It is recommended to only do calls to <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">setenv()</code>
from an early phase of the program when no other threads have been started.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此处描述的代码使用了 getenv(3)，该函数被声明为非多线程安全。这意味着调用此处描述的函数的代码不能从并行线程中调用 setenv(3)。建议仅在程序的早期阶段进行对 <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">setenv()</code> 的调用，此时尚未启动其他线程。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><a name="id-1.8" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"></a><h2 id="History" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1">History<a class="headerlink" title="Permalink to this headline" href="#History" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">历史 ¶</font></font></font></h2><p data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_new()</code>,
    <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_default()</code>,
    <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_ref()</code>, and
    <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_unref()</code> were added in version 213.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">版本 213 中添加了 <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_new()</code> ， <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_default()</code> ， <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_ref()</code> 和 <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_unref()</code> 。</font></font></font></p><p data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_unrefp()</code> and
    <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_get_tid()</code> were added in version 229.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_unrefp()</code> 和 <code class="function" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_get_tid()</code> 已在版本 229 中添加。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><a name="id-1.9" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"></a><h2 id="See Also" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1">See Also<a class="headerlink" title="Permalink to this headline" href="#See%20Also" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">参见 ¶</font></font></font></h2><p data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a" data-immersive-translate-paragraph="1">
      <a href="systemd.html#" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">systemd</span>(1)</span></a>,
      <a href="sd-event.html#" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd-event</span>(3)</span></a>,
      <a href="sd_event_add_io.html#" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_add_io</span>(3)</span></a>,
      <a href="sd_event_add_time.html#" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_add_time</span>(3)</span></a>,
      <a href="sd_event_add_signal.html#" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_add_signal</span>(3)</span></a>,
      <a href="sd_event_add_child.html#" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_add_child</span>(3)</span></a>,
      <a href="sd_event_add_inotify.html#" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_add_inotify</span>(3)</span></a>,
      <a href="sd_event_add_defer.html#" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_add_defer</span>(3)</span></a>,
      <a href="sd_event_run.html#" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">sd_event_run</span>(3)</span></a>,
      <a href="https://man7.org/linux/man-pages/man2/gettid.2.html" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="citerefentry" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a"><span class="refentrytitle" data-immersive-translate-walked="fd49ca67-6fda-48fd-85c2-9641743d3a7a">gettid</span>(2)</span></a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">systemd(1)，sd-event(3)，sd_event_add_io(3)，sd_event_add_time(3)，sd_event_add_signal(3)，sd_event_add_child(3)，sd_event_add_inotify(3)，sd_event_add_defer(3)，sd_event_run(3)，gettid(2)</font></font></font>
    </p></div></div>
</body></html>