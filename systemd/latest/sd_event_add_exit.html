<html><head><style data-id="immersive-translate-default-injected-css">:root {
  --immersive-translate-theme-underline-borderColor: #72ece9;
  --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
  --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
  --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
  --immersive-translate-theme-highlight-backgroundColor: #ffff00;
  --immersive-translate-theme-dashed-borderColor: #59c1bd;
  --immersive-translate-theme-blockquote-borderColor: #cc3355;
  --immersive-translate-theme-thinDashed-borderColor: #ff374f;
  --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
  --immersive-translate-theme-dashedBorder-borderRadius: 0;
  --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
  --immersive-translate-theme-solidBorder-borderRadius: 0;
  --immersive-translate-theme-dotted-borderColor: #94a3b8;
  --immersive-translate-theme-wavy-borderColor: #72ece9;
  --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
  --immersive-translate-theme-grey-textColor: #2f4f4f;
  --immersive-translate-theme-marker-backgroundColor: #fbda41;
  --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
  --immersive-translate-theme-marker2-backgroundColor: #ffff00;
  --immersive-translate-theme-opacity-opacity: 10;
}

.immersive-translate-target-translation-pre-whitespace {
  white-space: pre-wrap !important;
}

.immersive-translate-pdf-target-container {
  position: absolute;
  background-color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
    sans-serif;
  top: 0;
  width: 600px;
  height: 100%;
  z-index: 2;
  line-height: 1.3;
  font-size: 16px;
}
.immersive-translate-target-wrapper[dir='rtl'] {
  text-align: right;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
  color: rgb(0, 0, 0);
  white-space: normal;
  position: absolute;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
  color: inherit;
  white-space: inherit;
  position: unset;
}

.immersive-translate-state-dual>br {
  display: none;
}

.immersive-translate-target-translation-block-wrapper {
  margin: 8px 0 !important;
  display: inline-block;
}

.immersive-translate-target-translation-pdf-block-wrapper {
  margin: 0 !important;
  display: block;
}

.immersive-translate-target-translation-theme-grey-inner {
  color: var(--immersive-translate-theme-grey-textColor);
}


.immersive-translate-target-translation-theme-underline-inner {
  border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
}

.immersive-translate-target-translation-theme-nativeUnderline-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
}

.immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-theme-nativeDashed-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
  text-decoration-style: dashed !important;
}

.immersive-translate-target-translation-theme-thinDashed-inner {
  border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
}

.immersive-translate-target-translation-theme-dotted-inner {
  background-image: linear-gradient(to right,
      var(--immersive-translate-theme-dotted-borderColor) 30%,
      rgba(255, 255, 255, 0) 0%);
  background-position: bottom;
  background-size: 5px 1px;
  background-repeat: repeat-x;
  padding-bottom: 3px;
}

.immersive-translate-target-translation-theme-nativeDotted-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
  text-decoration-style: dotted !important;
}

.immersive-translate-target-translation-theme-wavy-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
  text-decoration-style: wavy !important;
}

.immersive-translate-target-translation-theme-dashed-inner {
  background: linear-gradient(to right,
      var(--immersive-translate-theme-dashed-borderColor) 0%,
      var(--immersive-translate-theme-dashed-borderColor) 50%,
      transparent 50%,
      transparent 100%) repeat-x left bottom;
  background-size: 8px 2px;
  padding-bottom: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
  content: "";
  display: block;
  max-width: 80px;
  width: 10%;
  border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  padding-top: 8px;
}

.immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
  content: "";
  border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  max-height: 16px;
  height: 16px;
  padding-left: 8px;
}

.immersive-translate-target-translation-theme-highlight-inner {
  background: var(--immersive-translate-theme-highlight-backgroundColor);
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-block-wrapper-theme-marker {
  line-height: 1.5em;
}

.immersive-translate-target-translation-theme-marker2-inner {
  font-weight: bold;
  text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
    16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
    2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
    -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
}

.immersive-translate-target-translation-theme-marker-inner {
  /* TODO: add more texture */
  background: linear-gradient(to right,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-theme-weakening {
  opacity: 0.618 !important;
}

.immersive-translate-target-translation-theme-italic {
  font-style: italic !important;
}

.immersive-translate-target-translation-theme-bold {
  font-weight: bold !important;
}

.immersive-translate-target-translation-block-wrapper-theme-paper {
  margin: 8px 0;
  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
  padding: 16px 32px;
  display: block;
}

.immersive-translate-target-translation-block-wrapper-theme-blockquote {
  border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
  padding-left: 12px !important;
  margin-top: 4px;
  margin-bottom: 4px;
  padding-top: 4px;
  padding-bottom: 4px;
  display: block;
}

.immersive-translate-target-translation-theme-mask-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
  filter: none !important;
}

[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}


/* opacity theme start */

.immersive-translate-target-translation-theme-opacity-inner {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: none !important;
}


.immersive-translate-target-translation-theme-mask-inner:hover {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
  filter: none !important;
}


[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
  filter: none !important;
}

/* opacity theme end */

/* vertical css , please remain it in the last one. */
.immersive-translate-target-translation-vertical-block-wrapper {
  margin: 0px 8px !important;
}

.immersive-translate-text {
  font-size: 15px !important;
}

.immersive-translate-error-toast {
  position: fixed;
  top: 5%;
  z-index: 99999999;
  left: 0;
  right: 0;
  margin: auto;
  max-width: 300px;
  padding: 16px;
  border-radius: 12px;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}

@media all and (min-width: 750px) {
  .immersive-translate-error-toast {
    max-width: 400px;
  }
}


.immersive-translate-clickable-button {
  cursor: pointer;
}

.immersive-translate-help-button {
  cursor: pointer;
}

.immersive-translate-loading-text:before {
  content: "...";
}


/* dark mode for loading */

@media only screen and (prefers-color-scheme: dark) {
  .immersive-translate-loading {
    border: 2px rgba(255, 255, 255, 0.25) solid !important;
    border-top: 2px rgba(255, 255, 255, 1) solid !important;
  }
}

.immersive-translate-error-wrapper {
  position: relative;
  display: inline-flex;
  padding: 6px;
  margin: 0 12px;
  white-space: nowrap;
  font-size: 0.9em;
}
[lang="zh-CN"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}
[lang="zh-TW"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}


.immersive-translate-tooltip {
  position: relative;
  display: inline-flex;
  /* little indicater to indicate it's hoverable */
}

.immersive-translate-tooltip-content {
  /* here's the magic */
  position: absolute;
  z-index: 100000000000;

  left: 50%;
  bottom: 0;
  transform: translate(-50%, 110%);
  line-height: 1;
  /* and add a small left margin */

  /* basic styles */
  width: max-content;
  max-width: 250px;
  word-wrap: break-word;
  white-space: pre-line;
  padding: 10px;
  border-radius: 10px;
  background: #000C;
  color: #fff;
  text-align: center;
  font-size: 14px;
  display: none;
  /* hide by default */
}

.immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip-content-table {
  left: unset !important;
  bottom: unset !important;
  transform: translate(-10%, 50%) !important;
}


.immersive-translate-tooltip:hover:before {
  display: block;
}



.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}
</style><style data-id="immersive-translate-user-custom-style">:root {

.immersive-translate-target-inner { font-family: inherit; }
}
</style><style data-id="immersive-translate-dynamic-injected-css">.immersive-translate-target-wrapper[dir='rtl'] {text-align: right;}
.immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {display:block;}
.immersive-translate-target-wrapper {word-break: break-word;}
</style></head><body data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>sd_event_add_defer</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><script src="https://code.jquery.com/jquery-3.7.1.min.js"></script><script src="../nav.js"></script><style>
    a.headerlink {
      color: #c60f0f;
      font-size: 0.8em;
      padding: 0 4px 0 4px;
      text-decoration: none;
      visibility: hidden;
    }

    a.headerlink:hover {
      background-color: #c60f0f;
      color: white;
    }

    h1:hover > a.headerlink, h2:hover > a.headerlink, h3:hover > a.headerlink, dt:hover > a.headerlink {
      visibility: visible;
    }
  </style><a href="index.html" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">Index </a>·
  <a href="systemd.directives.html" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">Directives </a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">索引 · 指令</font></font></font><span style="float:right" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">systemd 255</span><hr><div class="refentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><a name="sd_event_add_defer" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"></a><div class="titlepage" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"></div><div class="refnamediv" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><h2 data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">Name<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">名称</font></font></font></h2><p data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">sd_event_add_defer, sd_event_add_post, sd_event_add_exit, sd_event_handler_t — Add static event sources to an event loop<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">sd_event_add_defer, sd_event_add_post, sd_event_add_exit, sd_event_handler_t — 将静态事件源添加到事件循环中</font></font></font></p></div><div class="refsynopsisdiv" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><h2 data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">Synopsis<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">简介</font></font></font></h2><div class="funcsynopsis"><pre class="funcsynopsisinfo">#include &lt;systemd/sd-event.h&gt;</pre><pre class="funcsynopsisinfo"><span class="token">typedef</span> struct sd_event_source sd_event_source;</pre><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">typedef int (*<b class="fsfunc">sd_event_handler_t</b>)(</code></td><td>sd_event_source *<var class="pdparam">s</var>, </td></tr><tr><td>&nbsp;</td><td>void *<var class="pdparam">userdata</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_event_add_defer</b>(</code></td><td>sd_event *<var class="pdparam">event</var>, </td></tr><tr><td>&nbsp;</td><td>sd_event_source **<var class="pdparam">source</var>, </td></tr><tr><td>&nbsp;</td><td>sd_event_handler_t <var class="pdparam">handler</var>, </td></tr><tr><td>&nbsp;</td><td>void *<var class="pdparam">userdata</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_event_add_post</b>(</code></td><td>sd_event *<var class="pdparam">event</var>, </td></tr><tr><td>&nbsp;</td><td>sd_event_source **<var class="pdparam">source</var>, </td></tr><tr><td>&nbsp;</td><td>sd_event_handler_t <var class="pdparam">handler</var>, </td></tr><tr><td>&nbsp;</td><td>void *<var class="pdparam">userdata</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_event_add_exit</b>(</code></td><td>sd_event *<var class="pdparam">event</var>, </td></tr><tr><td>&nbsp;</td><td>sd_event_source **<var class="pdparam">source</var>, </td></tr><tr><td>&nbsp;</td><td>sd_event_handler_t <var class="pdparam">handler</var>, </td></tr><tr><td>&nbsp;</td><td>void *<var class="pdparam">userdata</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div></div></div><div class="refsect1" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><a name="id-1.5" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"></a><h2 id="Description" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">Description<a class="headerlink" title="Permalink to this headline" href="#Description" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">描述</font></font></font></h2><p data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">These three functions add new static event sources to an event loop. The event loop object is
    specified in the <em class="parameter" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><code data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">event</code></em> parameter, the event source object is returned in the
    <em class="parameter" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><code data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">source</code></em> parameter. The event sources are enabled statically and will "fire" when
    the event loop is run and the conditions described below are met.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这三个函数向事件循环中添加新的静态事件源。事件循环对象在 <code data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">event</code> 参数中指定，事件源对象在 <code data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">source</code> 参数中返回。事件源在静态情况下启用，并且在运行事件循环并满足下面描述的条件时会“触发”。</font></font></font></p><p data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">The <em class="parameter" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><code data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">handler</code></em> is a function to call or <code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">NULL</code>. The handler
    function will be passed the <em class="parameter" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><code data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">userdata</code></em> pointer, which may be chosen freely by the
    caller. The handler may return negative to signal an error (see below), other return values are
    ignored. If <em class="parameter" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><code data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">handler</code></em> is <code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">NULL</code>, a default handler that calls
    <a href="sd_event_exit.html#" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_exit</span>(3)</span></a> will be
    used.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">handler</code> 是要调用的函数或 <code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">NULL</code> 。处理程序函数将接收 <code data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">userdata</code> 指针，调用者可以自由选择。处理程序可以返回负值以表示错误（见下文），其他返回值将被忽略。如果 <code data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">handler</code> 是 <code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">NULL</code> ，将使用调用 sd_event_exit(3)的默认处理程序。</font></font></font></p><p data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_defer()</code> adds a new event
    source that will be dispatched instantly, before the event loop
    goes to sleep again and waits for new events. By default, the
    handler will be called once
    (<code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">SD_EVENT_ONESHOT</code>). Note that if the event
    source is set to <code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">SD_EVENT_ON</code> the event loop
    will never go to sleep again, but continuously call the handler,
    possibly interleaved with other event sources.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_defer()</code> 添加一个新的事件源，该事件源将立即分派，然后事件循环再次进入睡眠状态等待新事件。默认情况下，处理程序将被调用一次（ <code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">SD_EVENT_ONESHOT</code> ）。请注意，如果事件源设置为 <code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">SD_EVENT_ON</code> ，事件循环将永远不会再次进入睡眠状态，而是持续调用处理程序，可能与其他事件源交错。</font></font></font></p><p data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_post()</code> adds a new event
    source that is run before the event loop will sleep and wait
    for new events, but only after at least one other non-post event
    source was dispatched. By default, the source is enabled
    permanently (<code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">SD_EVENT_ON</code>). Note that this
    event source type will still allow the event loop to go to sleep
    again, even if set to <code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">SD_EVENT_ON</code>, as long as
    no other event source is ever triggered.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_post()</code> 添加一个新的事件源，该事件源在事件循环进入睡眠状态并等待新事件之前运行，但仅在至少有一个其他非后置事件源被分派后才会运行。默认情况下，该源永久启用（ <code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">SD_EVENT_ON</code> ）。请注意，即使设置为 <code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">SD_EVENT_ON</code> ，此事件源类型仍将允许事件循环再次进入睡眠状态，只要没有触发其他事件源。</font></font></font></p><p data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_exit()</code> adds a new event
    source that will be dispatched when the event loop is terminated
    with <a href="sd_event_exit.html#" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_exit</span>(3)</span></a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_exit()</code> 添加一个新的事件源，当事件循环使用 sd_event_exit(3)终止时将被分派。</font></font></font></p><p data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">The
    <a href="sd_event_source_set_enabled.html#" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_source_set_enabled</span>(3)</span></a>
    function may be used to enable the event source permanently
    (<code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">SD_EVENT_ON</code>) or to make it fire just once
    (<code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">SD_EVENT_ONESHOT</code>).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">sd_event_source_set_enabled(3) 函数可用于永久启用事件源（ <code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">SD_EVENT_ON</code> ）或仅使其触发一次（ <code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">SD_EVENT_ONESHOT</code> ）。</font></font></font></p><p data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">If the handler function returns a negative error code, it will either be disabled after the
    invocation, even if the <code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">SD_EVENT_ON</code> mode was requested before, or it will cause the
    loop to terminate, see
    <a href="sd_event_source_set_exit_on_failure.html#" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_source_set_exit_on_failure</span>(3)</span></a>.
    <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果处理程序函数返回负错误代码，则无论之前是否请求了 <code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">SD_EVENT_ON</code> 模式，它都将在调用后被禁用，或者它将导致循环终止，请参阅 sd_event_source_set_exit_on_failure(3)。</font></font></font></p><p data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">To destroy an event source object use
    <a href="sd_event_source_unref.html#" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_source_unref</span>(3)</span></a>,
    but note that the event source is only removed from the event loop
    when all references to the event source are dropped. To make sure
    an event source does not fire anymore, even when there's still a
    reference to it kept, consider setting the event source to
    <code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">SD_EVENT_OFF</code> with
    <a href="sd_event_source_set_enabled.html#" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_source_set_enabled</span>(3)</span></a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要销毁事件源对象，请使用 sd_event_source_unref(3)，但请注意，只有在删除对事件源的所有引用时，事件源才会从事件循环中移除。要确保事件源不再触发，即使仍保留对其的引用，请考虑使用 sd_event_source_set_enabled(3) 将事件源设置为 <code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">SD_EVENT_OFF</code> 。</font></font></font></p><p data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">If the second parameter of these functions is passed as <code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">NULL</code> no reference to
    the event source object is returned. In this case the event source is considered "floating", and will be
    destroyed implicitly when the event loop itself is destroyed.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果这些函数的第二个参数传递为 <code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">NULL</code> ，则不会返回对事件源对象的引用。在这种情况下，事件源被视为“浮动”，并且在事件循环本身被销毁时将隐式销毁。</font></font></font></p><p data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">If the <em class="parameter" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><code data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">handler</code></em> parameter to <code class="function" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_defer()</code> or
    <code class="function" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_post()</code> is <code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">NULL</code>, and the event source fires, this
    will be considered a request to exit the event loop. In this case, the <em class="parameter" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><code data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">userdata</code></em>
    parameter, cast to an integer, is passed as the exit code parameter to
    <a href="sd_event_exit.html#" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_exit</span>(3)</span></a>. Similar
    functionality is not available for <code class="function" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_exit()</code>, as these types of event
    sources are only dispatched when exiting anyway.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果 <code class="function" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_defer()</code> 或 <code class="function" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_post()</code> 的 <code data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">handler</code> 参数为 <code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">NULL</code> ，并且事件源触发，则将被视为请求退出事件循环。在这种情况下，将 <code data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">userdata</code> 参数转换为整数，并作为退出码参数传递给 sd_event_exit(3)。对于 <code class="function" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_exit()</code> ，类似的功能不可用，因为这些类型的事件源只在退出时分派。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><a name="id-1.6" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"></a><h2 id="Return Value" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">Return Value<a class="headerlink" title="Permalink to this headline" href="#Return%20Value" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">返回值 ¶</font></font></font></h2><p data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">On success, these functions return 0 or a positive
    integer. On failure, they return a negative errno-style error
    code.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">成功时，这些函数返回 0 或正整数。失败时，它们返回负的 errno 风格的错误代码。</font></font></font></p><div class="refsect2" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><a name="id-1.6.3" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"></a><h3 id="Errors" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">Errors<a class="headerlink" title="Permalink to this headline" href="#Errors" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">错误 ¶</font></font></font></h3><p data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">Returned errors may indicate the following problems:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">返回的错误可能表示以下问题：</font></font></font></p><div class="variablelist" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><dl class="variablelist" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><dt id="-ENOMEM" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">-ENOMEM</code></span><a class="headerlink" title="Permalink to this term" href="#-ENOMEM" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">¶</a></dt><dd data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><p data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">Not enough memory to allocate an object.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">没有足够的内存来分配对象。</font></font></font></p></dd><dt id="-EINVAL" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">-EINVAL</code></span><a class="headerlink" title="Permalink to this term" href="#-EINVAL" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">¶</a></dt><dd data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><p data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">An invalid argument has been passed.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">传递了无效参数。</font></font></font></p></dd><dt id="-ESTALE" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">-ESTALE</code></span><a class="headerlink" title="Permalink to this term" href="#-ESTALE" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">¶</a></dt><dd data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><p data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">The event loop is already terminated.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">事件循环已经终止。</font></font></font></p></dd><dt id="-ECHILD" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">-ECHILD</code></span><a class="headerlink" title="Permalink to this term" href="#-ECHILD" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">¶</a></dt><dd data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><p data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">The event loop has been created in a different process, library or module instance.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">事件循环已在不同的进程、库或模块实例中创建。</font></font></font></p></dd></dl></div></div></div><div class="refsect1" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><a name="id-1.7" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"></a><h2 id="Notes" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">Notes<a class="headerlink" title="Permalink to this headline" href="#Notes" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意事项 ¶</font></font></font></h2><p data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1"><a name="pkgconfig-text" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"></a>Functions described here are available as a shared
  library, which can be compiled against and linked to with the
  <code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">libsystemd</code>&nbsp;<a href="http://linux.die.net/man/1/pkg-config" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">pkg-config</span>(1)</span></a>
  file.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此处描述的函数可作为共享库使用，可以通过 <code class="constant" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">libsystemd</code> pkg-config(1) 文件进行编译和链接。</font></font></font></p><p data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1"><a name="getenv" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"></a>The code described here uses
<a href="https://man7.org/linux/man-pages/man3/getenv.3.html" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">getenv</span>(3)</span></a>,
which is declared to be not multi-thread-safe. This means that the code calling the functions described
here must not call
<a href="https://man7.org/linux/man-pages/man3/setenv.3.html" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">setenv</span>(3)</span></a>
from a parallel thread. It is recommended to only do calls to <code class="function" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">setenv()</code>
from an early phase of the program when no other threads have been started.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此处描述的代码使用了 getenv(3)，该函数被声明为非多线程安全。这意味着调用此处描述的函数的代码不能从并行线程中调用 setenv(3)。建议仅在程序的早期阶段进行对 <code class="function" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">setenv()</code> 的调用，此时尚未启动其他线程。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><a name="id-1.8" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"></a><h2 id="History" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">History<a class="headerlink" title="Permalink to this headline" href="#History" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">历史 ¶</font></font></font></h2><p data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_defer()</code>,
    <code class="function" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_post()</code>,
    <code class="function" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_exit()</code>, and
    <code class="function" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_handler_t()</code> were added in version 217.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_defer()</code> ， <code class="function" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_post()</code> ， <code class="function" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_exit()</code> 和 <code class="function" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_handler_t()</code> 是在版本 217 中添加的。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><a name="id-1.9" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"></a><h2 id="See Also" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">See Also<a class="headerlink" title="Permalink to this headline" href="#See%20Also" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">参见 ¶</font></font></font></h2><p data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860" data-immersive-translate-paragraph="1">
      <a href="systemd.html#" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">systemd</span>(1)</span></a>,
      <a href="sd-event.html#" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd-event</span>(3)</span></a>,
      <a href="sd_event_new.html#" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_new</span>(3)</span></a>,
      <a href="sd_event_now.html#" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_now</span>(3)</span></a>,
      <a href="sd_event_add_io.html#" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_io</span>(3)</span></a>,
      <a href="sd_event_add_time.html#" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_time</span>(3)</span></a>,
      <a href="sd_event_add_signal.html#" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_signal</span>(3)</span></a>,
      <a href="sd_event_add_child.html#" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_child</span>(3)</span></a>,
      <a href="sd_event_add_inotify.html#" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_add_inotify</span>(3)</span></a>,
      <a href="sd_event_source_set_enabled.html#" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_source_set_enabled</span>(3)</span></a>,
      <a href="sd_event_source_set_priority.html#" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_source_set_priority</span>(3)</span></a>,
      <a href="sd_event_source_set_userdata.html#" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_source_set_userdata</span>(3)</span></a>,
      <a href="sd_event_source_set_description.html#" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_source_set_description</span>(3)</span></a>,
      <a href="sd_event_source_set_floating.html#" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_source_set_floating</span>(3)</span></a>,
      <a href="sd_event_exit.html#" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="citerefentry" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860"><span class="refentrytitle" data-immersive-translate-walked="b94cd2c0-d4e4-4387-8e43-fea0f7d61860">sd_event_exit</span>(3)</span></a>
    </p></div></div>
</body></html>