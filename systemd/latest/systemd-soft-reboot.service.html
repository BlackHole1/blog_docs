<html><head><style data-id="immersive-translate-default-injected-css">:root {
  --immersive-translate-theme-underline-borderColor: #72ece9;
  --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
  --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
  --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
  --immersive-translate-theme-highlight-backgroundColor: #ffff00;
  --immersive-translate-theme-dashed-borderColor: #59c1bd;
  --immersive-translate-theme-blockquote-borderColor: #cc3355;
  --immersive-translate-theme-thinDashed-borderColor: #ff374f;
  --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
  --immersive-translate-theme-dashedBorder-borderRadius: 0;
  --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
  --immersive-translate-theme-solidBorder-borderRadius: 0;
  --immersive-translate-theme-dotted-borderColor: #94a3b8;
  --immersive-translate-theme-wavy-borderColor: #72ece9;
  --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
  --immersive-translate-theme-grey-textColor: #2f4f4f;
  --immersive-translate-theme-marker-backgroundColor: #fbda41;
  --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
  --immersive-translate-theme-marker2-backgroundColor: #ffff00;
  --immersive-translate-theme-opacity-opacity: 10;
}

.immersive-translate-target-translation-pre-whitespace {
  white-space: pre-wrap !important;
}

.immersive-translate-pdf-target-container {
  position: absolute;
  background-color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
    sans-serif;
  top: 0;
  width: 600px;
  height: 100%;
  z-index: 2;
  line-height: 1.3;
  font-size: 16px;
}
.immersive-translate-target-wrapper[dir='rtl'] {
  text-align: right;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
  color: rgb(0, 0, 0);
  white-space: normal;
  position: absolute;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
  color: inherit;
  white-space: inherit;
  position: unset;
}

.immersive-translate-state-dual>br {
  display: none;
}

.immersive-translate-target-translation-block-wrapper {
  margin: 8px 0 !important;
  display: inline-block;
}

.immersive-translate-target-translation-pdf-block-wrapper {
  margin: 0 !important;
  display: block;
}

.immersive-translate-target-translation-theme-grey-inner {
  color: var(--immersive-translate-theme-grey-textColor);
}


.immersive-translate-target-translation-theme-underline-inner {
  border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
}

.immersive-translate-target-translation-theme-nativeUnderline-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
}

.immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-theme-nativeDashed-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
  text-decoration-style: dashed !important;
}

.immersive-translate-target-translation-theme-thinDashed-inner {
  border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
}

.immersive-translate-target-translation-theme-dotted-inner {
  background-image: linear-gradient(to right,
      var(--immersive-translate-theme-dotted-borderColor) 30%,
      rgba(255, 255, 255, 0) 0%);
  background-position: bottom;
  background-size: 5px 1px;
  background-repeat: repeat-x;
  padding-bottom: 3px;
}

.immersive-translate-target-translation-theme-nativeDotted-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
  text-decoration-style: dotted !important;
}

.immersive-translate-target-translation-theme-wavy-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
  text-decoration-style: wavy !important;
}

.immersive-translate-target-translation-theme-dashed-inner {
  background: linear-gradient(to right,
      var(--immersive-translate-theme-dashed-borderColor) 0%,
      var(--immersive-translate-theme-dashed-borderColor) 50%,
      transparent 50%,
      transparent 100%) repeat-x left bottom;
  background-size: 8px 2px;
  padding-bottom: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
  content: "";
  display: block;
  max-width: 80px;
  width: 10%;
  border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  padding-top: 8px;
}

.immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
  content: "";
  border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  max-height: 16px;
  height: 16px;
  padding-left: 8px;
}

.immersive-translate-target-translation-theme-highlight-inner {
  background: var(--immersive-translate-theme-highlight-backgroundColor);
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-block-wrapper-theme-marker {
  line-height: 1.5em;
}

.immersive-translate-target-translation-theme-marker2-inner {
  font-weight: bold;
  text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
    16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
    2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
    -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
}

.immersive-translate-target-translation-theme-marker-inner {
  /* TODO: add more texture */
  background: linear-gradient(to right,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-theme-weakening {
  opacity: 0.618 !important;
}

.immersive-translate-target-translation-theme-italic {
  font-style: italic !important;
}

.immersive-translate-target-translation-theme-bold {
  font-weight: bold !important;
}

.immersive-translate-target-translation-block-wrapper-theme-paper {
  margin: 8px 0;
  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
  padding: 16px 32px;
  display: block;
}

.immersive-translate-target-translation-block-wrapper-theme-blockquote {
  border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
  padding-left: 12px !important;
  margin-top: 4px;
  margin-bottom: 4px;
  padding-top: 4px;
  padding-bottom: 4px;
  display: block;
}

.immersive-translate-target-translation-theme-mask-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
  filter: none !important;
}

[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}


/* opacity theme start */

.immersive-translate-target-translation-theme-opacity-inner {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: none !important;
}


.immersive-translate-target-translation-theme-mask-inner:hover {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
  filter: none !important;
}


[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
  filter: none !important;
}

/* opacity theme end */

/* vertical css , please remain it in the last one. */
.immersive-translate-target-translation-vertical-block-wrapper {
  margin: 0px 8px !important;
}

.immersive-translate-text {
  font-size: 15px !important;
}

.immersive-translate-error-toast {
  position: fixed;
  top: 5%;
  z-index: 99999999;
  left: 0;
  right: 0;
  margin: auto;
  max-width: 300px;
  padding: 16px;
  border-radius: 12px;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}

@media all and (min-width: 750px) {
  .immersive-translate-error-toast {
    max-width: 400px;
  }
}


.immersive-translate-clickable-button {
  cursor: pointer;
}

.immersive-translate-help-button {
  cursor: pointer;
}

.immersive-translate-loading-text:before {
  content: "...";
}


/* dark mode for loading */

@media only screen and (prefers-color-scheme: dark) {
  .immersive-translate-loading {
    border: 2px rgba(255, 255, 255, 0.25) solid !important;
    border-top: 2px rgba(255, 255, 255, 1) solid !important;
  }
}

.immersive-translate-error-wrapper {
  position: relative;
  display: inline-flex;
  padding: 6px;
  margin: 0 12px;
  white-space: nowrap;
  font-size: 0.9em;
}
[lang="zh-CN"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}
[lang="zh-TW"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}


.immersive-translate-tooltip {
  position: relative;
  display: inline-flex;
  /* little indicater to indicate it's hoverable */
}

.immersive-translate-tooltip-content {
  /* here's the magic */
  position: absolute;
  z-index: 100000000000;

  left: 50%;
  bottom: 0;
  transform: translate(-50%, 110%);
  line-height: 1;
  /* and add a small left margin */

  /* basic styles */
  width: max-content;
  max-width: 250px;
  word-wrap: break-word;
  white-space: pre-line;
  padding: 10px;
  border-radius: 10px;
  background: #000C;
  color: #fff;
  text-align: center;
  font-size: 14px;
  display: none;
  /* hide by default */
}

.immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip-content-table {
  left: unset !important;
  bottom: unset !important;
  transform: translate(-10%, 50%) !important;
}


.immersive-translate-tooltip:hover:before {
  display: block;
}



.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}
</style><style data-id="immersive-translate-user-custom-style">:root {

.immersive-translate-target-inner { font-family: inherit; }
}
</style><style data-id="immersive-translate-dynamic-injected-css">.immersive-translate-target-wrapper[dir='rtl'] {text-align: right;}
.immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {display:block;}
.immersive-translate-target-wrapper {word-break: break-word;}
</style></head><body data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>systemd-soft-reboot.service</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><script src="https://code.jquery.com/jquery-3.7.1.min.js"></script><script src="../nav.js"></script><style>
    a.headerlink {
      color: #c60f0f;
      font-size: 0.8em;
      padding: 0 4px 0 4px;
      text-decoration: none;
      visibility: hidden;
    }

    a.headerlink:hover {
      background-color: #c60f0f;
      color: white;
    }

    h1:hover > a.headerlink, h2:hover > a.headerlink, h3:hover > a.headerlink, dt:hover > a.headerlink {
      visibility: visible;
    }
  </style><a href="index.html" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">Index </a>·
  <a href="systemd.directives.html" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">Directives </a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">索引 · 指令</font></font></font><span style="float:right" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">systemd 255</span><hr><div class="refentry" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><a name="systemd-soft-reboot.service" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"></a><div class="titlepage" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"></div><div class="refnamediv" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><h2 data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">Name<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">名称</font></font></font></h2><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">systemd-soft-reboot.service — Userspace reboot operation<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">systemd-soft-reboot.service — 用户空间重启操作</font></font></font></p></div><div class="refsynopsisdiv" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><h2 data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">Synopsis<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">简介</font></font></font></h2><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><code class="filename" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">systemd-soft-reboot.service</code></p></div><div class="refsect1" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><a name="id-1.5" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"></a><h2 id="Description" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">Description<a class="headerlink" title="Permalink to this headline" href="#Description" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">描述</font></font></font></h2><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1"><code class="filename" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">systemd-soft-reboot.service</code> is a system service that is pulled in by
    <code class="filename" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">soft-reboot.target</code> and is responsible for performing a userspace-only reboot
    operation. When invoked, it will send the <code class="constant" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">SIGTERM</code> signal to any processes left
    running (but does not wait for the processes to exit), and follow up with <code class="constant" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">SIGKILL</code>.
    If the <code class="filename" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">/run/nextroot/</code> directory exists (which may be a regular directory, a
    directory mount point or a symlink to either) then it will switch the file system root to it. It then
    reexecutes the service manager off the (possibly now new) root file system, which will enqueue a new boot
    transaction as in a normal reboot.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="filename" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">systemd-soft-reboot.service</code> 是一个系统服务，被 <code class="filename" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">soft-reboot.target</code> 引入，并负责执行仅限用户空间的重启操作。当被调用时，它会向任何仍在运行的进程发送 <code class="constant" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">SIGTERM</code> 信号（但不等待进程退出），然后跟随 <code class="constant" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">SIGKILL</code> 。如果存在 <code class="filename" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">/run/nextroot/</code> 目录（可能是常规目录、目录挂载点或指向其中的符号链接），则会将文件系统根切换到该目录。然后重新在（可能是新的）根文件系统上执行服务管理器，服务管理器将像在正常重启时排队一个新的引导事务。</font></font></font></p><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">Such a userspace-only reboot operation permits updating or resetting the entirety of userspace with
    minimal downtime, as the reboot operation does <span class="emphasis" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><em data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">not</em></span> transition through:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这样的仅限用户空间的重启操作允许在最小停机时间内更新或重置整个用户空间，因为重启操作不会经过以下阶段：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><li class="listitem" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">The second phase of regular shutdown, as implemented by
      <a href="systemd-shutdown.html#" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><span class="citerefentry" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><span class="refentrytitle" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">systemd-shutdown</span>(8)</span></a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">常规关机的第二阶段，由 systemd-shutdown(8)实施。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">The third phase of regular shutdown, i.e. the return to the initrd context.
      <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">常规关机的第三阶段，即返回到 initrd 上下文。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">The hardware reboot operation.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">硬件重启操作。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">The firmware initialization.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">固件初始化。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">The boot loader initialization.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">引导加载程序初始化。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">The kernel initialization.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">内核初始化。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">The initrd initialization.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">initrd 初始化。</font></font></font></p></li></ul></div><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">However this form of reboot comes with drawbacks as well:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然而，这种重新启动方式也有缺点：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><li class="listitem" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">The OS update remains incomplete, as the kernel is not reset and continues
      running.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">操作系统更新仍然不完整，因为内核没有被重置，继续运行。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">Kernel settings (such as <code class="filename" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">/proc/sys/</code> settings, a.k.a. "sysctl", or
      <code class="filename" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">/sys/</code> settings) are not reset.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">内核设置（如 <code class="filename" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">/proc/sys/</code> 设置，又称“sysctl”，或 <code class="filename" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">/sys/</code> 设置）不会被重置。</font></font></font></p></li></ul></div><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">These limitations may be addressed by various means, which are outside of the scope of this
    documentation, such as kernel live-patching and sufficiently comprehensive
    <code class="filename" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">/etc/sysctl.d/</code> files.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这些限制可以通过各种方式来解决，这些方式超出了本文档的范围，例如内核实时修补和足够全面的 <code class="filename" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">/etc/sysctl.d/</code> 文件。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><a name="id-1.6" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"></a><h2 id="Resource Pass-Through" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">Resource Pass-Through<a class="headerlink" title="Permalink to this headline" href="#Resource%20Pass-Through" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">资源透传 ¶</font></font></font></h2><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">Various runtime OS resources can passed from a system runtime to the next, through the userspace
    reboot operation. Specifically:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">各种运行时操作系统资源可以通过用户空间重启操作从一个系统运行时传递到下一个系统运行时。具体来说：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><li class="listitem" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">File descriptors placed in the file descriptor store of services that remain active
      until the very end are passed to the next boot, where they are placed in the file descriptor store of
      the same unit. For this to work, units must declare <code class="varname" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">DefaultDependencies=no</code> (and
      avoid a manual <code class="varname" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">Conflicts=shutdown.target</code> or similar) to ensure they are not
      terminated as usual during the system shutdown operation. Alternatively, use
      <code class="varname" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">FileDescriptorStorePreserve=</code> to allow the file descriptor store to remain pinned
      even when the unit is down. See
      <a href="systemd.service.html#" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><span class="citerefentry" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><span class="refentrytitle" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">systemd.service</span>(5)</span></a> for
      details about the file descriptor store.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">放置在服务文件描述符存储中直到最后仍然活动的文件描述符会传递到下一个引导中，在那里它们会被放置在相同单元的文件描述符存储中。为了使其工作，单元必须声明 <code class="varname" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">DefaultDependencies=no</code> （并避免手动 <code class="varname" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">Conflicts=shutdown.target</code> 或类似操作），以确保它们在系统关闭操作期间不会像通常那样被终止。或者，使用 <code class="varname" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">FileDescriptorStorePreserve=</code> 允许文件描述符存储在单元关闭时保持固定。有关文件描述符存储的详细信息，请参阅 systemd.service(5)。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">Similar to this, file descriptors associated with <code class="filename" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">.socket</code> units
      remain open (and connectible) if the units are not stopped during the transition. (Achieved by
      <code class="varname" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">DefaultDependencies=no</code>.)<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">类似于此，与 <code class="filename" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">.socket</code> 单元关联的文件描述符在过渡期间如果单元未停止则保持打开（可连接）。（通过 <code class="varname" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">DefaultDependencies=no</code> 实现。）</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">The <code class="filename" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">/run/</code> file system remains mounted and populated and may be
      used to pass state information between such userspace reboot cycles.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="filename" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">/run/</code> 文件系统仍然挂载并填充，并可用于在此类用户空间重启周期之间传递状态信息。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">Service processes may continue to run over the transition, past soft-reboot and into
      the next session, if they are placed in services that remain active until the very end of shutdown
      (which again is achieved via <code class="varname" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">DefaultDependencies=no</code>). They must also be set up to
      avoid being killed by the aforementioned <code class="constant" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">SIGTERM</code> and <code class="constant" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">SIGKILL</code>
      via <code class="varname" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">SurviveFinalKillSignal=yes</code>, and also be configured to avoid being stopped on
      isolate via <code class="varname" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">IgnoreOnIsolate=yes</code>. They also have to be configured to be stopped on
      normal shutdown, reboot and maintenance mode. Finally, they have to be ordered after
      <code class="constant" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">basic.target</code> to ensure correct ordeering on boot. Note that in case any new or
      custom units are used to isolate to, or that implement an equivalent shutdown functionality, they will
      also have to be configured manually for correct ordering and conflicting. For example:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">服务进程可以在过渡期间继续运行，经过软重启并进入下一个会话，如果它们被放置在直到关机结束仍然活动的服务中（再次通过 <code class="varname" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">DefaultDependencies=no</code> 实现）。它们还必须设置为避免被上述 <code class="constant" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">SIGTERM</code> 和 <code class="constant" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">SIGKILL</code> 通过 <code class="varname" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">SurviveFinalKillSignal=yes</code> 杀死，并且配置为避免在隔离时停止通过 <code class="varname" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">IgnoreOnIsolate=yes</code> 。它们还必须配置为在正常关机、重启和维护模式下停止。最后，它们必须在 <code class="constant" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">basic.target</code> 之后排序，以确保在启动时正确排序。请注意，如果使用任何新的或自定义单元来隔离，或者实现等效的关机功能，还必须手动配置它们以进行正确的排序和冲突处理。例如：</font></font></font></p><pre class="programlisting">[Unit]
Description=My surviving service
SurviveFinalKillSignal=yes
IgnoreOnIsolate=yes
DefaultDependencies=no
After=basic.target
Conflicts=reboot.target
Before=reboot.target
Conflicts=kexec.target
Before=kexec.target
Conflicts=poweroff.target
Before=poweroff.target
Conflicts=halt.target
Before=halt.target
Conflicts=rescue.target
Before=rescue.target
Conflicts=emergency.target
Before=emergency.target

[Service]
Type=oneshot
ExecStart=sleep infinity
      </pre></li><li class="listitem" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">File system mounts may remain mounted during the transition, and complex storage
      attached, if configured to remain until the very end of the shutdown process. (Also achieved via
      <code class="varname" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">DefaultDependencies=no</code>, and by avoiding
      <code class="varname" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">Conflicts=umount.target</code>)<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">文件系统挂载可能在过渡期间保持挂载，并连接复杂存储，如果配置为保持直到关机过程的最后阶段。（也通过 <code class="varname" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">DefaultDependencies=no</code> 实现，并通过避免 <code class="varname" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">Conflicts=umount.target</code> ）</font></font></font></p></li></ul></div><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">Even though passing resources from one soft reboot cycle to the next is possible this way, we
    strongly suggest to use this functionality sparingly only, as it creates a more fragile system as
    resources from different versions of the OS and applications might be mixed with unforeseen
    consequences. In particular it's recommended to <span class="emphasis" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><em data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">avoid</em></span> allowing processes to survive
    the soft reboot operation, as this means code updates will necessarily be incomplete, and processes
    typically pin various other resources (such as the file system they are backed by), thus increasing
    memory usage (as two versions of the OS/application/file system might be kept in memory). Leaving
    processes running during a soft-reboot operation requires disconnecting the service comprehensively from
    the rest of the OS, i.e. minimizing IPC and reducing sharing of resources with the rest of the OS. A
    possible mechanism to achieve this is the concept of <a class="ulink" href="https://systemd.io/PORTABLE_SERVICES" target="_top" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">Portable Services</a>, but make sure no resource from the
    host's OS filesystems is pinned via <code class="varname" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">BindPaths=</code> or similar unit settings, otherwise the
    old, originating filesystem will remain mounted as long as the unit is running.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">尽管通过这种方式将资源从一个软重启周期传递到下一个是可能的，但我们强烈建议仅在必要时使用此功能，因为这会导致系统更加脆弱，不同版本的操作系统和应用程序的资源可能会混合在一起，带来意想不到的后果。特别建议避免允许进程在软重启操作中存活，因为这意味着代码更新将不完整，并且进程通常会固定各种其他资源（例如它们所支持的文件系统），从而增加内存使用量（因为两个版本的操作系统/应用程序/文件系统可能会保留在内存中）。在软重启操作期间保持进程运行需要全面将服务与操作系统的其余部分断开连接，即最小化 IPC 并减少与操作系统的其余部分共享资源。实现这一点的可能机制是可移植服务的概念，但请确保不通过 <code class="varname" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">BindPaths=</code> 或类似的单元设置固定主机操作系统文件系统的任何资源，否则旧的原始文件系统将在单元运行时保持挂载状态。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><a name="id-1.7" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"></a><h2 id="Notes" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">Notes<a class="headerlink" title="Permalink to this headline" href="#Notes" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意事项 ¶</font></font></font></h2><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">Note that because
    <a href="systemd-shutdown.html#" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><span class="citerefentry" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><span class="refentrytitle" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">systemd-shutdown</span>(8)</span></a> is
    not executed, the executables in <code class="filename" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">/usr/lib/systemd/system-shutdown/</code> are not executed
    either.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，由于未执行 systemd-shutdown(8)， <code class="filename" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">/usr/lib/systemd/system-shutdown/</code> 中的可执行文件也不会被执行。</font></font></font></p><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">Note that <code class="filename" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">systemd-soft-reboot.service</code> (and related units) should never be
    executed directly. Instead, trigger system shutdown with a command such as "<code class="literal" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">systemctl
    soft-reboot</code>".<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意， <code class="filename" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">systemd-soft-reboot.service</code> （以及相关单元）不应直接执行。而是使用诸如“ <code class="literal" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">systemctl
    soft-reboot</code> ”之类的命令触发系统关机。</font></font></font></p><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">Note that if a new root file system has been set up on "<code class="literal" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">/run/nextroot/</code>", a
    <span class="command" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><strong data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">soft-reboot</strong></span> will be performed when the <span class="command" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><strong data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">reboot</strong></span> command is
    invoked.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，如果在“ <code class="literal" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">/run/nextroot/</code> ”上设置了新的根文件系统，则在调用重新启动命令时将执行软重启。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><a name="id-1.8" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"></a><h2 id="See Also" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">See Also<a class="headerlink" title="Permalink to this headline" href="#See%20Also" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">参见 ¶</font></font></font></h2><p data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963" data-immersive-translate-paragraph="1">
      <a href="systemd.html#" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><span class="citerefentry" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><span class="refentrytitle" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">systemd</span>(1)</span></a>,
      <a href="systemctl.html#" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><span class="citerefentry" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><span class="refentrytitle" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">systemctl</span>(1)</span></a>,
      <a href="systemd.special.html#" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><span class="citerefentry" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><span class="refentrytitle" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">systemd.special</span>(7)</span></a>,
      <a href="systemd-poweroff.service.html#" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><span class="citerefentry" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><span class="refentrytitle" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">systemd-poweroff.service</span>(8)</span></a>,
      <a href="systemd-suspend.service.html#" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><span class="citerefentry" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><span class="refentrytitle" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">systemd-suspend.service</span>(8)</span></a>,
      <a href="bootup.html#" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><span class="citerefentry" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963"><span class="refentrytitle" data-immersive-translate-walked="97037e86-5512-41b1-b663-bea20e6fe963">bootup</span>(7)</span></a>
    </p></div></div>
</body></html>