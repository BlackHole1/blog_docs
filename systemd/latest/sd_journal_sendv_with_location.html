<html><head><style data-id="immersive-translate-default-injected-css">:root {
  --immersive-translate-theme-underline-borderColor: #72ece9;
  --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
  --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
  --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
  --immersive-translate-theme-highlight-backgroundColor: #ffff00;
  --immersive-translate-theme-dashed-borderColor: #59c1bd;
  --immersive-translate-theme-blockquote-borderColor: #cc3355;
  --immersive-translate-theme-thinDashed-borderColor: #ff374f;
  --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
  --immersive-translate-theme-dashedBorder-borderRadius: 0;
  --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
  --immersive-translate-theme-solidBorder-borderRadius: 0;
  --immersive-translate-theme-dotted-borderColor: #94a3b8;
  --immersive-translate-theme-wavy-borderColor: #72ece9;
  --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
  --immersive-translate-theme-grey-textColor: #2f4f4f;
  --immersive-translate-theme-marker-backgroundColor: #fbda41;
  --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
  --immersive-translate-theme-marker2-backgroundColor: #ffff00;
  --immersive-translate-theme-opacity-opacity: 10;
}

.immersive-translate-target-translation-pre-whitespace {
  white-space: pre-wrap !important;
}

.immersive-translate-pdf-target-container {
  position: absolute;
  background-color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
    sans-serif;
  top: 0;
  width: 600px;
  height: 100%;
  z-index: 2;
  line-height: 1.3;
  font-size: 16px;
}
.immersive-translate-target-wrapper[dir='rtl'] {
  text-align: right;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
  color: rgb(0, 0, 0);
  white-space: normal;
  position: absolute;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
  color: inherit;
  white-space: inherit;
  position: unset;
}

.immersive-translate-state-dual>br {
  display: none;
}

.immersive-translate-target-translation-block-wrapper {
  margin: 8px 0 !important;
  display: inline-block;
}

.immersive-translate-target-translation-pdf-block-wrapper {
  margin: 0 !important;
  display: block;
}

.immersive-translate-target-translation-theme-grey-inner {
  color: var(--immersive-translate-theme-grey-textColor);
}


.immersive-translate-target-translation-theme-underline-inner {
  border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
}

.immersive-translate-target-translation-theme-nativeUnderline-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
}

.immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-theme-nativeDashed-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
  text-decoration-style: dashed !important;
}

.immersive-translate-target-translation-theme-thinDashed-inner {
  border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
}

.immersive-translate-target-translation-theme-dotted-inner {
  background-image: linear-gradient(to right,
      var(--immersive-translate-theme-dotted-borderColor) 30%,
      rgba(255, 255, 255, 0) 0%);
  background-position: bottom;
  background-size: 5px 1px;
  background-repeat: repeat-x;
  padding-bottom: 3px;
}

.immersive-translate-target-translation-theme-nativeDotted-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
  text-decoration-style: dotted !important;
}

.immersive-translate-target-translation-theme-wavy-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
  text-decoration-style: wavy !important;
}

.immersive-translate-target-translation-theme-dashed-inner {
  background: linear-gradient(to right,
      var(--immersive-translate-theme-dashed-borderColor) 0%,
      var(--immersive-translate-theme-dashed-borderColor) 50%,
      transparent 50%,
      transparent 100%) repeat-x left bottom;
  background-size: 8px 2px;
  padding-bottom: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
  content: "";
  display: block;
  max-width: 80px;
  width: 10%;
  border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  padding-top: 8px;
}

.immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
  content: "";
  border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  max-height: 16px;
  height: 16px;
  padding-left: 8px;
}

.immersive-translate-target-translation-theme-highlight-inner {
  background: var(--immersive-translate-theme-highlight-backgroundColor);
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-block-wrapper-theme-marker {
  line-height: 1.5em;
}

.immersive-translate-target-translation-theme-marker2-inner {
  font-weight: bold;
  text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
    16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
    2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
    -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
}

.immersive-translate-target-translation-theme-marker-inner {
  /* TODO: add more texture */
  background: linear-gradient(to right,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-theme-weakening {
  opacity: 0.618 !important;
}

.immersive-translate-target-translation-theme-italic {
  font-style: italic !important;
}

.immersive-translate-target-translation-theme-bold {
  font-weight: bold !important;
}

.immersive-translate-target-translation-block-wrapper-theme-paper {
  margin: 8px 0;
  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
  padding: 16px 32px;
  display: block;
}

.immersive-translate-target-translation-block-wrapper-theme-blockquote {
  border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
  padding-left: 12px !important;
  margin-top: 4px;
  margin-bottom: 4px;
  padding-top: 4px;
  padding-bottom: 4px;
  display: block;
}

.immersive-translate-target-translation-theme-mask-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
  filter: none !important;
}

[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}


/* opacity theme start */

.immersive-translate-target-translation-theme-opacity-inner {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: none !important;
}


.immersive-translate-target-translation-theme-mask-inner:hover {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
  filter: none !important;
}


[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
  filter: none !important;
}

/* opacity theme end */

/* vertical css , please remain it in the last one. */
.immersive-translate-target-translation-vertical-block-wrapper {
  margin: 0px 8px !important;
}

.immersive-translate-text {
  font-size: 15px !important;
}

.immersive-translate-error-toast {
  position: fixed;
  top: 5%;
  z-index: 99999999;
  left: 0;
  right: 0;
  margin: auto;
  max-width: 300px;
  padding: 16px;
  border-radius: 12px;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}

@media all and (min-width: 750px) {
  .immersive-translate-error-toast {
    max-width: 400px;
  }
}


.immersive-translate-clickable-button {
  cursor: pointer;
}

.immersive-translate-help-button {
  cursor: pointer;
}

.immersive-translate-loading-text:before {
  content: "...";
}


/* dark mode for loading */

@media only screen and (prefers-color-scheme: dark) {
  .immersive-translate-loading {
    border: 2px rgba(255, 255, 255, 0.25) solid !important;
    border-top: 2px rgba(255, 255, 255, 1) solid !important;
  }
}

.immersive-translate-error-wrapper {
  position: relative;
  display: inline-flex;
  padding: 6px;
  margin: 0 12px;
  white-space: nowrap;
  font-size: 0.9em;
}
[lang="zh-CN"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}
[lang="zh-TW"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}


.immersive-translate-tooltip {
  position: relative;
  display: inline-flex;
  /* little indicater to indicate it's hoverable */
}

.immersive-translate-tooltip-content {
  /* here's the magic */
  position: absolute;
  z-index: 100000000000;

  left: 50%;
  bottom: 0;
  transform: translate(-50%, 110%);
  line-height: 1;
  /* and add a small left margin */

  /* basic styles */
  width: max-content;
  max-width: 250px;
  word-wrap: break-word;
  white-space: pre-line;
  padding: 10px;
  border-radius: 10px;
  background: #000C;
  color: #fff;
  text-align: center;
  font-size: 14px;
  display: none;
  /* hide by default */
}

.immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip-content-table {
  left: unset !important;
  bottom: unset !important;
  transform: translate(-10%, 50%) !important;
}


.immersive-translate-tooltip:hover:before {
  display: block;
}



.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}
</style><style data-id="immersive-translate-user-custom-style">:root {

.immersive-translate-target-inner { font-family: inherit; }
}
</style><style data-id="immersive-translate-dynamic-injected-css">.immersive-translate-target-wrapper[dir='rtl'] {text-align: right;}
.immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {display:block;}
.immersive-translate-target-wrapper {word-break: break-word;}
</style></head><body data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>sd_journal_print</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><script src="https://code.jquery.com/jquery-3.7.1.min.js"></script><script src="../nav.js"></script><style>
    a.headerlink {
      color: #c60f0f;
      font-size: 0.8em;
      padding: 0 4px 0 4px;
      text-decoration: none;
      visibility: hidden;
    }

    a.headerlink:hover {
      background-color: #c60f0f;
      color: white;
    }

    h1:hover > a.headerlink, h2:hover > a.headerlink, h3:hover > a.headerlink, dt:hover > a.headerlink {
      visibility: visible;
    }
  </style><a href="index.html" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">Index </a>·
  <a href="systemd.directives.html" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">Directives </a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">索引 · 指令</font></font></font><span style="float:right" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1">systemd 255</span><hr><div class="refentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><a name="sd_journal_print" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"></a><div class="titlepage" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"></div><div class="refnamediv" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><h2 data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1">Name<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">名称</font></font></font></h2><p data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1">sd_journal_print, sd_journal_printv, sd_journal_send, sd_journal_sendv, sd_journal_perror, SD_JOURNAL_SUPPRESS_LOCATION, sd_journal_print_with_location, sd_journal_printv_with_location, sd_journal_send_with_location, sd_journal_sendv_with_location, sd_journal_perror_with_location — Submit log entries to the journal<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">sd_journal_print, sd_journal_printv, sd_journal_send, sd_journal_sendv, sd_journal_perror, SD_JOURNAL_SUPPRESS_LOCATION, sd_journal_print_with_location, sd_journal_printv_with_location, sd_journal_send_with_location, sd_journal_sendv_with_location, sd_journal_perror_with_location — 将日志条目提交到日志记录器</font></font></font></p></div><div class="refsynopsisdiv" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><h2 data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1">Synopsis<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">简介</font></font></font></h2><div class="funcsynopsis"><pre class="funcsynopsisinfo">#include &lt;systemd/sd-journal.h&gt;</pre><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_journal_print</b>(</code></td><td>int <var class="pdparam">priority</var>, </td></tr><tr><td>&nbsp;</td><td>const char *<var class="pdparam">format</var>, </td></tr><tr><td>&nbsp;</td><td>…<code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_journal_printv</b>(</code></td><td>int <var class="pdparam">priority</var>, </td></tr><tr><td>&nbsp;</td><td>const char *<var class="pdparam">format</var>, </td></tr><tr><td>&nbsp;</td><td>va_list <var class="pdparam">ap</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_journal_send</b>(</code></td><td>const char *<var class="pdparam">format</var>, </td></tr><tr><td>&nbsp;</td><td>…<code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_journal_sendv</b>(</code></td><td>const struct iovec *<var class="pdparam">iov</var>, </td></tr><tr><td>&nbsp;</td><td>int <var class="pdparam">n</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_journal_perror</b>(</code></td><td>const char *<var class="pdparam">message</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_journal_print_with_location</b>(</code></td><td>int <var class="pdparam">priority</var>, </td></tr><tr><td>&nbsp;</td><td>const char *<var class="pdparam">file</var>, </td></tr><tr><td>&nbsp;</td><td>const char *<var class="pdparam">line</var>, </td></tr><tr><td>&nbsp;</td><td>const char *<var class="pdparam">func</var>, </td></tr><tr><td>&nbsp;</td><td>const char *<var class="pdparam">format</var>, </td></tr><tr><td>&nbsp;</td><td>…<code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_journal_printv_with_location</b>(</code></td><td>int <var class="pdparam">priority</var>, </td></tr><tr><td>&nbsp;</td><td>const char *<var class="pdparam">file</var>, </td></tr><tr><td>&nbsp;</td><td>const char *<var class="pdparam">line</var>, </td></tr><tr><td>&nbsp;</td><td>const char *<var class="pdparam">func</var>, </td></tr><tr><td>&nbsp;</td><td>const char *<var class="pdparam">format</var>, </td></tr><tr><td>&nbsp;</td><td>va_list <var class="pdparam">ap</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_journal_send_with_location</b>(</code></td><td>const char *<var class="pdparam">file</var>, </td></tr><tr><td>&nbsp;</td><td>const char *<var class="pdparam">line</var>, </td></tr><tr><td>&nbsp;</td><td>const char *<var class="pdparam">func</var>, </td></tr><tr><td>&nbsp;</td><td>const char *<var class="pdparam">format</var>, </td></tr><tr><td>&nbsp;</td><td>…<code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_journal_sendv_with_location</b>(</code></td><td>const char *<var class="pdparam">file</var>, </td></tr><tr><td>&nbsp;</td><td>const char *<var class="pdparam">line</var>, </td></tr><tr><td>&nbsp;</td><td>const char *<var class="pdparam">func</var>, </td></tr><tr><td>&nbsp;</td><td>const struct iovec *<var class="pdparam">iov</var>, </td></tr><tr><td>&nbsp;</td><td>int <var class="pdparam">n</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div><table border="0" class="funcprototype-table" summary="Function synopsis" style="cellspacing: 0; cellpadding: 0;"><tbody><tr><td><code class="funcdef">int <b class="fsfunc">sd_journal_perror_with_location</b>(</code></td><td>const char *<var class="pdparam">file</var>, </td></tr><tr><td>&nbsp;</td><td>const char *<var class="pdparam">line</var>, </td></tr><tr><td>&nbsp;</td><td>const char *<var class="pdparam">func</var>, </td></tr><tr><td>&nbsp;</td><td>const char *<var class="pdparam">message</var><code>)</code>;</td></tr></tbody></table><div class="funcprototype-spacer">&nbsp;</div></div></div><div class="refsect1" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><a name="id-1.5" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"></a><h2 id="Description" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1">Description<a class="headerlink" title="Permalink to this headline" href="#Description" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">描述</font></font></font></h2><p data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_print()</code> may be used to submit simple, plain text log entries to the system
    journal. The first argument is a priority value. This is followed by a format string and its parameters, similar to
    <a href="https://man7.org/linux/man-pages/man3/printf.3.html" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">printf</span>(3)</span></a> or
    <a href="https://man7.org/linux/man-pages/man3/syslog.3.html" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">syslog</span>(3)</span></a>.
    Note that currently the resulting message will be truncated to <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">LINE_MAX - 8</code>.
    The priority value is one of <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">LOG_EMERG</code>, <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">LOG_ALERT</code>,
    <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">LOG_CRIT</code>, <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">LOG_ERR</code>, <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">LOG_WARNING</code>,
    <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">LOG_NOTICE</code>, <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">LOG_INFO</code>, <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">LOG_DEBUG</code>, as defined in
    <code class="filename" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">syslog.h</code>, see <a href="https://man7.org/linux/man-pages/man3/syslog.3.html" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">syslog</span>(3)</span></a> for details. It is
    recommended to use this call to submit log messages in the application locale or system locale and in UTF-8 format,
    but no such restrictions are enforced. Note that log messages written using this function are generally not
    expected to end in a new-line character. However, as all trailing whitespace (including spaces, new-lines,
    tabulators and carriage returns) are automatically stripped from the logged string, it is acceptable to specify one
    (or more). Empty lines (after trailing whitespace removal) are suppressed. On non-empty lines, leading whitespace
    (as well as inner whitespace) is left unmodified. <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_print()</code> 可用于向系统日志提交简单的纯文本日志条目。第一个参数是优先级值。然后是一个格式字符串及其参数，类似于 printf(3) 或 syslog(3)。请注意，目前生成的消息将被截断为 <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">LINE_MAX - 8</code> 。优先级值是 <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">LOG_EMERG</code> 、 <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">LOG_ALERT</code> 、 <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">LOG_CRIT</code> 、 <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">LOG_ERR</code> 、 <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">LOG_WARNING</code> 、 <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">LOG_NOTICE</code> 、 <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">LOG_INFO</code> 、 <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">LOG_DEBUG</code> 中的一个，如 <code class="filename" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">syslog.h</code> 中所定义，详细信息请参阅 syslog(3)。建议在应用程序区域设置或系统区域设置以及 UTF-8 格式中使用此调用提交日志消息，但不强制执行此类限制。请注意，使用此函数编写的日志消息通常不应以换行符结尾。但是，由于所有尾随空白（包括空格、换行符、制表符和回车符）都会自动从记录的字符串中剥离，因此可以指定一个（或多个）。空行（在尾随空白去除后）将被抑制。在非空行上，前导空白（以及内部空白）保持不变。</font></font></font></p><p data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_printv()</code> is similar to
    <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_print()</code> but takes a variable
    argument list encapsulated in an object of type
    <code class="varname" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">va_list</code> (see
    <a href="https://man7.org/linux/man-pages/man3/stdarg.3.html" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">stdarg</span>(3)</span></a>
    for more information) instead of the format string. It is
    otherwise equivalent in behavior.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_printv()</code> 类似于 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_print()</code> ，但接受一个封装在类型为 <code class="varname" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">va_list</code> 的对象中的可变参数列表（有关更多信息，请参阅 stdarg(3)）。在行为上，它是等效的。</font></font></font></p><p data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_send()</code> may be used to submit structured log entries to the system journal. It
    takes a series of format strings, each immediately followed by their associated parameters, terminated by
    <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">NULL</code>. The strings passed should be of the format "<code class="literal" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">VARIABLE=value</code>".  The
    variable name must be in uppercase and consist only of characters, numbers and underscores, and may not begin with
    an underscore. (All assignments that do not follow this syntax will be ignored.) The value can be of any size and
    format. It is highly recommended to submit text strings formatted in the UTF-8 character encoding only, and submit
    binary fields only when formatting in UTF-8 strings is not sensible. A number of well-known fields are defined, see
    <a href="systemd.journal-fields.html#" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">systemd.journal-fields</span>(7)</span></a> for
    details, but additional application defined fields may be used. A variable may be assigned more than one value per
    entry. If this function is used, trailing whitespace is automatically removed from each formatted field.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_send()</code> 可用于向系统日志提交结构化日志条目。它接受一系列格式字符串，每个格式字符串后面紧跟其相关参数，以 <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">NULL</code> 结尾。传递的字符串应该是“ <code class="literal" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">VARIABLE=value</code> ”格式的。变量名必须为大写字母，并且只能由字符、数字和下划线组成，且不能以下划线开头。（所有不遵循此语法的赋值将被忽略。）值可以是任何大小和格式。强烈建议仅提交以 UTF-8 字符编码格式化的文本字符串，并仅在格式化为 UTF-8 字符串不合理时提交二进制字段。定义了许多知名字段，请参阅 systemd.journal-fields(7)获取详细信息，但也可以使用额外的应用程序定义字段。每个条目可以为一个变量分配多个值。如果使用此函数，将自动从每个格式化字段中删除尾随空格。</font></font></font></p><p data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_sendv()</code> is similar to <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_send()</code> but takes an
    array of <code class="varname" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">struct iovec</code> (as defined in <code class="filename" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">uio.h</code>, see <a href="https://man7.org/linux/man-pages/man3/readv.3.html" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">readv</span>(3)</span></a> for details)
    instead of the format string. Each structure should reference one field of the entry to submit. The second argument
    specifies the number of structures in the array.  <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_sendv()</code> is particularly useful to
    submit binary objects to the journal where that is necessary. Note that this function will not strip trailing
    whitespace of the passed fields, but passes the specified data along unmodified. This is different from both
    <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_print()</code> and <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_send()</code> described above, which are based
    on format strings, and do strip trailing whitespace.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_sendv()</code> 类似于 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_send()</code> ，但接受一个 <code class="varname" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">struct iovec</code> 数组（如 <code class="filename" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">uio.h</code> 中定义，有关详细信息请参见 readv(3)）。每个结构体应引用要提交的条目的一个字段。第二个参数指定数组中结构体的数量。 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_sendv()</code> 特别适用于将二进制对象提交到必要的日志中。请注意，此函数不会剥离传递字段的尾随空格，而是将指定的数据原样传递。这与上述基于格式字符串的 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_print()</code> 和 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_send()</code> 有所不同，后者会剥离尾随空格。</font></font></font></p><p data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_perror()</code> is a similar to
    <a href="http://linux.die.net/man/3/perror" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">perror</span>(3)</span></a>
    and writes a message to the journal that consists of the passed
    string, suffixed with ": " and a human-readable representation of
    the current error code stored in
    <a href="https://man7.org/linux/man-pages/man3/errno.3.html" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">errno</span>(3)</span></a>.
    If the message string is passed as <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">NULL</code> or
    empty string, only the error string representation will be
    written, prefixed with nothing. An additional journal field ERRNO=
    is included in the entry containing the numeric error code
    formatted as decimal string. The log priority used is
    <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">LOG_ERR</code> (3).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_perror()</code> 类似于 perror(3)，并向日志写入一个消息，该消息由传递的字符串后缀组成，后缀为“：”和存储在 errno(3)中的当前错误代码的人类可读表示。如果消息字符串作为 <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">NULL</code> 或空字符串传递，则仅将写入错误字符串表示，前缀为空。包含以十进制字符串格式化的数字错误代码的附加日志字段 ERRNO=包含在条目中。所使用的日志优先级为 <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">LOG_ERR</code> （3）。</font></font></font></p><p data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1">Note that <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_send()</code> is a
    wrapper around <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_sendv()</code> to make it
    easier to use when only text strings shall be submitted. Also, the
    following two calls are mostly equivalent:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意， <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_send()</code> 是对 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_sendv()</code> 的封装，使得当只有文本字符串需要提交时更容易使用。此外，以下两个调用在大多数情况下是等效的：</font></font></font></p><pre class="programlisting">sd_journal_print(LOG_INFO, "Hello World, this is PID %lu!", (unsigned long) getpid());

sd_journal_send("MESSAGE=Hello World, this is PID %lu!", (unsigned long) getpid(),
                "PRIORITY=%i", LOG_INFO,
                NULL);</pre><p data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1">Note that these calls implicitly add fields for the source file, function name and code line where
    invoked. This is implemented with macros. If this is not desired, it can be turned off by defining
    <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">SD_JOURNAL_SUPPRESS_LOCATION</code> before including <code class="filename" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd-journal.h</code>.
    <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，这些调用隐式地为源文件、函数名和调用位置的代码行添加字段。这是通过宏实现的。如果不需要这样做，可以通过在包含 <code class="filename" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd-journal.h</code> 之前定义 <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">SD_JOURNAL_SUPPRESS_LOCATION</code> 来关闭此功能。</font></font></font></p><p data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_print_with_location()</code>,
    <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_printv_with_location()</code>, <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_send_with_location()</code>,
    <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_sendv_with_location()</code>, and
    <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_perror_with_location()</code> are similar to their counterparts without
    "<code class="literal" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">_with_location</code>", but accept additional parameters to explicitly set the source file
    name, function, and line. The arguments "<code class="literal" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">file</code>" and "<code class="literal" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">line</code>" must contain valid
    journal entries including the variable name, e.g. "<code class="literal" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">CODE_FILE=src/foo.c</code>" and
    "<code class="literal" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">CODE_LINE=666</code>", while "<code class="literal" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">func</code>" must only contain the function name, i.e. the value
    without "<code class="literal" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">CODE_FUNC=</code>". These variants are primarily useful when writing custom wrappers, for
    example in bindings for a different language.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_print_with_location()</code> 、 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_printv_with_location()</code> 、 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_send_with_location()</code> 、 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_sendv_with_location()</code> 和 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_perror_with_location()</code> 与不带“ <code class="literal" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">_with_location</code> ”的对应项类似，但接受额外的参数来明确设置源文件名、函数和行。参数“ <code class="literal" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">file</code> ”和“ <code class="literal" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">line</code> ”必须包含有效的日志条目，包括变量名，例如“ <code class="literal" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">CODE_FILE=src/foo.c</code> ”和“ <code class="literal" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">CODE_LINE=666</code> ”，而“ <code class="literal" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">func</code> ”必须只包含函数名，即不带“ <code class="literal" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">CODE_FUNC=</code> ”的值。这些变体在编写自定义封装时非常有用，例如在为不同语言的绑定中。</font></font></font></p><p data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1"><a href="https://man7.org/linux/man-pages/man3/syslog.3.html" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">syslog</span>(3)</span></a>
    and <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_print()</code> may
    largely be used interchangeably
    functionality-wise. However, note that log messages
    logged via the former take a different path to the
    journal server than the later, and hence global
    chronological ordering between the two streams cannot
    be guaranteed. Using
    <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_print()</code> has the
    benefit of logging source code line, filenames, and
    functions as metadata along all entries, and
    guaranteeing chronological ordering with structured
    log entries that are generated via
    <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_send()</code>. Using
    <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">syslog()</code> has the benefit of being
    more portable.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">syslog(3) 和 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_print()</code> 在功能上可以在很大程度上互换使用。但是，请注意，通过前者记录的日志消息与后者经过不同的路径发送到日志服务器，因此无法保证两个流之间的全局时间顺序。使用 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_print()</code> 的好处是在所有条目中记录源代码行、文件名和函数作为元数据，并通过 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_send()</code> 生成的结构化日志条目保证时间顺序。使用 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">syslog()</code> 的好处是更具可移植性。</font></font></font></p><p data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1">These functions implement a client to the <a class="ulink" href="https://systemd.io/JOURNAL_NATIVE_PROTOCOL" target="_top" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">Native Journal Protocol</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这些函数实现了对本机日志协议的客户端。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><a name="id-1.6" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"></a><h2 id="Return Value" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1">Return Value<a class="headerlink" title="Permalink to this headline" href="#Return%20Value" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">返回值 ¶</font></font></font></h2><p data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1">The ten functions return 0 on success or a negative errno-style error code. The
    <a href="https://man7.org/linux/man-pages/man3/errno.3.html" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">errno</span>(3)</span></a>
    variable itself is not altered.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这十个函数在成功时返回 0，或者返回一个负的 errno 风格的错误代码。errno(3) 变量本身不会被修改。</font></font></font></p><p data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1">If
    <a href="systemd-journald.html#" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">systemd-journald</span>(8)</span></a>
    is not running (the socket is not present), those functions do
    nothing, and also return 0.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果 systemd-journald(8) 没有运行（套接字不存在），这些函数将不起作用，并且返回 0。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><a name="id-1.7" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"></a><h2 id="Thread safety" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1">Thread safety<a class="headerlink" title="Permalink to this headline" href="#Thread%20safety" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">线程安全</font></font></font></h2><p data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1"><a name="safe" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"></a>All functions listed here are thread-safe and may be called in parallel from multiple threads.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此处列出的所有函数都是线程安全的，可以从多个线程并行调用。</font></font></font></p><p data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_sendv()</code> and <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_sendv_with_location()</code>
    are "async signal safe" in the meaning of
    <a href="https://man7.org/linux/man-pages/man7/signal-safety.7.html" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">signal-safety</span>(7)</span></a>.
    <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_sendv()</code> 和 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_sendv_with_location()</code> 在信号安全性的意义上是“异步信号安全”的。</font></font></font></p><p data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_print()</code>,
    <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_printv()</code>,
    <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_send()</code>,
    <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_perror()</code>,
    and their counterparts with "<code class="literal" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">_with_location</code>"
    are not async signal safe.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_print()</code> 、 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_printv()</code> 、 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_send()</code> 、 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_perror()</code> 及其带有“ <code class="literal" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">_with_location</code> ”的对应项都不是异步信号安全的。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><a name="id-1.8" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"></a><h2 id="Notes" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1">Notes<a class="headerlink" title="Permalink to this headline" href="#Notes" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意事项 ¶</font></font></font></h2><p data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1"><a name="pkgconfig-text" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"></a>Functions described here are available as a shared
  library, which can be compiled against and linked to with the
  <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">libsystemd</code>&nbsp;<a href="http://linux.die.net/man/1/pkg-config" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">pkg-config</span>(1)</span></a>
  file.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此处描述的函数可作为共享库使用，可以通过 <code class="constant" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">libsystemd</code> pkg-config(1) 文件进行编译和链接。</font></font></font></p><p data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1"><a name="getenv" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"></a>The code described here uses
<a href="https://man7.org/linux/man-pages/man3/getenv.3.html" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">getenv</span>(3)</span></a>,
which is declared to be not multi-thread-safe. This means that the code calling the functions described
here must not call
<a href="https://man7.org/linux/man-pages/man3/setenv.3.html" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">setenv</span>(3)</span></a>
from a parallel thread. It is recommended to only do calls to <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">setenv()</code>
from an early phase of the program when no other threads have been started.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此处描述的代码使用了 getenv(3)，该函数被声明为非多线程安全。这意味着调用此处描述的函数的代码不能从并行线程中调用 setenv(3)。建议仅在程序的早期阶段进行对 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">setenv()</code> 的调用，此时尚未启动其他线程。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><a name="id-1.9" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"></a><h2 id="History" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1">History<a class="headerlink" title="Permalink to this headline" href="#History" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">历史 ¶</font></font></font></h2><p data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_print()</code>,
    <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_printv()</code>,
    <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_send()</code>, and
    <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_sendv()</code> were added in version 187.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">版本 187 中添加了 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_print()</code> ， <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_printv()</code> ， <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_send()</code> 和 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_sendv()</code> 。</font></font></font></p><p data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_perror()</code> was added in version 188.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_perror()</code> 在版本 188 中添加。</font></font></font></p><p data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1"><code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_print_with_location()</code>,
    <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_printv_with_location()</code>,
    <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_send_with_location()</code>,
    <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_sendv_with_location()</code>, and
    <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_perror_with_location()</code> were added in version 246.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">版本 246 中添加了 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_print_with_location()</code> , <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_printv_with_location()</code> , <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_send_with_location()</code> , <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_sendv_with_location()</code> 和 <code class="function" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_perror_with_location()</code> 。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><a name="id-1.10" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"></a><h2 id="See Also" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1">See Also<a class="headerlink" title="Permalink to this headline" href="#See%20Also" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">参见 ¶</font></font></font></h2><p data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48" data-immersive-translate-paragraph="1">
      <a href="systemd.html#" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">systemd</span>(1)</span></a>,
      <a href="sd-journal.html#" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd-journal</span>(3)</span></a>,
      <a href="sd_journal_stream_fd.html#" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">sd_journal_stream_fd</span>(3)</span></a>,
      <a href="https://man7.org/linux/man-pages/man3/syslog.3.html" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">syslog</span>(3)</span></a>,
      <a href="http://linux.die.net/man/3/perror" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">perror</span>(3)</span></a>,
      <a href="https://man7.org/linux/man-pages/man3/errno.3.html" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">errno</span>(3)</span></a>,
      <a href="systemd.journal-fields.html#" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">systemd.journal-fields</span>(7)</span></a>,
      <a href="https://man7.org/linux/man-pages/man7/signal.7.html" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">signal</span>(7)</span></a>,
      <a href="https://man7.org/linux/man-pages/man7/socket.7.html" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="citerefentry" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48"><span class="refentrytitle" data-immersive-translate-walked="bdac5ec1-4dbb-4a8b-9c5a-b2e8e99f7b48">socket</span>(7)</span></a>
    </p></div></div>
</body></html>