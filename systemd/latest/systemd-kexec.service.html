<html><head><style data-id="immersive-translate-default-injected-css">:root {
  --immersive-translate-theme-underline-borderColor: #72ece9;
  --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
  --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
  --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
  --immersive-translate-theme-highlight-backgroundColor: #ffff00;
  --immersive-translate-theme-dashed-borderColor: #59c1bd;
  --immersive-translate-theme-blockquote-borderColor: #cc3355;
  --immersive-translate-theme-thinDashed-borderColor: #ff374f;
  --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
  --immersive-translate-theme-dashedBorder-borderRadius: 0;
  --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
  --immersive-translate-theme-solidBorder-borderRadius: 0;
  --immersive-translate-theme-dotted-borderColor: #94a3b8;
  --immersive-translate-theme-wavy-borderColor: #72ece9;
  --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
  --immersive-translate-theme-grey-textColor: #2f4f4f;
  --immersive-translate-theme-marker-backgroundColor: #fbda41;
  --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
  --immersive-translate-theme-marker2-backgroundColor: #ffff00;
  --immersive-translate-theme-opacity-opacity: 10;
}

.immersive-translate-target-translation-pre-whitespace {
  white-space: pre-wrap !important;
}

.immersive-translate-pdf-target-container {
  position: absolute;
  background-color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
    sans-serif;
  top: 0;
  width: 600px;
  height: 100%;
  z-index: 2;
  line-height: 1.3;
  font-size: 16px;
}
.immersive-translate-target-wrapper[dir='rtl'] {
  text-align: right;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
  color: rgb(0, 0, 0);
  white-space: normal;
  position: absolute;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
  color: inherit;
  white-space: inherit;
  position: unset;
}

.immersive-translate-state-dual>br {
  display: none;
}

.immersive-translate-target-translation-block-wrapper {
  margin: 8px 0 !important;
  display: inline-block;
}

.immersive-translate-target-translation-pdf-block-wrapper {
  margin: 0 !important;
  display: block;
}

.immersive-translate-target-translation-theme-grey-inner {
  color: var(--immersive-translate-theme-grey-textColor);
}


.immersive-translate-target-translation-theme-underline-inner {
  border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
}

.immersive-translate-target-translation-theme-nativeUnderline-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
}

.immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-theme-nativeDashed-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
  text-decoration-style: dashed !important;
}

.immersive-translate-target-translation-theme-thinDashed-inner {
  border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
}

.immersive-translate-target-translation-theme-dotted-inner {
  background-image: linear-gradient(to right,
      var(--immersive-translate-theme-dotted-borderColor) 30%,
      rgba(255, 255, 255, 0) 0%);
  background-position: bottom;
  background-size: 5px 1px;
  background-repeat: repeat-x;
  padding-bottom: 3px;
}

.immersive-translate-target-translation-theme-nativeDotted-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
  text-decoration-style: dotted !important;
}

.immersive-translate-target-translation-theme-wavy-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
  text-decoration-style: wavy !important;
}

.immersive-translate-target-translation-theme-dashed-inner {
  background: linear-gradient(to right,
      var(--immersive-translate-theme-dashed-borderColor) 0%,
      var(--immersive-translate-theme-dashed-borderColor) 50%,
      transparent 50%,
      transparent 100%) repeat-x left bottom;
  background-size: 8px 2px;
  padding-bottom: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
  content: "";
  display: block;
  max-width: 80px;
  width: 10%;
  border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  padding-top: 8px;
}

.immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
  content: "";
  border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  max-height: 16px;
  height: 16px;
  padding-left: 8px;
}

.immersive-translate-target-translation-theme-highlight-inner {
  background: var(--immersive-translate-theme-highlight-backgroundColor);
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-block-wrapper-theme-marker {
  line-height: 1.5em;
}

.immersive-translate-target-translation-theme-marker2-inner {
  font-weight: bold;
  text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
    16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
    2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
    -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
}

.immersive-translate-target-translation-theme-marker-inner {
  /* TODO: add more texture */
  background: linear-gradient(to right,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-theme-weakening {
  opacity: 0.618 !important;
}

.immersive-translate-target-translation-theme-italic {
  font-style: italic !important;
}

.immersive-translate-target-translation-theme-bold {
  font-weight: bold !important;
}

.immersive-translate-target-translation-block-wrapper-theme-paper {
  margin: 8px 0;
  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
  padding: 16px 32px;
  display: block;
}

.immersive-translate-target-translation-block-wrapper-theme-blockquote {
  border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
  padding-left: 12px !important;
  margin-top: 4px;
  margin-bottom: 4px;
  padding-top: 4px;
  padding-bottom: 4px;
  display: block;
}

.immersive-translate-target-translation-theme-mask-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
  filter: none !important;
}

[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}


/* opacity theme start */

.immersive-translate-target-translation-theme-opacity-inner {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: none !important;
}


.immersive-translate-target-translation-theme-mask-inner:hover {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
  filter: none !important;
}


[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
  filter: none !important;
}

/* opacity theme end */

/* vertical css , please remain it in the last one. */
.immersive-translate-target-translation-vertical-block-wrapper {
  margin: 0px 8px !important;
}

.immersive-translate-text {
  font-size: 15px !important;
}

.immersive-translate-error-toast {
  position: fixed;
  top: 5%;
  z-index: 99999999;
  left: 0;
  right: 0;
  margin: auto;
  max-width: 300px;
  padding: 16px;
  border-radius: 12px;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}

@media all and (min-width: 750px) {
  .immersive-translate-error-toast {
    max-width: 400px;
  }
}


.immersive-translate-clickable-button {
  cursor: pointer;
}

.immersive-translate-help-button {
  cursor: pointer;
}

.immersive-translate-loading-text:before {
  content: "...";
}


/* dark mode for loading */

@media only screen and (prefers-color-scheme: dark) {
  .immersive-translate-loading {
    border: 2px rgba(255, 255, 255, 0.25) solid !important;
    border-top: 2px rgba(255, 255, 255, 1) solid !important;
  }
}

.immersive-translate-error-wrapper {
  position: relative;
  display: inline-flex;
  padding: 6px;
  margin: 0 12px;
  white-space: nowrap;
  font-size: 0.9em;
}
[lang="zh-CN"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}
[lang="zh-TW"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}


.immersive-translate-tooltip {
  position: relative;
  display: inline-flex;
  /* little indicater to indicate it's hoverable */
}

.immersive-translate-tooltip-content {
  /* here's the magic */
  position: absolute;
  z-index: 100000000000;

  left: 50%;
  bottom: 0;
  transform: translate(-50%, 110%);
  line-height: 1;
  /* and add a small left margin */

  /* basic styles */
  width: max-content;
  max-width: 250px;
  word-wrap: break-word;
  white-space: pre-line;
  padding: 10px;
  border-radius: 10px;
  background: #000C;
  color: #fff;
  text-align: center;
  font-size: 14px;
  display: none;
  /* hide by default */
}

.immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip-content-table {
  left: unset !important;
  bottom: unset !important;
  transform: translate(-10%, 50%) !important;
}


.immersive-translate-tooltip:hover:before {
  display: block;
}



.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}
</style><style data-id="immersive-translate-user-custom-style">:root {

.immersive-translate-target-inner { font-family: inherit; }
}
</style><style data-id="immersive-translate-dynamic-injected-css">.immersive-translate-target-wrapper[dir='rtl'] {text-align: right;}
.immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {display:block;}
.immersive-translate-target-wrapper {word-break: break-word;}
</style></head><body data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def" data-immersive-translate-paragraph="1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>systemd-poweroff.service</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><script src="https://code.jquery.com/jquery-3.7.1.min.js"></script><script src="../nav.js"></script><style>
    a.headerlink {
      color: #c60f0f;
      font-size: 0.8em;
      padding: 0 4px 0 4px;
      text-decoration: none;
      visibility: hidden;
    }

    a.headerlink:hover {
      background-color: #c60f0f;
      color: white;
    }

    h1:hover > a.headerlink, h2:hover > a.headerlink, h3:hover > a.headerlink, dt:hover > a.headerlink {
      visibility: visible;
    }
  </style><a href="index.html" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">Index </a>·
  <a href="systemd.directives.html" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">Directives </a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">索引 · 指令</font></font></font><span style="float:right" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def" data-immersive-translate-paragraph="1">systemd 255</span><hr><div class="refentry" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><a name="systemd-poweroff.service" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"></a><div class="titlepage" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"></div><div class="refnamediv" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><h2 data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def" data-immersive-translate-paragraph="1">Name<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">名称</font></font></font></h2><p data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def" data-immersive-translate-paragraph="1">systemd-poweroff.service, systemd-halt.service, systemd-reboot.service, systemd-kexec.service, systemd-shutdown — System shutdown logic<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">systemd-poweroff.service，systemd-halt.service，systemd-reboot.service，systemd-kexec.service，systemd-shutdown — 系统关机逻辑</font></font></font></p></div><div class="refsynopsisdiv" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><h2 data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def" data-immersive-translate-paragraph="1">Synopsis<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">简介</font></font></font></h2><p data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemd-poweroff.service</code></p><p data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemd-halt.service</code></p><p data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemd-reboot.service</code></p><p data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemd-kexec.service</code></p><p data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">/usr/lib/systemd/systemd-shutdown</code></p><p data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">/usr/lib/systemd/system-shutdown/</code></p></div><div class="refsect1" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><a name="id-1.5" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"></a><h2 id="Description" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def" data-immersive-translate-paragraph="1">Description<a class="headerlink" title="Permalink to this headline" href="#Description" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">描述</font></font></font></h2><p data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def" data-immersive-translate-paragraph="1"><code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemd-poweroff.service</code> is a system service that is pulled in by
    <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">poweroff.target</code> and is responsible for the actual system power-off
    operation. Similarly, <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemd-halt.service</code> is pulled in by
    <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">halt.target</code>, <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemd-reboot.service</code> by
    <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">reboot.target</code> and <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemd-kexec.service</code> by
    <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">kexec.target</code> to execute the respective actions.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemd-poweroff.service</code> 是一个系统服务，被 <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">poweroff.target</code> 引用，并负责实际的系统关机操作。类似地， <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemd-halt.service</code> 被 <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">halt.target</code> 引用， <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemd-reboot.service</code> 被 <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">reboot.target</code> 引用， <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemd-kexec.service</code> 被 <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">kexec.target</code> 引用来执行相应的操作。</font></font></font></p><p data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def" data-immersive-translate-paragraph="1">When these services are run, they ensure that PID 1 is replaced by the
    <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">/usr/lib/systemd/systemd-shutdown</code> tool which is then responsible for the actual
    shutdown. Before shutting down, this binary will try to unmount all remaining file systems (or at least
    remount them read-only), disable all remaining swap devices, detach all remaining storage devices and
    kill all remaining processes.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当这些服务运行时，它们确保 PID 1 被 <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">/usr/lib/systemd/systemd-shutdown</code> 工具替换，然后负责实际的关机操作。在关机之前，此二进制文件将尝试卸载所有剩余的文件系统（或至少将它们重新挂载为只读），禁用所有剩余的交换设备，拆卸所有剩余的存储设备并终止所有剩余的进程。</font></font></font></p><p data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def" data-immersive-translate-paragraph="1">It is necessary to have this code in a separate binary because otherwise rebooting after an upgrade
    might be broken&nbsp;— the running PID 1 could still depend on libraries which are not available any more,
    thus keeping the file system busy, which then cannot be re-mounted read-only.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有必要将此代码放在单独的二进制文件中，否则在升级后重新启动可能会出现问题 — 运行的 PID 1 可能仍然依赖于不再可用的库，从而使文件系统保持繁忙，因此无法重新挂载为只读。</font></font></font></p><p data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def" data-immersive-translate-paragraph="1">Shortly before executing the actual system power-off/halt/reboot/kexec
    <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemd-shutdown</code> will run all executables in
    <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">/usr/lib/systemd/system-shutdown/</code> and pass one arguments to them: either
    "<code class="literal" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">poweroff</code>", "<code class="literal" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">halt</code>", "<code class="literal" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">reboot</code>", or
    "<code class="literal" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">kexec</code>", depending on the chosen action. All executables in this directory are executed
    in parallel, and execution of the action is not continued before all executables finished. Note that
    these executables are run <span class="emphasis" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><em data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">after</em></span> all services have been shut down, and after most
    mounts have been detached (the root file system as well as <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">/run/</code> and various API
    file systems are still around though). This means any programs dropped into this directory must be
    prepared to run in such a limited execution environment and not rely on external services or hierarchies
    such as <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">/var/</code> to be around (or writable).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在实际系统关机/停机/重启/kexec 之前不久， <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemd-shutdown</code> 将运行 <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">/usr/lib/systemd/system-shutdown/</code> 中的所有可执行文件，并向它们传递一个参数：根据选择的操作，可能是“ <code class="literal" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">poweroff</code> ”、“ <code class="literal" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">halt</code> ”、“ <code class="literal" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">reboot</code> ”或“ <code class="literal" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">kexec</code> ”。此目录中的所有可执行文件都是并行执行的，并且在所有可执行文件完成之前不会继续执行操作。请注意，这些可执行文件在所有服务关闭后以及大多数挂载已分离后运行（尽管根文件系统以及 <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">/run/</code> 和各种 API 文件系统仍然存在）。这意味着放入此目录的任何程序必须准备在这种有限的执行环境中运行，并且不能依赖于外部服务或层次结构，例如 <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">/var/</code> 是否存在（或可写）。</font></font></font></p><p data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def" data-immersive-translate-paragraph="1">Note that <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemd-poweroff.service</code> (and the related units) should never be
    executed directly. Instead, trigger system shutdown with a command such as "<code class="literal" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemctl
    poweroff</code>".<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意 <code class="filename" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemd-poweroff.service</code> （以及相关单位）不应直接执行。而是使用命令触发系统关机，例如“ <code class="literal" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemctl
    poweroff</code> ”。</font></font></font></p><p data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def" data-immersive-translate-paragraph="1">Another form of shutdown is provided by the
    <a href="systemd-soft-reboot.service.html#" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><span class="citerefentry" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><span class="refentrytitle" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemd-soft-reboot.service</span>(8)</span></a>
    functionality. It reboots only the OS userspace, leaving the kernel, firmware, and hardware as it is.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">systemd-soft-reboot.service(8) 功能提供了另一种关机方式。它仅重新启动操作系统用户空间，保留内核、固件和硬件不变。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><a name="id-1.6" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"></a><h2 id="See Also" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def" data-immersive-translate-paragraph="1">See Also<a class="headerlink" title="Permalink to this headline" href="#See%20Also" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">参见 ¶</font></font></font></h2><p data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def" data-immersive-translate-paragraph="1">
      <a href="systemd.html#" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><span class="citerefentry" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><span class="refentrytitle" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemd</span>(1)</span></a>,
      <a href="systemctl.html#" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><span class="citerefentry" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><span class="refentrytitle" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemctl</span>(1)</span></a>,
      <a href="systemd.special.html#" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><span class="citerefentry" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><span class="refentrytitle" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemd.special</span>(7)</span></a>,
      <a href="https://man7.org/linux/man-pages/man2/reboot.2.html" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><span class="citerefentry" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><span class="refentrytitle" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">reboot</span>(2)</span></a>,
      <a href="systemd-suspend.service.html#" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><span class="citerefentry" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><span class="refentrytitle" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemd-suspend.service</span>(8)</span></a>,
      <a href="systemd-soft-reboot.service.html#" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><span class="citerefentry" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><span class="refentrytitle" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">systemd-soft-reboot.service</span>(8)</span></a>,
      <a href="bootup.html#" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><span class="citerefentry" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def"><span class="refentrytitle" data-immersive-translate-walked="6d8514bf-c36d-4f40-a0c3-f66e56cb7def">bootup</span>(7)</span></a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">systemd(1)、systemctl(1)、systemd.special(7)、reboot(2)、systemd-suspend.service(8)、systemd-soft-reboot.service(8)、bootup(7)</font></font></font>
    </p></div></div>
</body></html>