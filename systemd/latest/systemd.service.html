<html><head><style data-id="immersive-translate-default-injected-css">:root {
  --immersive-translate-theme-underline-borderColor: #72ece9;
  --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
  --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
  --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
  --immersive-translate-theme-highlight-backgroundColor: #ffff00;
  --immersive-translate-theme-dashed-borderColor: #59c1bd;
  --immersive-translate-theme-blockquote-borderColor: #cc3355;
  --immersive-translate-theme-thinDashed-borderColor: #ff374f;
  --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
  --immersive-translate-theme-dashedBorder-borderRadius: 0;
  --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
  --immersive-translate-theme-solidBorder-borderRadius: 0;
  --immersive-translate-theme-dotted-borderColor: #94a3b8;
  --immersive-translate-theme-wavy-borderColor: #72ece9;
  --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
  --immersive-translate-theme-grey-textColor: #2f4f4f;
  --immersive-translate-theme-marker-backgroundColor: #fbda41;
  --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
  --immersive-translate-theme-marker2-backgroundColor: #ffff00;
  --immersive-translate-theme-opacity-opacity: 10;
}

.immersive-translate-target-translation-pre-whitespace {
  white-space: pre-wrap !important;
}

.immersive-translate-pdf-target-container {
  position: absolute;
  background-color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
    sans-serif;
  top: 0;
  width: 600px;
  height: 100%;
  z-index: 2;
  line-height: 1.3;
  font-size: 16px;
}
.immersive-translate-target-wrapper[dir='rtl'] {
  text-align: right;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
  color: rgb(0, 0, 0);
  white-space: normal;
  position: absolute;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
  color: inherit;
  white-space: inherit;
  position: unset;
}

.immersive-translate-state-dual>br {
  display: none;
}

.immersive-translate-target-translation-block-wrapper {
  margin: 8px 0 !important;
  display: inline-block;
}

.immersive-translate-target-translation-pdf-block-wrapper {
  margin: 0 !important;
  display: block;
}

.immersive-translate-target-translation-theme-grey-inner {
  color: var(--immersive-translate-theme-grey-textColor);
}


.immersive-translate-target-translation-theme-underline-inner {
  border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
}

.immersive-translate-target-translation-theme-nativeUnderline-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
}

.immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-theme-nativeDashed-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
  text-decoration-style: dashed !important;
}

.immersive-translate-target-translation-theme-thinDashed-inner {
  border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
}

.immersive-translate-target-translation-theme-dotted-inner {
  background-image: linear-gradient(to right,
      var(--immersive-translate-theme-dotted-borderColor) 30%,
      rgba(255, 255, 255, 0) 0%);
  background-position: bottom;
  background-size: 5px 1px;
  background-repeat: repeat-x;
  padding-bottom: 3px;
}

.immersive-translate-target-translation-theme-nativeDotted-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
  text-decoration-style: dotted !important;
}

.immersive-translate-target-translation-theme-wavy-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
  text-decoration-style: wavy !important;
}

.immersive-translate-target-translation-theme-dashed-inner {
  background: linear-gradient(to right,
      var(--immersive-translate-theme-dashed-borderColor) 0%,
      var(--immersive-translate-theme-dashed-borderColor) 50%,
      transparent 50%,
      transparent 100%) repeat-x left bottom;
  background-size: 8px 2px;
  padding-bottom: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
  content: "";
  display: block;
  max-width: 80px;
  width: 10%;
  border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  padding-top: 8px;
}

.immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
  content: "";
  border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  max-height: 16px;
  height: 16px;
  padding-left: 8px;
}

.immersive-translate-target-translation-theme-highlight-inner {
  background: var(--immersive-translate-theme-highlight-backgroundColor);
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-block-wrapper-theme-marker {
  line-height: 1.5em;
}

.immersive-translate-target-translation-theme-marker2-inner {
  font-weight: bold;
  text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
    16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
    2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
    -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
}

.immersive-translate-target-translation-theme-marker-inner {
  /* TODO: add more texture */
  background: linear-gradient(to right,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-theme-weakening {
  opacity: 0.618 !important;
}

.immersive-translate-target-translation-theme-italic {
  font-style: italic !important;
}

.immersive-translate-target-translation-theme-bold {
  font-weight: bold !important;
}

.immersive-translate-target-translation-block-wrapper-theme-paper {
  margin: 8px 0;
  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
  padding: 16px 32px;
  display: block;
}

.immersive-translate-target-translation-block-wrapper-theme-blockquote {
  border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
  padding-left: 12px !important;
  margin-top: 4px;
  margin-bottom: 4px;
  padding-top: 4px;
  padding-bottom: 4px;
  display: block;
}

.immersive-translate-target-translation-theme-mask-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
  filter: none !important;
}

[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}


/* opacity theme start */

.immersive-translate-target-translation-theme-opacity-inner {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: none !important;
}


.immersive-translate-target-translation-theme-mask-inner:hover {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
  filter: none !important;
}


[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
  filter: none !important;
}

/* opacity theme end */

/* vertical css , please remain it in the last one. */
.immersive-translate-target-translation-vertical-block-wrapper {
  margin: 0px 8px !important;
}

.immersive-translate-text {
  font-size: 15px !important;
}

.immersive-translate-error-toast {
  position: fixed;
  top: 5%;
  z-index: 99999999;
  left: 0;
  right: 0;
  margin: auto;
  max-width: 300px;
  padding: 16px;
  border-radius: 12px;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}

@media all and (min-width: 750px) {
  .immersive-translate-error-toast {
    max-width: 400px;
  }
}


.immersive-translate-clickable-button {
  cursor: pointer;
}

.immersive-translate-help-button {
  cursor: pointer;
}

.immersive-translate-loading-text:before {
  content: "...";
}


/* dark mode for loading */

@media only screen and (prefers-color-scheme: dark) {
  .immersive-translate-loading {
    border: 2px rgba(255, 255, 255, 0.25) solid !important;
    border-top: 2px rgba(255, 255, 255, 1) solid !important;
  }
}

.immersive-translate-error-wrapper {
  position: relative;
  display: inline-flex;
  padding: 6px;
  margin: 0 12px;
  white-space: nowrap;
  font-size: 0.9em;
}
[lang="zh-CN"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}
[lang="zh-TW"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}


.immersive-translate-tooltip {
  position: relative;
  display: inline-flex;
  /* little indicater to indicate it's hoverable */
}

.immersive-translate-tooltip-content {
  /* here's the magic */
  position: absolute;
  z-index: 100000000000;

  left: 50%;
  bottom: 0;
  transform: translate(-50%, 110%);
  line-height: 1;
  /* and add a small left margin */

  /* basic styles */
  width: max-content;
  max-width: 250px;
  word-wrap: break-word;
  white-space: pre-line;
  padding: 10px;
  border-radius: 10px;
  background: #000C;
  color: #fff;
  text-align: center;
  font-size: 14px;
  display: none;
  /* hide by default */
}

.immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip-content-table {
  left: unset !important;
  bottom: unset !important;
  transform: translate(-10%, 50%) !important;
}


.immersive-translate-tooltip:hover:before {
  display: block;
}



.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}
</style><style data-id="immersive-translate-user-custom-style">:root {

.immersive-translate-target-inner { font-family: inherit; }
}
</style><style data-id="immersive-translate-dynamic-injected-css">.immersive-translate-target-wrapper[dir='rtl'] {text-align: right;}
.immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {display:block;}
.immersive-translate-target-wrapper {word-break: break-word;}
</style></head><body data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>systemd.service</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><script src="https://code.jquery.com/jquery-3.7.1.min.js"></script><script src="../nav.js"></script><style>
    a.headerlink {
      color: #c60f0f;
      font-size: 0.8em;
      padding: 0 4px 0 4px;
      text-decoration: none;
      visibility: hidden;
    }

    a.headerlink:hover {
      background-color: #c60f0f;
      color: white;
    }

    h1:hover > a.headerlink, h2:hover > a.headerlink, h3:hover > a.headerlink, dt:hover > a.headerlink {
      visibility: visible;
    }
  </style><a href="index.html" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Index </a>·
  <a href="systemd.directives.html" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Directives </a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">索引 · 指令</font></font></font><span style="float:right" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">systemd 255</span><hr><div class="refentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><a name="systemd.service" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a><div class="titlepage" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></div><div class="refnamediv" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><h2 data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Name<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">名称</font></font></font></h2><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">systemd.service — Service unit configuration<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">systemd.service — 服务单元配置</font></font></font></p></div><div class="refsynopsisdiv" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><h2 data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Synopsis<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">简介</font></font></font></h2><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><em class="replaceable"><code>service</code></em>.service</code></p></div><div class="refsect1" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><a name="id-1.5" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a><h2 id="Description" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Description<a class="headerlink" title="Permalink to this headline" href="#Description" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">描述</font></font></font></h2><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">A unit configuration file whose name ends in
    "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">.service</code>" encodes information about a process
    controlled and supervised by systemd.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">以“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">.service</code> ”结尾的单元配置文件编码了由 systemd 控制和监督的进程的信息。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">This man page lists the configuration options specific to
    this unit type. See
    <a href="systemd.unit.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.unit</span>(5)</span></a>
    for the common options of all unit configuration files. The common
    configuration items are configured in the generic
    [Unit] and [Install]
    sections. The service specific configuration options are
    configured in the [Service] section.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">本手册列出了特定于此单元类型的配置选项。有关所有单元配置文件的常见选项，请参阅 systemd.unit(5)。通用配置项在通用 [Unit] 和 [Install] 部分中配置。服务特定的配置选项在 [Service] 部分中配置。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Additional options are listed in
    <a href="systemd.exec.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.exec</span>(5)</span></a>,
    which define the execution environment the commands are executed
    in, and in
    <a href="systemd.kill.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.kill</span>(5)</span></a>,
    which define the way the processes of the service are terminated,
    and in
    <a href="systemd.resource-control.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.resource-control</span>(5)</span></a>,
    which configure resource control settings for the processes of the
    service.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">其他选项在 systemd.exec(5)中列出，该选项定义了命令执行的执行环境，在 systemd.kill(5)中定义了服务进程的终止方式，在 systemd.resource-control(5)中配置了服务进程的资源控制设置。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">If SysV init compat is enabled, systemd automatically creates service units that wrap SysV init
    scripts (the service name is the same as the name of the script, with a "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">.service</code>"
    suffix added); see
    <a href="systemd-sysv-generator.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd-sysv-generator</span>(8)</span></a>.
    <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果启用了 SysV init 兼容性，systemd 会自动创建包装 SysV init 脚本的服务单元（服务名称与脚本名称相同，添加了“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">.service</code> ”后缀）；请参阅 systemd-sysv-generator(8)。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">The <a href="systemd-run.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd-run</span>(1)</span></a>
    command allows creating <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">.service</code> and <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">.scope</code> units dynamically
    and transiently from the command line.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">systemd-run(1)命令允许从命令行动态和临时地创建 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">.service</code> 和 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">.scope</code> 单元。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><a name="id-1.6" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a><h2 id="Service Templates" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Service Templates<a class="headerlink" title="Permalink to this headline" href="#Service%20Templates" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">服务模板 ¶</font></font></font></h2><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">It is possible for <span class="command" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><strong data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd</strong></span> services to take a single argument via the
    "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><em class="replaceable"><code>service</code></em>@<em class="replaceable"><code>argument</code></em>.service</code>"
    syntax. Such services are called "instantiated" services, while the unit definition without the
    <em class="replaceable" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">argument</code></em> parameter is called a "template". An example could be a
    <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dhcpcd@.service</code> service template which takes a network interface as a
    parameter to form an instantiated service. Within the service file, this parameter or "instance
    name" can be accessed with %-specifiers. See
    <a href="systemd.unit.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.unit</span>(5)</span></a>
    for details.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">systemd 服务可以通过 " <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><em class="replaceable"><code>service</code></em>@<em class="replaceable"><code>argument</code></em>.service</code> " 语法接受单个参数。这种服务称为 "实例化" 服务，而不带 <code data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">argument</code> 参数的单元定义称为 "模板"。一个示例可能是一个 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dhcpcd@.service</code> 服务模板，它以网络接口作为参数形成一个实例化服务。在服务文件中，可以使用 %-specifiers 访问此参数或 "实例名称"。有关详细信息，请参阅 systemd.unit(5)。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><a name="id-1.7" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a><h2 id="Automatic Dependencies" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Automatic Dependencies<a class="headerlink" title="Permalink to this headline" href="#Automatic%20Dependencies" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">自动依赖 ¶</font></font></font></h2><div class="refsect2" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><a name="id-1.7.2" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a><h3 id="Implicit Dependencies" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Implicit Dependencies<a class="headerlink" title="Permalink to this headline" href="#Implicit%20Dependencies" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">隐式依赖 ¶</font></font></font></h3><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">The following dependencies are implicitly added:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">以下依赖项将被隐式添加：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><li class="listitem" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Services with <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=dbus</code> set automatically
        acquire dependencies of type <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Requires=</code> and
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">After=</code> on
        <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dbus.socket</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">具有设置的服务自动获取类型为 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Requires=</code> 和 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">After=</code> 的依赖项，这些依赖项是在 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dbus.socket</code> 上的。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Socket activated services are automatically ordered after
        their activating <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">.socket</code> units via an
        automatic <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">After=</code> dependency.
        Services also pull in all <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">.socket</code> units
        listed in <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Sockets=</code> via automatic
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Wants=</code> and <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">After=</code> dependencies.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">激活的套接字服务在通过自动 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">.socket</code> 依赖项自动排序后，也会拉取 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Sockets=</code> 中列出的所有 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">.socket</code> 单元，通过自动 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Wants=</code> 和 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">After=</code> 依赖项。</font></font></font></p></li></ul></div><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Additional implicit dependencies may be added as result of
      execution and resource control parameters as documented in
      <a href="systemd.exec.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.exec</span>(5)</span></a>
      and
      <a href="systemd.resource-control.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.resource-control</span>(5)</span></a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">作为执行和资源控制参数的执行结果，可能会添加额外的隐式依赖关系，如在 systemd.exec(5)和 systemd.resource-control(5)中记录的那样。</font></font></font></p></div><div class="refsect2" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><a name="id-1.7.3" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a><h3 id="Default Dependencies" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Default Dependencies<a class="headerlink" title="Permalink to this headline" href="#Default%20Dependencies" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">默认依赖关系 ¶</font></font></font></h3><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">The following dependencies are added unless <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">DefaultDependencies=no</code> is set:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">除非设置了 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">DefaultDependencies=no</code> ，否则会添加以下依赖项：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><li class="listitem" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Service units will have dependencies of type <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Requires=</code> and
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">After=</code> on <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sysinit.target</code>, a dependency of type <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">After=</code> on
        <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">basic.target</code> as well as dependencies of type <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Conflicts=</code> and
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Before=</code> on <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">shutdown.target</code>. These ensure that normal service units pull in
        basic system initialization, and are terminated cleanly prior to system shutdown. Only services involved with early
        boot or late system shutdown should disable this option.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">服务单元将在 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sysinit.target</code> 上具有 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Requires=</code> 和 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">After=</code> 类型的依赖关系，对 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">basic.target</code> 的 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">After=</code> 类型依赖，以及对 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">shutdown.target</code> 的 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Conflicts=</code> 和 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Before=</code> 类型依赖。这些确保正常的服务单元拉取基本系统初始化，并在系统关闭之前干净地终止。只有涉及早期引导或系统关闭的服务应禁用此选项。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Instanced service units (i.e. service units with an "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">@</code>" in their name) are assigned by
        default a per-template slice unit (see
        <a href="systemd.slice.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.slice</span>(5)</span></a>), named after the
        template unit, containing all instances of the specific template. This slice is normally stopped at shutdown,
        together with all template instances. If that is not desired, set <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">DefaultDependencies=no</code> in the
        template unit, and either define your own per-template slice unit file that also sets
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">DefaultDependencies=no</code>, or set <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Slice=system.slice</code> (or another suitable slice)
        in the template unit. Also see
        <a href="systemd.resource-control.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.resource-control</span>(5)</span></a>.
        <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">实例化的服务单元（即名称中带有“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">@</code> ”的服务单元）默认分配一个按模板单元命名的每模板切片单元（参见 systemd.slice(5)），其中包含特定模板的所有实例。该切片通常在关闭时停止，与所有模板实例一起。如果不希望这样，请在模板单元中设置 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">DefaultDependencies=no</code> ，并定义自己的设置 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">DefaultDependencies=no</code> 的每模板切片单元文件，或在模板单元中设置 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Slice=system.slice</code> （或另一个适当的切片）。另请参阅 systemd.resource-control(5)。</font></font></font></p></li></ul></div></div></div><div class="refsect1" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><a name="id-1.8" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a><h2 id="Options" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Options<a class="headerlink" title="Permalink to this headline" href="#Options" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">选项</font></font></font></h2><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Service unit files may include [Unit] and [Install] sections, which are described in
    <a href="systemd.unit.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.unit</span>(5)</span></a>.
    <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">服务单元文件可能包括[Unit]和[Install]部分，这些部分在 systemd.unit(5)中有描述。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Service unit files must include a [Service]
    section, which carries information about the service and the
    process it supervises. A number of options that may be used in
    this section are shared with other unit types. These options are
    documented in
    <a href="systemd.exec.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.exec</span>(5)</span></a>,
    <a href="systemd.kill.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.kill</span>(5)</span></a>
    and
    <a href="systemd.resource-control.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.resource-control</span>(5)</span></a>.
    The options specific to the [Service] section
    of service units are the following:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">服务单元文件必须包括[Service]部分，其中包含有关服务和其监督的进程的信息。此部分中可能使用的一些选项与其他单元类型共享。这些选项在 systemd.exec(5)、systemd.kill(5)和 systemd.resource-control(5)中有文档记录。服务单元的[Service]部分特定选项如下：</font></font></font></p><div class="variablelist" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><dl class="variablelist" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><dt id="Type=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code></span><a class="headerlink" title="Permalink to this term" href="#Type=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Configures the mechanism via which the service notifies the manager that the service start-up
          has finished. One of <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code>, <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">exec</code>, <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">forking</code>,
          <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">oneshot</code>, <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dbus</code>, <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify</code>,
          <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify-reload</code>, or <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">idle</code>:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">配置服务通知管理器服务启动已完成的机制。其中之一为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code> ， <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">exec</code> ， <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">forking</code> ， <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">oneshot</code> ， <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dbus</code> ， <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify</code> ， <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify-reload</code> 或 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">idle</code> ：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><li class="listitem" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">If set to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code> (the default if <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code>
            is specified but neither <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> nor <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">BusName=</code> are), the
            service manager will consider the unit started immediately after the main service process has
            been forked off (i.e. immediately after <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">fork()</code>, and before various process
            attributes have been configured and in particular before the new process has called
            <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">execve()</code> to invoke the actual service binary). Typically,
            <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">exec</code> is the better choice, see below.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code> （如果指定了 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> 但没有指定 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> 或 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">BusName=</code> ，则默认为此值），服务管理器将在主服务进程分叉后立即将该单元视为已启动（即在 <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">fork()</code> 之后，但在各种进程属性配置之前，特别是在新进程调用 <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">execve()</code> 来调用实际服务二进制文件之前）。通常， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">exec</code> 是更好的选择，请参见下文。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">It is expected that the process configured with <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> is the main
            process of the service. In this mode, if the process offers functionality to other processes on
            the system, its communication channels should be installed before the service is started up
            (e.g. sockets set up by systemd, via socket activation), as the service manager will immediately
            proceed starting follow-up units, right after creating the main service process, and before
            executing the service's binary. Note that this means <span class="command" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><strong data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemctl start</strong></span> command
            lines for <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code> services will report success even if the service's binary
            cannot be invoked successfully (for example because the selected <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">User=</code> doesn't
            exist, or the service binary is missing).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">预期使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> 配置的进程是服务的主进程。在此模式下，如果进程向系统上的其他进程提供功能，则其通信通道应在启动服务之前安装（例如，通过 systemd 设置的套接字，通过套接字激活），因为服务管理器将立即继续启动后续单元，就在创建主服务进程之后，并在执行服务的二进制文件之前。请注意，这意味着 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code> 服务的 systemctl start 命令行将报告成功，即使服务的二进制文件无法成功调用（例如，因为所选的 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">User=</code> 不存在，或者服务二进制文件丢失）。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">The <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">exec</code> type is similar to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code>, but the
            service manager will consider the unit started immediately after the main service binary has been
            executed. The service manager will delay starting of follow-up units until that point. (Or in
            other words: <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code> proceeds with further jobs right after
            <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">fork()</code> returns, while <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">exec</code> will not proceed before both
            <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">fork()</code> and <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">execve()</code> in the service process succeeded.)
            Note that this means <span class="command" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><strong data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemctl start</strong></span> command lines for <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">exec</code>
            services will report failure when the service's binary cannot be invoked successfully (for
            example because the selected <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">User=</code> doesn't exist, or the service binary is
            missing).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">exec</code> 类型类似于 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code> ，但服务管理器会在主服务二进制文件执行后立即将单元视为已启动。服务管理器将延迟启动后续单元直到那一点。（换句话说： <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code> 在 <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">fork()</code> 返回后立即继续执行其他作业，而 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">exec</code> 将在服务过程中的 <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">fork()</code> 和 <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">execve()</code> 都成功之前不会继续执行。）请注意，这意味着对于 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">exec</code> 服务的 systemctl start 命令行在服务的二进制文件无法成功调用时（例如因为所选的 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">User=</code> 不存在，或者服务二进制文件丢失），将报告失败。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">If set to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">forking</code>, the manager will consider the unit started
            immediately after the binary that forked off by the manager exits. <span class="emphasis" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><em data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">The use of this type
            is discouraged, use <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify</code>, <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify-reload</code>, or
            <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dbus</code> instead.</em></span><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">forking</code> ，管理器会在由管理器分叉出的二进制文件退出后立即将单元视为已启动。不建议使用此类型，而应改用 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify</code> ， <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify-reload</code> 或 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dbus</code> 。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">It is expected that the process configured with <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> will call
            <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">fork()</code> as part of its start-up. The parent process is expected to exit when
            start-up is complete and all communication channels are set up. The child continues to run as the
            main service process, and the service manager will consider the unit started when the parent
            process exits. This is the behavior of traditional UNIX services. If this setting is used, it is
            recommended to also use the <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">PIDFile=</code> option, so that systemd can reliably
            identify the main process of the service. The manager will proceed with starting follow-up units
            after the parent process exits.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">预计使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> 配置的进程将在启动过程中调用 <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">fork()</code> 。预计父进程在启动完成并设置好所有通信通道后退出。子进程将继续作为主服务进程运行，服务管理器将在父进程退出时认为该单元已启动。这是传统 UNIX 服务的行为。如果使用此设置，建议同时使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">PIDFile=</code> 选项，以便 systemd 可以可靠地识别服务的主进程。在父进程退出后，管理器将继续启动后续单元。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Behavior of <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">oneshot</code> is similar to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code>;
            however, the service manager will consider the unit up after the main process exits. It will then
            start follow-up units. <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RemainAfterExit=</code> is particularly useful for this type
            of service. <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">oneshot</code> is the implied default if neither
            <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> nor <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> are specified. Note that if this
            option is used without <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RemainAfterExit=</code> the service will never enter
            "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">active</code>" unit state, but will directly transition from
            "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">activating</code>" to "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">deactivating</code>" or "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dead</code>",
            since no process is configured that shall run continuously. In particular this means that after a
            service of this type ran (and which has <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RemainAfterExit=</code> not set) it will not
            show up as started afterwards, but as dead.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">oneshot</code> 的行为类似于 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code> ；但是，服务管理器将在主进程退出后将单元视为已启动。然后它将启动后续单元。 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RemainAfterExit=</code> 对于这种类型的服务特别有用。如果未指定 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> 或 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> ，则 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">oneshot</code> 将被隐式默认。请注意，如果在没有 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RemainAfterExit=</code> 的情况下使用此选项，则服务将永远不会进入“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">active</code> ”单元状态，而是将直接从“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">activating</code> ”转换为“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">deactivating</code> ”或“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dead</code> ”，因为没有配置应持续运行的进程。特别是，这意味着在运行此类型的服务之后（且未设置 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RemainAfterExit=</code> 的服务）之后，它将不会显示为已启动，而是显示为已停止。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Behavior of <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dbus</code> is similar to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code>; however,
            units of this type must have the <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">BusName=</code> specified and the service manager
            will consider the unit up when the specified bus name has been acquired. This type is the default
            if <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">BusName=</code> is specified.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dbus</code> 的行为类似于 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code> ；但是，此类型的单元必须指定 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">BusName=</code> ，并且当获取指定总线名称时，服务管理器将视为单元已启动。如果指定了 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">BusName=</code> ，则此类型为默认类型。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Service units with this option configured implicitly gain dependencies on the
            <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dbus.socket</code> unit. A service unit of this type is considered to be in the
            activating state until the specified bus name is acquired. It is considered activated while the
            bus name is taken. Once the bus name is released the service is considered being no longer
            functional which has the effect that the service manager attempts to terminate any remaining
            processes belonging to the service. Services that drop their bus name as part of their shutdown
            logic thus should be prepared to receive a <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGTERM</code> (or whichever signal is
            configured in <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">KillSignal=</code>) as result.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">配置此选项的服务单元隐式地依赖于 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dbus.socket</code> 单元。此类型的服务单元被视为处于激活状态，直到获取指定的总线名称为止。在占用总线名称时，它被视为已激活。一旦释放总线名称，服务被视为不再可用，这将导致服务管理器尝试终止属于该服务的任何剩余进程。因此，在关闭逻辑的一部分中放弃其总线名称的服务应准备接收 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGTERM</code> （或在 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">KillSignal=</code> 中配置的任何其他信号）作为结果。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Behavior of <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify</code> is similar to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">exec</code>; however,
            it is expected that the service sends a "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">READY=1</code>" notification message via
            <a href="sd_notify.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_notify</span>(3)</span></a> or
            an equivalent call when it has finished starting up. systemd will proceed with starting follow-up
            units after this notification message has been sent. If this option is used,
            <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">NotifyAccess=</code> (see below) should be set to open access to the notification
            socket provided by systemd. If <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">NotifyAccess=</code> is missing or set to
            <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">none</code>, it will be forcibly set to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">main</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify</code> 的行为类似于 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">exec</code> ；但是，预期服务在启动完成时通过 sd_notify(3)或等效调用发送“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">READY=1</code> ”通知消息。在发送此通知消息后，systemd 将继续启动后续单元。如果使用此选项，应将 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">NotifyAccess=</code> （请参阅下文）设置为打开对 systemd 提供的通知套接字的访问权限。如果 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">NotifyAccess=</code> 丢失或设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">none</code> ，它将被强制设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">main</code> 。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">If the service supports reloading, and uses a signal to start the reload, using
            <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify-reload</code> instead is recommended.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果服务支持重新加载，并使用信号启动重新加载，则建议使用 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify-reload</code> 。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Behavior of <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify-reload</code> is similar to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify</code>,
            with one difference: the <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGHUP</code> UNIX process signal is sent to the service's
            main process when the service is asked to reload and the manager will wait for a notification
            about the reload being finished.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify-reload</code> 的行为类似于 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify</code> ，但有一个区别：当要求重新加载服务时，将发送 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGHUP</code> UNIX 进程信号到服务的主进程，并且管理器将等待有关重新加载完成的通知。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">When initiating the reload process the service is expected to reply with a notification
            message via
            <a href="sd_notify.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_notify</span>(3)</span></a>
            that contains the "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RELOADING=1</code>" field in combination with
            "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">MONOTONIC_USEC=</code>" set to the current monotonic time
            (i.e. <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">CLOCK_MONOTONIC</code> in
            <a href="https://man7.org/linux/man-pages/man2/clock_gettime.2.html" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">clock_gettime</span>(2)</span></a>)
            in μs, formatted as decimal string. Once reloading is complete another notification message must
            be sent, containing "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">READY=1</code>". Using this service type and implementing this
            reload protocol is an efficient alternative to providing an <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecReload=</code>
            command for reloading of the service's configuration.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在启动重新加载过程时，服务应通过 sd_notify(3)回复包含“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RELOADING=1</code> ”字段与“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">MONOTONIC_USEC=</code> ”设置为当前单调时间（即 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">CLOCK_MONOTONIC</code> 在 clock_gettime(2)中）的通知消息，以微秒为单位，格式化为十进制字符串。重新加载完成后，必须发送另一个包含“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">READY=1</code> ”的通知消息。使用此服务类型并实现此重新加载协议是提供服务配置重新加载的有效替代方法。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">The signal to send can be tweaked via <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ReloadSignal=</code>, see below.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">可通过 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ReloadSignal=</code> 调整要发送的信号，见下文。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Behavior of <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">idle</code> is very similar to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code>; however,
            actual execution of the service program is delayed until all active jobs are dispatched. This may be used
            to avoid interleaving of output of shell services with the status output on the console. Note that this
            type is useful only to improve console output, it is not useful as a general unit ordering tool, and the
            effect of this service type is subject to a 5s timeout, after which the service program is invoked
            anyway.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">idle</code> 的行为与 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code> 非常相似；但是，直到所有活动作业都被分派之前，服务程序的实际执行会被延迟。这可以用来避免 shell 服务的输出与控制台上的状态输出交错。请注意，此类型仅用于改善控制台输出，不适用作一般的单元排序工具，且此服务类型的效果受 5 秒超时限制，超时后服务程序仍会被调用。</font></font></font></p></li></ul></div><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">It is recommended to use <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">exec</code> for long-running
          services, as it ensures that process setup errors (e.g. errors such as a missing service
          executable, or missing user) are properly tracked. However, as this service type won't propagate
          the failures in the service's own startup code (as opposed to failures in the preparatory steps the
          service manager executes before <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">execve()</code>) and doesn't allow ordering of other
          units against completion of initialization of the service code itself (which for example is useful
          if clients need to connect to the service through some form of IPC, and the IPC channel is only
          established by the service itself — in contrast to doing this ahead of time through socket or bus
          activation or similar), it might not be sufficient for many cases. If so, <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify</code>,
          <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify-reload</code>, or <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dbus</code> (the latter only in case the service
          provides a D-Bus interface) are the preferred options as they allow service program code to
          precisely schedule when to consider the service started up successfully and when to proceed with
          follow-up units. The <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify</code>/<code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify-reload</code> service types require
          explicit support in the service codebase (as <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_notify()</code> or an equivalent API
          needs to be invoked by the service at the appropriate time) — if it's not supported, then
          <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">forking</code> is an alternative: it supports the traditional heavy-weight UNIX service
          start-up protocol. Note that using any type other than <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code> possibly delays the
          boot process, as the service manager needs to wait for at least some service initialization to
          complete. (Also note it is generally not recommended to use <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">idle</code> or
          <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">oneshot</code> for long-running services.)<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">建议对长时间运行的服务使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">exec</code> ，因为这样可以确保进程设置错误（例如缺少服务可执行文件或缺少用户等错误）得到正确跟踪。然而，由于这种服务类型不会传播服务自身启动代码中的失败（与服务管理器在 <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">execve()</code> 之前执行的准备步骤中的失败相反），也不允许对其他单元进行排序以完成服务代码本身的初始化（例如，如果客户端需要通过某种 IPC 连接到服务，并且 IPC 通道仅由服务本身建立-与通过套接字或总线激活提前完成相反），这可能对许多情况不够。如果是这样， <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify</code> ， <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify-reload</code> 或 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dbus</code> （仅在服务提供 D-Bus 接口的情况下）是首选选项，因为它们允许服务程序代码精确安排何时考虑服务成功启动并何时继续进行后续单元。 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify</code> / <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify-reload</code> 服务类型需要服务代码库中的显式支持（因为服务需要在适当的时间调用 <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_notify()</code> 或等效的 API）- 如果不支持，则 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">forking</code> 是一个替代方案：它支持传统的重量级 UNIX 服务启动协议。请注意，除了 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code> 之外的任何类型可能会延迟引导过程，因为服务管理器需要等待至少一些服务初始化完成。（还请注意，通常不建议将 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">idle</code> 或 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">oneshot</code> 用于长时间运行的服务。)</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note that various service settings (e.g. <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">User=</code>, <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Group=</code>
          through libc NSS) might result in "hidden" blocking IPC calls to other services when
          used. Sometimes it might be advisable to use the <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code> service type to ensure
          that the service manager's transaction logic is not affected by such potentially slow operations
          and hidden dependencies, as this is the only service type where the service manager will not wait
          for such service execution setup operations to complete before proceeding.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，使用各种服务设置（例如 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">User=</code> ， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Group=</code> 通过 libc NSS）可能会导致在使用时对其他服务进行“隐藏”阻塞的 IPC 调用。有时，建议使用 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code> 服务类型，以确保服务管理器的事务逻辑不受此类潜在缓慢操作和隐藏依赖的影响，因为这是唯一一种服务类型，服务管理器在继续之前不会等待此类服务执行设置操作完成。</font></font></font></p></dd><dt id="ExitType=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExitType=</code></span><a class="headerlink" title="Permalink to this term" href="#ExitType=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Specifies when the manager should consider the service to be finished. One of <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">main</code> or
          <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">cgroup</code>:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">指定管理器应何时认为服务已完成。其中之一为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">main</code> 或 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">cgroup</code> ：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><li class="listitem" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">If set to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">main</code> (the default), the service manager
            will consider the unit stopped when the main process, which is determined according to the
            <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code>, exits. Consequently, it cannot be used with
            <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">oneshot</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">main</code> （默认值），服务管理器将在主进程退出时（根据 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> 确定），认为单元已停止。因此，它不能与 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">oneshot</code> 一起使用。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">If set to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">cgroup</code>, the service will be considered running as long as at
            least one process in the cgroup has not exited.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">cgroup</code> ，只要 cgroup 中至少有一个进程未退出，服务将被视为正在运行。</font></font></font></p></li></ul></div><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">It is generally recommended to use <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExitType=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">main</code> when a service has
          a known forking model and a main process can reliably be determined. <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExitType=</code>
          <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">cgroup</code> is meant for applications whose forking model is not known ahead of time and which
          might not have a specific main process. It is well suited for transient or automatically generated services,
          such as graphical applications inside of a desktop environment.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通常建议在服务具有已知分叉模型且可以可靠确定主进程时使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExitType=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">main</code> 。 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExitType=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">cgroup</code> 适用于预先不知道分叉模型且可能没有特定主进程的应用程序。它非常适用于瞬态或自动生成的服务，例如桌面环境中的图形应用程序。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><a name="v250" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a>Added in version 250.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在版本 250 中添加。</font></font></font></p></dd><dt id="RemainAfterExit=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RemainAfterExit=</code></span><a class="headerlink" title="Permalink to this term" href="#RemainAfterExit=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Takes a boolean value that specifies whether
        the service shall be considered active even when all its
        processes exited. Defaults to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">no</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">接受一个布尔值，指定即使所有进程退出，服务也应被视为活动状态。默认为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">no</code> 。</font></font></font></p></dd><dt id="GuessMainPID=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">GuessMainPID=</code></span><a class="headerlink" title="Permalink to this term" href="#GuessMainPID=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Takes a boolean value that specifies whether
        systemd should try to guess the main PID of a service if it
        cannot be determined reliably. This option is ignored unless
        <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=forking</code> is set and
        <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">PIDFile=</code> is unset because for the other types
        or with an explicitly configured PID file, the main PID is
        always known. The guessing algorithm might come to incorrect
        conclusions if a daemon consists of more than one process. If
        the main PID cannot be determined, failure detection and
        automatic restarting of a service will not work reliably.
        Defaults to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">yes</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">接受一个布尔值，指定如果 systemd 无法可靠确定服务的主 PID，则是否应尝试猜测主 PID。除非设置了 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=forking</code> 且未设置 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">PIDFile=</code> ，否则将忽略此选项，因为对于其他类型或使用显式配置的 PID 文件，主 PID 总是已知的。如果猜测算法得出错误的结论，那么如果守护程序由多个进程组成，则无法确定主 PID。如果无法确定主 PID，则服务的故障检测和自动重启将无法可靠工作。默认为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">yes</code> 。</font></font></font></p></dd><dt id="PIDFile=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">PIDFile=</code></span><a class="headerlink" title="Permalink to this term" href="#PIDFile=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Takes a path referring to the PID file of the service. Usage of this option is recommended for
        services where <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> is set to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">forking</code>. The path specified typically points
        to a file below <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/run/</code>. If a relative path is specified it is hence prefixed with
        <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/run/</code>. The service manager will read the PID of the main process of the service from this
        file after start-up of the service. The service manager will not write to the file configured here, although it
        will remove the file after the service has shut down if it still exists. The PID file does not need to be owned
        by a privileged user, but if it is owned by an unprivileged user additional safety restrictions are enforced:
        the file may not be a symlink to a file owned by a different user (neither directly nor indirectly), and the
        PID file must refer to a process already belonging to the service.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">拿到指向服务的 PID 文件的路径。建议在 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> 设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">forking</code> 的服务中使用此选项。通常指定的路径指向 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/run/</code> 下的一个文件。如果指定了相对路径，则会在前面加上 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/run/</code> 。服务管理器将在服务启动后从该文件中读取服务的主进程的 PID。服务管理器不会写入此处配置的文件，但如果服务关闭后文件仍然存在，它将删除该文件。PID 文件不需要由特权用户拥有，但如果由非特权用户拥有，则会强制执行额外的安全限制：文件不能是指向不同用户拥有的文件的符号链接（直接或间接），PID 文件必须指向已属于服务的进程。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note that PID files should be avoided in modern projects. Use <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify</code>,
        <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify-reload</code> or <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=simple</code> where possible, which does not
        require use of PID files to determine the main process of a service and avoids needless
        forking.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，现代项目应避免使用 PID 文件。尽可能使用 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify</code> ， <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify-reload</code> 或 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=simple</code> ，这样可以避免使用 PID 文件来确定服务的主进程，并避免不必要的分叉。</font></font></font></p></dd><dt id="BusName=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">BusName=</code></span><a class="headerlink" title="Permalink to this term" href="#BusName=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Takes a D-Bus destination name that this service shall use. This option is mandatory
        for services where <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> is set to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dbus</code>. It is recommended to
        always set this property if known to make it easy to map the service name to the D-Bus destination.
        In particular, <span class="command" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><strong data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemctl service-log-level/service-log-target</strong></span> verbs make use of
        this.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">接受此服务应使用的 D-Bus 目标名称。对于将 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> 设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dbus</code> 的服务，此选项是强制性的。建议始终设置此属性（如果已知）以便于将服务名称映射到 D-Bus 目标。特别是，systemctl service-log-level/service-log-target 动词会使用此选项。</font></font></font></p></dd><dt id="ExecStart=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code></span><a class="headerlink" title="Permalink to this term" href="#ExecStart=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Commands that are executed when this service is started. The value is split into zero
        or more command lines according to the rules described in the section "Command Lines" below.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在启动此服务时执行的命令。根据下面“命令行”部分描述的规则，该值会被拆分为零个或多个命令行。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Unless <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> is <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">oneshot</code>, exactly one command must be given. When
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=oneshot</code> is used, zero or more commands may be specified. Commands may be specified by
        providing multiple command lines in the same directive, or alternatively, this directive may be specified more
        than once with the same effect. If the empty string is assigned to this option, the list of commands to start
        is reset, prior assignments of this option will have no effect. If no <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> is
        specified, then the service must have <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RemainAfterExit=yes</code> and at least one
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> line set. (Services lacking both <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> and
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> are not valid.)<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">除非 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> 是 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">oneshot</code> ，否则必须提供一个命令。当使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=oneshot</code> 时，可以指定零个或多个命令。可以通过在同一指令中提供多个命令行来指定命令，或者可以多次指定此指令以达到相同效果。如果将空字符串分配给此选项，则将重置要启动的命令列表，之前对此选项的分配将不起作用。如果未指定 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> ，则服务必须具有 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RemainAfterExit=yes</code> 和至少一个 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> 行设置。（既不具有 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> 也不具有 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> 的服务无效。）</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">If more than one command is specified, the commands are
        invoked sequentially in the order they appear in the unit
        file. If one of the commands fails (and is not prefixed with
        "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">-</code>"), other lines are not executed, and the
        unit is considered failed.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果指定了多个命令，则按照它们在单元文件中出现的顺序依次调用这些命令。如果其中一个命令失败（且未以“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">-</code> ”为前缀），则不会执行其他行，并且该单元被视为失败。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Unless <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=forking</code> is set, the
        process started via this command line will be considered the
        main process of the daemon.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">除非设置了 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=forking</code> ，通过此命令行启动的进程将被视为守护程序的主进程。</font></font></font></p></dd><dt id="ExecStartPre=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code>, </span><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPost=</code></span><a class="headerlink" title="Permalink to this term" href="#ExecStartPre=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code> ， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPost=</code> ¶</font></font></font></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Additional commands that are executed before
        or after the command in <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code>,
        respectively. Syntax is the same as for
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code>, except that multiple command
        lines are allowed and the commands are executed one after the
        other, serially.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> 中命令之前或之后执行的其他命令。语法与 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> 相同，只是允许多个命令行，并且这些命令按顺序一个接一个地执行。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">If any of those commands (not prefixed with
        "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">-</code>") fail, the rest are not executed and the
        unit is considered failed.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果其中任何一个命令（未以“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">-</code> ”为前缀）失败，则其余命令将不会被执行，该单元将被视为失败。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> commands are only run after
        all <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code> commands that were not prefixed
        with a "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">-</code>" exit successfully.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">仅当所有未以“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">-</code> ”为前缀的 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code> 命令成功退出后，才会运行 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> 命令。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPost=</code> commands are only run after the commands specified in
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> have been invoked successfully, as determined by
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> (i.e. the process has been started for <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=simple</code> or
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=idle</code>, the last <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> process exited successfully for
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=oneshot</code>, the initial process exited successfully for
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=forking</code>, "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">READY=1</code>" is sent for
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify</code>/<code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify-reload</code>, or the
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">BusName=</code> has been taken for <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=dbus</code>).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">仅当在 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> 中指定的命令已成功调用（由 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> 确定，即已为 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=simple</code> 或 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=idle</code> 启动了进程，最后一个 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> 进程已成功退出为 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=oneshot</code> ，初始进程已成功退出为 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=forking</code> ，为 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify</code> / <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify-reload</code> 发送了“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">READY=1</code> ”，或已为 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=dbus</code> 采取了 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">BusName=</code> ）后，才会运行 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPost=</code> 命令。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note that <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code> may not be
        used to start long-running processes. All processes forked
        off by processes invoked via <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code> will
        be killed before the next service process is run.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code> 可能不适用于启动长时间运行的进程。通过通过 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code> 调用的进程派生的所有进程将在下一个服务进程运行之前被终止。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note that if any of the commands specified in <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code>,
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code>, or <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPost=</code> fail (and are not prefixed with
        "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">-</code>", see above) or time out before the service is fully up, execution continues with commands
        specified in <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code>, the commands in <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> are skipped.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，如果在 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code> 、 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> 或 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPost=</code> 中指定的任何命令失败（且未以“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">-</code> ”为前缀，参见上文）或在服务完全启动之前超时，执行将继续执行 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code> 中指定的命令，而跳过 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> 中的命令。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note that the execution of <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPost=</code> is taken into account for the purpose of
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Before=</code>/<code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">After=</code> ordering constraints.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPost=</code> 的执行将考虑到 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Before=</code> / <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">After=</code> 排序约束的目的。</font></font></font></p></dd><dt id="ExecCondition=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecCondition=</code></span><a class="headerlink" title="Permalink to this term" href="#ExecCondition=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Optional commands that are executed before the commands in <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code>.
        Syntax is the same as for <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code>, except that multiple command lines are allowed and the
        commands are executed one after the other, serially.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code> 中执行的可选命令。语法与 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> 相同，不同之处在于允许多个命令行，并且这些命令是按顺序一个接一个执行的。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">The behavior is like an <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code> and condition check hybrid: when an
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecCondition=</code> command exits with exit code 1 through 254 (inclusive), the remaining
        commands are skipped and the unit is <span class="emphasis" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><em data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">not</em></span> marked as failed. However, if an
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecCondition=</code> command exits with 255 or abnormally (e.g. timeout, killed by a
        signal, etc.), the unit will be considered failed (and remaining commands will be skipped). Exit code of 0 or
        those matching <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SuccessExitStatus=</code> will continue execution to the next commands.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">其行为类似于 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code> 和条件检查的混合体：当 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecCondition=</code> 命令以退出码 1 至 254（包括）退出时，剩余的命令将被跳过，单元不会标记为失败。但是，如果 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecCondition=</code> 命令以 255 或异常方式退出（例如超时、被信号终止等），则该单元将被视为失败（并且剩余的命令将被跳过）。退出码为 0 或与 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SuccessExitStatus=</code> 匹配的命令将继续执行到下一个命令。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">The same recommendations about not running long-running processes in <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code>
        also applies to <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecCondition=</code>. <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecCondition=</code> will also run the commands
        in <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code>, as part of stopping the service, in the case of any non-zero or abnormal
        exits, like the ones described above.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">关于不在 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code> 中运行长时间进程的建议也适用于 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecCondition=</code> 。 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecCondition=</code> 还将运行 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code> 中的命令，作为停止服务的一部分，在出现任何非零或异常退出的情况下，如上述情况所述。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><a name="v243" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a>Added in version 243.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在版本 243 中添加。</font></font></font></p></dd><dt id="ExecReload=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecReload=</code></span><a class="headerlink" title="Permalink to this term" href="#ExecReload=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Commands to execute to trigger a configuration reload in the service. This argument
        takes multiple command lines, following the same scheme as described for
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> above. Use of this setting is optional. Specifier and environment
        variable substitution is supported here following the same scheme as for
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">触发服务配置重新加载的执行命令。此参数接受多个命令行，遵循与上述 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> 相同的方案。使用此设置是可选的。此处支持指定符号和环境变量替换，遵循与 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> 相同的方案。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">One additional, special environment variable is set: if known, <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$MAINPID</code> is
        set to the main process of the daemon, and may be used for command lines like the following:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">设置了一个额外的特殊环境变量：如果已知， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$MAINPID</code> 将设置为守护程序的主进程，并可用于类似以下命令行的命令：</font></font></font></p><pre class="programlisting">ExecReload=kill -HUP $MAINPID</pre><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note however that reloading a daemon by enqueuing a signal (as with the example line above) is
        usually not a good choice, because this is an asynchronous operation and hence not suitable when
        ordering reloads of multiple services against each other. It is thus strongly recommended to either
        use <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify-reload</code> in place of
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecReload=</code>, or to set <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecReload=</code> to a command that not only
        triggers a configuration reload of the daemon, but also synchronously waits for it to complete. For
        example, <a href="https://www.mankier.com/1/dbus-broker" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dbus-broker</span>(1)</span></a>
        uses the following:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">但请注意，通过排队信号重新加载守护程序（如上面的示例行）通常不是一个好选择，因为这是一个异步操作，因此不适合在多个服务之间对重新加载进行排序。因此，强烈建议要么使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify-reload</code> 代替 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecReload=</code> ，要么将 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecReload=</code> 设置为一个命令，不仅触发守护程序的配置重新加载，而且还同步等待其完成。例如，dbus-broker(1) 使用以下命令：</font></font></font></p><pre class="programlisting">ExecReload=busctl call org.freedesktop.DBus \
        /org/freedesktop/DBus org.freedesktop.DBus \
        ReloadConfig
</pre></dd><dt id="ExecStop=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code></span><a class="headerlink" title="Permalink to this term" href="#ExecStop=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Commands to execute to stop the service started via
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code>. This argument takes multiple command lines, following the same scheme
        as described for <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> above. Use of this setting is optional. After the
        commands configured in this option are run, it is implied that the service is stopped, and any
        processes remaining for it are terminated according to the <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">KillMode=</code> setting (see
        <a href="systemd.kill.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.kill</span>(5)</span></a>).
        If this option is not specified, the process is terminated by sending the signal specified in
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">KillSignal=</code> or <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartKillSignal=</code> when service stop is
        requested. Specifier and environment variable substitution is supported (including
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$MAINPID</code>, see above).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">命令执行以停止通过 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> 启动的服务。此参数接受多个命令行，遵循与上述 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> 相同的方案。使用此设置是可选的。在配置在此选项中的命令运行后，暗示服务已停止，并根据 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">KillMode=</code> 设置终止任何剩余进程（请参阅 systemd.kill(5)）。如果未指定此选项，则在请求服务停止时通过发送 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">KillSignal=</code> 或 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartKillSignal=</code> 中指定的信号终止该进程。支持指定符和环境变量替换（包括 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$MAINPID</code> ，请参见上文）。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note that it is usually not sufficient to specify a command for this setting that only asks the
        service to terminate (for example, by sending some form of termination signal to it), but does not
        wait for it to do so. Since the remaining processes of the services are killed according to
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">KillMode=</code> and <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">KillSignal=</code> or
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartKillSignal=</code> as described above immediately after the command exited, this
        may not result in a clean stop. The specified command should hence be a synchronous operation, not an
        asynchronous one.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，通常仅为此设置指定一个命令并不足够，该命令仅要求服务终止（例如，通过向其发送某种终止信号），但不等待其执行。由于服务的剩余进程根据上述 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">KillMode=</code> 和 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">KillSignal=</code> 或 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartKillSignal=</code> 立即在命令退出后被终止，因此可能不会导致干净的停止。因此，指定的命令应该是同步操作，而不是异步操作。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note that the commands specified in <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> are only executed when the service
        started successfully first. They are not invoked if the service was never started at all, or in case its
        start-up failed, for example because any of the commands specified in <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code>,
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code> or <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPost=</code> failed (and weren't prefixed with
        "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">-</code>", see above) or timed out. Use <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code> to invoke commands when a
        service failed to start up correctly and is shut down again. Also note that the stop operation is always
        performed if the service started successfully, even if the processes in the service terminated on their
        own or were killed. The stop commands must be prepared to deal with that case. <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$MAINPID</code>
        will be unset if systemd knows that the main process exited by the time the stop commands are called.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> 中指定的命令仅在服务首次成功启动时执行。如果服务根本没有启动，或者由于 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> 、 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code> 或 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPost=</code> 中指定的任何命令失败（并且未以“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">-</code> ”为前缀，参见上文）或超时而导致启动失败，则不会调用它们。使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code> 在服务启动失败并再次关闭时调用命令。还请注意，如果服务成功启动，则始终执行停止操作，即使服务中的进程自行终止或被终止。停止命令必须准备处理这种情况。如果 systemd 在调用停止命令时知道主进程已退出，则 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$MAINPID</code> 将被取消设置。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Service restart requests are implemented as stop operations followed by start operations. This
        means that <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> and <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code> are executed during a
        service restart operation.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">服务重新启动请求被实现为停止操作，然后是启动操作。这意味着在服务重新启动操作期间执行 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> 和 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code> 。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">It is recommended to use this setting for commands that communicate with the service requesting
        clean termination. For post-mortem clean-up steps use <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code> instead.
        <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">建议对与请求干净终止的服务通信的命令使用此设置。对于事后清理步骤，请改用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code> 。</font></font></font></p></dd><dt id="ExecStopPost=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code></span><a class="headerlink" title="Permalink to this term" href="#ExecStopPost=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Additional commands that are executed after the service is stopped. This includes cases where
        the commands configured in <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> were used, where the service does not have any
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> defined, or where the service exited unexpectedly. This argument takes multiple
        command lines, following the same scheme as described for <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code>. Use of these settings
        is optional. Specifier and environment variable substitution is supported. Note that – unlike
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> – commands specified with this setting are invoked when a service failed to start
        up correctly and is shut down again.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在服务停止后执行的附加命令。这包括在使用配置在 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> 中的命令时，服务没有定义任何 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> 的情况，或者服务意外退出的情况。此参数接受多个命令行，遵循与 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> 描述的相同方案。使用这些设置是可选的。支持指定符号和环境变量替换。请注意，与 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> 不同，使用此设置指定的命令在服务未能正确启动并再次关闭时被调用。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">It is recommended to use this setting for clean-up operations that shall be executed even when the
        service failed to start up correctly. Commands configured with this setting need to be able to operate even if
        the service failed starting up half-way and left incompletely initialized data around. As the service's
        processes have been terminated already when the commands specified with this setting are executed they should
        not attempt to communicate with them.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">建议使用此设置进行清理操作，即使服务未能正确启动也应执行。使用此设置配置的命令需要能够在服务启动失败并留下未完全初始化的数据时运行。由于在执行使用此设置指定的命令时服务的进程已经终止，因此它们不应尝试与它们通信。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note that all commands that are configured with this setting are invoked with the result code of the
        service, as well as the main process' exit code and status, set in the <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$SERVICE_RESULT</code>,
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$EXIT_CODE</code> and <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$EXIT_STATUS</code> environment variables, see
        <a href="systemd.exec.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.exec</span>(5)</span></a> for
        details.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，使用此设置配置的所有命令都将使用服务的结果代码以及主进程的退出代码和状态调用，设置在 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$SERVICE_RESULT</code> ， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$EXIT_CODE</code> 和 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$EXIT_STATUS</code> 环境变量中，有关详细信息，请参阅 systemd.exec(5)。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note that the execution of <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code> is taken into account for the purpose of
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Before=</code>/<code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">After=</code> ordering constraints.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code> 的执行将考虑到 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Before=</code> / <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">After=</code> 排序约束的目的。</font></font></font></p></dd><dt id="RestartSec=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartSec=</code></span><a class="headerlink" title="Permalink to this term" href="#RestartSec=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Configures the time to sleep before restarting
        a service (as configured with <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Restart=</code>).
        Takes a unit-less value in seconds, or a time span value such
        as "5min 20s". Defaults to 100ms.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">配置在重新启动服务之前休眠的时间（如使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Restart=</code> 配置）。以秒为单位的无单位值，或者时间跨度值，例如"5 分钟 20 秒"。默认为 100 毫秒。</font></font></font></p></dd><dt id="RestartSteps=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartSteps=</code></span><a class="headerlink" title="Permalink to this term" href="#RestartSteps=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Configures the number of steps to take to increase the interval
        of auto-restarts from <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartSec=</code> to <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartMaxDelaySec=</code>.
        Takes a positive integer or 0 to disable it. Defaults to 0.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">配置增加自动重新启动间隔步数的次数，从 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartSec=</code> 到 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartMaxDelaySec=</code> 。输入正整数或 0 以禁用它。默认为 0。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">This setting is effective only if <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartMaxDelaySec=</code> is also set.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">仅当 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartMaxDelaySec=</code> 也设置时，此设置才有效。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><a name="v254" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a>Added in version 254.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加在版本 254 中。</font></font></font></p></dd><dt id="RestartMaxDelaySec=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartMaxDelaySec=</code></span><a class="headerlink" title="Permalink to this term" href="#RestartMaxDelaySec=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Configures the longest time to sleep before restarting a service
        as the interval goes up with <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartSteps=</code>. Takes a value
        in the same format as <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartSec=</code>, or "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">infinity</code>"
        to disable the setting. Defaults to "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">infinity</code>".<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">配置在服务重新启动间隔增加时重新启动之前睡眠的最长时间，与 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartSteps=</code> 一起。输入与 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartSec=</code> 相同格式的值，或 " <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">infinity</code> " 以禁用该设置。默认为 " <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">infinity</code> "。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">This setting is effective only if <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartSteps=</code> is also set.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">仅当 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartSteps=</code> 也设置时，此设置才有效。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><a name="v254" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a>Added in version 254.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加在版本 254 中。</font></font></font></p></dd><dt id="TimeoutStartSec=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStartSec=</code></span><a class="headerlink" title="Permalink to this term" href="#TimeoutStartSec=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Configures the time to wait for start-up. If a daemon service does not signal
        start-up completion within the configured time, the service will be considered failed and will be
        shut down again. The precise action depends on the <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStartFailureMode=</code>
        option. Takes a unit-less value in seconds, or a time span value such as "5min 20s". Pass
        "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">infinity</code>" to disable the timeout logic. Defaults to
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">DefaultTimeoutStartSec=</code> set in the manager, except when
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=oneshot</code> is used, in which case the timeout is disabled by default (see
        <a href="systemd-system.conf.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd-system.conf</span>(5)</span></a>).
        <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">配置启动等待时间。如果守护服务在配置的时间内未发出启动完成信号，则服务将被视为失败，并将被再次关闭。具体操作取决于 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStartFailureMode=</code> 选项。以秒为单位的无单位值，或者类似于 "5min 20s" 的时间跨度值。传递 " <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">infinity</code> " 以禁用超时逻辑。默认为管理器中设置的 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">DefaultTimeoutStartSec=</code> ，除非使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=oneshot</code> ，在这种情况下，默认情况下禁用超时（请参阅 systemd-system.conf(5)）。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">If a service of <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify</code>/<code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify-reload</code> sends
        "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">EXTEND_TIMEOUT_USEC=…</code>", this may cause the start time to be extended beyond
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStartSec=</code>. The first receipt of this message must occur before
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStartSec=</code> is exceeded, and once the start time has extended beyond
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStartSec=</code>, the service manager will allow the service to continue to start,
        provided the service repeats "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">EXTEND_TIMEOUT_USEC=…</code>" within the interval specified
        until the service startup status is finished by "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">READY=1</code>". (see
        <a href="sd_notify.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_notify</span>(3)</span></a>).
        <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify</code> / <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify-reload</code> 的服务发送 " <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">EXTEND_TIMEOUT_USEC=…</code> "，这可能导致启动时间延长超过 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStartSec=</code> 。必须在超过 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStartSec=</code> 之前首次接收此消息，并一旦启动时间延长超过 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStartSec=</code> ，服务管理器将允许服务继续启动，前提是服务在指定间隔内重复发送 " <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">EXTEND_TIMEOUT_USEC=…</code> "，直到服务启动状态由 " <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">READY=1</code> " 完成（请参阅 sd_notify(3)）。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><a name="v188" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a>Added in version 188.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加在版本 188 中。</font></font></font></p></dd><dt id="TimeoutStopSec=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStopSec=</code></span><a class="headerlink" title="Permalink to this term" href="#TimeoutStopSec=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">This option serves two purposes. First, it configures the time to wait for each
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> command. If any of them times out, subsequent <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> commands
        are skipped and the service will be terminated by <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGTERM</code>. If no <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code>
        commands are specified, the service gets the <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGTERM</code> immediately. This default behavior
        can be changed by the <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStopFailureMode=</code> option. Second, it configures the time
        to wait for the service itself to stop. If it doesn't terminate in the specified time, it will be forcibly terminated
        by <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGKILL</code> (see <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">KillMode=</code> in
        <a href="systemd.kill.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.kill</span>(5)</span></a>).
        Takes a unit-less value in seconds, or a time span value such
        as "5min 20s". Pass "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">infinity</code>" to disable the
        timeout logic. Defaults to
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">DefaultTimeoutStopSec=</code> from the manager
        configuration file (see
        <a href="systemd-system.conf.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd-system.conf</span>(5)</span></a>).
        <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此选项有两个目的。首先，它配置每个 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> 命令等待的时间。如果其中任何一个超时，后续的 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> 命令将被跳过，并且服务将被 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGTERM</code> 终止。如果没有指定 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> 命令，服务将立即获得 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGTERM</code> 。此默认行为可以通过 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStopFailureMode=</code> 选项更改。其次，它配置服务本身停止的等待时间。如果在指定时间内未终止，将由 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGKILL</code> 强制终止（请参阅 systemd.kill(5)中的 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">KillMode=</code> ）。以秒为单位的无单位值，或者时间跨度值，如“5 分钟 20 秒”。传递“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">infinity</code> ”以禁用超时逻辑。默认为来自管理器配置文件的 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">DefaultTimeoutStopSec=</code> （请参阅 systemd-system.conf(5)）。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">If a service of <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify</code>/<code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify-reload</code> sends
        "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">EXTEND_TIMEOUT_USEC=…</code>", this may cause the stop time to be extended beyond
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStopSec=</code>. The first receipt of this message must occur before
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStopSec=</code> is exceeded, and once the stop time has extended beyond
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStopSec=</code>, the service manager will allow the service to continue to stop,
        provided the service repeats "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">EXTEND_TIMEOUT_USEC=…</code>" within the interval specified,
        or terminates itself (see
        <a href="sd_notify.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_notify</span>(3)</span></a>).
        <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify</code> / <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify-reload</code> 的服务发送“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">EXTEND_TIMEOUT_USEC=…</code> ”，这可能会导致停止时间延长超过 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStopSec=</code> 。必须在 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStopSec=</code> 到期之前首次收到此消息，并且一旦停止时间延长超过 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStopSec=</code> ，服务管理器将允许服务继续停止，前提是服务在指定间隔内重复发送“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">EXTEND_TIMEOUT_USEC=…</code> ”，或者自行终止（请参阅 sd_notify(3)）。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><a name="v188" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a>Added in version 188.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加在版本 188 中。</font></font></font></p></dd><dt id="TimeoutAbortSec=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutAbortSec=</code></span><a class="headerlink" title="Permalink to this term" href="#TimeoutAbortSec=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">This option configures the time to wait for the service to terminate when it was aborted due to a
        watchdog timeout (see <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">WatchdogSec=</code>). If the service has a short <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStopSec=</code>
        this option can be used to give the system more time to write a core dump of the service. Upon expiration the service
        will be forcibly terminated by <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGKILL</code> (see <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">KillMode=</code> in
        <a href="systemd.kill.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.kill</span>(5)</span></a>). The core file will
        be truncated in this case. Use <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutAbortSec=</code> to set a sensible timeout for the core dumping per
        service that is large enough to write all expected data while also being short enough to handle the service failure
        in due time.
        <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此选项配置了服务由于看门狗超时而中止时等待服务终止的时间（请参见 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">WatchdogSec=</code> ）。如果服务有一个较短的 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStopSec=</code> ，则可以使用此选项为系统提供更多时间来写入服务的核心转储。在到期后，服务将被 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGKILL</code> 强制终止（请参见 systemd.kill(5)中的 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">KillMode=</code> ）。在这种情况下，核心文件将被截断。使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutAbortSec=</code> 为每个服务设置一个合理的核心转储超时，该超时足够大以写入所有预期数据，同时又足够短以及时处理服务故障。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Takes a unit-less value in seconds, or a time span value such as "5min 20s". Pass an empty value to skip
        the dedicated watchdog abort timeout handling and fall back <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStopSec=</code>. Pass
        "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">infinity</code>" to disable the timeout logic. Defaults to <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">DefaultTimeoutAbortSec=</code> from
        the manager configuration file (see
        <a href="systemd-system.conf.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd-system.conf</span>(5)</span></a>).
        <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">以秒为单位的无单位值，或者类似“5 分钟 20 秒”的时间跨度值。传递空值以跳过专用看门狗中止超时处理并回退 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStopSec=</code> 。传递“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">infinity</code> ”以禁用超时逻辑。默认为来自管理器配置文件的 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">DefaultTimeoutAbortSec=</code> （请参见 systemd-system.conf(5)）。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">If a service of <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify</code>/<code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify-reload</code> handles
        <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGABRT</code> itself (instead of relying on the kernel to write a core dump) it can
        send "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">EXTEND_TIMEOUT_USEC=…</code>" to extended the abort time beyond
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutAbortSec=</code>. The first receipt of this message must occur before
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutAbortSec=</code> is exceeded, and once the abort time has extended beyond
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutAbortSec=</code>, the service manager will allow the service to continue to abort,
        provided the service repeats "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">EXTEND_TIMEOUT_USEC=…</code>" within the interval specified,
        or terminates itself (see
        <a href="sd_notify.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_notify</span>(3)</span></a>).
        <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify</code> / <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify-reload</code> 的服务自己处理 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGABRT</code> （而不是依赖内核写入核心转储），它可以发送“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">EXTEND_TIMEOUT_USEC=…</code> ”来延长中止时间超过 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutAbortSec=</code> 。必须在 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutAbortSec=</code> 到期之前首次收到此消息，并一旦中止时间超过 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutAbortSec=</code> ，服务管理器将允许服务继续中止，前提是服务在指定间隔内重复“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">EXTEND_TIMEOUT_USEC=…</code> ”，或者终止自身（参见 sd_notify(3)）。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><a name="v243" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a>Added in version 243.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加于版本 243。</font></font></font></p></dd><dt id="TimeoutSec=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutSec=</code></span><a class="headerlink" title="Permalink to this term" href="#TimeoutSec=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">A shorthand for configuring both
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStartSec=</code> and
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStopSec=</code> to the specified value.
        <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">用于将 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStartSec=</code> 和 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStopSec=</code> 同时配置为指定值的简写。</font></font></font></p></dd><dt id="TimeoutStartFailureMode=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStartFailureMode=</code>, </span><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStopFailureMode=</code></span><a class="headerlink" title="Permalink to this term" href="#TimeoutStartFailureMode=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStartFailureMode=</code> ， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStopFailureMode=</code> ¶</font></font></font></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">These options configure the action that is taken in case a daemon service does not signal
        start-up within its configured <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStartSec=</code>, respectively if it does not stop within
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStopSec=</code>. Takes one of <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">terminate</code>, <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">abort</code> and
        <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">kill</code>. Both options default to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">terminate</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这些选项配置守护程序服务在其配置的 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStartSec=</code> 内未发出启动信号时采取的操作，分别是在 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStopSec=</code> 内未停止时采取的操作。取 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">terminate</code> 、 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">abort</code> 和 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">kill</code> 之一。这两个选项默认为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">terminate</code> 。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">If <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">terminate</code> is set the service will be gracefully terminated by sending the signal
        specified in <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">KillSignal=</code> (defaults to <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGTERM</code>, see
        <a href="systemd.kill.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.kill</span>(5)</span></a>). If the
        service does not terminate the <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">FinalKillSignal=</code> is sent after
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStopSec=</code>. If <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">abort</code> is set, <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">WatchdogSignal=</code> is sent
        instead and <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutAbortSec=</code> applies before sending <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">FinalKillSignal=</code>.
        This setting may be used to analyze services that fail to start-up or shut-down intermittently.
        By using <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">kill</code> the service is immediately terminated by sending
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">FinalKillSignal=</code> without any further timeout. This setting can be used to expedite the
        shutdown of failing services.
        <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果设置了 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">terminate</code> ，则服务将通过发送 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">KillSignal=</code> 中指定的信号（默认为 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGTERM</code> ，请参阅 systemd.kill(5)）优雅地终止。如果服务未终止，则在 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutStopSec=</code> 后发送 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">FinalKillSignal=</code> 。如果设置了 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">abort</code> ，则发送 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">WatchdogSignal=</code> 而不是 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">FinalKillSignal=</code> ，并在发送 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">FinalKillSignal=</code> 之前应用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TimeoutAbortSec=</code> 。此设置可用于分析启动或关闭时间不定的服务。通过使用 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">kill</code> ，服务将立即通过发送 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">FinalKillSignal=</code> 终止，而无需进一步的超时。此设置可用于加快失败服务的关闭速度。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><a name="v246" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a>Added in version 246.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加于版本 246。</font></font></font></p></dd><dt id="RuntimeMaxSec=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RuntimeMaxSec=</code></span><a class="headerlink" title="Permalink to this term" href="#RuntimeMaxSec=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Configures a maximum time for the service to run. If this is used and the service has been
        active for longer than the specified time it is terminated and put into a failure state. Note that this setting
        does not have any effect on <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=oneshot</code> services, as they terminate immediately after
        activation completed. Pass "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">infinity</code>" (the default) to configure no runtime
        limit.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">配置服务运行的最长时间。如果使用此设置，并且服务已经运行时间超过指定时间，则将其终止并置于失败状态。请注意，此设置对于 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=oneshot</code> 服务没有任何影响，因为它们在激活完成后立即终止。传递“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">infinity</code> ”（默认值）以配置无运行时限制。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">If a service of <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify</code>/<code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify-reload</code> sends
        "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">EXTEND_TIMEOUT_USEC=…</code>", this may cause the runtime to be extended beyond
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RuntimeMaxSec=</code>. The first receipt of this message must occur before
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RuntimeMaxSec=</code> is exceeded, and once the runtime has extended beyond
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RuntimeMaxSec=</code>, the service manager will allow the service to continue to run,
        provided the service repeats "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">EXTEND_TIMEOUT_USEC=…</code>" within the interval specified
        until the service shutdown is achieved by "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">STOPPING=1</code>" (or termination). (see
        <a href="sd_notify.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_notify</span>(3)</span></a>).
        <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify</code> / <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify-reload</code> 的服务发送“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">EXTEND_TIMEOUT_USEC=…</code> ”，可能会导致运行时间延长超过 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RuntimeMaxSec=</code> 。必须在超过 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RuntimeMaxSec=</code> 之前首次接收此消息，并一旦运行时间延长超过 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RuntimeMaxSec=</code> ，服务管理器将允许服务继续运行，前提是服务在指定间隔内重复“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">EXTEND_TIMEOUT_USEC=…</code> ”，直到通过“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">STOPPING=1</code> ”（或终止）实现服务关闭（参见 sd_notify(3)）。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><a name="v229" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a>Added in version 229.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加在版本 229 中。</font></font></font></p></dd><dt id="RuntimeRandomizedExtraSec=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RuntimeRandomizedExtraSec=</code></span><a class="headerlink" title="Permalink to this term" href="#RuntimeRandomizedExtraSec=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">This option modifies <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RuntimeMaxSec=</code> by increasing the maximum runtime by an
        evenly distributed duration between 0 and the specified value (in seconds). If <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RuntimeMaxSec=</code> is
        unspecified, then this feature will be disabled.
        <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此选项通过在 0 和指定值（以秒为单位）之间的均匀分布的持续时间增加最大运行时间来修改 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RuntimeMaxSec=</code> 。如果未指定 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RuntimeMaxSec=</code> ，则将禁用此功能。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><a name="v250" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a>Added in version 250.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加于版本 250。</font></font></font></p></dd><dt id="WatchdogSec=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">WatchdogSec=</code></span><a class="headerlink" title="Permalink to this term" href="#WatchdogSec=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Configures the watchdog timeout for a service.
        The watchdog is activated when the start-up is completed. The
        service must call
        <a href="sd_notify.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_notify</span>(3)</span></a>
        regularly with "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">WATCHDOG=1</code>" (i.e. the
        "keep-alive ping"). If the time between two such calls is
        larger than the configured time, then the service is placed in
        a failed state and it will be terminated with
        <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGABRT</code> (or the signal specified by
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">WatchdogSignal=</code>). By setting
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Restart=</code> to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-failure</code>,
        <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-watchdog</code>, <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-abnormal</code> or
        <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">always</code>, the service will be automatically
        restarted. The time configured here will be passed to the
        executed service process in the
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">WATCHDOG_USEC=</code> environment variable. This
        allows daemons to automatically enable the keep-alive pinging
        logic if watchdog support is enabled for the service. If this
        option is used, <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">NotifyAccess=</code> (see below)
        should be set to open access to the notification socket
        provided by systemd. If <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">NotifyAccess=</code> is
        not set, it will be implicitly set to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">main</code>.
        Defaults to 0, which disables this feature. The service can
        check whether the service manager expects watchdog keep-alive
        notifications. See
        <a href="sd_watchdog_enabled.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_watchdog_enabled</span>(3)</span></a>
        for details.
        <a href="sd_event_set_watchdog.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_event_set_watchdog</span>(3)</span></a>
        may be used to enable automatic watchdog notification support.
        <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为服务配置看门狗超时。当启动完成时，看门狗将被激活。服务必须定期使用“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">WATCHDOG=1</code> ”调用 sd_notify(3)（即“保持活动的 ping”）。如果两次这样的调用之间的时间大于配置的时间，则服务将被置于失败状态，并将使用 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGABRT</code> （或由 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">WatchdogSignal=</code> 指定的信号）终止。通过将 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Restart=</code> 设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-failure</code> 、 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-watchdog</code> 、 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-abnormal</code> 或 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">always</code> ，服务将自动重新启动。此处配置的时间将传递给执行的服务进程的 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">WATCHDOG_USEC=</code> 环境变量。这允许守护进程在为服务启用了看门狗支持的情况下自动启用保持活动的 ping 逻辑。如果使用此选项，应将 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">NotifyAccess=</code> （见下文）设置为打开 systemd 提供的通知套接字的访问权限。如果未设置 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">NotifyAccess=</code> ，它将被隐式设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">main</code> 。默认为 0，即禁用此功能。服务可以检查服务管理器是否期望看门狗保持活动的通知。有关详细信息，请参阅 sd_watchdog_enabled(3)。sd_event_set_watchdog(3)可用于启用自动看门狗通知支持。</font></font></font></p></dd><dt id="Restart=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Restart=</code></span><a class="headerlink" title="Permalink to this term" href="#Restart=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Configures whether the service shall be
        restarted when the service process exits, is killed, or a
        timeout is reached. The service process may be the main
        service process, but it may also be one of the processes
        specified with <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code>,
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPost=</code>,
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code>,
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code>, or
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecReload=</code>. When the death of the process
        is a result of systemd operation (e.g. service stop or
        restart), the service will not be restarted. Timeouts include
        missing the watchdog "keep-alive ping" deadline and a service
        start, reload, and stop operation timeouts.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">配置服务在服务进程退出、被杀死或超时到达时是否应重新启动。服务进程可以是主服务进程，也可以是使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code> 、 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPost=</code> 、 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> 、 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code> 或 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecReload=</code> 指定的进程之一。当进程的终止是由 systemd 操作引起时（例如服务停止或重启），服务将不会被重新启动。超时包括错过看门狗“保持活动 ping”截止时间以及服务启动、重新加载和停止操作超时。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Takes one of
        <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">no</code>,
        <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-success</code>,
        <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-failure</code>,
        <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-abnormal</code>,
        <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-watchdog</code>,
        <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-abort</code>, or
        <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">always</code>.
        If set to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">no</code> (the default), the service will
        not be restarted. If set to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-success</code>, it
        will be restarted only when the service process exits cleanly.
        In this context, a clean exit means any of the following:
        <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">取其中之一 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">no</code> 、 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-success</code> 、 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-failure</code> 、 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-abnormal</code> 、 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-watchdog</code> 、 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-abort</code> 或 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">always</code> 。如果设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">no</code> （默认值），服务将不会重新启动。如果设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-success</code> ，则仅在服务进程干净退出时才会重新启动。在这种情况下，干净退出意味着以下任何一种情况：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><li class="listitem" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">exit code of 0;<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">退出码为 0；</font></font></font></li><li class="listitem" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">for types other than
            <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=oneshot</code>, one of the signals
                <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGHUP</code>,
                <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGINT</code>,
                <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGTERM</code>, or
                <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGPIPE</code>;<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于除 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=oneshot</code> 之外的类型，其中一个信号为 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGHUP</code> ， <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGINT</code> ， <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGTERM</code> 或 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGPIPE</code> ；</font></font></font></li><li class="listitem" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">exit statuses and signals specified in
                <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SuccessExitStatus=</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">退出状态和 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SuccessExitStatus=</code> 中指定的信号。</font></font></font></li></ul></div><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">
        If set to
        <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-failure</code>, the service will be restarted
        when the process exits with a non-zero exit code, is
        terminated by a signal (including on core dump, but excluding
        the aforementioned four signals), when an operation (such as
        service reload) times out, and when the configured watchdog
        timeout is triggered. If set to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-abnormal</code>,
        the service will be restarted when the process is terminated
        by a signal (including on core dump, excluding the
        aforementioned four signals), when an operation times out, or
        when the watchdog timeout is triggered. If set to
        <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-abort</code>, the service will be restarted only
        if the service process exits due to an uncaught signal not
        specified as a clean exit status. If set to
        <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-watchdog</code>, the service will be restarted
        only if the watchdog timeout for the service expires. If set
        to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">always</code>, the service will be restarted
        regardless of whether it exited cleanly or not, got terminated
        abnormally by a signal, or hit a timeout.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-failure</code> ，则服务将在进程以非零退出代码退出、被信号终止（包括核心转储，但不包括前述的四个信号）、操作超时以及触发配置的看门狗超时时重新启动。如果设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-abnormal</code> ，则服务将在进程被信号终止（包括核心转储，不包括前述的四个信号）、操作超时或看门狗超时触发时重新启动。如果设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-abort</code> ，则服务仅在服务进程因未捕获的信号退出而退出时重新启动，该信号未被指定为干净的退出状态。如果设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-watchdog</code> ，则服务仅在服务的看门狗超时到期时重新启动。如果设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">always</code> ，则无论服务是否干净退出，是否异常终止，或是否超时，服务都将重新启动。</font></font></font></p><div class="table" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><a name="id-1.8.4.24.2.3" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a><p class="title" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><b data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Table&nbsp;1.&nbsp;Exit causes and the effect of the <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Restart=</code> settings<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">表 1. 退出原因和 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Restart=</code> 设置的影响</font></font></font></b></p><div class="table-contents" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><table class="table" summary="Exit causes and the effect of the Restart= settings" border="1" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><colgroup data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><col class="path" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><col class="expl" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></colgroup><thead data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><tr data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><th data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Restart settings/Exit causes<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">重新启动设置/退出原因</font></font></font></th><th><code class="option">no</code></th><th><code class="option">always</code></th><th><code class="option">on-success</code></th><th><code class="option">on-failure</code></th><th><code class="option">on-abnormal</code></th><th><code class="option">on-abort</code></th><th><code class="option">on-watchdog</code></th></tr></thead><tbody data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><tr data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Clean exit code or signal<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">干净的退出代码或信号</font></font></font></td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&nbsp;</td><td>X</td><td>X</td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&nbsp;</td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&nbsp;</td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&nbsp;</td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&nbsp;</td></tr><tr data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Unclean exit code<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">退出代码不干净</font></font></font></td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&nbsp;</td><td>X</td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&nbsp;</td><td>X</td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&nbsp;</td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&nbsp;</td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&nbsp;</td></tr><tr data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Unclean signal<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">信号不干净</font></font></font></td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&nbsp;</td><td>X</td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&nbsp;</td><td>X</td><td>X</td><td>X</td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&nbsp;</td></tr><tr data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><td>Timeout</td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&nbsp;</td><td>X</td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&nbsp;</td><td>X</td><td>X</td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&nbsp;</td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&nbsp;</td></tr><tr data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><td>Watchdog</td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&nbsp;</td><td>X</td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&nbsp;</td><td>X</td><td>X</td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&nbsp;</td><td>X</td></tr></tbody></table></div></div><br class="table-break" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">As exceptions to the setting above, the service will not
        be restarted if the exit code or signal is specified in
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartPreventExitStatus=</code> (see below) or
        the service is stopped with <span class="command" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><strong data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemctl stop</strong></span>
        or an equivalent operation. Also, the services will always be
        restarted if the exit code or signal is specified in
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartForceExitStatus=</code> (see below).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">作为上述设置的例外情况，如果在 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartPreventExitStatus=</code> （见下文）中指定了退出代码或信号，或者使用 systemctl stop 或等效操作停止服务，则服务将不会重新启动。此外，如果在 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartForceExitStatus=</code> （见下文）中指定了退出代码或信号，则服务将始终重新启动。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note that service restart is subject to unit start rate
        limiting configured with <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">StartLimitIntervalSec=</code>
        and <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">StartLimitBurst=</code>, see
        <a href="systemd.unit.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.unit</span>(5)</span></a>
        for details.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，服务重新启动受到使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">StartLimitIntervalSec=</code> 和 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">StartLimitBurst=</code> 配置的单元启动速率限制的影响，请参阅 systemd.unit(5) 了解详情。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Setting this to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-failure</code> is the
        recommended choice for long-running services, in order to
        increase reliability by attempting automatic recovery from
        errors. For services that shall be able to terminate on their
        own choice (and avoid immediate restarting),
        <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-abnormal</code> is an alternative choice.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">将此设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-failure</code> 是长时间运行服务的推荐选择，以通过尝试自动从错误中恢复来提高可靠性。对于应该能够自行选择终止（并避免立即重新启动）的服务， <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-abnormal</code> 是另一种选择。</font></font></font></p></dd><dt id="RestartMode=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartMode=</code></span><a class="headerlink" title="Permalink to this term" href="#RestartMode=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Takes a string value that specifies how a service should restart:
            <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">接受一个字符串值，指定服务应如何重新启动：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><li class="listitem" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">If set to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">normal</code> (the default), the service restarts by
              going through a failed/inactive state.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">normal</code> （默认值），服务将通过失败/非活动状态重新启动。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">If set to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">direct</code>, the service transitions to the activating
              state directly during auto-restart, skipping failed/inactive state.
              <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code> is invoked.
              <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">OnSuccess=</code> and <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">OnFailure=</code> are skipped.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">direct</code> ，服务在自动重启期间直接转换为激活状态，跳过失败/非活动状态。调用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code> 。跳过 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">OnSuccess=</code> 和 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">OnFailure=</code> 。</font></font></font></p></li></ul></div><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">
          </p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">This option is useful in cases where a dependency can fail temporarily
          but we don't want these temporary failures to make the dependent units fail.
          When this option is set to <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">direct</code>, dependent units are not notified of these temporary failures.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在依赖项可能暂时失败但我们不希望这些暂时失败导致依赖单元失败的情况下，此选项很有用。当将此选项设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">direct</code> 时，依赖单元不会收到这些暂时失败的通知。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><a name="v254" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a>Added in version 254.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加在版本 254 中。</font></font></font></p></dd><dt id="SuccessExitStatus=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SuccessExitStatus=</code></span><a class="headerlink" title="Permalink to this term" href="#SuccessExitStatus=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Takes a list of exit status definitions that, when returned by the main service
        process, will be considered successful termination, in addition to the normal successful exit status
        0 and, except for <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=oneshot</code>, the signals <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGHUP</code>, <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGINT</code>,
        <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGTERM</code>, and <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGPIPE</code>. Exit status definitions can be
        numeric termination statuses, termination status names, or termination signal names, separated by
        spaces. See the Process Exit Codes section in
        <a href="systemd.exec.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.exec</span>(5)</span></a> for
        a list of termination status names (for this setting only the part without the
        "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">EXIT_</code>" or "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">EX_</code>" prefix should be used). See <a href="https://man7.org/linux/man-pages/man7/signal.7.html" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">signal</span>(7)</span></a> for
        a list of signal names.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">接受一组退出状态定义，当主服务进程返回这些退出状态时，将被视为成功终止，除了正常的成功退出状态 0 之外，还有信号 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGHUP</code> ， <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGINT</code> ， <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGTERM</code> 和 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGPIPE</code> ，除 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=oneshot</code> 外。退出状态定义可以是数字终止状态、终止状态名称或终止信号名称，用空格分隔。有关终止状态名称的列表，请参阅 systemd.exec(5)中的进程退出代码部分（对于此设置，只应使用不带“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">EXIT_</code> ”或“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">EX_</code> ”前缀的部分）。有关信号名称的列表，请参阅 signal(7)。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note that this setting does not change the mapping between numeric exit statuses and their
        names, i.e. regardless how this setting is used 0 will still be mapped to "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SUCCESS</code>"
        (and thus typically shown as "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">0/SUCCESS</code>" in tool outputs) and 1 to
        "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">FAILURE</code>" (and thus typically shown as "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">1/FAILURE</code>"), and so on. It
        only controls what happens as effect of these exit statuses, and how it propagates to the state of
        the service as a whole.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，此设置不会更改数字退出状态与其名称之间的映射，即无论如何使用此设置，0 仍将映射到“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SUCCESS</code> ”（因此通常显示为“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">0/SUCCESS</code> ”在工具输出中）和 1 到“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">FAILURE</code> ”（因此通常显示为“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">1/FAILURE</code> ”），依此类推。它仅控制这些退出状态的影响以及它如何传播到整个服务的状态。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">This option may appear more than once, in which case the list of successful exit statuses is
        merged. If the empty string is assigned to this option, the list is reset, all prior assignments of
        this option will have no effect.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此选项可能会出现多次，此时成功退出状态列表将被合并。如果将空字符串分配给此选项，则列表将被重置，之前对此选项的所有分配都将无效。</font></font></font></p><div class="example" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><a name="id-1.8.4.26.2.4" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a><p class="title" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><b data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Example&nbsp;1.&nbsp;A service with the <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SuccessExitStatus=</code> setting<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 1. 具有 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SuccessExitStatus=</code> 设置的服务</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><pre class="programlisting">SuccessExitStatus=TEMPFAIL 250 SIGKILL</pre><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Exit status 75 (<code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TEMPFAIL</code>), 250, and the termination signal
          <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGKILL</code> are considered clean service terminations.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">退出状态 75 ( <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">TEMPFAIL</code> )，250 和终止信号 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGKILL</code> 被视为干净的服务终止。</font></font></font></p></div></div><br class="example-break" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note: <span class="command" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><strong data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd-analyze exit-status</strong></span> may be used to list exit statuses and
        translate between numerical status values and names.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意: systemd-analyze exit-status 可用于列出退出状态并在数字状态值和名称之间进行翻译。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><a name="v189" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a>Added in version 189.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加于版本 189。</font></font></font></p></dd><dt id="RestartPreventExitStatus=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartPreventExitStatus=</code></span><a class="headerlink" title="Permalink to this term" href="#RestartPreventExitStatus=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Takes a list of exit status definitions that, when returned by the main service
        process, will prevent automatic service restarts, regardless of the restart setting configured with
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Restart=</code>. Exit status definitions can either be numeric exit codes or termination
        signal names, and are separated by spaces. Defaults to the empty list, so that, by default, no exit
        status is excluded from the configured restart logic. For example:

        <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">接受一系列退出状态定义，当主服务进程返回这些状态时，将阻止自动服务重启，而不管使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Restart=</code> 配置的重启设置。退出状态定义可以是数字退出代码或终止信号名称，并用空格分隔。默认为空列表，因此，默认情况下，没有退出状态被排除在配置的重启逻辑之外。例如：</font></font></font></p><pre class="programlisting">RestartPreventExitStatus=1 6 SIGABRT</pre><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">

        ensures that exit codes 1 and 6 and the termination signal <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGABRT</code> will not
        result in automatic service restarting. This option may appear more than once, in which case the list
        of restart-preventing statuses is merged. If the empty string is assigned to this option, the list is
        reset and all prior assignments of this option will have no effect.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">确保退出代码 1 和 6 以及终止信号 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGABRT</code> 不会导致自动服务重新启动。此选项可以出现多次，此时阻止重启状态列表将被合并。如果将空字符串分配给此选项，则列表将被重置，并且此选项的所有先前分配将不起作用。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note that this setting has no effect on processes configured via
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code>, <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPost=</code>, <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code>,
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code> or <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecReload=</code>, but only on the main service
        process, i.e. either the one invoked by <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> or (depending on
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code>, <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">PIDFile=</code>, …) the otherwise configured main
        process.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，此设置对通过 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code> ， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPost=</code> ， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> ， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code> 或 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecReload=</code> 配置的进程没有影响，而仅对主服务进程有影响，即由 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> 调用的进程或（取决于 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> ， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">PIDFile=</code> ，...）否则配置的主进程。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><a name="v189" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a>Added in version 189.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加于版本 189。</font></font></font></p></dd><dt id="RestartForceExitStatus=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartForceExitStatus=</code></span><a class="headerlink" title="Permalink to this term" href="#RestartForceExitStatus=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Takes a list of exit status definitions that,
        when returned by the main service process, will force automatic
        service restarts, regardless of the restart setting configured
        with <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Restart=</code>. The argument format is
        similar to
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartPreventExitStatus=</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">接受一系列退出状态定义，当主服务进程返回这些定义时，将强制自动重新启动服务，而不考虑使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Restart=</code> 配置的重新启动设置。参数格式类似于 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RestartPreventExitStatus=</code> 。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><a name="v215" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a>Added in version 215.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加在版本 215 中。</font></font></font></p></dd><dt id="RootDirectoryStartOnly=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RootDirectoryStartOnly=</code></span><a class="headerlink" title="Permalink to this term" href="#RootDirectoryStartOnly=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Takes a boolean argument. If true, the root
        directory, as configured with the
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RootDirectory=</code> option (see
        <a href="systemd.exec.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.exec</span>(5)</span></a>
        for more information), is only applied to the process started
        with <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code>, and not to the various
        other <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code>,
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPost=</code>,
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecReload=</code>, <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code>,
        and <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code> commands. If false, the
        setting is applied to all configured commands the same way.
        Defaults to false.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">接受一个布尔参数。如果为 true，则仅将根目录应用于使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> 启动的进程，而不应用于其他各种 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code> ， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPost=</code> ， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecReload=</code> ， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> 和 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code> 命令。如果为 false，则该设置以相同方式应用于所有配置的命令。默认为 false。</font></font></font></p></dd><dt id="NonBlocking=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">NonBlocking=</code></span><a class="headerlink" title="Permalink to this term" href="#NonBlocking=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Set the <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">O_NONBLOCK</code> flag for all file descriptors passed via
        socket-based activation. If true, all file descriptors &gt;= 3 (i.e. all except stdin, stdout, stderr),
        excluding those passed in via the file descriptor storage logic (see
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">FileDescriptorStoreMax=</code> for details), will have the
        <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">O_NONBLOCK</code> flag set and hence are in non-blocking mode. This option is only
        useful in conjunction with a socket unit, as described in
        <a href="systemd.socket.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.socket</span>(5)</span></a>
        and has no effect on file descriptors which were previously saved in the file-descriptor store for
        example.  Defaults to false.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为通过基于套接字激活传递的所有文件描述符设置 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">O_NONBLOCK</code> 标志。如果为 true，则所有文件描述符&gt;= 3（即除了 stdin、stdout、stderr 之外的所有文件描述符），不包括通过文件描述符存储逻辑传递的文件描述符（有关详细信息，请参见 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">FileDescriptorStoreMax=</code> ），将设置 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">O_NONBLOCK</code> 标志，因此处于非阻塞模式。此选项仅在与套接字单元一起使用时才有用，如 systemd.socket(5)中所述，并且不会影响先前保存在文件描述符存储中的文件描述符。默认为 false。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note that if the same socket unit is configured to be passed to multiple service units (via the
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Sockets=</code> setting, see below), and these services have different
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">NonBlocking=</code> configurations, the precise state of <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">O_NONBLOCK</code>
        depends on the order in which these services are invoked, and will possibly change after service code
        already took possession of the socket file descriptor, simply because the
        <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">O_NONBLOCK</code> state of a socket is shared by all file descriptors referencing
        it. Hence it is essential that all services sharing the same socket use the same
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">NonBlocking=</code> configuration, and do not change the flag in service code
        either.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，如果将相同的套接字单元配置为传递给多个服务单元（通过 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Sockets=</code> 设置，请参见下文），并且这些服务具有不同的 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">NonBlocking=</code> 配置，则 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">O_NONBLOCK</code> 的确切状态取决于调用这些服务的顺序，并且在服务代码已经获取套接字文件描述符之后，可能会发生变化，仅因为套接字的 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">O_NONBLOCK</code> 状态由引用它的所有文件描述符共享。因此，所有共享相同套接字的服务使用相同的 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">NonBlocking=</code> 配置是至关重要的，并且不要在服务代码中更改标志。</font></font></font></p></dd><dt id="NotifyAccess=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">NotifyAccess=</code></span><a class="headerlink" title="Permalink to this term" href="#NotifyAccess=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Controls access to the service status notification socket, as accessible via the
        <a href="sd_notify.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_notify</span>(3)</span></a>
        call. Takes one of <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">none</code> (the default), <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">main</code>, <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">exec</code>
        or <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">all</code>. If <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">none</code>, no daemon status updates are accepted from the
        service processes, all status update messages are ignored. If <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">main</code>, only service
        updates sent from the main process of the service are accepted. If <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">exec</code>, only
        service updates sent from any of the main or control processes originating from one of the
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Exec*=</code> commands are accepted. If <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">all</code>, all services updates from
        all members of the service's control group are accepted. This option should be set to open access to
        the notification socket when using
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify</code>/<code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify-reload</code> or
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">WatchdogSec=</code> (see above). If those options are used but
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">NotifyAccess=</code> is not configured, it will be implicitly set to
        <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">main</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">控制对服务状态通知套接字的访问，可通过 sd_notify(3) 调用访问。取值为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">none</code> （默认）、 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">main</code> 、 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">exec</code> 或 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">all</code> 。如果为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">none</code> ，则不接受来自服务进程的守护程序状态更新，所有状态更新消息将被忽略。如果为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">main</code> ，则只接受来自服务主进程发送的服务更新。如果为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">exec</code> ，则只接受来自任何一个源自 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Exec*=</code> 命令的主进程或控制进程发送的服务更新。如果为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">all</code> ，则接受来自服务控制组的所有成员的所有服务更新。在使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify</code> / <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=notify-reload</code> 或 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">WatchdogSec=</code> 时，应将此选项设置为打开通知套接字的访问权限（请参见上文）。如果使用了这些选项但未配置 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">NotifyAccess=</code> ，则将隐式设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">main</code> 。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note that <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_notify()</code> notifications may be attributed to units correctly only if
        either the sending process is still around at the time PID 1 processes the message, or if the sending process
        is explicitly runtime-tracked by the service manager. The latter is the case if the service manager originally
        forked off the process, i.e. on all processes that match <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">main</code> or
        <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">exec</code>. Conversely, if an auxiliary process of the unit sends an
        <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_notify()</code> message and immediately exits, the service manager might not be able to
        properly attribute the message to the unit, and thus will ignore it, even if
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">NotifyAccess=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">all</code> is set for it.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，仅当发送进程在 PID 1 处理消息时仍然存在，或者发送进程被服务管理器明确地运行时跟踪时，才能正确地将 <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_notify()</code> 通知归因于单位。如果服务管理器最初分叉出进程，即在所有匹配 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">main</code> 或 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">exec</code> 的进程上，后者是这种情况。相反，如果单位的辅助进程发送 <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_notify()</code> 消息并立即退出，则服务管理器可能无法正确地将消息归因于单位，因此将忽略它，即使为其设置了 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">NotifyAccess=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">all</code> 。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Hence, to eliminate all race conditions involving lookup of the client's unit and attribution of notifications
        to units correctly, <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_notify_barrier()</code> may be used. This call acts as a synchronization point
        and ensures all notifications sent before this call have been picked up by the service manager when it returns
        successfully. Use of <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_notify_barrier()</code> is needed for clients which are not invoked by the
        service manager, otherwise this synchronization mechanism is unnecessary for attribution of notifications to the
        unit.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">因此，为了消除涉及客户端单位查找和正确将通知归因于单位的所有竞争条件，可能需要使用 <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_notify_barrier()</code> 。此调用充当同步点，并确保在成功返回时服务管理器已经捕获了此调用之前发送的所有通知。对于不是由服务管理器调用的客户端，需要使用 <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_notify_barrier()</code> ，否则此同步机制对于将通知归因于单位是不必要的。</font></font></font></p></dd><dt id="Sockets=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Sockets=</code></span><a class="headerlink" title="Permalink to this term" href="#Sockets=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Specifies the name of the socket units this
        service shall inherit socket file descriptors from when the
        service is started. Normally, it should not be necessary to use
        this setting, as all socket file descriptors whose unit shares
        the same name as the service (subject to the different unit
        name suffix of course) are passed to the spawned
        process.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">指定在启动服务时，此服务应从哪些套接字单元继承套接字文件描述符的名称。通常情况下，不需要使用此设置，因为所有套接字文件描述符，其单位与服务同名（当然要考虑不同的单位名称后缀），都将传递给生成的进程。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note that the same socket file descriptors may be passed
        to multiple processes simultaneously. Also note that a
        different service may be activated on incoming socket traffic
        than the one which is ultimately configured to inherit the
        socket file descriptors. Or, in other words: the
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Service=</code> setting of
        <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">.socket</code> units does not have to match the
        inverse of the <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Sockets=</code> setting of the
        <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">.service</code> it refers to.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，相同的套接字文件描述符可能同时传递给多个进程。还请注意，传入套接字流量上可能激活不同的服务，而不是最终配置为继承套接字文件描述符的服务。换句话说： <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Service=</code> 单元的设置不一定要与其引用的 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">.service</code> 的 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Sockets=</code> 设置的逆相匹配。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">This option may appear more than once, in which case the list of socket units is merged. Note
        that once set, clearing the list of sockets again (for example, by assigning the empty string to this
        option) is not supported.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此选项可以出现多次，此时套接字单元列表将被合并。请注意，一旦设置，再次清除套接字列表（例如，通过将空字符串分配给此选项）是不受支持的。</font></font></font></p></dd><dt id="FileDescriptorStoreMax=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">FileDescriptorStoreMax=</code></span><a class="headerlink" title="Permalink to this term" href="#FileDescriptorStoreMax=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Configure how many file descriptors may be stored in the service manager for the
        service using
        <a href="sd_pid_notify_with_fds.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_pid_notify_with_fds</span>(3)</span></a>'s
        "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">FDSTORE=1</code>" messages. This is useful for implementing services that can restart
        after an explicit request or a crash without losing state. Any open sockets and other file
        descriptors which should not be closed during the restart may be stored this way. Application state
        can either be serialized to a file in <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RuntimeDirectory=</code>, or stored in a
        <a href="https://man7.org/linux/man-pages/man2/memfd_create.2.html" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">memfd_create</span>(2)</span></a>
        memory file descriptor. Defaults to 0, i.e. no file descriptors may be stored in the service
        manager. All file descriptors passed to the service manager from a specific service are passed back
        to the service's main process on the next service restart (see
        <a href="sd_listen_fds.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_listen_fds</span>(3)</span></a> for
        details about the precise protocol used and the order in which the file descriptors are passed). Any
        file descriptors passed to the service manager are automatically closed when
        <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">POLLHUP</code> or <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">POLLERR</code> is seen on them, or when the service is
        fully stopped and no job is queued or being executed for it (the latter can be tweaked with
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">FileDescriptorStorePreserve=</code>, see below). If this option is used,
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">NotifyAccess=</code> (see above) should be set to open access to the notification socket
        provided by systemd. If <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">NotifyAccess=</code> is not set, it will be implicitly set to
        <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">main</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">配置服务管理器中可以存储多少文件描述符，以便使用 sd_pid_notify_with_fds(3)的“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">FDSTORE=1</code> ”消息。这对于实现可以在明确请求或崩溃后重新启动而不丢失状态的服务非常有用。任何不应在重新启动期间关闭的打开套接字和其他文件描述符都可以通过这种方式存储。应用程序状态可以序列化到 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RuntimeDirectory=</code> 中的文件中，或者存储在 memfd_create(2)内存文件描述符中。默认为 0，即服务管理器中不允许存储文件描述符。从特定服务传递给服务管理器的所有文件描述符都将在下一次服务重新启动时传递回服务的主进程（有关使用的精确协议和传递文件描述符的顺序的详细信息，请参见 sd_listen_fds(3)）。传递给服务管理器的任何文件描述符在看到 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">POLLHUP</code> 或 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">POLLERR</code> 时会自动关闭，或者当服务完全停止且没有作业排队或正在执行时（后者可以通过 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">FileDescriptorStorePreserve=</code> 进行调整，请参见下文）。 如果使用此选项，则应将 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">NotifyAccess=</code> （见上文）设置为打开 systemd 提供的通知套接字的访问权限。如果未设置 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">NotifyAccess=</code> ，它将被隐式设置为 <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">main</code> 。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">The <span class="command" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><strong data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">fdstore</strong></span> command of
        <a href="systemd-analyze.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd-analyze</span>(1)</span></a>
        may be used to list the current contents of a service's file descriptor store.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">systemd-analyze(1)的 fdstore 命令可用于列出服务文件描述符存储的当前内容。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note that the service manager will only pass file descriptors contained in the file descriptor
        store to the service's own processes, never to other clients via IPC or similar. However, it does
        allow unprivileged clients to query the list of currently open file descriptors of a
        service. Sensitive data may hence be safely placed inside the referenced files, but should not be
        attached to the metadata (e.g. included in filenames) of the stored file
        descriptors.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，服务管理器仅将文件描述符存储中包含的文件描述符传递给服务自己的进程，而不会通过 IPC 或类似方式传递给其他客户端。但是，它允许非特权客户端查询服务当前打开的文件描述符列表。因此，敏感数据可以安全地放置在所引用的文件中，但不应附加到存储的文件描述符的元数据中（例如，不应包含在文件名中）。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">If this option is set to a non-zero value the <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$FDSTORE</code> environment variable
        will be set for processes invoked for this service. See
        <a href="systemd.exec.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.exec</span>(5)</span></a> for
        details.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果将此选项设置为非零值，则将为为此服务调用的进程设置 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$FDSTORE</code> 环境变量。有关详细信息，请参阅 systemd.exec(5)。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">For further information on the file descriptor store see the <a class="ulink" href="https://systemd.io/FILE_DESCRIPTOR_STORE" target="_top" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">File Descriptor Store</a> overview.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有关文件描述符存储的更多信息，请参阅文件描述符存储概述。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><a name="v219" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a>Added in version 219.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加在版本 219 中。</font></font></font></p></dd><dt id="FileDescriptorStorePreserve=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">FileDescriptorStorePreserve=</code></span><a class="headerlink" title="Permalink to this term" href="#FileDescriptorStorePreserve=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Takes one of <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">no</code>, <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">yes</code>,
        <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">restart</code> and controls when to release the service's file descriptor store
        (i.e. when to close the contained file descriptors, if any). If set to <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">no</code> the
        file descriptor store is automatically released when the service is stopped; if
        <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">restart</code> (the default) it is kept around as long as the unit is neither inactive
        nor failed, or a job is queued for the service, or the service is expected to be restarted. If
        <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">yes</code> the file descriptor store is kept around until the unit is removed from
        memory (i.e. is not referenced anymore and inactive). The latter is useful to keep entries in the
        file descriptor store pinned until the service manager exits.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">取一个 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">no</code> ， <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">yes</code> ， <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">restart</code> 之一，并控制何时释放服务的文件描述符存储（即何时关闭包含的文件描述符，如果有）。如果设置为 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">no</code> ，则在停止服务时自动释放文件描述符存储；如果 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">restart</code> （默认值），则只要单元既不是非活动的也不是失败的，或者为服务排队了作业，或者预计将重新启动服务，文件描述符存储就会保留下来。如果 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">yes</code> ，则文件描述符存储会保留到单元从内存中删除为止（即不再被引用且处于非活动状态）。后者对于保持文件描述符存储中的条目固定直到服务管理器退出很有用。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Use <span class="command" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><strong data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemctl clean --what=fdstore …</strong></span> to release the file descriptor store
        explicitly.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 systemctl clean --what=fdstore …来显式释放文件描述符存储。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><a name="v254" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a>Added in version 254.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加在版本 254 中。</font></font></font></p></dd><dt id="USBFunctionDescriptors=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">USBFunctionDescriptors=</code></span><a class="headerlink" title="Permalink to this term" href="#USBFunctionDescriptors=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Configure the location of a file containing
        <a class="ulink" href="https://docs.kernel.org/usb/functionfs.html" target="_top" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">USB
        FunctionFS</a> descriptors, for implementation of USB
        gadget functions. This is used only in conjunction with a
        socket unit with <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ListenUSBFunction=</code>
        configured. The contents of this file are written to the
        <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ep0</code> file after it is
        opened.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">配置包含 USB FunctionFS 描述符的文件位置，用于实现 USB gadget 功能。仅在配置了带有 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ListenUSBFunction=</code> 的套接字单元时使用。此文件的内容在打开后写入 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ep0</code> 文件。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><a name="v227" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a>Added in version 227.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加在版本 227 中。</font></font></font></p></dd><dt id="USBFunctionStrings=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">USBFunctionStrings=</code></span><a class="headerlink" title="Permalink to this term" href="#USBFunctionStrings=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Configure the location of a file containing
        USB FunctionFS strings.  Behavior is similar to
        <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">USBFunctionDescriptors=</code>
        above.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">配置包含 USB FunctionFS 字符串的文件位置。行为类似于上述的 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">USBFunctionDescriptors=</code> 。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><a name="v227" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a>Added in version 227.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加在版本 227 中。</font></font></font></p></dd><dt id="OOMPolicy=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">OOMPolicy=</code></span><a class="headerlink" title="Permalink to this term" href="#OOMPolicy=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Configure the out-of-memory (OOM) killing policy for the kernel and the userspace OOM
        killer
        <a href="systemd-oomd.service.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd-oomd.service</span>(8)</span></a>.
        On Linux, when memory becomes scarce to the point that the kernel has trouble allocating memory for
        itself, it might decide to kill a running process in order to free up memory and reduce memory
        pressure. Note that <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd-oomd.service</code> is a more flexible solution that aims
        to prevent out-of-memory situations for the userspace too, not just the kernel, by attempting to
        terminate services earlier, before the kernel would have to act.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">配置内核和用户空间 OOM killer systemd-oomd.service(8) 的内存耗尽（OOM）杀死策略。在 Linux 上，当内存变得稀缺到内核难以为自己分配内存时，它可能决定终止正在运行的进程，以释放内存并减少内存压力。请注意， <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd-oomd.service</code> 是一个更灵活的解决方案，旨在通过尝试更早终止服务来预防用户空间的内存耗尽情况，而不仅仅是内核，以避免内核必须采取行动。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">This setting takes one of <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">continue</code>, <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">stop</code> or
        <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">kill</code>. If set to <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">continue</code> and a process in the unit is
        killed by the OOM killer, this is logged but the unit continues running. If set to
        <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">stop</code> the event is logged but the unit is terminated cleanly by the service
        manager. If set to <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">kill</code> and one of the unit's processes is killed by the OOM
        killer the kernel is instructed to kill all remaining processes of the unit too, by setting the
        <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">memory.oom.group</code> attribute to <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">1</code>; also see kernel
        page <a class="ulink" href="https://docs.kernel.org/admin-guide/cgroup-v2.html" target="_top" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Control Group v2</a>.
        <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此设置采用 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">continue</code> 、 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">stop</code> 或 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">kill</code> 中的一个。如果设置为 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">continue</code> 并且单元中的进程被 OOM killer 杀死，将被记录，但单元将继续运行。如果设置为 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">stop</code> ，事件将被记录，但单元将被服务管理器干净地终止。如果设置为 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">kill</code> 并且单元的一个进程被 OOM killer 杀死，内核将被指示也杀死单元的所有剩余进程，通过将 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">memory.oom.group</code> 属性设置为 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">1</code> ；另请参阅内核页面 Control Group v2。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Defaults to the setting <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">DefaultOOMPolicy=</code> in
        <a href="systemd-system.conf.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd-system.conf</span>(5)</span></a>
        is set to, except for units where <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Delegate=</code> is turned on, where it defaults to
        <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">continue</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 systemd-system.conf(5) 中设置为 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">DefaultOOMPolicy=</code> 的设置为默认值，除了在打开 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Delegate=</code> 的单元中，默认为 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">continue</code> 。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Use the <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">OOMScoreAdjust=</code> setting to configure whether processes of the unit
        shall be considered preferred or less preferred candidates for process termination by the Linux OOM
        killer logic. See
        <a href="systemd.exec.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.exec</span>(5)</span></a> for
        details.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">OOMScoreAdjust=</code> 设置来配置单元的进程是否被 Linux OOM killer 逻辑视为首选或次选候选进程终止。有关详细信息，请参阅 systemd.exec(5)。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">This setting also applies to
        <a href="systemd-oomd.service.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd-oomd.service</span>(8)</span></a>.
        Similarly to the kernel OOM kills performed by the kernel, this setting determines the state of the
        unit after <span class="command" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><strong data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd-oomd</strong></span> kills a cgroup associated with it.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此设置也适用于 systemd-oomd.service(8)。与内核执行的内核 OOM 杀死类似，此设置确定在 systemd-oomd 杀死与之关联的 cgroup 后单元的状态。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><a name="v243" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a>Added in version 243.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在版本 243 中添加。</font></font></font></p></dd><dt id="OpenFile=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">OpenFile=</code></span><a class="headerlink" title="Permalink to this term" href="#OpenFile=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Takes an argument of the form "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">path[<span class="optional"><em class="replaceable"><code>:fd-name:options</code></em></span>]</code>",
        where:
        <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">接受形式为" <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">path[<span class="optional"><em class="replaceable"><code>:fd-name:options</code></em></span>]</code> "的参数，其中：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><li class="listitem" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">"<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">path</code>" is a path to a file or an <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">AF_UNIX</code> socket in the file system;<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">" <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">path</code> "是文件系统中文件或 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">AF_UNIX</code> 套接字的路径；</font></font></font></li><li class="listitem" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">"<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">fd-name</code>" is a name that will be associated with the file descriptor;
            the name may contain any ASCII character, but must exclude control characters and ":", and must be at most 255 characters in length;
            it is optional and, if not provided, defaults to the file name;<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">" <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">fd-name</code> " 是将与文件描述符关联的名称；名称可以包含任何 ASCII 字符，但必须排除控制字符和 ":", 并且最多可以有 255 个字符长度；它是可选的，如果未提供，则默认为文件名；</font></font></font></li><li class="listitem" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">"<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">options</code>" is a comma-separated list of access options;
            possible values are
            "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">read-only</code>",
            "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">append</code>",
            "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">truncate</code>",
            "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">graceful</code>";
            if not specified, files will be opened in <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">rw</code> mode;
            if "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">graceful</code>" is specified, errors during file/socket opening are ignored.
            Specifying the same option several times is treated as an error.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">" <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">options</code> " 是一个逗号分隔的访问选项列表；可能的值为 " <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">read-only</code> ", " <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">append</code> ", " <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">truncate</code> ", " <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">graceful</code> "；如果未指定，文件将以 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">rw</code> 模式打开；如果指定了 " <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">graceful</code> "，则在文件/套接字打开期间忽略错误。多次指定相同选项将被视为错误。</font></font></font></li></ul></div><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">
        The file or socket is opened by the service manager and the file descriptor is passed to the service.
        If the path is a socket, we call <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">connect()</code> on it.
        See <a href="sd_listen_fds.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_listen_fds</span>(3)</span></a>
        for more details on how to retrieve these file descriptors.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">文件或套接字由服务管理器打开，并将文件描述符传递给服务。如果路径是套接字，则我们对其调用 <code class="function" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">connect()</code> 。有关如何检索这些文件描述符的更多详细信息，请参阅 sd_listen_fds(3)。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">This setting is useful to allow services to access files/sockets that they can't access themselves
        (due to running in a separate mount namespace, not having privileges, ...).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此设置可用于允许服务访问它们无法访问的文件/套接字（由于在单独的挂载命名空间中运行，没有特权等）。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">This setting can be specified multiple times, in which case all the specified paths are opened and the file descriptors passed to the service.
        If the empty string is assigned, the entire list of open files defined prior to this is reset.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">可以多次指定此设置，此时将打开所有指定的路径，并将文件描述符传递给服务。如果分配空字符串，则将重置在此之前定义的所有打开文件列表。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><a name="v253" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a>Added in version 253.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加在版本 253 中。</font></font></font></p></dd><dt id="ReloadSignal=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><span class="term" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ReloadSignal=</code></span><a class="headerlink" title="Permalink to this term" href="#ReloadSignal=" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a></dt><dd data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Configures the UNIX process signal to send to the service's main process when asked
        to reload the service's configuration. Defaults to <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGHUP</code>. This option has no
        effect unless <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify-reload</code> is used, see
        above.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">配置要在要求重新加载服务配置时发送给服务主进程的 UNIX 进程信号。默认为 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SIGHUP</code> 。除非使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify-reload</code> ，否则此选项无效，参见上文。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><a name="v253" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a>Added in version 253.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加在版本 253 中。</font></font></font></p></dd></dl></div><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><a name="shared-unit-options" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a>Check
    <a href="systemd.unit.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.unit</span>(5)</span></a>,
    <a href="systemd.exec.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.exec</span>(5)</span></a>, and
    <a href="systemd.kill.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.kill</span>(5)</span></a> for more
    settings.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">查看 systemd.unit(5), systemd.exec(5) 和 systemd.kill(5) 以获取更多设置。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><a name="id-1.9" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a><h2 id="Command lines" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Command lines<a class="headerlink" title="Permalink to this headline" href="#Command%20lines" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">命令行 ¶</font></font></font></h2><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">This section describes command line parsing and
    variable and specifier substitutions for
    <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code>,
    <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code>,
    <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPost=</code>,
    <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecReload=</code>,
    <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code>, and
    <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code> options.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">本节描述了 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> ， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPre=</code> ， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStartPost=</code> ， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecReload=</code> ， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> 和 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStopPost=</code> 选项的命令行解析以及变量和指定符的替换。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Multiple command lines may be concatenated in a single directive by separating them with semicolons
    (these semicolons must be passed as separate words). Lone semicolons may be escaped as
    "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">\;</code>".<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">可以通过使用分号将多个命令行连接在单个指令中（这些分号必须作为单独的单词传递）来连接多个命令行。孤立的分号可以转义为“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">\;</code> ”。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Each command line is unquoted using the rules described in "Quoting" section in
    <a href="systemd.syntax.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.syntax</span>(7)</span></a>. The
    first item becomes the command to execute, and the subsequent items the arguments.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">每个命令行都是根据 systemd.syntax(7) 中“引用”部分描述的规则进行未引用的。第一项成为要执行的命令，后续项成为参数。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">This syntax is inspired by shell syntax, but only the meta-characters and expansions
    described in the following paragraphs are understood, and the expansion of variables is
    different. Specifically, redirection using
    "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&lt;</code>",
    "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&lt;&lt;</code>",
    "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&gt;</code>", and
    "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&gt;&gt;</code>", pipes using
    "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">|</code>", running programs in the background using
    "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&amp;</code>", and <span class="emphasis" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><em data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">other elements of shell
    syntax are not supported</em></span>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此语法受 shell 语法启发，但仅理解以下段落中描述的元字符和扩展，并且变量的扩展不同。具体来说，不支持使用“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&lt;</code> ”、“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&lt;&lt;</code> ”、“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&gt;</code> ”和“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&gt;&gt;</code> ”进行重定向，使用“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">|</code> ”进行管道，使用“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&amp;</code> ”在后台运行程序，以及 shell 语法的其他元素。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">The command to execute may contain spaces, but control characters are not allowed.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要执行的命令可能包含空格，但不允许控制字符。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Each command may be prefixed with a number of special characters:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">每个命令都可以以多个特殊字符作为前缀：</font></font></font></p><div class="table" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><a name="id-1.9.8" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a><p class="title" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><b data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Table&nbsp;2.&nbsp;Special executable prefixes<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">表 2. 特殊可执行前缀</font></font></font></b></p><div class="table-contents" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><table class="table" summary="Special executable prefixes" border="1" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><colgroup data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><col class="prefix" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><col class="meaning" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></colgroup><thead data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><tr data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><th>Prefix</th><th>Effect</th></tr></thead><tbody data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><tr data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">"<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">@</code>"<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">@</code> ”</font></font></font></td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">If the executable path is prefixed with "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">@</code>", the second specified token will be passed as <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">argv[0]</code> to the executed process (instead of the actual filename), followed by the further arguments specified.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果可执行路径以“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">@</code> ”为前缀，则第二个指定的标记将作为 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">argv[0]</code> 传递给执行的进程（而不是实际的文件名），然后是指定的进一步参数。</font></font></font></td></tr><tr data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">"<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">-</code>"<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">-</code> ”</font></font></font></td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">If the executable path is prefixed with "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">-</code>", an exit code of the command normally considered a failure (i.e. non-zero exit status or abnormal exit due to signal) is recorded, but has no further effect and is considered equivalent to success.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果可执行路径以“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">-</code> ”为前缀，则通常被视为失败的命令退出代码（即非零退出状态或由于信号而导致的异常退出）将被记录，但不会产生进一步影响，并被视为成功的等效。</font></font></font></td></tr><tr data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">"<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">:</code>"<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">:</code> ”</font></font></font></td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">If the executable path is prefixed with "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">:</code>", environment variable substitution (as described by the "Command Lines" section below) is not applied.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果可执行路径以“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">:</code> ”为前缀，则不会应用环境变量替换（如下面的“命令行”部分所述）。</font></font></font></td></tr><tr data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">"<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">+</code>"<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">+</code> ”</font></font></font></td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">If the executable path is prefixed with "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">+</code>" then the process is executed with full privileges. In this mode privilege restrictions configured with <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">User=</code>, <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Group=</code>, <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">CapabilityBoundingSet=</code> or the various file system namespacing options (such as <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">PrivateDevices=</code>, <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">PrivateTmp=</code>) are not applied to the invoked command line (but still affect any other <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code>, <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code>, … lines). However, note that this will not bypass options that apply to the whole control group, such as <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">DevicePolicy=</code>, see <a href="systemd.resource-control.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.resource-control</span>(5)</span></a> for the full list.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果可执行路径以“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">+</code> ”为前缀，则以完全特权执行进程。在此模式下，配置的特权限制（如 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">User=</code> ， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Group=</code> ， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">CapabilityBoundingSet=</code> 或各种文件系统命名空间选项（如 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">PrivateDevices=</code> ， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">PrivateTmp=</code> ））不会应用于调用的命令行（但仍会影响任何其他 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> ， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> ，…行）。但请注意，这不会绕过适用于整个控制组的选项，如 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">DevicePolicy=</code> ，请参阅 systemd.resource-control(5) 获取完整列表。</font></font></font></td></tr><tr data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">"<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">!</code>"<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">!</code> ”</font></font></font></td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Similar to the "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">+</code>" character discussed above this permits invoking command lines with elevated privileges. However, unlike "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">+</code>" the "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">!</code>" character exclusively alters the effect of <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">User=</code>, <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Group=</code> and <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SupplementaryGroups=</code>, i.e. only the stanzas that affect user and group credentials. Note that this setting may be combined with <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">DynamicUser=</code>, in which case a dynamic user/group pair is allocated before the command is invoked, but credential changing is left to the executed process itself.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">类似于上面讨论的“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">+</code> ”字符，这允许以提升的权限调用命令行。然而，与“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">+</code> ”不同，“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">!</code> ”字符专门改变 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">User=</code> 、 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Group=</code> 和 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SupplementaryGroups=</code> 的效果，即只影响用户和组凭据的部分。请注意，此设置可以与 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">DynamicUser=</code> 结合使用，这样在调用命令之前会分配一个动态的用户/组对，但凭据更改留给执行的进程自己处理。</font></font></font></td></tr><tr data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">"<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">!!</code>"<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">!!</code> ”</font></font></font></td><td data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">This prefix is very similar to "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">!</code>", however it only has an effect on systems lacking support for ambient process capabilities, i.e. without support for <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">AmbientCapabilities=</code>. It's intended to be used for unit files that take benefit of ambient capabilities to run processes with minimal privileges wherever possible while remaining compatible with systems that lack ambient capabilities support. Note that when "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">!!</code>" is used, and a system lacking ambient capability support is detected any configured <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SystemCallFilter=</code> and <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">CapabilityBoundingSet=</code> stanzas are implicitly modified, in order to permit spawned processes to drop credentials and capabilities themselves, even if this is configured to not be allowed. Moreover, if this prefix is used and a system lacking ambient capability support is detected <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">AmbientCapabilities=</code> will be skipped and not be applied. On systems supporting ambient capabilities, "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">!!</code>" has no effect and is redundant.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此前缀与“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">!</code> ”非常相似，但仅对缺乏对环境进程功能支持的系统产生影响，即没有对 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">AmbientCapabilities=</code> 的支持。它旨在用于利用环境功能运行具有最小特权的进程的单元文件，同时保持与缺乏环境功能支持的系统兼容。请注意，当使用“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">!!</code> ”时，检测到缺乏环境功能支持的系统时，任何配置的 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SystemCallFilter=</code> 和 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">CapabilityBoundingSet=</code> 段落将被隐式修改，以允许生成的进程自行放弃凭据和功能，即使配置为不允许。此外，如果使用此前缀并检测到缺乏环境功能支持的系统，将跳过 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">AmbientCapabilities=</code> 并不会应用。在支持环境功能的系统上，“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">!!</code> ”没有效果且是多余的。</font></font></font></td></tr></tbody></table></div></div><br class="table-break" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">"<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">@</code>", "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">-</code>", "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">:</code>", and one of
    "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">+</code>"/"<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">!</code>"/"<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">!!</code>" may be used together and they can appear in any
    order. However, only one of "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">+</code>", "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">!</code>", "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">!!</code>" may be used at a
    time.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">@</code> ”，“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">-</code> ”，“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">:</code> ”，以及其中的一个“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">+</code> ”/“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">!</code> ”/“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">!!</code> ”可以一起使用，它们可以以任何顺序出现。但是，“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">+</code> ”，“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">!</code> ”，“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">!!</code> ”中只能同时使用一个。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">For each command, the first argument must be either an absolute path to an executable or a simple
    file name without any slashes. If the command is not a full (absolute) path, it will be resolved to a
    full path using a fixed search path determined at compilation time. Searched directories include
    <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/usr/local/bin/</code>, <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/usr/bin/</code>, <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/bin/</code> on
    systems using split <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/usr/bin/</code> and <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/bin/</code> directories, and their
    <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sbin/</code> counterparts on systems using split <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">bin/</code> and
    <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sbin/</code>. It is thus safe to use just the executable name in case of executables
    located in any of the "standard" directories, and an absolute path must be used in other cases.
    Hint: this search path may be queried using <span class="command" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><strong data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd-path search-binaries-default</strong></span>.
    <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于每个命令，第一个参数必须是可执行文件的绝对路径或不带任何斜杠的简单文件名。如果命令不是完整（绝对）路径，则会使用在编译时确定的固定搜索路径解析为完整路径。在使用分割 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/usr/bin/</code> 和 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/bin/</code> 目录的系统上，搜索的目录包括 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/usr/local/bin/</code> 、 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/usr/bin/</code> 、 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/bin/</code> ，在使用分割 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">bin/</code> 和 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sbin/</code> 目录的系统上，搜索的目录包括它们的 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sbin/</code> 。因此，在位于任何“标准”目录中的可执行文件的情况下，只使用可执行文件名是安全的，在其他情况下必须使用绝对路径。提示：可以使用 systemd-path search-binaries-default 查询此搜索路径。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">The command line accepts "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">%</code>" specifiers as described in
    <a href="systemd.unit.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.unit</span>(5)</span></a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">命令行接受“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">%</code> ”说明符，如 systemd.unit(5) 中所述。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Basic environment variable substitution is supported. Use
    "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">${FOO}</code>" as part of a word, or as a word of its
    own, on the command line, in which case it will be erased and replaced
    by the exact value of the environment variable (if any) including all
    whitespace it contains, always resulting in exactly a single argument.
    Use "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$FOO</code>" as a separate word on the command line, in
    which case it will be replaced by the value of the environment
    variable split at whitespace, resulting in zero or more arguments.
    For this type of expansion, quotes are respected when splitting
    into words, and afterwards removed.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">基本环境变量替换得到支持。在命令行中使用“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">${FOO}</code> ”作为一个词的一部分，或作为一个独立的词，这样它将被擦除并替换为环境变量的确切值（如果有的话），包括它包含的所有空格，始终得到一个单一参数。在命令行中使用“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$FOO</code> ”作为一个独立的词，这样它将被替换为在空格处分割的环境变量的值，得到零个或多个参数。对于这种类型的扩展，拆分成单词时会尊重引号，并在拆分后移除。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Example:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">例子:</font></font></font></p><pre class="programlisting">Environment="ONE=one" 'TWO=two two'
ExecStart=echo $ONE $TWO ${TWO}</pre><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">This will execute <span class="command" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><strong data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/bin/echo</strong></span> with four
    arguments: "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">one</code>", "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">two</code>",
    "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">two</code>", and "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">two two</code>".<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这将使用四个参数执行 /bin/echo：“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">one</code> ”，“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">two</code> ”，“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">two</code> ”和“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">two two</code> ”。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Example:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">例子:</font></font></font></p><pre class="programlisting">Environment=ONE='one' "TWO='two&nbsp;two'&nbsp;too" THREE=
ExecStart=/bin/echo ${ONE} ${TWO} ${THREE}
ExecStart=/bin/echo $ONE $TWO $THREE</pre><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">This results in <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/bin/echo</code> being
    called twice, the first time with arguments
    "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">'one'</code>",
    "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">'two&nbsp;two'&nbsp;too</code>", "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></code>",
    and the second time with arguments
    "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">one</code>", "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">two&nbsp;two</code>",
    "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">too</code>".
    <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这将导致 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/bin/echo</code> 被调用两次，第一次使用参数“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">'one'</code> ”，“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">'two&nbsp;two'&nbsp;too</code> ”，“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></code> ”，第二次使用参数“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">one</code> ”，“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">two&nbsp;two</code> ”，“ <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">too</code> ”。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">To pass a literal dollar sign, use "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$$</code>".
    Variables whose value is not known at expansion time are treated
    as empty strings. Note that the first argument (i.e. the program
    to execute) may not be a variable.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要传递一个字面的美元符号，请使用" <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$$</code> "。在扩展时值未知的变量将被视为空字符串。请注意，第一个参数（即要执行的程序）可能不是一个变量。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Variables to be used in this fashion may be defined through
    <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Environment=</code> and
    <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">EnvironmentFile=</code>. In addition, variables listed
    in the section "Environment variables in spawned processes" in
    <a href="systemd.exec.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.exec</span>(5)</span></a>,
    which are considered "static configuration", may be used (this
    includes e.g. <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$USER</code>, but not
    <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$TERM</code>).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要以这种方式使用的变量可以通过 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Environment=</code> 和 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">EnvironmentFile=</code> 定义。此外，在 systemd.exec(5)中列出的“生成进程中的环境变量”部分中列出的变量，被视为“静态配置”，可以使用（包括例如 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$USER</code> ，但不包括 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$TERM</code> ）。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note that shell command lines are not directly supported. If
    shell command lines are to be used, they need to be passed
    explicitly to a shell implementation of some kind. Example:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，不直接支持 shell 命令行。如果要使用 shell 命令行，需要将其明确传递给某种 shell 实现。例如：</font></font></font></p><pre class="programlisting">ExecStart=sh -c 'dmesg | tac'</pre><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Example:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">例子:</font></font></font></p><pre class="programlisting">ExecStart=echo one ; echo "two two"</pre><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">This will execute <span class="command" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><strong data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">echo</strong></span> two times,
    each time with one argument: "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">one</code>" and
    "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">two two</code>", respectively. Because two commands are
    specified, <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=oneshot</code> must be used.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这将执行 echo 两次，每次一个参数：" <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">one</code> " 和 " <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">two two</code> "，分别。因为指定了两个命令，必须使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=oneshot</code> 。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Example:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">例子:</font></font></font></p><pre class="programlisting">Type=oneshot
ExecStart=:echo $USER ; -false ; +:@true $TEST</pre><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">This will execute <span class="command" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><strong data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/usr/bin/echo</strong></span> with the literal argument
    "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$USER</code>" ("<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">:</code>" suppresses variable expansion), and then
    <span class="command" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><strong data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/usr/bin/false</strong></span> (the return value will be ignored because "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">-</code>"
    suppresses checking of the return value), and <span class="command" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><strong data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/usr/bin/true</strong></span> (with elevated privileges,
    with "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$TEST</code>" as <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">argv[0]</code>).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这将执行 /usr/bin/echo，带有字面参数 " <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$USER</code> "（" <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">:</code> " 抑制变量扩展），然后执行 /usr/bin/false（返回值将被忽略，因为 " <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">-</code> " 抑制了返回值的检查），最后执行 /usr/bin/true（以提升的权限，" <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$TEST</code> " 作为 <code class="constant" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">argv[0]</code> ）。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Example:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">例子:</font></font></font></p><pre class="programlisting">ExecStart=echo / &gt;/dev/null &amp; \; \
ls</pre><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">This will execute <span class="command" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><strong data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">echo</strong></span>
    with five arguments: "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/</code>",
    "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&gt;/dev/null</code>",
    "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&amp;</code>", "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">;</code>", and
    "<code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ls</code>".<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这将执行带有五个参数的 echo：" <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/</code> "，" <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&gt;/dev/null</code> "，" <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">&amp;</code> "，" <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">;</code> " 和 " <code class="literal" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ls</code> "。</font></font></font></p></div><div class="refsect1" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><a name="id-1.10" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a><h2 id="Examples" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Examples<a class="headerlink" title="Permalink to this headline" href="#Examples" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 ¶</font></font></font></h2><div class="example" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><a name="id-1.10.2" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a><p class="title" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><b data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Example&nbsp;2.&nbsp;Simple service<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 2. 简单服务</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">The following unit file creates a service that will
      execute <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/usr/sbin/foo-daemon</code>. Since no
      <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> is specified, the default
      <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code> will be assumed.
      systemd will assume the unit to be started immediately after the
      program has begun executing.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">以下单元文件创建一个服务，将执行 <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/usr/sbin/foo-daemon</code> 。由于未指定 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> ，将假定默认 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code> 。systemd 将假定该单元在程序开始执行后立即启动。</font></font></font></p><pre class="programlisting">[Unit]
Description=Foo

[Service]
ExecStart=/usr/sbin/foo-daemon

[Install]
WantedBy=multi-user.target</pre><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note that systemd assumes here that the process started by
      systemd will continue running until the service terminates. If
      the program daemonizes itself (i.e. forks), please use
      <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">forking</code> instead.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，systemd 在此假定由 systemd 启动的进程将持续运行，直到服务终止。如果程序使自身成为守护进程（即进行分叉），请改用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">forking</code> 。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Since no <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> was specified,
      systemd will send SIGTERM to all processes started from this
      service, and after a timeout also SIGKILL. This behavior can be
      modified, see
      <a href="systemd.kill.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.kill</span>(5)</span></a>
      for details.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">由于未指定 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> ，systemd 将向从此服务启动的所有进程发送 SIGTERM，并在超时后发送 SIGKILL。此行为可以修改，请参阅 systemd.kill(5) 了解详情。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note that this unit type does not include any type of notification when a service has completed
      initialization. For this, you should use other unit types, such as
      <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify</code>/<code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify-reload</code>
      if the service understands systemd's notification protocol,
      <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">forking</code> if the service can background itself or
      <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dbus</code> if the unit acquires a DBus name once initialization is
      complete. See below.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，此单元类型在服务完成初始化时不包括任何类型的通知。为此，您应该使用其他单元类型，例如 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify</code> / <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify-reload</code> （如果服务了解 systemd 的通知协议）、 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">forking</code> （如果服务可以后台运行）或 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dbus</code> （如果单元在初始化完成后获取 DBus 名称）。请参阅下文。</font></font></font></p></div></div><br class="example-break" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><div class="example" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><a name="id-1.10.3" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a><p class="title" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><b data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Example&nbsp;3.&nbsp;Oneshot service<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 3. Oneshot 服务</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Sometimes, units should just execute an action without
      keeping active processes, such as a filesystem check or a
      cleanup action on boot. For this,
      <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">oneshot</code> exists. Units
      of this type will wait until the process specified terminates
      and then fall back to being inactive. The following unit will
      perform a cleanup action:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有时，单位应该只执行一个动作，而不保持活动进程，比如在启动时进行文件系统检查或清理操作。为此，存在 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">oneshot</code> 。这种类型的单位将等待指定的进程终止，然后回退到非活动状态。以下单位将执行清理操作：</font></font></font></p><pre class="programlisting">[Unit]
Description=Cleanup old Foo data

[Service]
Type=oneshot
ExecStart=/usr/sbin/foo-cleanup

[Install]
WantedBy=multi-user.target</pre><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note that systemd will consider the unit to be in the
      state "starting" until the program has terminated, so ordered
      dependencies will wait for the program to finish before starting
      themselves. The unit will revert to the "inactive" state after
      the execution is done, never reaching the "active" state. That
      means another request to start the unit will perform the action
      again.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，systemd 将认为该单位处于“启动”状态，直到程序终止，因此有序依赖项将等待程序完成后再启动自身。执行完成后，该单位将恢复到“非活动”状态，永远不会达到“活动”状态。这意味着再次请求启动该单位将再次执行该动作。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">oneshot</code> are the
      only service units that may have more than one
      <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> specified. For units with multiple
      commands (<code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=oneshot</code>), all commands will be run again.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">oneshot</code> 是唯一可以指定多个 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStart=</code> 的服务单位。对于具有多个命令（ <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=oneshot</code> ）的单位，所有命令将再次运行。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"> For <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=oneshot</code>, <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Restart=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">always</code>
      and <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Restart=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-success</code> are <span class="emphasis" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><em data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">not</em></span> allowed.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=oneshot</code> ， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Restart=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">always</code> 和 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Restart=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">on-success</code> 是不允许的。</font></font></font></p></div></div><br class="example-break" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><div class="example" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><a name="id-1.10.4" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a><p class="title" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><b data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Example&nbsp;4.&nbsp;Stoppable oneshot service<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 4. 可停止的一次性服务</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Similarly to the oneshot services, there are sometimes
      units that need to execute a program to set up something and
      then execute another to shut it down, but no process remains
      active while they are considered "started". Network
      configuration can sometimes fall into this category. Another use
      case is if a oneshot service shall not be executed each time
      when they are pulled in as a dependency, but only the first
      time.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">与一次性服务类似，有时候有些单元需要执行一个程序来设置某些内容，然后执行另一个程序来关闭它，但在它们被认为是“已启动”时没有任何进程保持活动状态。 网络配置有时可能属于这一类。 另一个用例是，如果一次性服务不应在作为依赖项引入时每次都执行，而只在第一次执行。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">For this, systemd knows the setting
      <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RemainAfterExit=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">yes</code>, which
      causes systemd to consider the unit to be active if the start
      action exited successfully. This directive can be used with all
      types, but is most useful with
      <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">oneshot</code> and
      <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code>. With
      <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">oneshot</code>, systemd waits
      until the start action has completed before it considers the
      unit to be active, so dependencies start only after the start
      action has succeeded. With
      <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code>, dependencies
      will start immediately after the start action has been
      dispatched. The following unit provides an example for a simple
      static firewall.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于此，systemd 知道设置 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RemainAfterExit=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">yes</code> ，这会导致 systemd 认为单元在启动操作成功退出后处于活动状态。此指令可用于所有类型，但在 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">oneshot</code> 和 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code> 中最有用。使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">oneshot</code> ，systemd 将等待启动操作完成后才认为单元处于活动状态，因此依赖项仅在启动操作成功后才启动。使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code> ，依赖项将在启动操作被分派后立即启动。以下单元提供了一个简单静态防火墙的示例。</font></font></font></p><pre class="programlisting">[Unit]
Description=Simple firewall

[Service]
Type=oneshot
RemainAfterExit=yes
ExecStart=/usr/local/sbin/simple-firewall-start
ExecStop=/usr/local/sbin/simple-firewall-stop

[Install]
WantedBy=multi-user.target</pre><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Since the unit is considered to be running after the start
      action has exited, invoking <span class="command" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><strong data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemctl start</strong></span>
      on that unit again will cause no action to be taken.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">由于在启动操作退出后单元被视为正在运行，再次在该单元上调用 systemctl start 将不会执行任何操作。</font></font></font></p></div></div><br class="example-break" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><div class="example" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><a name="id-1.10.5" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a><p class="title" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><b data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Example&nbsp;5.&nbsp;Traditional forking services<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 5. 传统的分叉服务</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Many traditional daemons/services background (i.e. fork,
      daemonize) themselves when starting. Set
      <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">forking</code> in the
      service's unit file to support this mode of operation. systemd
      will consider the service to be in the process of initialization
      while the original program is still running. Once it exits
      successfully and at least a process remains (and
      <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RemainAfterExit=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">no</code>), the
      service is considered started.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">许多传统的守护程序/服务在启动时会将自己后台化（即 fork，daemonize）。在服务的单元文件中设置 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">forking</code> 以支持这种操作模式。systemd 在原始程序仍在运行时将考虑服务处于初始化过程中。一旦它成功退出并且至少还有一个进程存在（以及 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">RemainAfterExit=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">no</code> ），该服务将被视为已启动。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Often, a traditional daemon only consists of one process.
      Therefore, if only one process is left after the original
      process terminates, systemd will consider that process the main
      process of the service. In that case, the
      <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$MAINPID</code> variable will be available in
      <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecReload=</code>, <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code>,
      etc.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通常，传统的守护程序只包含一个进程。因此，如果在原始进程终止后只剩下一个进程，systemd 将认为该进程是服务的主进程。在这种情况下， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$MAINPID</code> 变量将在 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecReload=</code> ， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">ExecStop=</code> 等中可用。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">In case more than one process remains, systemd will be
      unable to determine the main process, so it will not assume
      there is one. In that case, <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$MAINPID</code> will not
      expand to anything. However, if the process decides to write a
      traditional PID file, systemd will be able to read the main PID
      from there. Please set <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">PIDFile=</code> accordingly.
      Note that the daemon should write that file before finishing
      with its initialization. Otherwise, systemd might try to read the
      file before it exists.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果剩余的进程多于一个，systemd 将无法确定主进程，因此不会假设有一个。在这种情况下， <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">$MAINPID</code> 将不会扩展为任何内容。但是，如果进程决定编写传统的 PID 文件，systemd 将能够从中读取主 PID。请相应地设置 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">PIDFile=</code> 。请注意，守护程序应在初始化完成之前编写该文件。否则，systemd 可能会在文件存在之前尝试读取该文件。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">The following example shows a simple daemon that forks and
      just starts one process in the background:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">以下示例显示了一个简单的守护程序，它分叉并在后台启动一个进程：</font></font></font></p><pre class="programlisting">[Unit]
Description=Some simple daemon

[Service]
Type=forking
ExecStart=/usr/sbin/my-simple-daemon -d

[Install]
WantedBy=multi-user.target</pre><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Please see
      <a href="systemd.kill.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.kill</span>(5)</span></a>
      for details on how you can influence the way systemd terminates
      the service.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有关您如何影响 systemd 终止服务的方式的详细信息，请参阅 systemd.kill(5)。</font></font></font></p></div></div><br class="example-break" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><div class="example" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><a name="id-1.10.6" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a><p class="title" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><b data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Example&nbsp;6.&nbsp;DBus services<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 6. DBus 服务</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">For services that acquire a name on the DBus system bus,
      use <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dbus</code> and set
      <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">BusName=</code> accordingly. The service should not
      fork (daemonize). systemd will consider the service to be
      initialized once the name has been acquired on the system bus.
      The following example shows a typical DBus service:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于在 DBus 系统总线上获取名称的服务，请使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">dbus</code> 并相应地设置 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">BusName=</code> 。 服务不应分叉（daemonize）。 一旦在系统总线上获取了名称，systemd 将认为服务已初始化。 以下示例显示了典型的 DBus 服务：</font></font></font></p><pre class="programlisting">[Unit]
Description=Simple DBus service

[Service]
Type=dbus
BusName=org.example.simple-dbus-service
ExecStart=/usr/sbin/simple-dbus-service

[Install]
WantedBy=multi-user.target</pre><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">For <span class="emphasis" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><em data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">bus-activatable</em></span> services, do not
      include a [Install] section in the systemd
      service file, but use the <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SystemdService=</code>
      option in the corresponding DBus service file, for example
      (<code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/usr/share/dbus-1/system-services/org.example.simple-dbus-service.service</code>):<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于总线激活服务，在 systemd 服务文件中不要包含 [Install] 部分，而是在相应的 DBus 服务文件中使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">SystemdService=</code> 选项，例如（ <code class="filename" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">/usr/share/dbus-1/system-services/org.example.simple-dbus-service.service</code> ）：</font></font></font></p><pre class="programlisting">[D-BUS Service]
Name=org.example.simple-dbus-service
Exec=/usr/sbin/simple-dbus-service
User=root
SystemdService=simple-dbus-service.service</pre><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Please see
      <a href="systemd.kill.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.kill</span>(5)</span></a>
      for details on how you can influence the way systemd terminates
      the service.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有关您如何影响 systemd 终止服务的方式的详细信息，请参阅 systemd.kill(5)。</font></font></font></p></div></div><br class="example-break" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><div class="example" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><a name="id-1.10.7" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a><p class="title" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><b data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Example&nbsp;7.&nbsp;Services that notify systemd about their initialization<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 7. 通知 systemd 关于它们初始化的服务</font></font></font></b></p><div class="example-contents" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1"><code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code> services are really easy to write, but have the
      major disadvantage of systemd not being able to tell when initialization of the given service is
      complete. For this reason, systemd supports a simple notification protocol that allows daemons to make
      systemd aware that they are done initializing. Use <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify</code> or
      <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code><code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify-reload</code> for this. A typical service file for such a
      daemon would look like this:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">simple</code> 服务编写起来非常简单，但主要缺点是 systemd 无法知道给定服务的初始化何时完成。因此，systemd 支持一种简单的通知协议，允许守护进程让 systemd 知道它们已经初始化完成。为此，请使用 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify</code> 或 <code class="varname" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">Type=</code> <code class="option" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">notify-reload</code> 。这样的守护进程的典型服务文件如下所示：</font></font></font></p><pre class="programlisting">[Unit]
Description=Simple notifying service

[Service]
Type=notify
ExecStart=/usr/sbin/simple-notifying-service

[Install]
WantedBy=multi-user.target</pre><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Note that the daemon has to support systemd's notification
      protocol, else systemd will think the service has not started yet
      and kill it after a timeout. For an example of how to update
      daemons to support this protocol transparently, take a look at
      <a href="sd_notify.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">sd_notify</span>(3)</span></a>.
      systemd will consider the unit to be in the 'starting' state
      until a readiness notification has arrived.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，守护进程必须支持 systemd 的通知协议，否则 systemd 将认为服务尚未启动，并在超时后将其终止。要了解如何更新守护进程以透明地支持此协议的示例，请参阅 sd_notify(3)。直到就绪通知到达之前，systemd 将认为该单元处于“启动”状态。</font></font></font></p><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">Please see
      <a href="systemd.kill.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.kill</span>(5)</span></a>
      for details on how you can influence the way systemd terminates
      the service.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请参阅 systemd.kill(5)以了解您如何影响 systemd 终止服务的方式的详细信息。</font></font></font></p></div></div><br class="example-break" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></div><div class="refsect1" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><a name="id-1.11" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"></a><h2 id="See Also" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">See Also<a class="headerlink" title="Permalink to this headline" href="#See%20Also" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">¶</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">参见 ¶</font></font></font></h2><p data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043" data-immersive-translate-paragraph="1">
        <a href="systemd.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd</span>(1)</span></a>,
        <a href="systemctl.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemctl</span>(1)</span></a>,
        <a href="systemd-system.conf.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd-system.conf</span>(5)</span></a>,
        <a href="systemd.unit.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.unit</span>(5)</span></a>,
        <a href="systemd.exec.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.exec</span>(5)</span></a>,
        <a href="systemd.resource-control.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.resource-control</span>(5)</span></a>,
        <a href="systemd.kill.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.kill</span>(5)</span></a>,
        <a href="systemd.directives.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd.directives</span>(7)</span></a>,
        <a href="systemd-run.html#" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="citerefentry" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043"><span class="refentrytitle" data-immersive-translate-walked="7cd0ddb9-3ecd-4591-87d9-bca60e133043">systemd-run</span>(1)</span></a>
      </p></div></div>
</body></html>