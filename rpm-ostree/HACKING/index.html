<html><head><style data-id="immersive-translate-default-injected-css">:root {
  --immersive-translate-theme-underline-borderColor: #72ece9;
  --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
  --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
  --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
  --immersive-translate-theme-highlight-backgroundColor: #ffff00;
  --immersive-translate-theme-dashed-borderColor: #59c1bd;
  --immersive-translate-theme-blockquote-borderColor: #cc3355;
  --immersive-translate-theme-thinDashed-borderColor: #ff374f;
  --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
  --immersive-translate-theme-dashedBorder-borderRadius: 0;
  --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
  --immersive-translate-theme-solidBorder-borderRadius: 0;
  --immersive-translate-theme-dotted-borderColor: #94a3b8;
  --immersive-translate-theme-wavy-borderColor: #72ece9;
  --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
  --immersive-translate-theme-grey-textColor: #2f4f4f;
  --immersive-translate-theme-marker-backgroundColor: #fbda41;
  --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
  --immersive-translate-theme-marker2-backgroundColor: #ffff00;
  --immersive-translate-theme-opacity-opacity: 10;
}

.immersive-translate-target-translation-pre-whitespace {
  white-space: pre-wrap !important;
}

.immersive-translate-pdf-target-container {
  position: absolute;
  background-color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
    sans-serif;
  top: 0;
  width: 600px;
  height: 100%;
  z-index: 2;
  line-height: 1.3;
  font-size: 16px;
}
.immersive-translate-target-wrapper[dir='rtl'] {
  text-align: right;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
  color: rgb(0, 0, 0);
  white-space: normal;
  position: absolute;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
  color: inherit;
  white-space: inherit;
  position: unset;
}

.immersive-translate-state-dual>br {
  display: none;
}

.immersive-translate-target-translation-block-wrapper {
  margin: 8px 0 !important;
  display: inline-block;
}

.immersive-translate-target-translation-pdf-block-wrapper {
  margin: 0 !important;
  display: block;
}

.immersive-translate-target-translation-theme-grey-inner {
  color: var(--immersive-translate-theme-grey-textColor);
}


.immersive-translate-target-translation-theme-underline-inner {
  border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
}

.immersive-translate-target-translation-theme-nativeUnderline-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
}

.immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-theme-nativeDashed-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
  text-decoration-style: dashed !important;
}

.immersive-translate-target-translation-theme-thinDashed-inner {
  border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
}

.immersive-translate-target-translation-theme-dotted-inner {
  background-image: linear-gradient(to right,
      var(--immersive-translate-theme-dotted-borderColor) 30%,
      rgba(255, 255, 255, 0) 0%);
  background-position: bottom;
  background-size: 5px 1px;
  background-repeat: repeat-x;
  padding-bottom: 3px;
}

.immersive-translate-target-translation-theme-nativeDotted-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
  text-decoration-style: dotted !important;
}

.immersive-translate-target-translation-theme-wavy-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
  text-decoration-style: wavy !important;
}

.immersive-translate-target-translation-theme-dashed-inner {
  background: linear-gradient(to right,
      var(--immersive-translate-theme-dashed-borderColor) 0%,
      var(--immersive-translate-theme-dashed-borderColor) 50%,
      transparent 50%,
      transparent 100%) repeat-x left bottom;
  background-size: 8px 2px;
  padding-bottom: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
  content: "";
  display: block;
  max-width: 80px;
  width: 10%;
  border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  padding-top: 8px;
}

.immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
  content: "";
  border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  max-height: 16px;
  height: 16px;
  padding-left: 8px;
}

.immersive-translate-target-translation-theme-highlight-inner {
  background: var(--immersive-translate-theme-highlight-backgroundColor);
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-block-wrapper-theme-marker {
  line-height: 1.5em;
}

.immersive-translate-target-translation-theme-marker2-inner {
  font-weight: bold;
  text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
    16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
    2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
    -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
}

.immersive-translate-target-translation-theme-marker-inner {
  /* TODO: add more texture */
  background: linear-gradient(to right,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-theme-weakening {
  opacity: 0.618 !important;
}

.immersive-translate-target-translation-theme-italic {
  font-style: italic !important;
}

.immersive-translate-target-translation-theme-bold {
  font-weight: bold !important;
}

.immersive-translate-target-translation-block-wrapper-theme-paper {
  margin: 8px 0;
  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
  padding: 16px 32px;
  display: block;
}

.immersive-translate-target-translation-block-wrapper-theme-blockquote {
  border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
  padding-left: 12px !important;
  margin-top: 4px;
  margin-bottom: 4px;
  padding-top: 4px;
  padding-bottom: 4px;
  display: block;
}

.immersive-translate-target-translation-theme-mask-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
  filter: none !important;
}

[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}


/* opacity theme start */

.immersive-translate-target-translation-theme-opacity-inner {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: none !important;
}


.immersive-translate-target-translation-theme-mask-inner:hover {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
  filter: none !important;
}


[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
  filter: none !important;
}

/* opacity theme end */

/* vertical css , please remain it in the last one. */
.immersive-translate-target-translation-vertical-block-wrapper {
  margin: 0px 8px !important;
}

.immersive-translate-text {
  font-size: 15px !important;
}

.immersive-translate-error-toast {
  position: fixed;
  top: 5%;
  z-index: 99999999;
  left: 0;
  right: 0;
  margin: auto;
  max-width: 300px;
  padding: 16px;
  border-radius: 12px;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}

@media all and (min-width: 750px) {
  .immersive-translate-error-toast {
    max-width: 400px;
  }
}


.immersive-translate-clickable-button {
  cursor: pointer;
}

.immersive-translate-help-button {
  cursor: pointer;
}

.immersive-translate-loading-text:before {
  content: "...";
}


/* dark mode for loading */

@media only screen and (prefers-color-scheme: dark) {
  .immersive-translate-loading {
    border: 2px rgba(255, 255, 255, 0.25) solid !important;
    border-top: 2px rgba(255, 255, 255, 1) solid !important;
  }
}

.immersive-translate-error-wrapper {
  position: relative;
  display: inline-flex;
  padding: 6px;
  margin: 0 12px;
  white-space: nowrap;
  font-size: 0.9em;
}
[lang="zh-CN"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}
[lang="zh-TW"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}


.immersive-translate-tooltip {
  position: relative;
  display: inline-flex;
  /* little indicater to indicate it's hoverable */
}

.immersive-translate-tooltip-content {
  /* here's the magic */
  position: absolute;
  z-index: 100000000000;

  left: 50%;
  bottom: 0;
  transform: translate(-50%, 110%);
  line-height: 1;
  /* and add a small left margin */

  /* basic styles */
  width: max-content;
  max-width: 250px;
  word-wrap: break-word;
  white-space: pre-line;
  padding: 10px;
  border-radius: 10px;
  background: #000C;
  color: #fff;
  text-align: center;
  font-size: 14px;
  display: none;
  /* hide by default */
}

.immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip-content-table {
  left: unset !important;
  bottom: unset !important;
  transform: translate(-10%, 50%) !important;
}


.immersive-translate-tooltip:hover:before {
  display: block;
}



.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}
</style><style data-id="immersive-translate-user-custom-style">:root {

.immersive-translate-target-inner { font-family: inherit; }
}
</style><style data-id="immersive-translate-dynamic-injected-css">.immersive-translate-target-wrapper[dir='rtl'] {text-align: right;}
.immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {display:block;}
.immersive-translate-target-wrapper {word-break: break-word;}
</style></head><body data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="stylesheet" href="../assets/css/just-the-docs-default.css"><link rel="stylesheet" href="../assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"><style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(1)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(8) > ul > li:nth-child(1) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(8) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(8) > ul > li:nth-child(1) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(8) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(8) > ul.nav-list > li.nav-list-item:nth-child(1) > ul.nav-list { display: block; }</style><script src="../assets/js/vendor/lunr.min.js"></script> <script src="../assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="../favicon.ico" type="image/x-icon"><title>Hacking on rpm-ostree | rpm-ostree</title><meta name="generator" content="Jekyll v3.9.5"><meta property="og:title" content="Hacking on rpm-ostree"><meta property="og:locale" content="en_US"><meta name="description" content="rpm-ostree documentation"><meta property="og:description" content="rpm-ostree documentation"><link rel="canonical" href="index.html"><meta property="og:url" content="https://coreos.github.io/rpm-ostree/HACKING/"><meta property="og:site_name" content="rpm-ostree"><meta property="og:type" content="website"><meta name="twitter:card" content="summary"><meta property="twitter:title" content="Hacking on rpm-ostree"> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"rpm-ostree documentation","headline":"Hacking on rpm-ostree","url":"https://coreos.github.io/rpm-ostree/HACKING/"}</script> <a class="skip-to-main" href="#main-content" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Skip to main content<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">跳转至主要内容</font></font></font></a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-copy" viewBox="0 0 16 16"><title>Copy</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"></path><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"></path> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"><title>Copied</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"><path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"></path><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"></path> </svg> </symbol> </svg><div class="side-bar" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><div class="site-header" role="banner" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"> <a href="../index.html" class="site-title lh-tight" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"> rpm-ostree </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button></div><nav aria-label="Main" id="site-nav" class="site-nav" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><ul class="nav-list" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><li class="nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="../index.html" class="nav-list-link" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">A true hybrid image/package system<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一个真正的混合镜像/软件包系统</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="../background/index.html" class="nav-list-link" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Background<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">背景</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="../administrator-handbook/index.html" class="nav-list-link" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Client administration<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">客户端管理</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="../countme/index.html" class="nav-list-link" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">DNF Count Me support<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">DNF 计数我支持</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><button class="nav-list-expander btn-reset" aria-label="toggle items in Composing images category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="../compose/index.html" class="nav-list-link" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Composing images<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">撰写图像</font></font></font></a><ul class="nav-list" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><li class="nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="../compose-server/index.html" class="nav-list-link" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Compose server<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">组合服务器</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="../treefile/index.html" class="nav-list-link" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Treefile reference<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Treefile 参考</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="../extensions/index.html" class="nav-list-link" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Extensions<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">扩展</font></font></font></a></li></ul></li><li class="nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="../container/index.html" class="nav-list-link" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">ostree native containers<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">ostree 本地容器</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><button class="nav-list-expander btn-reset" aria-label="toggle items in Architecture category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="../architecture/index.html" class="nav-list-link" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Architecture<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">架构</font></font></font></a><ul class="nav-list" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><li class="nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="../architecture-core/index.html" class="nav-list-link" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">RPM packages, ostree commits<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">RPM 软件包，ostree 提交</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="../architecture-daemon/index.html" class="nav-list-link" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Daemon model<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">守护程序模型</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="../apply-live/index.html" class="nav-list-link" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Architecture of apply-live<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">应用实时架构</font></font></font></a></li></ul></li><li class="nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><button class="nav-list-expander btn-reset" aria-label="toggle items in Contributing category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="../CONTRIBUTING/index.html" class="nav-list-link" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Contributing<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">贡献</font></font></font></a><ul class="nav-list" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><li class="nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="index.html" class="nav-list-link" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Hacking on rpm-ostree<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 rpm-ostree 上进行黑客攻击</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="../repo_structure/index.html" class="nav-list-link" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Repository structure<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">仓库结构</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="../RELEASE/index.html" class="nav-list-link" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Releasing rpm-ostree<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">发布 rpm-ostree</font></font></font></a></li></ul></li><li class="nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><button class="nav-list-expander btn-reset" aria-label="toggle items in Experimental features category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="../experimental/index.html" class="nav-list-link" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Experimental features<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">实验性功能</font></font></font></a><ul class="nav-list" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><li class="nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="../cliwrap/index.html" class="nav-list-link" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Wrapping other CLI entrypoints<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">封装其他 CLI 入口点</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="../ex-rebuild/index.html" class="nav-list-link" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Declarative system changes<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">声明性系统更改</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="../ex-replace/index.html" class="nav-list-link" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">override replace --experimental<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">覆盖替换 --实验性</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="../layering/index.html" class="nav-list-link" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Applying a new package using CoreOS layering<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 CoreOS 分层应用新包</font></font></font></a></li></ul></li></ul></nav><footer class="site-footer" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"> This site uses <a href="https://github.com/just-the-docs/just-the-docs" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">Just the Docs</a>, a documentation theme for Jekyll.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">本站使用 Just the Docs，这是一个适用于 Jekyll 的文档主题。</font></font></font></footer></div><div class="main" id="top" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><div id="main-header" class="main-header" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><div class="search" role="search" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><div class="search-input-wrap" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search rpm-ostree" aria-label="Search rpm-ostree" autocomplete="off" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"> <label for="search-input" class="search-label" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"></div></div><nav aria-label="Auxiliary" class="aux-nav" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><ul class="aux-nav-list" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><li class="aux-nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"> <a href="https://github.com/coreos/rpm-ostree" class="site-button" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"> rpm-ostree on GitHub <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 GitHub 上的 rpm-ostree</font></font></font></a></li></ul></nav></div><div class="main-content-wrap" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><nav aria-label="Breadcrumb" class="breadcrumb-nav" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><ol class="breadcrumb-nav-list" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><li class="breadcrumb-nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="../CONTRIBUTING/index.html" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Contributing<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">贡献</font></font></font></a></li><li class="breadcrumb-nav-list-item" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><span data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Hacking on rpm-ostree<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 rpm-ostree 上进行黑客攻击</font></font></font></span></li></ol></nav><div id="main-content" class="main-content" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><main data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><h1 class="no_toc" id="hacking-on-rpm-ostree" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"> <a href="#hacking-on-rpm-ostree" class="anchor-heading" aria-labelledby="hacking-on-rpm-ostree" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hacking on rpm-ostree<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 rpm-ostree 上进行黑客攻击</font></font></font></h1><ol id="markdown-toc" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="#setting-up-a-development-environment" id="markdown-toc-setting-up-a-development-environment" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Setting up a development environment<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">设置开发环境</font></font></font></a><ol data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="#via-toolbxinstalling-natively" id="markdown-toc-via-toolbxinstalling-natively" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Via toolbx/Installing natively<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过 toolbx/本地安装</font></font></font></a></li><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="#using-the-fcos-buildroot-container" id="markdown-toc-using-the-fcos-buildroot-container" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Using the <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">fcos-buildroot</code> container<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">fcos-buildroot</code> 容器</font></font></font></a></li></ol></li><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="#building-and-testing" id="markdown-toc-building-and-testing" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Building and testing<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">构建和测试</font></font></font></a><ol data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="#baseline-build" id="markdown-toc-baseline-build" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Baseline build<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">基线构建</font></font></font></a></li><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="#unit-tests" id="markdown-toc-unit-tests" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Unit tests<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">单元测试</font></font></font></a></li><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="#virtualized-integration-testing" id="markdown-toc-virtualized-integration-testing" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Virtualized integration testing<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">虚拟化集成测试</font></font></font></a><ol data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="#iteration-on-kola-external-tests" id="markdown-toc-iteration-on-kola-external-tests" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Iteration on kola external tests<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 kola 外部测试上的迭代</font></font></font></a></li><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="#vmcheck" id="markdown-toc-vmcheck" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">vmcheck<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">虚拟机检查</font></font></font></a></li></ol></li></ol></li><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="#testing-with-a-custom-libdnf" id="markdown-toc-testing-with-a-custom-libdnf" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Testing with a custom libdnf<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用自定义 libdnf 进行测试</font></font></font></a></li><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="#testing-with-a-custom-ostree" id="markdown-toc-testing-with-a-custom-ostree" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Testing with a custom ostree<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用自定义 ostree 进行测试</font></font></font></a></li><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="#testing-with-a-custom-rust-crate-example-ostree-rs-ext" id="markdown-toc-testing-with-a-custom-rust-crate-example-ostree-rs-ext" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Testing with a custom Rust crate (example: ostree-rs-ext)<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用自定义的 Rust crate 进行测试 (示例: ostree-rs-ext)</font></font></font></a></li><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="#using-gdb-with-the-rpm-ostree-daemon" id="markdown-toc-using-gdb-with-the-rpm-ostree-daemon" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Using GDB with the rpm-ostree daemon<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 GDB 与 rpm-ostree 守护程序</font></font></font></a><ol data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="#server-side-composes" id="markdown-toc-server-side-composes" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Server-side (composes)<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">服务器端 (composes)</font></font></font></a></li><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="#client-side" id="markdown-toc-client-side" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Client-side<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">客户端</font></font></font></a><ol data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="#attaching-to-the-daemon" id="markdown-toc-attaching-to-the-daemon" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Attaching to the daemon<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">连接到守护程序</font></font></font></a></li><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><a href="#attaching-to-the-cli" id="markdown-toc-attaching-to-the-cli" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Attaching to the CLI<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">连接到 CLI</font></font></font></a></li></ol></li></ol></li></ol><h2 id="setting-up-a-development-environment" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"> <a href="#setting-up-a-development-environment" class="anchor-heading" aria-labelledby="setting-up-a-development-environment" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting up a development environment<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">设置开发环境</font></font></font></h2><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">The majority of developers on rpm-ostree build and test it from a <a href="https://github.com/containers/toolbox" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">toolbox container</a>, separate from the host system. The instructions below may <em data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">also</em> work when run in a traditional login on a virtual machine, but are less frequently tested.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">大多数 rpm-ostree 的开发人员会在与主机系统分开的工具箱容器中构建和测试它。下面的说明也可能在虚拟机上的传统登录中运行时有效，但测试频率较低。</font></font></font></p><h3 id="via-toolbxinstalling-natively" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"> <a href="#via-toolbxinstalling-natively" class="anchor-heading" aria-labelledby="via-toolbxinstalling-natively" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Via toolbx/Installing natively<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过 toolbx/本地安装</font></font></font></h3><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">When developing either in a toolbx container or natively on your system, you must install all the required dependencies. In the <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">ci/</code> subfolder, there are scripts that will do this for you:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在工具箱容器中或本地开发时，您必须安装所有必需的依赖项。在 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">ci/</code> 子文件夹中，有脚本可以为您执行此操作：</font></font></font></p><ul data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">To install the build dependencies</strong>: <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">./ci/installdeps.sh</code> and <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">ci/install-cxx.sh</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要安装构建依赖项： <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">./ci/installdeps.sh</code> 和 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">ci/install-cxx.sh</code> </font></font></font><ul data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">Note</strong>: This command must be rerun after the dependencies in <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">Cargo.lock</code> change. This will eventually be fixed.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意：此命令在 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">Cargo.lock</code> 中的依赖项更改后必须重新运行。这将最终得到修复。</font></font></font></li></ul></li><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">To install the test dependencies</strong>:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">安装测试依赖项：</font></font></font><ul data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">For <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">make check</code>: <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">./ci/install-test-deps.sh</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">make check</code> ： <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">./ci/install-test-deps.sh</code> </font></font></font></li><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">For <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">make vmcheck</code>: Follow the instructions for <a href="https://coreos.github.io/coreos-assembler/devel/#installing-cosa-inside-an-existing-container#installing-cosa-inside-an-existing-container" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">installing cosa inside an existing container</a> from the <a href="https://github.com/coreos/coreos-assembler" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">cosa GitHub repository</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">make vmcheck</code> ：按照 cosa GitHub 存储库中的说明在现有容器中安装 cosa</font></font></font></li></ul></li></ul><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Today rpm-ostree uses <a href="https://cxx.rs/" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">cxx.rs</a>, and as of https://github.com/coreos/rpm-ostree/pull/3864 we commit the generated code to git. If you want to regenerate it (particularly when changing it), use <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">ci/install-cxx.sh</code>. Most importantly, it currently must be reinstalled after you run <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">make clean</code> on the project.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">今天 rpm-ostree 使用 cxx.rs，截至 https://github.com/coreos/rpm-ostree/pull/3864，我们将生成的代码提交到 git。如果您想重新生成它（特别是在更改它时），请使用 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">ci/install-cxx.sh</code> 。最重要的是，在运行 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">make clean</code> 项目后，目前必须重新安装它。</font></font></font></p><h3 id="using-the-fcos-buildroot-container" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"> <a href="#using-the-fcos-buildroot-container" class="anchor-heading" aria-labelledby="using-the-fcos-buildroot-container" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using the <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">fcos-buildroot</code> container<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">fcos-buildroot</code> 容器</font></font></font></h3><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">The <a href="https://quay.io/repository/coreos-assembler/fcos-buildroot" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">fcos-buildroot</code> container</a> has all the dependencies needed for building and testing included. As a consequence, it is comparatively large (~ 2.5 GB). Since this is the same container used by the CI system, this is useful for reproducing CI failures.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">fcos-buildroot</code> 容器包含构建和测试所需的所有依赖项。因此，它相对较大（~ 2.5 GB）。由于这是 CI 系统使用的相同容器，因此对于重现 CI 失败很有用。</font></font></font></p><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">You can either work from inside the container in an interactive manner:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您可以以交互方式从容器内部工作：</font></font></font></p><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><div class="highlight" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><pre class="highlight"><code># IMPORTANT: Run this command from the projects root directory!
$ podman run --rm -it -v "$PWD:$PWD:z" -w "$PWD" \
    quay.io/coreos-assembler/fcos-buildroot:testing-devel
</code></pre></div></div><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Or you use the container in an ephemeral fashion with an alias like this:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">或者您可以像这样使用容器以临时方式带有别名：</font></font></font></p><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><div class="highlight" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><pre class="highlight"><code># IMPORTANT: Run this command from the projects root directory!
$ alias buildroot="podman run --rm -it -v \"$PWD:$PWD:z\" -w \"$PWD\" \
    quay.io/coreos-assembler/fcos-buildroot:testing-devel"
# These commands run in the container now
$ buildroot make ...
</code></pre></div></div><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">The above commands will mount your current working directory into the container for your build artifacts etc. to persist.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">上述命令将您当前的工作目录挂载到容器中，以便持久保存构建产物等。</font></font></font></p><h2 id="building-and-testing" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"> <a href="#building-and-testing" class="anchor-heading" aria-labelledby="building-and-testing" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Building and testing<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">构建和测试</font></font></font></h2><h3 id="baseline-build" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"> <a href="#baseline-build" class="anchor-heading" aria-labelledby="baseline-build" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Baseline build<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">基线构建</font></font></font></h3><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">rpm-ostree uses autotools to build both our C/C++ side as well as to invoke <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">cargo</code> to build the Rust code. After you’ve <a href="https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/cloning-a-repository" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">cloned the repository</a>:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">rpm-ostree 使用 autotools 来构建我们的 C/C++ 代码，同时也用来调用 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">cargo</code> 来构建 Rust 代码。在克隆了仓库之后：</font></font></font></p><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><div class="highlight" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><pre class="highlight"><code>$ git submodule update --init
$ ./autogen.sh --prefix=/usr --libdir=/usr/lib64 --sysconfdir=/etc
$ make
</code></pre></div></div><h3 id="unit-tests" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"> <a href="#unit-tests" class="anchor-heading" aria-labelledby="unit-tests" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Unit tests<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">单元测试</font></font></font></h3><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><div class="highlight" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><pre class="highlight"><code>$ make check
</code></pre></div></div><h3 id="virtualized-integration-testing" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"> <a href="#virtualized-integration-testing" class="anchor-heading" aria-labelledby="virtualized-integration-testing" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Virtualized integration testing<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">虚拟集成测试</font></font></font></h3><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">The unit tests today don’t cover much; rpm-ostree is very oriented to run as a privileged systemd unit managing a host system.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">今天的单元测试覆盖范围不大；rpm-ostree 非常倾向于作为特权 systemd 单元在管理主机系统时运行。</font></font></font></p><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">rpm-ostree has some tests that use the <a href="https://coreos.github.io/coreos-assembler/kola/external-tests/" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">coreos-assembler/kola framework</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">rpm-ostree 有一些使用 coreos-assembler/kola 框架的测试。</font></font></font></p><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">You will want to <a href="https://coreos.github.io/coreos-assembler/working/#using-overrides#using-overrides" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">build a custom image</a>, then run <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">make install</code> in the <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">${topsrcdir}/tests/kolainst/</code> directory, and finally <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">kola run --qemu-image path/to/custom-rpm-ostree-qemu.qcow2 'ext.rpm-ostree.*'</code>. See the <a href="https://coreos.github.io/coreos-assembler/kola/external-tests/#using-kola-run-with-externally-defined-tests#using-kola-run-with-externally-defined-tests" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">kola external tests documentation</a> for more information and also how to filter tests.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您需要构建一个自定义镜像，然后在 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">${topsrcdir}/tests/kolainst/</code> 目录中运行 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">make install</code> ，最后运行 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">kola run --qemu-image path/to/custom-rpm-ostree-qemu.qcow2 'ext.rpm-ostree.*'</code> 。查看 kola 外部测试文档以获取更多信息，以及如何过滤测试。</font></font></font></p><h4 id="iteration-on-kola-external-tests" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"> <a href="#iteration-on-kola-external-tests" class="anchor-heading" aria-labelledby="iteration-on-kola-external-tests" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Iteration on kola external tests<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">kola 外部测试的迭代。</font></font></font></h4><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><div class="highlight" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><pre class="highlight"><code>make                                 # To build
cosa build-fast                      # Generate a local FCOS VM
sudo make -C tests/kolainst install  # Run this only when you change the test suite
kola run ext.rpm-ostree.destructive.container-image  # Or any other test you want
</code></pre></div></div><h4 id="vmcheck" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"> <a href="#vmcheck" class="anchor-heading" aria-labelledby="vmcheck" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> vmcheck<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">虚拟机检查</font></font></font></h4><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">There’s also a <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">vmcheck</code> test suite, which predates Fedora CoreOS, coreos-assembler and the external test suite integration.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">还有一个 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">vmcheck</code> 测试套件，早于 Fedora CoreOS、coreos-assembler 和外部测试套件集成。</font></font></font></p><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">One approach for (somewhat) fast iteration is <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">cosa build-fast</code>, then run e.g. <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">./tests/vmcheck.sh</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一种（有点）快速迭代的方法是 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">cosa build-fast</code> ，然后运行例如 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">./tests/vmcheck.sh</code> 。</font></font></font></p><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">To filter tests, use the <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">TESTS=</code> environment variable. For example, to run only <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">tests/vmcheck/test-misc-2.sh</code>, you can do:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要过滤测试，请使用 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">TESTS=</code> 环境变量。例如，要仅运行 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">tests/vmcheck/test-misc-2.sh</code> ，您可以执行以下操作：</font></font></font></p><div class="language-sh highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><div class="highlight" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><pre class="highlight"><code><span class="nv">TESTS</span><span class="o">=</span><span class="s1">'misc-2'</span> ./tests/vmcheck.sh
</code></pre></div></div><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">For development, there is also a <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">make vmsync</code> which copies the built rpm-ostree into an unlocked VM. To use this, you must have an <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">ssh-config</code> file with a host defined in it called <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">vmcheck</code>. You can provision the VM however you want; libvirt directly, vagrant, a remote OpenStack/EC2 instance, etc. For QEMU, we have a helper script at <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">tests/vm.sh</code> which uses kola to spawn a CoreOS QEMU image. You can use it like this:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于开发，还有一个 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">make vmsync</code> ，它将构建的 rpm-ostree 复制到一个未锁定的虚拟机中。要使用此功能，您必须拥有一个包含主机定义为 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">vmcheck</code> 的 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">ssh-config</code> 文件。您可以按照自己的喜好配置虚拟机；直接使用 libvirt，vagrant，远程 OpenStack/EC2 实例等。对于 QEMU，我们有一个辅助脚本位于 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">tests/vm.sh</code> ，它使用 kola 来生成 CoreOS QEMU 镜像。您可以像这样使用它：</font></font></font></p><div class="language-sh highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><div class="highlight" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><pre class="highlight"><code><span class="nb">export </span><span class="nv">COSA_DIR</span><span class="o">=</span>/path/to/cosa/workdir
tests/vm.sh spawn
make vmsync
</code></pre></div></div><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Note that by default, these commands will retrieve the latest version of ostree from the build environment and include those binaries when syncing to the VM. So make sure to have the latest ostree installed or built. This allows you to not have to worry about using libostree APIs that are not yet released.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，默认情况下，这些命令将从构建环境中检索 ostree 的最新版本，并在同步到虚拟机时包含这些二进制文件。因此，请确保安装或构建最新的 ostree。这样可以避免担心使用尚未发布的 libostree API。</font></font></font></p><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">For more details on how tests are structured, see <a href="https://github.com/coreos/rpm-ostree/blob/main/tests/README.md" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">tests/README.md</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有关测试结构的更多详细信息，请参阅 tests/README.md。</font></font></font></p><h2 id="testing-with-a-custom-libdnf" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"> <a href="#testing-with-a-custom-libdnf" class="anchor-heading" aria-labelledby="testing-with-a-custom-libdnf" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Testing with a custom libdnf<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用自定义 libdnf 进行测试</font></font></font></h2><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">rpm-ostree bundles libdnf since commit https://github.com/coreos/rpm-ostree/commit/125c482b1d16ce8376378f220fc2f93a5b157bc1 the rationale is:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">自从提交 https://github.com/coreos/rpm-ostree/commit/125c482b1d16ce8376378f220fc2f93a5b157bc1 以来，rpm-ostree 捆绑了 libdnf，其原因是：</font></font></font></p><ul data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">libdnf broke ABI several times silently in the past<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">libdnf 在过去多次悄悄地破坏了 ABI</font></font></font></li><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Today, dnf does not actually <em data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">use</em> libdnf much, which means for the most part any libdnf breakage is first taken by us<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">今天，dnf 实际上并没有大量使用 libdnf，这意味着在大多数情况下，任何 libdnf 的破坏都首先由我们承担</font></font></font></li><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">libdnf is trying to rewrite more in C++, which is unlikely to help API/ABI stability<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">libdnf 正试图更多地用 C++重写，这不太可能有助于 API/ABI 的稳定性</font></font></font></li><li data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">dnf and rpm-ostree release on separate cycles (e.g. today rpm-ostree is used by OpenShift)<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">dnf 和 rpm-ostree 分别发布在不同的周期上（例如，今天 rpm-ostree 被 OpenShift 使用）</font></font></font></li></ul><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">In general, until libdnf is defined 100% API/ABI stable, we will continue to bundle it.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一般来说，直到 libdnf 被定义为 100% 的 API/ABI 稳定，我们将继续捆绑它。</font></font></font></p><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">However, because it’s a git submodule, it’s easy to test updates to it, and it also means we’re not <em data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">forking</em> it.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然而，因为它是一个 git 子模块，所以很容易测试更新，这也意味着我们没有对其进行分叉。</font></font></font></p><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">So just do e.g.:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">所以只需执行例如：</font></font></font></p><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><div class="highlight" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><pre class="highlight"><code>cd libdnf
git fetch origin
git reset --hard origin/main
cd ..
</code></pre></div></div><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">The various <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">make</code> targets will pick up the changes and recompile.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">各种 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">make</code> 目标将捕捉到更改并重新编译。</font></font></font></p><h2 id="testing-with-a-custom-ostree" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"> <a href="#testing-with-a-custom-ostree" class="anchor-heading" aria-labelledby="testing-with-a-custom-ostree" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Testing with a custom ostree<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用自定义 ostree 进行测试。</font></font></font></h2><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">It is sometimes necessary to develop against a version of ostree which is not even yet in git main. In such situations, one can simply do:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有时需要针对尚未在 git 主分支中的 ostree 版本进行开发。在这种情况下，可以简单地执行以下操作：</font></font></font></p><div class="language-sh highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><div class="highlight" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><pre class="highlight"><code><span class="nv">$ </span><span class="c"># from the rpm-ostree build dir</span>
<span class="nv">$ INSTTREE</span><span class="o">=</span><span class="nv">$PWD</span>/insttree
<span class="nv">$ </span><span class="nb">rm</span> <span class="nt">-rf</span> <span class="nv">$INSTTREE</span>
<span class="nv">$ </span><span class="c"># from the ostree build dir</span>
<span class="nv">$ </span>make
<span class="nv">$ </span>make <span class="nb">install </span><span class="nv">DESTDIR</span><span class="o">=</span><span class="nv">$INSTTREE</span>
<span class="nv">$ </span><span class="c"># from the rpm-ostree build dir</span>
<span class="nv">$ </span>make
<span class="nv">$ </span>make <span class="nb">install </span><span class="nv">DESTDIR</span><span class="o">=</span><span class="nv">$INSTTREE</span>
</code></pre></div></div><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">At this point, simply set <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">SKIP_INSTALL=1</code> when running <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">vmsync</code> and <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">vmoverlay</code> to reuse the installation tree and sync the installed binaries there:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在这一点上，只需在运行 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">vmsync</code> 和 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">vmoverlay</code> 时设置 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">SKIP_INSTALL=1</code> ，以重用安装树并同步已安装的二进制文件：</font></font></font></p><div class="language-sh highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><div class="highlight" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><pre class="highlight"><code><span class="nv">$ </span>make vmsync <span class="nv">SKIP_INSTALL</span><span class="o">=</span>1
<span class="nv">$ </span>make vmoverlay <span class="nv">SKIP_INSTALL</span><span class="o">=</span>1
</code></pre></div></div><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Of course, you can use this pattern for not just ostree but whatever else you’d like to install into the VM (e.g. bubblewrap, libsolv, etc…).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当然，您不仅可以将此模式用于 ostree，还可以用于您想要安装到虚拟机中的任何其他内容（例如 bubblewrap、libsolv 等）。</font></font></font></p><h2 id="testing-with-a-custom-rust-crate-example-ostree-rs-ext" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"> <a href="#testing-with-a-custom-rust-crate-example-ostree-rs-ext" class="anchor-heading" aria-labelledby="testing-with-a-custom-rust-crate-example-ostree-rs-ext" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Testing with a custom Rust crate (example: ostree-rs-ext)<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用自定义的 Rust crate 进行测试（示例：ostree-rs-ext）</font></font></font></h2><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">A common case is testing changes in the <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">ostree-rs-ext</code> crate. Once you have your changes ready in a clone of the <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">ostree-rs-ext</code> repository, you can edit rpm-ostree’s <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">Cargo.toml</code> to point to it.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一个常见情况是测试 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">ostree-rs-ext</code> crate 中的更改。一旦您在 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">ostree-rs-ext</code> 存储库的克隆中准备好更改，您可以编辑 rpm-ostree 的 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">Cargo.toml</code> 来指向它。</font></font></font></p><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><div class="highlight" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><pre class="highlight"><code>...
[patch.crates-io]
ostree-ext = { path = "../ostree-rs-ext/lib/" }
</code></pre></div></div><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">See the example from the <a href="https://doc.rust-lang.org/cargo/reference/overriding-dependencies.html" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">Overriding Dependencies section of the Cargo Book</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请参阅 Cargo Book 中覆盖依赖项部分的示例。</font></font></font></p><h2 id="using-gdb-with-the-rpm-ostree-daemon" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"> <a href="#using-gdb-with-the-rpm-ostree-daemon" class="anchor-heading" aria-labelledby="using-gdb-with-the-rpm-ostree-daemon" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using GDB with the rpm-ostree daemon<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 GDB 与 rpm-ostree 守护程序</font></font></font></h2><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">If you’re new to rpm-ostree, before using GDB, it may be helpful to review the <a href="../architecture-daemon/index.html" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">daemon architecture doc</a> for an architecture recap.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您是 rpm-ostree 的新手，在使用 GDB 之前，可能有必要查看守护程序架构文档，以便回顾架构。</font></font></font></p><h3 id="server-side-composes" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"> <a href="#server-side-composes" class="anchor-heading" aria-labelledby="server-side-composes" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Server-side (composes)<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">服务器端（构建）</font></font></font></h3><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Server-side composes do not use the daemon architecture and so one can naturally do e.g. <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">gdb --args rpm-ostree compose tree ...</code>. If using coreos-assembler, you can set the <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">COSA_RPMOSTREE_GDB</code> environment variable like this:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">服务器端组合不使用守护程序架构，因此可以自然地执行例如 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">gdb --args rpm-ostree compose tree ...</code> 。如果使用 coreos-assembler，可以像这样设置 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">COSA_RPMOSTREE_GDB</code> 环境变量：</font></font></font></p><div class="language-sh highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><div class="highlight" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><pre class="highlight"><code><span class="nv">$ COSA_RPMOSTREE_GDB</span><span class="o">=</span><span class="s2">"gdb --args"</span> cosa build
</code></pre></div></div><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">When cosa gets to the point of invoking rpm-ostree for the compose, it will call GDB instead.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当 cosa 到达调用 rpm-ostree 进行组合的阶段时，它将调用 GDB 而不是。</font></font></font></p><h3 id="client-side" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"> <a href="#client-side" class="anchor-heading" aria-labelledby="client-side" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Client-side<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">客户端</font></font></font></h3><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">On the client side, you need to use the <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">make vmsync</code> flow before using GDB because it also copies over the source files into <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">/root/sync</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在客户端上，在使用 GDB 之前，您需要使用 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">make vmsync</code> 流程，因为它还会将源文件复制到 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">/root/sync</code> 中。</font></font></font></p><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">You can use GDB from a privileged container. Make sure to use the <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">--pid=host</code> flag when using e.g. <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">podman run</code> so that you can attach to processes running on the host. For example:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您可以从特权容器中使用 GDB。确保在使用例如 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">podman run</code> 时使用 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">--pid=host</code> 标志，以便您可以附加到在主机上运行的进程。例如：</font></font></font></p><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><div class="highlight" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><pre class="highlight"><code>(host) podman run -ti --privileged --pid=host -v /:/host --name gdb \
        registry.fedoraproject.org/fedora:36 /bin/bash
(cnt) dnf install -y gdb procps-ng
</code></pre></div></div><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">If for whatever reason, you can’t use a container, you can also layer GDB with e.g. <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">rpm-ostree install gdb-minimal -A</code>, and then use it directly. (XXX: <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">apply-live</code> currently isn’t compatible with <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">make vmsync</code>, so you’ll want to reboot for now: https://github.com/ostreedev/ostree/issues/2369).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果由于任何原因，您无法使用容器，您还可以将 GDB 与例如 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">rpm-ostree install gdb-minimal -A</code> 层叠，然后直接使用它。（XXX： <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">apply-live</code> 目前与 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">make vmsync</code> 不兼容，因此您需要重新启动：https://github.com/ostreedev/ostree/issues/2369）。</font></font></font></p><h4 id="attaching-to-the-daemon" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"> <a href="#attaching-to-the-daemon" class="anchor-heading" aria-labelledby="attaching-to-the-daemon" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Attaching to the daemon<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">附加到守护程序</font></font></font></h4><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Run e.g. <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">rpm-ostree status</code> to ensure the daemon is started, and then:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">运行例如 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">rpm-ostree status</code> 以确保守护程序已启动，然后：</font></font></font></p><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><div class="highlight" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><pre class="highlight"><code>(cnt) gdb -p $(pidof rpm-ostree) \
        -ex 'set sysroot /host' \
        -ex 'directory /host/var/roothome/sync' \
        -ex 'directory /host/var/roothome/sync/libdnf/libdnf'
</code></pre></div></div><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Then in GDB, you can do e.g.:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后在 GDB 中，您可以执行例如：</font></font></font></p><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><div class="highlight" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><pre class="highlight"><code>(gdb) break deploy_transaction_execute
(gdb) continue
</code></pre></div></div><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">And in a separate terminal in the VM, run the CLI command which would trigger the breakpoint (e.g. <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">rpm-ostree override replace foobar.rpm</code>).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在虚拟机中的单独终端中运行会触发断点的 CLI 命令（例如 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">rpm-ostree override replace foobar.rpm</code> ）。</font></font></font></p><h4 id="attaching-to-the-cli" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1"> <a href="#attaching-to-the-cli" class="anchor-heading" aria-labelledby="attaching-to-the-cli" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Attaching to the CLI<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">附加到 CLI</font></font></font></h4><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">To attach to the CLI itself (or debug early daemon startup), you can use <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">gdb --args rpm-ostree status</code> if running GDB from the host directly.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要附加到 CLI 本身（或调试早期守护程序启动），您可以直接从主机运行 GDB 使用 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">gdb --args rpm-ostree status</code> 。</font></font></font></p><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">If running GDB in a container, you can use the <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">RPMOSTREE_GDB_HOOK</code> env var to have rpm-ostree wait for you to attach GDB from the container:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果在容器中运行 GDB，则可以使用 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">RPMOSTREE_GDB_HOOK</code> 环境变量，让 rpm-ostree 等待您从容器中附加 GDB：</font></font></font></p><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><div class="highlight" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><pre class="highlight"><code>(host) RPMOSTREE_GDB_HOOK=1 rpm-ostree status
RPMOSTREE_GDB_HOOK detected; stopping...
Attach via gdb using `gdb -p 2519`.
</code></pre></div></div><p data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Then:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后：</font></font></font></p><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><div class="highlight" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><pre class="highlight"><code>(cnt) gdb -p 2519 \
        -ex 'set sysroot /host' \
        -ex 'directory /host/var/roothome/sync' \
        -ex 'directory /host/var/roothome/sync/libdnf/libdnf' \
        -ex n -ex n
</code></pre></div></div></main><hr><footer data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><p class="text-small text-grey-dk-100 mb-0" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Copyright © <a href="https://www.redhat.com" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">Red Hat, Inc.</a> and <a href="https://github.com/coreos" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419">others</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">版权所有 © 红帽公司及其他。</font></font></font></p><div class="d-flex mt-2" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"><p class="text-small text-grey-dk-000 mb-0" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"> <a href="https://github.com/coreos/rpm-ostree/tree/main/docs/HACKING.md" id="edit-this-page" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419" data-immersive-translate-paragraph="1">Edit this page on GitHub<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 GitHub 上编辑此页面</font></font></font></a></p></div></footer></div></div><div class="search-overlay" data-immersive-translate-walked="1221efcf-c228-4525-a834-935866622419"></div></div>
</body></html>