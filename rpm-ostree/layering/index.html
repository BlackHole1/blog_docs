<html><head><style data-id="immersive-translate-default-injected-css">:root {
  --immersive-translate-theme-underline-borderColor: #72ece9;
  --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
  --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
  --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
  --immersive-translate-theme-highlight-backgroundColor: #ffff00;
  --immersive-translate-theme-dashed-borderColor: #59c1bd;
  --immersive-translate-theme-blockquote-borderColor: #cc3355;
  --immersive-translate-theme-thinDashed-borderColor: #ff374f;
  --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
  --immersive-translate-theme-dashedBorder-borderRadius: 0;
  --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
  --immersive-translate-theme-solidBorder-borderRadius: 0;
  --immersive-translate-theme-dotted-borderColor: #94a3b8;
  --immersive-translate-theme-wavy-borderColor: #72ece9;
  --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
  --immersive-translate-theme-grey-textColor: #2f4f4f;
  --immersive-translate-theme-marker-backgroundColor: #fbda41;
  --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
  --immersive-translate-theme-marker2-backgroundColor: #ffff00;
  --immersive-translate-theme-opacity-opacity: 10;
}

.immersive-translate-target-translation-pre-whitespace {
  white-space: pre-wrap !important;
}

.immersive-translate-pdf-target-container {
  position: absolute;
  background-color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
    sans-serif;
  top: 0;
  width: 600px;
  height: 100%;
  z-index: 2;
  line-height: 1.3;
  font-size: 16px;
}
.immersive-translate-target-wrapper[dir='rtl'] {
  text-align: right;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
  color: rgb(0, 0, 0);
  white-space: normal;
  position: absolute;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
  color: inherit;
  white-space: inherit;
  position: unset;
}

.immersive-translate-state-dual>br {
  display: none;
}

.immersive-translate-target-translation-block-wrapper {
  margin: 8px 0 !important;
  display: inline-block;
}

.immersive-translate-target-translation-pdf-block-wrapper {
  margin: 0 !important;
  display: block;
}

.immersive-translate-target-translation-theme-grey-inner {
  color: var(--immersive-translate-theme-grey-textColor);
}


.immersive-translate-target-translation-theme-underline-inner {
  border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
}

.immersive-translate-target-translation-theme-nativeUnderline-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
}

.immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-theme-nativeDashed-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
  text-decoration-style: dashed !important;
}

.immersive-translate-target-translation-theme-thinDashed-inner {
  border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
}

.immersive-translate-target-translation-theme-dotted-inner {
  background-image: linear-gradient(to right,
      var(--immersive-translate-theme-dotted-borderColor) 30%,
      rgba(255, 255, 255, 0) 0%);
  background-position: bottom;
  background-size: 5px 1px;
  background-repeat: repeat-x;
  padding-bottom: 3px;
}

.immersive-translate-target-translation-theme-nativeDotted-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
  text-decoration-style: dotted !important;
}

.immersive-translate-target-translation-theme-wavy-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
  text-decoration-style: wavy !important;
}

.immersive-translate-target-translation-theme-dashed-inner {
  background: linear-gradient(to right,
      var(--immersive-translate-theme-dashed-borderColor) 0%,
      var(--immersive-translate-theme-dashed-borderColor) 50%,
      transparent 50%,
      transparent 100%) repeat-x left bottom;
  background-size: 8px 2px;
  padding-bottom: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
  content: "";
  display: block;
  max-width: 80px;
  width: 10%;
  border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  padding-top: 8px;
}

.immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
  content: "";
  border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  max-height: 16px;
  height: 16px;
  padding-left: 8px;
}

.immersive-translate-target-translation-theme-highlight-inner {
  background: var(--immersive-translate-theme-highlight-backgroundColor);
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-block-wrapper-theme-marker {
  line-height: 1.5em;
}

.immersive-translate-target-translation-theme-marker2-inner {
  font-weight: bold;
  text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
    16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
    2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
    -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
}

.immersive-translate-target-translation-theme-marker-inner {
  /* TODO: add more texture */
  background: linear-gradient(to right,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-theme-weakening {
  opacity: 0.618 !important;
}

.immersive-translate-target-translation-theme-italic {
  font-style: italic !important;
}

.immersive-translate-target-translation-theme-bold {
  font-weight: bold !important;
}

.immersive-translate-target-translation-block-wrapper-theme-paper {
  margin: 8px 0;
  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
  padding: 16px 32px;
  display: block;
}

.immersive-translate-target-translation-block-wrapper-theme-blockquote {
  border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
  padding-left: 12px !important;
  margin-top: 4px;
  margin-bottom: 4px;
  padding-top: 4px;
  padding-bottom: 4px;
  display: block;
}

.immersive-translate-target-translation-theme-mask-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
  filter: none !important;
}

[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}


/* opacity theme start */

.immersive-translate-target-translation-theme-opacity-inner {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: none !important;
}


.immersive-translate-target-translation-theme-mask-inner:hover {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
  filter: none !important;
}


[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
  filter: none !important;
}

/* opacity theme end */

/* vertical css , please remain it in the last one. */
.immersive-translate-target-translation-vertical-block-wrapper {
  margin: 0px 8px !important;
}

.immersive-translate-text {
  font-size: 15px !important;
}

.immersive-translate-error-toast {
  position: fixed;
  top: 5%;
  z-index: 99999999;
  left: 0;
  right: 0;
  margin: auto;
  max-width: 300px;
  padding: 16px;
  border-radius: 12px;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}

@media all and (min-width: 750px) {
  .immersive-translate-error-toast {
    max-width: 400px;
  }
}


.immersive-translate-clickable-button {
  cursor: pointer;
}

.immersive-translate-help-button {
  cursor: pointer;
}

.immersive-translate-loading-text:before {
  content: "...";
}


/* dark mode for loading */

@media only screen and (prefers-color-scheme: dark) {
  .immersive-translate-loading {
    border: 2px rgba(255, 255, 255, 0.25) solid !important;
    border-top: 2px rgba(255, 255, 255, 1) solid !important;
  }
}

.immersive-translate-error-wrapper {
  position: relative;
  display: inline-flex;
  padding: 6px;
  margin: 0 12px;
  white-space: nowrap;
  font-size: 0.9em;
}
[lang="zh-CN"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}
[lang="zh-TW"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}


.immersive-translate-tooltip {
  position: relative;
  display: inline-flex;
  /* little indicater to indicate it's hoverable */
}

.immersive-translate-tooltip-content {
  /* here's the magic */
  position: absolute;
  z-index: 100000000000;

  left: 50%;
  bottom: 0;
  transform: translate(-50%, 110%);
  line-height: 1;
  /* and add a small left margin */

  /* basic styles */
  width: max-content;
  max-width: 250px;
  word-wrap: break-word;
  white-space: pre-line;
  padding: 10px;
  border-radius: 10px;
  background: #000C;
  color: #fff;
  text-align: center;
  font-size: 14px;
  display: none;
  /* hide by default */
}

.immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip-content-table {
  left: unset !important;
  bottom: unset !important;
  transform: translate(-10%, 50%) !important;
}


.immersive-translate-tooltip:hover:before {
  display: block;
}



.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}
</style><style data-id="immersive-translate-user-custom-style">:root {

.immersive-translate-target-inner { font-family: inherit; }
}
</style><style data-id="immersive-translate-dynamic-injected-css">.immersive-translate-target-wrapper[dir='rtl'] {text-align: right;}
.immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {display:block;}
.immersive-translate-target-wrapper {word-break: break-word;}
</style></head><body data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="stylesheet" href="../assets/css/just-the-docs-default.css"><link rel="stylesheet" href="../assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"><style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(4)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(9) > ul > li:nth-child(4) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(9) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(9) > ul > li:nth-child(4) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(9) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(9) > ul.nav-list > li.nav-list-item:nth-child(4) > ul.nav-list { display: block; }</style><script src="../assets/js/vendor/lunr.min.js"></script> <script src="../assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="../favicon.ico" type="image/x-icon"><title>Applying a new package using CoreOS layering | rpm-ostree</title><meta name="generator" content="Jekyll v3.9.5"><meta property="og:title" content="Applying a new package using CoreOS layering"><meta property="og:locale" content="en_US"><meta name="description" content="rpm-ostree documentation"><meta property="og:description" content="rpm-ostree documentation"><link rel="canonical" href="index.html"><meta property="og:url" content="https://coreos.github.io/rpm-ostree/layering/"><meta property="og:site_name" content="rpm-ostree"><meta property="og:type" content="website"><meta name="twitter:card" content="summary"><meta property="twitter:title" content="Applying a new package using CoreOS layering"> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"rpm-ostree documentation","headline":"Applying a new package using CoreOS layering","url":"https://coreos.github.io/rpm-ostree/layering/"}</script> <a class="skip-to-main" href="#main-content" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Skip to main content<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">跳转至主要内容</font></font></font></a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-copy" viewBox="0 0 16 16"><title>Copy</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"></path><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"></path> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"><title>Copied</title><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"><path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"></path><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"></path> </svg> </symbol> </svg><div class="side-bar" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="site-header" role="banner" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"> <a href="../index.html" class="site-title lh-tight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1"> rpm-ostree </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button></div><nav aria-label="Main" id="site-nav" class="site-nav" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><ul class="nav-list" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><li class="nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><a href="../index.html" class="nav-list-link" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">A true hybrid image/package system<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一个真正的混合镜像/软件包系统</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><a href="../background/index.html" class="nav-list-link" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Background<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">背景</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><a href="../administrator-handbook/index.html" class="nav-list-link" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Client administration<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">客户端管理</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><a href="../countme/index.html" class="nav-list-link" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">DNF Count Me support<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">DNF 计数我支持</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><button class="nav-list-expander btn-reset" aria-label="toggle items in Composing images category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="../compose/index.html" class="nav-list-link" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Composing images<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">撰写图像</font></font></font></a><ul class="nav-list" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><li class="nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><a href="../compose-server/index.html" class="nav-list-link" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Compose server<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">组合服务器</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><a href="../treefile/index.html" class="nav-list-link" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Treefile reference<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Treefile 参考</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><a href="../extensions/index.html" class="nav-list-link" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Extensions<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">扩展</font></font></font></a></li></ul></li><li class="nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><a href="../container/index.html" class="nav-list-link" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">ostree native containers<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">ostree 本地容器</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><button class="nav-list-expander btn-reset" aria-label="toggle items in Architecture category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="../architecture/index.html" class="nav-list-link" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Architecture<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">架构</font></font></font></a><ul class="nav-list" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><li class="nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><a href="../architecture-core/index.html" class="nav-list-link" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">RPM packages, ostree commits<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">RPM 软件包，ostree 提交</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><a href="../architecture-daemon/index.html" class="nav-list-link" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Daemon model<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">守护程序模型</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><a href="../apply-live/index.html" class="nav-list-link" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Architecture of apply-live<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">应用实时架构</font></font></font></a></li></ul></li><li class="nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><button class="nav-list-expander btn-reset" aria-label="toggle items in Contributing category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="../CONTRIBUTING/index.html" class="nav-list-link" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Contributing<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">贡献</font></font></font></a><ul class="nav-list" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><li class="nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><a href="../HACKING/index.html" class="nav-list-link" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Hacking on rpm-ostree<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 rpm-ostree 上进行黑客攻击</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><a href="../repo_structure/index.html" class="nav-list-link" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Repository structure<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">仓库结构</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><a href="../RELEASE/index.html" class="nav-list-link" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Releasing rpm-ostree<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">发布 rpm-ostree</font></font></font></a></li></ul></li><li class="nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><button class="nav-list-expander btn-reset" aria-label="toggle items in Experimental features category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="../experimental/index.html" class="nav-list-link" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Experimental features<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">实验性功能</font></font></font></a><ul class="nav-list" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><li class="nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><a href="../cliwrap/index.html" class="nav-list-link" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Wrapping other CLI entrypoints<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">封装其他 CLI 入口点</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><a href="../ex-rebuild/index.html" class="nav-list-link" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Declarative system changes<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">声明性系统更改</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><a href="../ex-replace/index.html" class="nav-list-link" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">override replace --experimental<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">覆盖替换 --实验性</font></font></font></a></li><li class="nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><a href="index.html" class="nav-list-link" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Applying a new package using CoreOS layering<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 CoreOS 分层应用新包</font></font></font></a></li></ul></li></ul></nav><footer class="site-footer" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1"> This site uses <a href="https://github.com/just-the-docs/just-the-docs" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">Just the Docs</a>, a documentation theme for Jekyll.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">本站使用 Just the Docs，这是一个适用于 Jekyll 的文档主题。</font></font></font></footer></div><div class="main" id="top" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div id="main-header" class="main-header" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="search" role="search" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="search-input-wrap" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search rpm-ostree" aria-label="Search rpm-ostree" autocomplete="off" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"> <label for="search-input" class="search-label" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"></div></div><nav aria-label="Auxiliary" class="aux-nav" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><ul class="aux-nav-list" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><li class="aux-nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"> <a href="https://github.com/coreos/rpm-ostree" class="site-button" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1"> rpm-ostree on GitHub <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 GitHub 上的 rpm-ostree</font></font></font></a></li></ul></nav></div><div class="main-content-wrap" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><nav aria-label="Breadcrumb" class="breadcrumb-nav" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><ol class="breadcrumb-nav-list" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><li class="breadcrumb-nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><a href="../experimental/index.html" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Experimental features<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">实验性功能</font></font></font></a></li><li class="breadcrumb-nav-list-item" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><span data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Applying a new package using CoreOS layering<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 CoreOS 分层应用新包</font></font></font></span></li></ol></nav><div id="main-content" class="main-content" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><main data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><h1 id="applying-a-new-package-using-coreos-layering" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1"> <a href="#applying-a-new-package-using-coreos-layering" class="anchor-heading" aria-labelledby="applying-a-new-package-using-coreos-layering" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Applying a new package using CoreOS layering<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 CoreOS 分层应用新包</font></font></font></h1><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">This tutorial shows how to layer custom content on top of a containerized Fedora CoreOS image. As an example, it covers how to add the <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">cachefilesd</code> package through <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">Dockerfile</code> directives and how to further configure it on boot with Ignition.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">本教程展示了如何在容器化的 Fedora CoreOS 镜像顶部添加自定义内容。作为示例，它涵盖了如何通过 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">cachefilesd</code> 指令添加 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">Dockerfile</code> 包，并如何使用 Ignition 在启动时进一步配置它。</font></font></font></p><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">This will allow users/admins to derive custom images based on Fedora CoreOS and containing packages not present in the base image. This tutorial is based on a previously discussed <a href="https://github.com/coreos/fedora-coreos-tracker/issues/1029" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">request</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这将允许用户/管理员基于 Fedora CoreOS 派生自定义镜像，并包含基础镜像中不存在的包。本教程基于先前讨论的请求。</font></font></font></p><h3 id="note-this-is-an-experimental-feature-that-is-subject-to-change" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"> <a href="#note-this-is-an-experimental-feature-that-is-subject-to-change" class="anchor-heading" aria-labelledby="note-this-is-an-experimental-feature-that-is-subject-to-change" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Note: This is an experimental feature that is subject to change.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意：这是一个实验性功能，可能会发生变化。</font></font></font></strong></h3><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">To follow this guide you should have the prerequisites described in the <a href="https://docs.fedoraproject.org/en-US/fedora-coreos/tutorial-setup/" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">CoreOS documentation</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要按照本指南，您应具备 CoreOS 文档中描述的先决条件。</font></font></font></p><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Let’s first deploy a FCOS environment and do an initial config with Ignition. We are aiming for a simple deployment which is <a href="https://docs.fedoraproject.org/en-US/fedora-coreos/tutorial-autologin/" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">described here</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">让我们首先部署一个 FCOS 环境，并使用 Ignition 进行初始配置。我们的目标是进行一个简单的部署，具体描述在这里。</font></font></font></p><h3 id="download-fedora-coreos-next-stream" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1"> <a href="#download-fedora-coreos-next-stream" class="anchor-heading" aria-labelledby="download-fedora-coreos-next-stream" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Download Fedora CoreOS next stream<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">下载 Fedora CoreOS 的下一个流</font></font></font></h3><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">We depend on some newer rpm-ostree and skopeo functionality. Let’s use the next stream. Information about the streams can be found <a href="https://docs.fedoraproject.org/en-US/fedora-coreos/update-streams/" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">here</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">我们依赖一些更新的 rpm-ostree 和 skopeo 功能。让我们使用下一个流。有关流的信息可以在这里找到。</font></font></font></p><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">For the purpose of this tutorial we are using QEMU, but you can use a cloud environment or platform you prefer, the <a href="https://getfedora.org/en/coreos/download" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">Fedora CoreOS downloads page</a> has all the available options.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为了本教程的目的，我们使用 QEMU，但您可以使用您喜欢的云环境或平台，Fedora CoreOS 下载页面提供了所有可用选项。</font></font></font></p><div class="language-bash highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code><span class="c"># This is the 'next' image we will be using.</span>
<span class="c"># Anything newer than this should work too.</span>
<span class="nv">$ RELEASE_URL</span><span class="o">=</span><span class="si">$(</span>curl https://builds.coreos.fedoraproject.org/streams/next.json | jq <span class="nt">-r</span> <span class="s1">'.architectures.x86_64.artifacts.qemu.formats."qcow2.xz".disk.location'</span><span class="si">)</span>

<span class="c"># Download the image.</span>
<span class="nv">$ </span>curl <span class="nt">-o</span> fedora-coreos.qcow2.xz <span class="s2">"</span><span class="nv">$RELEASE_URL</span><span class="s2">"</span>

<span class="c"># Uncompress the qemu image.</span>
<span class="nv">$ </span>unxz fedora-coreos.qcow2.xz
</code></pre></div></div><h3 id="first-ignition-config-via-butane" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1"> <a href="#first-ignition-config-via-butane" class="anchor-heading" aria-labelledby="first-ignition-config-via-butane" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> First Ignition config via Butane<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过 Butane 进行首次点火配置</font></font></font></h3><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Let’s create a very simple Butane config that will perform the following actions:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">让我们创建一个非常简单的 Butane 配置，将执行以下操作：</font></font></font></p><ul data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><li data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Add a systemd drop-in to override the default <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">serial-getty@ttyS0.service</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加一个 systemd drop-in 以覆盖默认的 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">serial-getty@ttyS0.service</code> 。</font></font></font><ul data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><li data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">The override will make the service automatically log the <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">core</code> user in to the serial console of the booted machine.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">覆盖将使服务自动将 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">core</code> 用户登录到已启动机器的串行控制台。</font></font></font></li></ul></li><li data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Set the system hostname by dropping a file at <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">/etc/hostname</code>,<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过在 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">/etc/hostname</code> 处放置文件来设置系统主机名，</font></font></font></li><li data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Add a <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">/etc/cachefilesd.conf</code> file with our desired values.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加一个包含我们所需值的 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">/etc/cachefilesd.conf</code> 文件。</font></font></font></li></ul><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">For this, we create a Butane configuration file <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">autologin.bu</code> with the following content:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为此，我们创建一个 Butane 配置文件 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">autologin.bu</code> ，内容如下：</font></font></font></p><pre><code class="language-yaml=">variant: fcos
version: 1.4.0
systemd:
  units:
    - name: serial-getty@ttyS0.service
      dropins:
      - name: autologin-core.conf
        contents: |
          [Service]
          # Override ExecStart in main unit
          ExecStart=
          # Add new Execstart with `-` prefix to ignore failure`
          ExecStart=-/usr/sbin/agetty --autologin core --noclear %I $TERM
storage:
  files:
    - path: /etc/hostname
      mode: 0644
      contents:
        inline: |
          tutorial
    - path: /etc/cachefilesd.conf
      mode: 0644
      contents:
        inline: |
          dir /var/cache/fscache
          tag mycache
          brun  8%
          bcull 6%
          bstop 2%
          frun  9%
          fcull 5%
          fstop 4%
          secctx system_u:system_r:cachefiles_kernel_t:s0
</code></pre><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">This configuration can then be converted into an Ignition config with Butane:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后可以使用 Butane 将此配置转换为 Ignition 配置：</font></font></font></p><div class="language-bash highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code><span class="nv">$ </span>butane <span class="nt">--pretty</span> <span class="nt">--strict</span> autologin.bu <span class="nt">--output</span> autologin.ign
</code></pre></div></div><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">The resulting Ignition configuration produced by Butane as <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">autologin.ign</code> can be examined by running:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过运行以下命令，可以查看 Butane 生成的 Ignition 配置：</font></font></font></p><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code>$ cat autologin.ign
</code></pre></div></div><h3 id="booting-fedora-coreos" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1"> <a href="#booting-fedora-coreos" class="anchor-heading" aria-labelledby="booting-fedora-coreos" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Booting Fedora CoreOS<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">引导 Fedora CoreOS</font></font></font></h3><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Now that we have an Ignition config, we can boot a virtual machine with it. This tutorial uses the QEMU image with <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">libvirt</code>, but you should be able to use the same Ignition config on all the platforms supported by Fedora CoreOS.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">现在我们有了一个 Ignition 配置，我们可以使用它来启动一个虚拟机。本教程使用 QEMU 镜像与 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">libvirt</code> ，但您应该能够在 Fedora CoreOS 支持的所有平台上使用相同的 Ignition 配置。</font></font></font></p><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">We use <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">virt-install</code> to create a new Fedora CoreOS virtual machine with a specific config:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">我们使用 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">virt-install</code> 来创建一个具有特定配置的新 Fedora CoreOS 虚拟机：</font></font></font></p><div class="language-bash highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code><span class="c"># Setup the correct SELinux label to allow access to the config</span>
<span class="nv">$ </span><span class="nb">chcon</span> <span class="nt">--verbose</span> <span class="nt">--type</span> svirt_home_t autologin.ign

<span class="c"># Start a Fedora CoreOS virtual machine</span>
<span class="nv">$ </span>virt-install <span class="nt">--name</span><span class="o">=</span>fcos <span class="nt">--vcpus</span><span class="o">=</span>2 <span class="nt">--ram</span><span class="o">=</span>2048 <span class="nt">--os-variant</span><span class="o">=</span>fedora-coreos-stable <span class="se">\</span>
    <span class="nt">--import</span> <span class="nt">--network</span><span class="o">=</span><span class="nv">bridge</span><span class="o">=</span>virbr0 <span class="nt">--graphics</span><span class="o">=</span>none <span class="se">\</span>
    <span class="nt">--qemu-commandline</span><span class="o">=</span><span class="s2">"-fw_cfg name=opt/com.coreos/config,file=</span><span class="k">${</span><span class="nv">PWD</span><span class="k">}</span><span class="s2">/autologin.ign"</span> <span class="se">\</span>
    <span class="nt">--disk</span><span class="o">=</span><span class="nv">size</span><span class="o">=</span>20,backing_store<span class="o">=</span><span class="k">${</span><span class="nv">PWD</span><span class="k">}</span>/fedora-coreos.qcow2
</code></pre></div></div><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">The <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">virt-install</code> command will start an instance named <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">fcos</code> from the <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">fedora-coreos.qcow2</code> image using the <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">autologin.ign</code> Ignition config. It will auto-attach the serial console of the machine so you will be able to see the image bootup messages.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">autologin.ign</code> Ignition 配置从 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">fedora-coreos.qcow2</code> 镜像启动名为 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">fcos</code> 的实例的 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">virt-install</code> 命令。它将自动附加机器的串行控制台，因此您将能够看到镜像引导消息。</font></font></font></p><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Once the machine is booted up you should see a few prompts and then you should be automatically logged in and presented with a bash shell:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一旦机器启动，您应该看到几个提示，然后您将被自动登录并呈现一个 bash shell：</font></font></font></p><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code>[  OK  ] Started rpm-ostree System Management Daemon.

Fedora CoreOS 32.20200715.3.0
Kernel 5.7.8-200.fc32.x86_64 on an x86_64 (ttyS0)

SSH host key: SHA256:XlbayjbgDKNoAAHQxsEL5Q7BdwLxxWSw4NXN9SALLmo (ED25519)
SSH host key: SHA256:3sx5jseteO4BvdOMWIi0J4koQL015mLonnD0UPTtnZk (ECDSA)
SSH host key: SHA256:K0fn5/TMJOoMs7Fu7RRkE7IBEf2t8OYCfVaVc+GJWGs (RSA)
ens2: 192.168.122.127 fe80::5054:ff:feb9:3d97
Ignition: user provided config was applied
No ssh authorized keys provided by Ignition or Afterburn
tutorial login: core (automatic login)

[core@tutorial ~]$
</code></pre></div></div><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">We can verify that our configuration has been applied: we were automatically logged in to the terminal, and the hostname on the prompt is <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">tutorial</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">我们可以验证我们的配置已经应用：我们已经自动登录到终端，并且提示符上的主机名是 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">tutorial</code> 。</font></font></font></p><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">As we can see our <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">/etc/cachefilesd.conf</code> file:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">正如我们所看到的，我们的 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">/etc/cachefilesd.conf</code> 文件：</font></font></font></p><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code>[core@tutorial ~]$ cat /etc/cachefilesd.conf
dir /var/cache/fscache
tag mycache
brun  8%
bcull 6%
bstop 2%
frun  9%
fcull 5%
fstop 4%
secctx system_u:system_r:cachefiles_kernel_t:s0
</code></pre></div></div><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Let’s also make sure there is no cachefiled package installed.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">也让我们确保没有安装 cachefiled 软件包。</font></font></font></p><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code>[core@tutorial ~]$ rpm -qi cachefilesd
package cachefilesd is not installed
</code></pre></div></div><h3 id="create-a-derived-image-with-additional-content" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1"> <a href="#create-a-derived-image-with-additional-content" class="anchor-heading" aria-labelledby="create-a-derived-image-with-additional-content" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create a derived image with additional content<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">创建一个带有额外内容的派生镜像。</font></font></font></h3><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">We are assuming there is a need for debugging on your environment and you need strace and a custom binary. Finally we are going to add keylime and rebase your running FCOS deployment to include them.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">我们假设您的环境需要调试，并且您需要 strace 和自定义二进制文件。最后，我们将添加 keylime 并重新基于您正在运行的 FCOS 部署以包含它们。</font></font></font></p><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">This would be helpful when IT needs to provide the images or there is a need to add the same system image to multiple hosts. Instead of making the changes on each host which will have different versions of software or configs you can create an image which then you can rebase your systems on. We are using the <a href="https://github.com/coreos/fcos-derivation-example" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">fcos-derivation-example</a> to start this process.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当 IT 需要提供镜像或需要将相同的系统镜像添加到多个主机时，这将非常有帮助。与在每台主机上进行更改（这些主机将具有不同版本的软件或配置）相比，您可以创建一个镜像，然后可以在其上重新基于您的系统。我们使用 fcos-derivation-example 来启动此过程。</font></font></font></p><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Let’s clone our example code on your local system and enter the directory.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">让我们在您的本地系统上克隆我们的示例代码并进入该目录。</font></font></font></p><div class="language-bash highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code><span class="nv">$ </span>git clone git@github.com:coreos/fcos-derivation-example.git <span class="o">&amp;&amp;</span> <span class="nb">cd </span>fcos-derivation-example
</code></pre></div></div><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Examine the Dockerfile and notice the custom binary and where we are installing strace.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">检查 Dockerfile 并注意自定义二进制文件以及我们正在安装 strace 的位置。</font></font></font></p><div class="language-bash highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code><span class="nv">$ </span>vi Dockerfile
</code></pre></div></div><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Let’s add <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">cachefilesd</code> to the install command.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">让我们将 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">cachefilesd</code> 添加到安装命令中。</font></font></font></p><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">That would make the last line look like:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这将使最后一行看起来像：</font></font></font></p><div class="language-dockerfile highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code><span class="k">RUN </span>rpm-ostree <span class="nb">install </span>strace cachefilesd <span class="o">&amp;&amp;</span> rpm-ostree cleanup <span class="nt">-m</span>
</code></pre></div></div><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Time to build the image. In this example we are using podman.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">构建镜像的时间。在这个示例中，我们使用 podman。</font></font></font></p><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code>$ podman build -t localhost/my-custom-fcos .
</code></pre></div></div><h3 id="inspect-the-content-of-the-derived-image" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1"> <a href="#inspect-the-content-of-the-derived-image" class="anchor-heading" aria-labelledby="inspect-the-content-of-the-derived-image" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Inspect the content of the derived image<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">检查派生镜像的内容</font></font></font></h3><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">At this point we have an OCI image. You can test to see if it actually has the layered packages.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此时我们有一个 OCI 镜像。您可以测试看看它是否实际包含了分层包。</font></font></font></p><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Let’s get into the container.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">让我们进入容器。</font></font></font></p><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code>$ podman run -it localhost/my-custom-fcos /bin/bash
</code></pre></div></div><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Run stace inside the container. You should see the following:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在容器内运行 stace。您应该看到以下内容：</font></font></font></p><div class="language-bash highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code><span class="nv">$ </span>strace <span class="nt">--version</span>
strace <span class="nt">--</span> version 5.15
Copyright <span class="o">(</span>c<span class="o">)</span> 1991-2021 The strace developers &lt;https://strace.io&gt;.
This is free software<span class="p">;</span> see the <span class="nb">source </span><span class="k">for </span>copying conditions.  There is NO
warranty<span class="p">;</span> not even <span class="k">for </span>MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
Optional features enabled: stack-trace<span class="o">=</span>libdw stack-demangle m32-mpers mx32-mpers secontext
</code></pre></div></div><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Which tells us we have successfully installed <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">strace</code> on Fedora CoreOS.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这告诉我们在 Fedora CoreOS 上成功安装了 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">strace</code> 。</font></font></font></p><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Next let’s see if cachefilesd is there.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">接下来让我们看看 cachefilesd 是否存在。</font></font></font></p><div class="language-bash highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code><span class="nv">$ </span>cachefilesd <span class="nt">--version</span>     
</code></pre></div></div><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">The output should look like the following:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">输出应该如下所示：</font></font></font></p><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code>cachefilesd version 0.10.10
</code></pre></div></div><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Now that we confirmed our packages are there, we can get out of the container:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">现在我们确认了我们的软件包存在，我们可以退出容器：</font></font></font></p><div class="language-bash highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">exit</span>
</code></pre></div></div><h3 id="push-the-oci-image-to-a-container-registry" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1"> <a href="#push-the-oci-image-to-a-container-registry" class="anchor-heading" aria-labelledby="push-the-oci-image-to-a-container-registry" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Push the OCI image to a container registry<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">将 OCI 镜像推送到容器注册表</font></font></font></h3><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">In order to use our image, we need to push it to an image repository that is accessible to our hosts.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为了使用我们的镜像，我们需要将其推送到一个对我们的主机可访问的镜像仓库。</font></font></font></p><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">In this example we will use <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">quay.io</code>. But this can be any compatible container image repository. Quay allows you to build your images directly on their platform which will save you the bandwidth of pushing the image, however we are not using this feature for the tutorial. You can read about that feature <a href="https://docs.quay.io/guides/building.html" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">here</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在这个示例中，我们将使用 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">quay.io</code> 。但这可以是任何兼容的容器镜像仓库。Quay 允许您直接在其平台上构建您的镜像，这将为您节省推送镜像的带宽，但是我们在本教程中没有使用这个功能。您可以在这里阅读有关该功能的信息。</font></font></font></p><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">You will need to create an account on <a href="https://coreos.github.io/rpm-ostree/layering/quay.io" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">quay.io</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您需要在 quay.io 上创建一个帐户。</font></font></font></p><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Login to quay.io from your terminal:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">从您的终端登录到 quay.io：</font></font></font></p><div class="language-bash highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code><span class="nv">$ </span>podman login quay.io
</code></pre></div></div><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Push the previously built image:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">推送先前构建的镜像：</font></font></font></p><div class="language-bash highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code><span class="nv">$ </span>podman push localhost/my-custom-fcos quay.io/&lt;YOURUSER&gt;/my-custom-fcos
</code></pre></div></div><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Note that by default, Quay marks the repository as private. Please follow the <a href="https://docs.quay.io/guides/repo-view.html" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">Quay documentation</a> to mark the repository as public.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，默认情况下，Quay 将存储库标记为私有。请按照 Quay 文档的说明将存储库标记为公共。</font></font></font></p><h3 id="rebase-the-os-to-the-derived-image" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1"> <a href="#rebase-the-os-to-the-derived-image" class="anchor-heading" aria-labelledby="rebase-the-os-to-the-derived-image" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Rebase the OS to the derived image<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">将操作系统重新基于派生镜像</font></font></font></h3><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">For this step we go back to our Fedora CoreOS VM console.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于这一步骤，我们回到 Fedora CoreOS VM 控制台。</font></font></font></p><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">We need to stop the Zincati service so that auto-updates won’t interfere with our manual operations.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">我们需要停止 Zincati 服务，以防止自动更新干扰我们的手动操作。</font></font></font></p><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code>[core@tutorial ~]$ sudo systemctl stop zincati.service
</code></pre></div></div><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Next, we call <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">rpm-ostree</code> to rebase our system using the image we just pushed to quay.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">接下来，我们调用 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">rpm-ostree</code> 来使用我们刚刚推送到 quay 的镜像重新设置我们的系统。</font></font></font></p><div class="language-bash highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code><span class="o">[</span>core@tutorial ~]<span class="nv">$ </span><span class="nb">sudo </span>rpm-ostree rebase <span class="se">\</span>
    ostree-unverified-registry:quay.io/&lt;YOURUSER&gt;/my-custom-fcos
</code></pre></div></div><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">We can check if there is a new deployment is staged:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">我们可以检查是否有新的部署已经准备就绪：</font></font></font></p><div class="language-bash highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code><span class="o">[</span>core@tutorial ~]<span class="nv">$ </span>rpm-ostree status
</code></pre></div></div><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">We should see a new deployment staged like this:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">我们应该看到一个像这样分阶段的新部署：</font></font></font></p><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code>State: idle
AutomaticUpdatesDriver: Zincati
  DriverState: inactive
Deployments:
  ostree-unverified-registry:quay.io/&lt;YOURUSER&gt;/my-custom-fcos
                    Digest: sha256:506f0924d117af1d16fe81264d531faad1a96af8c1590ba4782b0e8bf0020d1a
                 Timestamp: 2021-12-22T21:27:42Z
                      Diff: 2 added

</code></pre></div></div><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Now that we confirmed that our new deployment is staged we can reboot.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">现在我们确认了我们的新部署已经分阶段，我们可以重新启动。</font></font></font></p><div class="language-bash highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code><span class="o">[</span>core@tutorial ~]<span class="nv">$ </span><span class="nb">sudo </span>systemctl reboot
</code></pre></div></div><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">More information about this step can be read <a href="../container/index.html#rebasing-a-client-system" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">here</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">关于这一步骤的更多信息可以在这里阅读。</font></font></font></p><h3 id="booted-into-new-deployment-with-layered-content" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1"> <a href="#booted-into-new-deployment-with-layered-content" class="anchor-heading" aria-labelledby="booted-into-new-deployment-with-layered-content" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Booted into new deployment with layered content<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">启动到具有分层内容的新部署</font></font></font></h3><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Now your host should have your custom binary and extra packages ready to use. Explore it by running <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">cachefilesd</code>, <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">strace</code> and playing with the configured services.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">现在您的主机应该已经准备好使用您的自定义二进制文件和额外的软件包。通过运行 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">cachefilesd</code> ， <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">strace</code> 来探索它，并尝试配置的服务。</font></font></font></p><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">For example we can verify that cachefiled is installed:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">例如，我们可以验证 cachefiled 是否已安装：</font></font></font></p><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code>[core@tutorial ~]$ rpm -qi cachefilesd
Name        : cachefilesd
Version     : 0.10.10
Release     : 12.fc35
Architecture: x86_64
Install Date: Thu Jan  6 01:57:06 2022
Group       : Unspecified
Size        : 75373
License     : GPLv2+
Signature   : RSA/SHA256, Sun Jul 25 04:33:13 2021, Key ID db4639719867c58f
Source RPM  : cachefilesd-0.10.10-12.fc35.src.rpm
Build Date  : Wed Jul 21 19:15:26 2021
Build Host  : buildvm-x86-22.iad2.fedoraproject.org
Packager    : Fedora Project
Vendor      : Fedora Project
URL         : http://people.redhat.com/~dhowells/fscache/
Bug URL     : https://bugz.fedoraproject.org/cachefilesd
Summary     : CacheFiles user-space management daemon
Description :
The cachefilesd daemon manages the caching files and directory that are that
are used by network file systems such a AFS and NFS to do persistent caching to
the local disk.

</code></pre></div></div><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Let’s also verify if our pre-configured <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">/etc/cachefilesd</code> has not changed.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">让我们还要验证一下我们预先配置的 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">/etc/cachefilesd</code> 是否没有改变。</font></font></font></p><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code>[core@tutorial ~]$ cat /etc/cachefilesd.conf
</code></pre></div></div><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">We should see the same values we setup through ignition, installing the package should not change the config file.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">我们应该看到我们通过引导设置的相同值，安装软件包不应更改配置文件。</font></font></font></p><h3 id="taking-down-the-virtual-machine" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1"> <a href="#taking-down-the-virtual-machine" class="anchor-heading" aria-labelledby="taking-down-the-virtual-machine" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Taking down the Virtual Machine<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">关闭虚拟机。</font></font></font></h3><p data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Congratulations you now have a Fedora CoreOS host with your desired packages layered in. If you are done exploring the VM you now delete it. First escape out of the serial console by pressing <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">CTRL + ]</code> and then type:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">恭喜您现在拥有一个 Fedora CoreOS 主机，并已添加您想要的软件包。如果您已经完成了对虚拟机的探索，现在可以删除它。首先通过按 <code class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">CTRL + ]</code> 键退出串行控制台，然后输入：</font></font></font></p><div class="language-plaintext highlighter-rouge" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><div class="highlight" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><pre class="highlight"><code>$ virsh destroy fcos
$ virsh undefine --remove-all-storage fcos
</code></pre></div></div></main><hr><footer data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><p class="text-small text-grey-dk-100 mb-0" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Copyright © <a href="https://www.redhat.com" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">Red Hat, Inc.</a> and <a href="https://github.com/coreos" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5">others</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">版权所有 © 红帽公司及其他。</font></font></font></p><div class="d-flex mt-2" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"><p class="text-small text-grey-dk-000 mb-0" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"> <a href="https://github.com/coreos/rpm-ostree/tree/main/docs/layering.md" id="edit-this-page" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5" data-immersive-translate-paragraph="1">Edit this page on GitHub<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 GitHub 上编辑此页面</font></font></font></a></p></div></footer></div></div><div class="search-overlay" data-immersive-translate-walked="d1e71afb-47bf-4061-9a81-36b7eaac5cc5"></div></div>
</body></html>