<!--?xml version="1.0" encoding="UTF-8"?-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><script src="inpage_002.js" id="argent-x-extension" data-extension-id="{51e0c76c-7dbc-41ba-a45d-c579be84301b}"></script><head><script src="inpage.js" id="argent-x-extension" data-extension-id="{51e0c76c-7dbc-41ba-a45d-c579be84301b}"></script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Buildroot 用户手册 --- The Buildroot user manual</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css"><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot"><style id="swal-pub-style">.swal2-popup.swal2-toast{flex-direction:column;align-items:stretch;width:auto;padding:1.25em;overflow-y:hidden;background:#fff;box-shadow:0 0 .625em #d9d9d9}.swal2-popup.swal2-toast .swal2-header{flex-direction:row;padding:0}.swal2-popup.swal2-toast .swal2-title{flex-grow:1;justify-content:flex-start;margin:0 .625em;font-size:1em}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.3125em auto;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{position:static;width:.8em;height:.8em;line-height:.8}.swal2-popup.swal2-toast .swal2-content{justify-content:flex-start;margin:0 .625em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container{padding:.625em 0 0}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-icon{width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{font-size:.25em}}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{flex:1;flex-basis:auto!important;align-self:stretch;width:auto;height:2.2em;height:auto;margin:0 .3125em;margin-top:.3125em;padding:0}.swal2-popup.swal2-toast .swal2-styled{margin:.125em .3125em;padding:.3125em .625em;font-size:1em}.swal2-popup.swal2-toast .swal2-styled:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(100,150,200,.5)}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:flex;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;flex-direction:row;align-items:center;justify-content:center;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-top{align-items:flex-start}.swal2-container.swal2-top-left,.swal2-container.swal2-top-start{align-items:flex-start;justify-content:flex-start}.swal2-container.swal2-top-end,.swal2-container.swal2-top-right{align-items:flex-start;justify-content:flex-end}.swal2-container.swal2-center{align-items:center}.swal2-container.swal2-center-left,.swal2-container.swal2-center-start{align-items:center;justify-content:flex-start}.swal2-container.swal2-center-end,.swal2-container.swal2-center-right{align-items:center;justify-content:flex-end}.swal2-container.swal2-bottom{align-items:flex-end}.swal2-container.swal2-bottom-left,.swal2-container.swal2-bottom-start{align-items:flex-end;justify-content:flex-start}.swal2-container.swal2-bottom-end,.swal2-container.swal2-bottom-right{align-items:flex-end;justify-content:flex-end}.swal2-container.swal2-bottom-end>:first-child,.swal2-container.swal2-bottom-left>:first-child,.swal2-container.swal2-bottom-right>:first-child,.swal2-container.swal2-bottom-start>:first-child,.swal2-container.swal2-bottom>:first-child{margin-top:auto}.swal2-container.swal2-grow-fullscreen>.swal2-modal{display:flex!important;flex:1;align-self:stretch;justify-content:center}.swal2-container.swal2-grow-row>.swal2-modal{display:flex!important;flex:1;align-content:center;justify-content:center}.swal2-container.swal2-grow-column{flex:1;flex-direction:column}.swal2-container.swal2-grow-column.swal2-bottom,.swal2-container.swal2-grow-column.swal2-center,.swal2-container.swal2-grow-column.swal2-top{align-items:center}.swal2-container.swal2-grow-column.swal2-bottom-left,.swal2-container.swal2-grow-column.swal2-bottom-start,.swal2-container.swal2-grow-column.swal2-center-left,.swal2-container.swal2-grow-column.swal2-center-start,.swal2-container.swal2-grow-column.swal2-top-left,.swal2-container.swal2-grow-column.swal2-top-start{align-items:flex-start}.swal2-container.swal2-grow-column.swal2-bottom-end,.swal2-container.swal2-grow-column.swal2-bottom-right,.swal2-container.swal2-grow-column.swal2-center-end,.swal2-container.swal2-grow-column.swal2-center-right,.swal2-container.swal2-grow-column.swal2-top-end,.swal2-container.swal2-grow-column.swal2-top-right{align-items:flex-end}.swal2-container.swal2-grow-column>.swal2-modal{display:flex!important;flex:1;align-content:center;justify-content:center}.swal2-container.swal2-no-transition{transition:none!important}.swal2-container:not(.swal2-top):not(.swal2-top-start):not(.swal2-top-end):not(.swal2-top-left):not(.swal2-top-right):not(.swal2-center-start):not(.swal2-center-end):not(.swal2-center-left):not(.swal2-center-right):not(.swal2-bottom):not(.swal2-bottom-start):not(.swal2-bottom-end):not(.swal2-bottom-left):not(.swal2-bottom-right):not(.swal2-grow-fullscreen)>.swal2-modal{margin:auto}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.swal2-container .swal2-modal{margin:0!important}}.swal2-popup{display:none;position:relative;box-sizing:border-box;flex-direction:column;justify-content:center;width:32em;max-width:100%;padding:1.25em;border:none;border-radius:5px;background:#fff;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-header{display:flex;flex-direction:column;align-items:center;padding:0 1.8em}.swal2-title{position:relative;max-width:100%;margin:0 0 .4em;padding:0;color:#595959;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:100%;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;box-shadow:none;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#2778c4;color:#fff;font-size:1em}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#d14529;color:#fff;font-size:1em}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#757575;color:#fff;font-size:1em}.swal2-styled:focus{outline:0;box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1.25em 0 0;padding:1em 0 0;border-top:1px solid #eee;color:#545454;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;height:.25em;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:1.25em auto}.swal2-close{position:absolute;z-index:2;top:0;right:0;align-items:center;justify-content:center;width:1.2em;height:1.2em;padding:0;overflow:hidden;transition:color .1s ease-out;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-size:2.5em;line-height:1.2;cursor:pointer}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-content{z-index:1;justify-content:center;margin:0;padding:0 1.6em;color:#545454;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em auto}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:100%;transition:border-color .3s,box-shadow .3s;border:1px solid #d9d9d9;border-radius:.1875em;background:inherit;box-shadow:inset 0 1px 1px rgba(0,0,0,.06);color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em auto;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-input[type=number]{max-width:10em}.swal2-file{background:inherit;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:inherit;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto}.swal2-validation-message{align-items:center;justify-content:center;margin:0 -2.7em;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:1.25em auto 1.875em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:0 0 1.25em;padding:0;background:inherit;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{right:auto;left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@supports (-ms-accelerator:true){.swal2-range input{width:100%!important}.swal2-range output{display:none}}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.swal2-range input{width:100%!important}.swal2-range output{display:none}}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{top:auto;right:auto;bottom:auto;left:auto;max-width:calc(100% - .625em * 2);background-color:transparent!important}body.swal2-no-backdrop .swal2-container>.swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}body.swal2-no-backdrop .swal2-container.swal2-top{top:0;left:50%;transform:translateX(-50%)}body.swal2-no-backdrop .swal2-container.swal2-top-left,body.swal2-no-backdrop .swal2-container.swal2-top-start{top:0;left:0}body.swal2-no-backdrop .swal2-container.swal2-top-end,body.swal2-no-backdrop .swal2-container.swal2-top-right{top:0;right:0}body.swal2-no-backdrop .swal2-container.swal2-center{top:50%;left:50%;transform:translate(-50%,-50%)}body.swal2-no-backdrop .swal2-container.swal2-center-left,body.swal2-no-backdrop .swal2-container.swal2-center-start{top:50%;left:0;transform:translateY(-50%)}body.swal2-no-backdrop .swal2-container.swal2-center-end,body.swal2-no-backdrop .swal2-container.swal2-center-right{top:50%;right:0;transform:translateY(-50%)}body.swal2-no-backdrop .swal2-container.swal2-bottom{bottom:0;left:50%;transform:translateX(-50%)}body.swal2-no-backdrop .swal2-container.swal2-bottom-left,body.swal2-no-backdrop .swal2-container.swal2-bottom-start{bottom:0;left:0}body.swal2-no-backdrop .swal2-container.swal2-bottom-end,body.swal2-no-backdrop .swal2-container.swal2-bottom-right{right:0;bottom:0}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{background-color:transparent}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}</style><style id="instant-style">
                .instant-popup { font-size: 14px !important; }
                .instant-setting-label { display: flex;align-items: center;justify-content: space-between;padding-top: 15px; }
                .instant-setting-label-col { display: flex;align-items: flex-start;;padding-top: 15px;flex-direction:column }
                .instant-setting-checkbox { width: 16px;height: 16px; }
                .instant-setting-textarea { width: 100%; margin: 14px 0 0; height: 60px; resize: none; border: 1px solid #bbb; box-sizing: border-box; padding: 5px 10px; border-radius: 5px; color: #666; line-height: 1.2; }
                .instant-setting-input { border: 1px solid #bbb; box-sizing: border-box; padding: 5px 10px; border-radius: 5px; width: 100px}
                 @keyframes instantAnminate { from { opacity: 1; } 50% { opacity: 0.4 } to { opacity: 0.9; }}
                .link-instanted { animation: instantAnminate 0.6s 1; animation-fill-mode:forwards }
                .link-instanted * { animation: instantAnminate 0.6s 1; animation-fill-mode:forwards }
            </style><style id="_goober"> @keyframes go2264125279{from{transform:scale(0) rotate(45deg);opacity:0;}to{transform:scale(1) rotate(45deg);opacity:1;}}</style><style id="_goober"> @keyframes go3020080000{from{transform:scale(0);opacity:0;}to{transform:scale(1);opacity:1;}}</style><style id="_goober"> @keyframes go463499852{from{transform:scale(0) rotate(90deg);opacity:0;}to{transform:scale(1) rotate(90deg);opacity:1;}}</style><style id="_goober"> @keyframes go1268368563{from{transform:rotate(0deg);}to{transform:rotate(360deg);}}</style><style id="_goober"> @keyframes go1310225428{from{transform:scale(0) rotate(45deg);opacity:0;}to{transform:scale(1) rotate(45deg);opacity:1;}}</style><style id="_goober"> @keyframes go651618207{0%{height:0;width:0;opacity:0;}40%{height:0;width:6px;opacity:1;}100%{opacity:1;height:10px;}}</style><style id="_goober"> @keyframes go901347462{from{transform:scale(0.6);opacity:0.4;}to{transform:scale(1);opacity:1;}}</style><style id="_goober"> .go4109123758{z-index:9999;}.go4109123758 > *{pointer-events:auto;}</style><style type="text/css">.___Latex___1nfc2_1 ._latex_1nfc2_1 {
  font: inherit
}
</style><style id="_goober"> @keyframes go2264125279{from{transform:scale(0) rotate(45deg);opacity:0;}to{transform:scale(1) rotate(45deg);opacity:1;}}</style><style id="_goober"> @keyframes go3020080000{from{transform:scale(0);opacity:0;}to{transform:scale(1);opacity:1;}}</style><style id="_goober"> @keyframes go463499852{from{transform:scale(0) rotate(90deg);opacity:0;}to{transform:scale(1) rotate(90deg);opacity:1;}}</style><style id="_goober"> @keyframes go1268368563{from{transform:rotate(0deg);}to{transform:rotate(360deg);}}</style><style id="_goober"> @keyframes go1310225428{from{transform:scale(0) rotate(45deg);opacity:0;}to{transform:scale(1) rotate(45deg);opacity:1;}}</style><style id="_goober"> @keyframes go651618207{0%{height:0;width:0;opacity:0;}40%{height:0;width:6px;opacity:1;}100%{opacity:1;height:10px;}}</style><style id="_goober"> @keyframes go901347462{from{transform:scale(0.6);opacity:0.4;}to{transform:scale(1);opacity:1;}}</style><style id="_goober"> .go4109123758{z-index:9999;}.go4109123758 > *{pointer-events:auto;}</style><style type="text/css">.___Latex___1nfc2_1 ._latex_1nfc2_1 {
  font: inherit
}
</style><style data-id="immersive-translate-input-injected-css">.immersive-translate-input {
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  z-index: 2147483647;
  display: flex;
  justify-content: center;
  align-items: center;
}

.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}


.immersive-translate-input-loading {
  --loading-color: #f78fb6;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  display: block;
  margin: 12px auto;
  position: relative;
  color: white;
  left: -100px;
  box-sizing: border-box;
  animation: immersiveTranslateShadowRolling 1.5s linear infinite;
}

@keyframes immersiveTranslateShadowRolling {
  0% {
    box-shadow: 0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
  }

  12% {
    box-shadow: 100px 0 var(--loading-color), 0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
  }

  25% {
    box-shadow: 110px 0 var(--loading-color), 100px 0 var(--loading-color), 0px 0 rgba(255, 255, 255, 0), 0px 0 rgba(255, 255, 255, 0);
  }

  36% {
    box-shadow: 120px 0 var(--loading-color), 110px 0 var(--loading-color), 100px 0 var(--loading-color), 0px 0 rgba(255, 255, 255, 0);
  }

  50% {
    box-shadow: 130px 0 var(--loading-color), 120px 0 var(--loading-color), 110px 0 var(--loading-color), 100px 0 var(--loading-color);
  }

  62% {
    box-shadow: 200px 0 rgba(255, 255, 255, 0), 130px 0 var(--loading-color), 120px 0 var(--loading-color), 110px 0 var(--loading-color);
  }

  75% {
    box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0), 130px 0 var(--loading-color), 120px 0 var(--loading-color);
  }

  87% {
    box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0), 130px 0 var(--loading-color);
  }

  100% {
    box-shadow: 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0), 200px 0 rgba(255, 255, 255, 0);
  }
}


.immersive-translate-search-recomend {
  border: 1px solid #dadce0;
  border-radius: 8px;
  padding: 16px;
  margin-bottom: 16px;
  position: relative;
  font-size: 16px;
}

.immersive-translate-search-enhancement-en-title {
  color: #4d5156;
}

/* dark */
@media (prefers-color-scheme: dark) {
  .immersive-translate-search-recomend {
    border: 1px solid #3c4043;
  }

  .immersive-translate-close-action svg {
    fill: #bdc1c6;
  }

  .immersive-translate-search-enhancement-en-title {
    color: #bdc1c6;
  }
}


.immersive-translate-search-settings {
  position: absolute;
  top: 16px;
  right: 16px;
  cursor: pointer;
}

.immersive-translate-search-recomend::before {
  /* content: " "; */
  /* width: 20px; */
  /* height: 20px; */
  /* top: 16px; */
  /* position: absolute; */
  /* background: center / contain url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAxlBMVEUAAADpTInqTIjpSofnSIfqS4nfS4XqS4nqTIjsTYnrTInqTIroS4jvQIDqTIn////+/v7rSYjpTIn8/v7uaZzrTIr9/f3wfansWJL88/b85e73qc39+/v3xNnylrvrVI/98fb62Obva5/8+fr76vH4y9zpSIj74e353Oj1ocTzm77xhK/veKbtYpjsXJTqU47oTInxjrXyh7L99fj40eH2ttH1udD3sc31ssz1rMnykLXucqPtbqD85e/1xdn2u9DzqcXrUY6FaJb8AAAADnRSTlMA34BgIM8Q37/fz7+/EGOHcVQAAAGhSURBVDjLhZPncuowEEZFTW7bXVU7xsYYTO/p7bb3f6lICIOYJOT4h7/VnFmvrBFjrF3/CR/SajBHswafctG0Qg3O8O0Xa8BZ6uw7eLjqr30SofCDVSkemMinfL1ecy20r5ygR5zz3ArcAqJExPTPKhDENEmS30Q9+yo4lEQkqVTiIEAHCT10xWERRdH0Bq0aCOPZNDV3s0xaYce1lHEoDHU8wEh3qRJypNcTAeKUIjgKMeGLDoRCLVLTVf+Ownj8Kk6H9HM6QXPgYjQSB0F00EJEu10ILQrs/QeP77BSSr0MzLOyuJJQbnUoOOIUI/A8EeJk9E4YUHUWiRyTVKGgQUB8/3e/NpdGlfI+FMQyWsCBWyz4A/ZyHXyiiz0Ne5aGZssoxRmcChw8/EFKQ5JwwkUo3FRT5yXS7q+Y/rHDZmFktzpGMvO+5QofA4FPpEmGw+EWRCFvnaof7Zhe8NuYSLR0xErKLThUSs8gnODh87ssy6438yzbLzxl012HS19vfCf3CNhnbWOL1eEsDda+gDPUvri8tSZzNFrwIZf1NmNvqC1I/t8j7nYAAAAASUVORK5CYII='); */
}

.immersive-translate-search-title {}

.immersive-translate-search-title-wrapper {}

.immersive-translate-search-time {
  font-size: 12px;
  margin: 4px 0 24px;
  color: #70757a;
}

.immersive-translate-expand-items {
  display: none;
}

.immersive-translate-search-more {
  margin-top: 16px;
  font-size: 14px;
}

.immersive-translate-modal {
  display: none;
  position: fixed;
  z-index: 2147483647;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgb(0, 0, 0);
  background-color: rgba(0, 0, 0, 0.4);
  font-size: 15px;
}

.immersive-translate-modal-content {
  background-color: #fefefe;
  margin: 10% auto;
  padding: 40px 24px 24px;
  border: 1px solid #888;
  border-radius: 10px;
  width: 80%;
  max-width: 270px;
  font-family: system-ui, -apple-system, "Segoe UI", "Roboto", "Ubuntu",
    "Cantarell", "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
    "Segoe UI Symbol", "Noto Color Emoji";
  position: relative
}

.immersive-translate-modal .immersive-translate-modal-content-in-input {
  max-width: 500px;
}
.immersive-translate-modal-content-in-input .immersive-translate-modal-body {
  text-align: left;
  max-height: unset;
}

.immersive-translate-modal-title {
  text-align: center;
  font-size: 16px;
  font-weight: 700;
  color: #333333;
}

.immersive-translate-modal-body {
  text-align: center;
  font-size: 14px;
  font-weight: 400;
  color: #333333;
  word-break: break-all;
  margin-top: 24px;
}

@media screen and (max-width: 768px) {
  .immersive-translate-modal-body {
    max-height: 250px;
    overflow-y: auto;
  }
}

.immersive-translate-close {
  color: #666666;
  position: absolute;
  right: 16px;
  top: 16px;
  font-size: 20px;
  font-weight: bold;
}

.immersive-translate-close:hover,
.immersive-translate-close:focus {
  color: black;
  text-decoration: none;
  cursor: pointer;
}

.immersive-translate-modal-footer {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 24px;
}

.immersive-translate-btn {
  width: fit-content;
  color: #fff;
  background-color: #ea4c89;
  border: none;
  font-size: 16px;
  margin: 0 8px;
  padding: 9px 30px;
  border-radius: 5px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.immersive-translate-btn:hover {
  background-color: #f082ac;
}

.immersive-translate-cancel-btn {
  /* gray color */
  background-color: rgb(89, 107, 120);
}


.immersive-translate-cancel-btn:hover {
  background-color: hsl(205, 20%, 32%);
}

.immersive-translate-action-btn {
  background-color: transparent;
  color: #EA4C89;
  border: 1px solid #EA4C89
}

.immersive-translate-btn svg {
  margin-right: 5px;
}

.immersive-translate-link {
  cursor: pointer;
  user-select: none;
  -webkit-user-drag: none;
  text-decoration: none;
  color: #007bff;
  -webkit-tap-highlight-color: rgba(0, 0, 0, .1);
}

.immersive-translate-primary-link {
  cursor: pointer;
  user-select: none;
  -webkit-user-drag: none;
  text-decoration: none;
  color: #ea4c89;
  -webkit-tap-highlight-color: rgba(0, 0, 0, .1);
}

.immersive-translate-modal input[type="radio"] {
  margin: 0 6px;
  cursor: pointer;
}

.immersive-translate-modal label {
  cursor: pointer;
}

.immersive-translate-close-action {
  position: absolute;
  top: 2px;
  right: 0px;
  cursor: pointer;
}</style><style data-id="immersive-translate-default-injected-css">:root {
  --immersive-translate-theme-underline-borderColor: #72ece9;
  --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
  --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
  --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
  --immersive-translate-theme-highlight-backgroundColor: #ffff00;
  --immersive-translate-theme-dashed-borderColor: #59c1bd;
  --immersive-translate-theme-blockquote-borderColor: #cc3355;
  --immersive-translate-theme-thinDashed-borderColor: #ff374f;
  --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
  --immersive-translate-theme-dashedBorder-borderRadius: 0;
  --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
  --immersive-translate-theme-solidBorder-borderRadius: 0;
  --immersive-translate-theme-dotted-borderColor: #94a3b8;
  --immersive-translate-theme-wavy-borderColor: #72ece9;
  --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
  --immersive-translate-theme-grey-textColor: #2f4f4f;
  --immersive-translate-theme-marker-backgroundColor: #fbda41;
  --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
  --immersive-translate-theme-marker2-backgroundColor: #ffff00;
  --immersive-translate-theme-opacity-opacity: 10;
}

.immersive-translate-target-translation-pre-whitespace {
  white-space: pre-wrap !important;
}

.immersive-translate-pdf-target-container {
  position: absolute;
  background-color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
    sans-serif;
  top: 0;
  width: 600px;
  height: 100%;
  z-index: 2;
  line-height: 1.3;
  font-size: 16px;
}
.immersive-translate-target-wrapper[dir='rtl'] {
  text-align: right;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
  color: rgb(0, 0, 0);
  white-space: normal;
  position: absolute;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
  color: inherit;
  white-space: inherit;
  position: unset;
}

.immersive-translate-state-dual>br {
  display: none;
}

.immersive-translate-target-translation-block-wrapper {
  margin: 8px 0 !important;
  display: inline-block;
}

.immersive-translate-target-translation-pdf-block-wrapper {
  margin: 0 !important;
  display: block;
}

.immersive-translate-target-translation-theme-grey-inner {
  color: var(--immersive-translate-theme-grey-textColor);
}


.immersive-translate-target-translation-theme-underline-inner {
  border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
}

.immersive-translate-target-translation-theme-nativeUnderline-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
}

.immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-theme-nativeDashed-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
  text-decoration-style: dashed !important;
}

.immersive-translate-target-translation-theme-thinDashed-inner {
  border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
}

.immersive-translate-target-translation-theme-dotted-inner {
  background-image: linear-gradient(to right,
      var(--immersive-translate-theme-dotted-borderColor) 30%,
      rgba(255, 255, 255, 0) 0%);
  background-position: bottom;
  background-size: 5px 1px;
  background-repeat: repeat-x;
  padding-bottom: 3px;
}

.immersive-translate-target-translation-theme-nativeDotted-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
  text-decoration-style: dotted !important;
}

.immersive-translate-target-translation-theme-wavy-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
  text-decoration-style: wavy !important;
}

.immersive-translate-target-translation-theme-dashed-inner {
  background: linear-gradient(to right,
      var(--immersive-translate-theme-dashed-borderColor) 0%,
      var(--immersive-translate-theme-dashed-borderColor) 50%,
      transparent 50%,
      transparent 100%) repeat-x left bottom;
  background-size: 8px 2px;
  padding-bottom: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
  content: "";
  display: block;
  max-width: 80px;
  width: 10%;
  border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  padding-top: 8px;
}

.immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
  content: "";
  border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  max-height: 16px;
  height: 16px;
  padding-left: 8px;
}

.immersive-translate-target-translation-theme-highlight-inner {
  background: var(--immersive-translate-theme-highlight-backgroundColor);
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-block-wrapper-theme-marker {
  line-height: 1.5em;
}

.immersive-translate-target-translation-theme-marker2-inner {
  font-weight: bold;
  text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
    16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
    2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
    -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
}

.immersive-translate-target-translation-theme-marker-inner {
  /* TODO: add more texture */
  background: linear-gradient(to right,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-theme-weakening {
  opacity: 0.618 !important;
}

.immersive-translate-target-translation-theme-italic {
  font-style: italic !important;
}

.immersive-translate-target-translation-theme-bold {
  font-weight: bold !important;
}

.immersive-translate-target-translation-block-wrapper-theme-paper {
  margin: 8px 0;
  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
  padding: 16px 32px;
  display: block;
}

.immersive-translate-target-translation-block-wrapper-theme-blockquote {
  border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
  padding-left: 12px !important;
  margin-top: 4px;
  margin-bottom: 4px;
  padding-top: 4px;
  padding-bottom: 4px;
  display: block;
}

.immersive-translate-target-translation-theme-mask-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
  filter: none !important;
}

[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}


/* opacity theme start */

.immersive-translate-target-translation-theme-opacity-inner {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: none !important;
}


.immersive-translate-target-translation-theme-mask-inner:hover {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
  filter: none !important;
}


[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
  filter: none !important;
}

/* opacity theme end */

/* vertical css , please remain it in the last one. */
.immersive-translate-target-translation-vertical-block-wrapper {
  margin: 0px 8px !important;
}

.immersive-translate-text {
  font-size: 15px !important;
}

.immersive-translate-error-toast {
  position: fixed;
  top: 5%;
  z-index: 99999999;
  left: 0;
  right: 0;
  margin: auto;
  max-width: 300px;
  padding: 16px;
  border-radius: 12px;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}

@media all and (min-width: 750px) {
  .immersive-translate-error-toast {
    max-width: 400px;
  }
}


.immersive-translate-clickable-button {
  cursor: pointer;
}

.immersive-translate-help-button {
  cursor: pointer;
}

.immersive-translate-loading-text:before {
  content: "...";
}


/* dark mode for loading */

@media only screen and (prefers-color-scheme: dark) {
  .immersive-translate-loading {
    border: 2px rgba(255, 255, 255, 0.25) solid !important;
    border-top: 2px rgba(255, 255, 255, 1) solid !important;
  }
}

.immersive-translate-error-wrapper {
  position: relative;
  display: inline-flex;
  padding: 6px;
  margin: 0 12px;
  white-space: nowrap;
  font-size: 0.9em;
}
[lang="zh-CN"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}
[lang="zh-TW"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}


.immersive-translate-tooltip {
  position: relative;
  display: inline-flex;
  /* little indicater to indicate it's hoverable */
}

.immersive-translate-tooltip-content {
  /* here's the magic */
  position: absolute;
  z-index: 100000000000;

  left: 50%;
  bottom: 0;
  transform: translate(-50%, 110%);
  line-height: 1;
  /* and add a small left margin */

  /* basic styles */
  width: max-content;
  max-width: 250px;
  word-wrap: break-word;
  white-space: pre-line;
  padding: 10px;
  border-radius: 10px;
  background: #000C;
  color: #fff;
  text-align: center;
  font-size: 14px;
  display: none;
  /* hide by default */
}

.immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip-content-table {
  left: unset !important;
  bottom: unset !important;
  transform: translate(-10%, 50%) !important;
}


.immersive-translate-tooltip:hover:before {
  display: block;
}



.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}
</style><style data-id="immersive-translate-user-custom-style">:root {

.immersive-translate-target-inner { font-family: inherit; }
}
</style><style data-id="immersive-translate-dynamic-injected-css">.immersive-translate-target-wrapper[dir='rtl'] {text-align: right;}
.immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {display:block;}
</style></head><body data-new-gr-c-s-check-loaded="8.912.0" data-gr-ext-installed="" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div xml:lang="en" class="book" lang="en" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h1 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="idm1" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>The Buildroot user manual<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 用户手册</font></font></font></h1></div></div><hr></div><div class="toc" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Table of Contents<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">目录</font></font></font></strong></p><dl class="toc" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="preface" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#idm4" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="part" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_getting_started" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">I. Getting started<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">I. 入门指南</font></font></font></a></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_about_buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">1. About Buildroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">1. 关于 Buildroot</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#requirement" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">2. System requirements<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">2. 系统要求</font></font></font></a></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#requirement-mandatory" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">2.1. Mandatory packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">2.1. 必备软件包</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#requirement-optional" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">2.2. Optional packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">2.2. 可选软件包</font></font></font></a></span></dt></dl></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#getting-buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">3. Getting Buildroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">3. 获取 Buildroot</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_buildroot_quick_start" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">4. Buildroot quick start<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">4. Buildroot 快速入门</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#community-resources" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">5. Community resources<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">5. 社区资源</font></font></font></a></span></dt></dl></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="part" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_user_guide" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">II. User guide<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">II. 用户指南</font></font></font></a></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#configure" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">6. Buildroot configuration<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">6. 构建根配置</font></font></font></a></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_cross_compilation_toolchain" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">6.1. Cross-compilation toolchain<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">6.1. 交叉编译工具链</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_dev_management" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">6.2. /dev management<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">6.2. /dev 管理</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#init-system" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">6.3. init system<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">6.3. 初始化系统</font></font></font></a></span></dt></dl></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_configuration_of_other_components" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">7. Configuration of other components<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">7. 配置其他组件</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_general_buildroot_usage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">8. General Buildroot usage<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8. 通用 Buildroot 使用</font></font></font></a></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#make-tips" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">8.1. <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</em></span> tips<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.1. 制作提示</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#full-rebuild" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">8.2. Understanding when a full rebuild is necessary<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.2. 了解何时需要完全重建</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#rebuild-pkg" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">8.3. Understanding how to rebuild packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.3. 了解如何重建软件包</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_offline_builds" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">8.4. Offline builds<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.4. 离线构建</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_building_out_of_tree" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">8.5. Building out-of-tree<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.5. 构建非树外</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#env-vars" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">8.6. Environment variables<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.6. 环境变量</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_dealing_efficiently_with_filesystem_images" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">8.7. Dealing efficiently with filesystem images<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.7. 高效处理文件系统映像</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_details_about_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">8.8. Details about packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.8. 关于软件包的详细信息</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_graphing_the_dependencies_between_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">8.9. Graphing the dependencies between packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.9. 绘制软件包之间的依赖关系</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_graphing_the_build_duration" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">8.10. Graphing the build duration<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.10. 绘制构建持续时间图</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#graph-size" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">8.11. Graphing the filesystem size contribution of packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.11. 绘制软件包文件系统大小贡献图</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#top-level-parallel-build" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">8.12. Top-level parallel build<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.12. 顶层并行构建</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_advanced_usage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">8.13. Advanced usage<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.13. 高级用法</font></font></font></a></span></dt></dl></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#customize" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">9. Project-specific customization<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9. 项目特定定制</font></font></font></a></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#customize-dir-structure" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">9.1. Recommended directory structure<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.1. 推荐的目录结构</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#outside-br-custom" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">9.2. Keeping customizations outside of Buildroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.2. 将自定义内容保留在 Buildroot 之外</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#customize-store-buildroot-config" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">9.3. Storing the Buildroot configuration<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.3. 存储 Buildroot 配置</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#customize-store-package-config" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">9.4. Storing the configuration of other components<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.4. 存储其他组件的配置</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#rootfs-custom" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">9.5. Customizing the generated target filesystem<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.5. 自定义生成的目标文件系统</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#customize-users" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">9.6. Adding custom user accounts<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.6. 添加自定义用户帐户</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_customization_emphasis_after_emphasis_the_images_have_been_created" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">9.7. Customization <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">after</em></span> the images have been created<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.7. 在图像创建后进行自定义</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_adding_project_specific_patches_and_hashes" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">9.8. Adding project-specific patches and hashes<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.8. 添加项目特定的补丁和哈希值</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#customize-packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">9.9. Adding project-specific packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.9. 添加项目特定的软件包</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_quick_guide_to_storing_your_project_specific_customizations" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">9.10. Quick guide to storing your project-specific customizations<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.10. 存储项目特定定制指南</font></font></font></a></span></dt></dl></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#integration" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">10. Integration topics<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">10. 集成主题</font></font></font></a></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#integration-systemd" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">10.1. Systemd</a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#selinux" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">10.2. Using SELinux in Buildroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">10.2. 在 Buildroot 中使用 SELinux</font></font></font></a></span></dt></dl></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_frequently_asked_questions_amp_troubleshooting" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">11. Frequently Asked Questions &amp; Troubleshooting<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">11. 常见问题和故障排除</font></font></font></a></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#faq-boot-hang-after-starting" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">11.1. The boot hangs after <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Starting network…</em></span><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">11.1. 启动网络后卡住</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#faq-no-compiler-on-target" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">11.2. Why is there no compiler on the target?<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">11.2. 为什么目标设备上没有编译器？</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#faq-no-dev-files-on-target" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">11.3. Why are there no development files on the target?<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">11.3. 为什么目标上没有开发文件？</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#faq-no-doc-on-target" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">11.4. Why is there no documentation on the target?<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">11.4. 为什么目标上没有文档？</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#faq-why-not-visible-package" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">11.5. Why are some packages not visible in the Buildroot config menu?<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">11.5. 为什么有些软件包在 Buildroot 配置菜单中不可见？</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#faq-why-not-use-target-as-chroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">11.6. Why not use the target directory as a chroot directory?<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">11.6. 为什么不将目标目录用作 chroot 目录？</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#faq-no-binary-packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">11.7. Why doesn’t Buildroot generate binary packages (.deb, .ipkg…)?<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">11.7. 为什么 Buildroot 不生成二进制软件包（.deb，.ipkg…）？</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#faq-speeding-up-build" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">11.8. How to speed-up the build process?<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">11.8. 如何加快构建过程？</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#faq-2038" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">11.9. How does Buildroot support Y2038?<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">11.9. Buildroot 如何支持 Y2038？</font></font></font></a></span></dt></dl></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_known_issues" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">12. Known issues<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">12. 已知问题</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#legal-info" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">13. Legal notice and licensing<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">13. 法律声明和许可</font></font></font></a></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_complying_with_open_source_licenses" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">13.1. Complying with open source licenses<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">13.1. 遵守开源许可证</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#legal-info-buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">13.2. Complying with the Buildroot license<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">13.2. 遵守 Buildroot 许可证</font></font></font></a></span></dt></dl></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_beyond_buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">14. Beyond Buildroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">14. 超越 Buildroot</font></font></font></a></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_boot_the_generated_images" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">14.1. Boot the generated images<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">14.1. 启动生成的镜像</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_chroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">14.2. Chroot</a></span></dt></dl></dd></dl></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="part" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_developer_guide" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">III. Developer guide<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">III. 开发人员指南</font></font></font></a></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_how_buildroot_works" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">15. How Buildroot works<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">15. Buildroot 的工作原理</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_coding_style" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">16. Coding style<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">16. 编码风格</font></font></font></a></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#writing-rules-config-in" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">16.1. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> file<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">16.1. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#writing-rules-mk" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">16.2. The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">16.2. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#writing-genimage-cfg" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">16.3. The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">genimage.cfg</code> file<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">16.3. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">genimage.cfg</code> 文件</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_the_documentation" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">16.4. The documentation<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">16.4. 文档</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_support_scripts" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">16.5. Support scripts<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">16.5. 支持脚本</font></font></font></a></span></dt></dl></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#adding-board-support" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">17. Adding support for a particular board<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">17. 为特定板添加支持</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#adding-packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18. Adding new packages to Buildroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18. 向 Buildroot 添加新软件包</font></font></font></a></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_package_directory" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.1. Package directory<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.1. 包目录</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_config_files" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.2. Config files<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.2. 配置文件</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_the_literal_mk_literal_file" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.3. The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.3. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#adding-packages-hash" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.4. The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> file<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.4. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> 文件</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#adding-packages-start-script" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.5. The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SNNfoo</code> start script<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.5. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SNNfoo</code> 启动脚本</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_infrastructure_for_packages_with_specific_build_systems" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.6. Infrastructure for packages with specific build systems<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.6. 具有特定构建系统的软件包基础设施</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_infrastructure_for_autotools_based_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.7. Infrastructure for autotools-based packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.7. 基于 autotools 的软件包基础设施</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_infrastructure_for_cmake_based_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.8. Infrastructure for CMake-based packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.8. 基于 CMake 的软件包基础设施</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_infrastructure_for_python_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.9. Infrastructure for Python packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.9. Python 软件包基础设施</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_infrastructure_for_luarocks_based_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.10. Infrastructure for LuaRocks-based packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.10. 基于 LuaRocks 的软件包基础设施</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_infrastructure_for_perl_cpan_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.11. Infrastructure for Perl/CPAN packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.11. 基于 Perl/CPAN 的软件包基础设施</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_infrastructure_for_virtual_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.12. Infrastructure for virtual packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.12. 虚拟软件包基础设施</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_infrastructure_for_packages_using_kconfig_for_configuration_files" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.13. Infrastructure for packages using kconfig for configuration files<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 kconfig 进行配置文件的软件包基础设施</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_infrastructure_for_rebar_based_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.14. Infrastructure for rebar-based packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">基于 rebar 的软件包基础设施</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_infrastructure_for_waf_based_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.15. Infrastructure for Waf-based packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">基于 Waf 的软件包基础设施</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_infrastructure_for_meson_based_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.16. Infrastructure for Meson-based packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.16. 基于 Meson 的软件包基础设施</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_infrastructure_for_cargo_based_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.17. Infrastructure for Cargo-based packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.17. 基于货物的软件包基础设施</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_infrastructure_for_go_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.18. Infrastructure for Go packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.18. Go 软件包基础设施</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_infrastructure_for_qmake_based_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.19. Infrastructure for QMake-based packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.19. 基于 QMake 的软件包基础设施</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_infrastructure_for_packages_building_kernel_modules" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.20. Infrastructure for packages building kernel modules<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.20. 用于构建内核模块的软件包基础设施</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_infrastructure_for_asciidoc_documents" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.21. Infrastructure for asciidoc documents<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.21. AsciiDoc 文档的基础设施</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#linux-kernel-specific-infra" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.22. Infrastructure specific to the Linux kernel package<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.22. 专用于 Linux 内核软件包的基础设施</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#hooks" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.23. Hooks available in the various build steps<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.23. 在各个构建步骤中可用的钩子</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_gettext_integration_and_interaction_with_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.24. Gettext integration and interaction with packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.24. Gettext 集成和与软件包的交互</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_tips_and_tricks" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.25. Tips and tricks<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.25. 提示和技巧</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_conclusion" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.26. Conclusion<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.26. 结论</font></font></font></a></span></dt></dl></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#patch-policy" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">19. Patching a package<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">19. 补丁软件包</font></font></font></a></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_providing_patches" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">19.1. Providing patches<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">19.1. 提供补丁</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#patch-apply-order" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">19.2. How patches are applied<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">19.2. 补丁如何应用</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_format_and_licensing_of_the_package_patches" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">19.3. Format and licensing of the package patches<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">19.3. 软件包补丁的格式和许可</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_additional_patch_documentation" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">19.4. Additional patch documentation<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">19.4. 附加补丁文档</font></font></font></a></span></dt></dl></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#download-infra" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">20. Download infrastructure<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">20. 下载基础设施</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#debugging-buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">21. Debugging Buildroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">21. 调试 Buildroot</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_contributing_to_buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">22. Contributing to Buildroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22. 参与 Buildroot 的贡献</font></font></font></a></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_reproducing_analyzing_and_fixing_bugs" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">22.1. Reproducing, analyzing and fixing bugs<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.1. 复制、分析和修复错误</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_analyzing_and_fixing_autobuild_failures" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">22.2. Analyzing and fixing autobuild failures<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.2. 分析和修复自动构建失败</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_reviewing_and_testing_patches" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">22.3. Reviewing and testing patches<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.3. 审查和测试补丁</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_work_on_items_from_the_todo_list" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">22.4. Work on items from the TODO list<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.4. 从 TODO 列表中处理项目</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#submitting-patches" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">22.5. Submitting patches<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.5. 提交补丁</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#reporting-bugs" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">22.6. Reporting issues/bugs or getting help<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.6. 报告问题/错误或获取帮助</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_using_the_runtime_tests_framework" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">22.7. Using the runtime tests framework<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.7. 使用运行时测试框架</font></font></font></a></span></dt></dl></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#DEVELOPERS" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">23. DEVELOPERS file and get-developers<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">23. DEVELOPERS 文件和 get-developers</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#RELENG" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">24. Release Engineering<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">24. 发布工程</font></font></font></a></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_releases" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">24.1. Releases<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">24.1. 发布</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_development" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">24.2. Development<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">24.2. 开发</font></font></font></a></span></dt></dl></dd></dl></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="part" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_appendix" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">IV. Appendix<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">IV. 附录</font></font></font></a></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#makedev-syntax" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">25. Makedev syntax documentation<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">25. Makedev 语法文档</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#makeuser-syntax" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">26. Makeusers syntax documentation<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">26. Makeusers 语法文档</font></font></font></a></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#_caveat_with_automatic_uids_and_gids" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">26.1. Caveat with automatic UIDs and GIDs<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">26.1. 自动 UID 和 GID 的注意事项</font></font></font></a></span></dt></dl></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#migrating-from-ol-versions" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">27. Migrating from older Buildroot versions<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">27. 从旧的 Buildroot 版本迁移</font></font></font></a></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#migrating-approach" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">27.1. General approach<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">27.1. 一般方法</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#br2-external-converting" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">27.2. Migrating to 2016.11<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">27.2. 迁移到 2016.11</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#migrating-host-usr" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">27.3. Migrating to 2017.08<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">27.3. 迁移到 2017.08</font></font></font></a></span></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a href="#migrating-svn-externals" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">27.4. Migrating to 2023.11<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">27.4. 迁移到 2023.11</font></font></font></a></span></dt></dl></dd></dl></dd></dl></div><div class="list-of-examples" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">List of Examples<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">例子清单</font></font></font></strong></p><dl data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.1. <a href="#idm3369" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config script: <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">divine</em></span> package</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.1. 配置脚本：divine 软件包</font></font></font></dt><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">18.2. <a href="#idm3376" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config script: <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">imagemagick</em></span> package:</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.2. 配置脚本：imagemagick 软件包：</font></font></font></dt></dl></div><div class="preface" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage"><div><div><h1 class="title"><a id="idm4"></a></h1></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot ${BR2_VERSION%%-git*} manual generated on 2024-05-07
08:28:19 UTC from git revision 0155095c55<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot ${BR2_VERSION%%-git*} 手册生成于 2024-05-07 08:28:19 UTC，来自 git 修订版本 0155095c55</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The Buildroot manual is written by the Buildroot developers.
It is licensed under the GNU General Public License, version 2. Refer to the
<a class="ulink" href="http://git.buildroot.org/buildroot/tree/COPYING?id=0155095c558e915d6c5261a4d8cb4ec9ee9953a7" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">COPYING</a>
file in the Buildroot sources for the full text of this license.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 手册是由 Buildroot 开发人员编写的。它在 GNU 通用公共许可证第 2 版下许可。有关此许可证的完整文本，请参阅 Buildroot 源代码中的 COPYING 文件。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Copyright © The Buildroot developers &lt;<a class="ulink" href="mailto:buildroot@buildroot.org" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">buildroot@buildroot.org</a>&gt;<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">版权所有 © Buildroot 开发人员 &lt;buildroot@buildroot.org&gt;</font></font></font></p><div class="informalfigure" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="mediaobject" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><img src="logo.png" alt="logo.png" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></div></div></div><div class="part" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h1 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_getting_started" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Part&nbsp;I.&nbsp;Getting started<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第一部分. 入门</font></font></font></h1></div></div></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_about_buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;1.&nbsp;About Buildroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 1 章 关于 Buildroot</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot is a tool that simplifies and automates the process of
building a complete Linux system for an embedded system, using
cross-compilation.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 是一个工具，它简化和自动化了为嵌入式系统构建完整 Linux 系统的过程，使用交叉编译。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In order to achieve this, Buildroot is able to generate a
cross-compilation toolchain, a root filesystem, a Linux kernel image
and a bootloader for your target. Buildroot can be used for any
combination of these options, independently (you can for example use
an existing cross-compilation toolchain, and build only your root
filesystem with Buildroot).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为
了实现这一目标，Buildroot 能够为您的目标生成一个交叉编译工具链、一个根文件系统、一个 Linux 
内核映像和一个引导加载程序。Buildroot 可以独立地用于这些选项的任何组合（例如，您可以使用现有的交叉编译工具链，并且仅使用 
Buildroot 构建您的根文件系统）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot is useful mainly for people working with embedded systems.
Embedded systems often use processors that are not the regular x86
processors everyone is used to having in his PC. They can be PowerPC
processors, MIPS processors, ARM processors, etc.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 主要用于与嵌入式系统工作的人。嵌入式系统通常使用不是每个人都习惯在个人电脑上拥有的常规 x86 处理器。它们可以是 PowerPC 处理器、MIPS 处理器、ARM 处理器等。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot supports numerous processors and their variants; it also
comes with default configurations for several boards available
off-the-shelf. Besides this, a number of third-party projects are based on,
or develop their BSP <a href="#ftn.idm25" class="footnote" id="idm25" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><sup class="footnote" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[1]</sup></a> or
SDK <a href="#ftn.idm27" class="footnote" id="idm27" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><sup class="footnote" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[2]</sup></a> on top of Buildroot.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 支持众多处理器及其变种；它还配备了几个现成的板卡的默认配置。此外，许多第三方项目都基于 Buildroot，或在 Buildroot 之上开发他们的 BSP <sup class="footnote" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[1]</sup> 或 SDK <sup class="footnote" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[2]</sup> 。</font></font></font></p><div class="footnotes" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><br data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><hr style="width:100; text-align:left;margin-left: 0"><div id="ftn.idm25" class="footnote" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a href="#idm25" class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><sup class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[1] </sup></a>BSP: Board Support Package<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <sup class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[1] </sup> BSP：板卡支持包</font></font></font></p></div><div id="ftn.idm27" class="footnote" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a href="#idm27" class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><sup class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[2] </sup></a>SDK: Software Development Kit<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <sup class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[2] </sup> SDK：软件开发工具包</font></font></font></p></div></div></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="requirement" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;2.&nbsp;System requirements<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 2 章 系统要求</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot is designed to run on Linux systems.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 设计用于在 Linux 系统上运行。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">While Buildroot itself will build most host packages it needs for the
compilation, certain standard Linux utilities are expected to be
already installed on the host system. Below you will find an overview of
the mandatory and optional packages (note that package names may vary
between distributions).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">虽然 Buildroot 本身将构建大多数编译所需的主机软件包，但是预期某些标准的 Linux 实用工具已经安装在主机系统上。下面您将找到强制和可选软件包的概述（请注意软件包名称在不同发行版之间可能会有所不同）。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="requirement-mandatory" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>2.1.&nbsp;Mandatory packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">2.1. 必备软件包</font></font></font></h2></div></div></div><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Build tools:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">构建工具:</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">which</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sed</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> (version 3.81 or any later)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> （版本 3.81 或更高版本）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">binutils</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">build-essential</code> (only for Debian based systems)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">build-essential</code> （仅适用于基于 Debian 的系统）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">diffutils</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gcc</code> (version 4.8 or any later)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gcc</code> （版本 4.8 或更高版本）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">g++</code> (version 4.8 or any later)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">g++</code> （版本 4.8 或更高版本）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bash</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">patch</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gzip</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bzip2</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl</code> (version 5.8.7 or any later)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl</code> （版本 5.8.7 或更高版本）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">tar</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cpio</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">unzip</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rsync</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">file</code> (must be in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/usr/bin/file</code>)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">file</code> （必须在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/usr/bin/file</code> 内）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bc</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">findutils</code>
</li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Source fetching tools:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">源获取工具：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">wget</code>
</li></ul></div></li></ul></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="requirement-optional" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>2.2.&nbsp;Optional packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">2.2. 可选软件包</font></font></font></h2></div></div></div><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Recommended dependencies:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">推荐依赖项:</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Some features or utilities in Buildroot, like the legal-info, or the
graph generation tools, have additional dependencies. Although they
are not mandatory for a simple build, they are still highly recommended:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 中的一些功能或实用工具，如 legal-info 或图形生成工具，具有额外的依赖关系。虽然它们对于简单构建来说并非强制性的，但仍然强烈建议：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python</code> (version 2.7 or any later)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python</code> （版本 2.7 或更新版本）</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Configuration interface dependencies:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">配置界面依赖项：</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For these libraries, you need to install both runtime and development
data, which in many distributions are packaged separately. The
development packages typically have a <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-dev</em></span> or <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-devel</em></span> suffix.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于这些库，您需要安装运行时和开发数据，这在许多发行版中通常是分开打包的。开发包通常具有-dev 或-devel 后缀。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ncurses5</code> to use the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">menuconfig</em></span> interface
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ncurses5</code> 使用 menuconfig 界面</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">qt5</code> to use the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">xconfig</em></span> interface
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">qt5</code> 使用 xconfig 界面</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">glib2</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gtk2</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">glade2</code> to use the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gconfig</em></span> interface
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">glib2</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gtk2</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">glade2</code> 使用 gconfig 接口</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Source fetching tools:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">源码获取工具：</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In the official tree, most of the package sources are retrieved using
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">wget</code> from <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ftp</em></span>, <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">http</em></span> or <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">https</em></span> locations. A few packages are only
available through a version control system. Moreover, Buildroot is
capable of downloading sources via other tools, like <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">scp</code>
(refer to <a class="xref" href="#download-infra" title="Chapter&nbsp;20.&nbsp;Download infrastructure" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Chapter&nbsp;20, <em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Download infrastructure</em></a> for more details). If you enable
packages using any of these methods, you will need to install the
corresponding tool on the host system:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在官方树中，大多数软件包源码是通过 ftp、http 或 https 位置使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">wget</code> 检索的。少数软件包只能通过版本控制系统获得。此外，Buildroot 能够通过其他工具（如 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">scp</code> ）下载源码（详细信息请参阅第 20 章“下载基础设施”）。如果您使用这些方法启用软件包，则需要在主机系统上安装相应的工具：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bazaar</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cvs</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mercurial</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">scp</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sftp</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">subversion</code>
</li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Java-related packages, if the Java Classpath needs to be built for
  the target system:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果目标系统需要构建 Java Classpath，则与 Java 相关的软件包：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">javac</code> compiler
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">javac</code> 编译器</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">jar</code> tool
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">jar</code> 工具</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Documentation generation tools:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">文档生成工具：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">asciidoc</code>, version 8.6.3 or higher
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">asciidoc</code> ，版本 8.6.3 或更高版本</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">w3m</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python</code> with the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">argparse</code> module (automatically present in 2.7+ and 3.2+)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python</code> 与 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">argparse</code> 模块（自动包含在 2.7+和 3.2+中）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dblatex</code> (required for the pdf manual only)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dblatex</code> （仅适用于 PDF 手册）</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Graph generation tools:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">图形生成工具：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">graphviz</code> to use <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">graph-depends</em></span> and <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkg&gt;-graph-depends</em></span><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">graphviz</code> 用于使用图形依赖项和 -图形依赖项</font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-matplotlib</code> to use <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">graph-build</em></span><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-matplotlib</code> 使用图形构建</font></font></font>
</li></ul></div></li></ul></div></div></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="getting-buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;3.&nbsp;Getting Buildroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 3 章 获取 Buildroot</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot releases are made every 3 months, in February, May, August and
November. Release numbers are in the format YYYY.MM, so for example
2013.02, 2014.08.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 每 3 个月发布一次版本，分别在 2 月、5 月、8 月和 11 月。版本号的格式为 YYYY.MM，例如 2013.02，2014.08。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Release tarballs are available at <a class="ulink" href="http://buildroot.org/downloads/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">http://buildroot.org/downloads/</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">发行版 tar 包可在 http://buildroot.org/downloads/获取。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For your convenience, a <a class="ulink" href="https://www.vagrantup.com/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Vagrantfile</a> is
available in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">support/misc/Vagrantfile</code> in the Buildroot source tree
to quickly set up a virtual machine with the needed dependencies to
get started.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为方便起见，在 Buildroot 源代码树中提供了一个 Vagrantfile，可快速设置一个带有所需依赖项的虚拟机，以便快速开始。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you want to setup an isolated buildroot environment on Linux or Mac
Os X, paste this line onto your terminal:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您想在 Linux 或 Mac Os X 上设置一个独立的 buildroot 环境，请将此行粘贴到您的终端上：</font></font></font></p><pre class="screen">curl -O https://buildroot.org/downloads/Vagrantfile; vagrant up</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you are on Windows, paste this into your powershell:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您使用的是 Windows，请将此内容粘贴到您的 PowerShell 中：</font></font></font></p><pre class="screen">(new-object System.Net.WebClient).DownloadFile(
"https://buildroot.org/downloads/Vagrantfile","Vagrantfile");
vagrant up</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you want to follow development, you can use the daily snapshots or
make a clone of the Git repository. Refer to the
<a class="ulink" href="http://buildroot.org/download" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Download page</a> of the Buildroot website
for more details.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您想要跟踪开发进展，您可以使用每日快照或克隆 Git 存储库。有关更多详细信息，请参阅 Buildroot 网站的下载页面。</font></font></font></p></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_buildroot_quick_start" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;4.&nbsp;Buildroot quick start<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 4 章 Buildroot 快速入门</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Important</strong></span>: you can and should <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">build everything as a normal user</strong></span>. There
is no need to be root to configure and use Buildroot. By running all
commands as a regular user, you protect your system against packages
behaving badly during compilation and installation.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">重要提示：您可以并且应该以普通用户的身份构建所有内容。在配置和使用 Buildroot 时，无需使用 root 权限。通过以普通用户身份运行所有命令，可以保护系统免受在编译和安装过程中表现不佳的软件包的影响。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The first step when using Buildroot is to create a configuration.
Buildroot has a nice configuration tool similar to the one you can
find in the <a class="ulink" href="http://www.kernel.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Linux kernel</a> or in
<a class="ulink" href="http://www.busybox.net/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BusyBox</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 Buildroot 的第一步是创建配置。Buildroot 有一个很好的配置工具，类似于 Linux 内核或 BusyBox 中的配置工具。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">From the buildroot directory, run<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">从 buildroot 目录中运行</font></font></font></p><pre class="screen"> $ make menuconfig</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">for the original curses-based configurator, or<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">用于原始基于 curses 的配置器，或</font></font></font></p><pre class="screen"> $ make nconfig</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">for the new curses-based configurator, or<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">用于新的基于 curses 的配置器，或</font></font></font></p><pre class="screen"> $ make xconfig</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">for the Qt-based configurator, or<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">用于基于 Qt 的配置器，或</font></font></font></p><pre class="screen"> $ make gconfig</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">for the GTK-based configurator.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">用于基于 GTK 的配置器。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">All of these "make" commands will need to build a configuration
utility (including the interface), so you may need to install
"development" packages for relevant libraries used by the
configuration utilities. Refer to <a class="xref" href="#requirement" title="Chapter&nbsp;2.&nbsp;System requirements" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Chapter&nbsp;2, <em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">System requirements</em></a> for more details,
specifically the <a class="link" href="#requirement-optional" title="2.2.&nbsp;Optional packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">optional requirements</a>
to get the dependencies of your favorite interface.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">所有这些“make”命令都需要构建一个配置实用程序（包括界面），因此您可能需要安装与配置实用程序使用的相关库的“开发”软件包。有关更多详细信息，请参阅第 2 章“系统要求”，特别是有关获取您喜爱的界面的依赖项的可选要求。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For each menu entry in the configuration tool, you can find associated
help that describes the purpose of the entry. Refer to <a class="xref" href="#configure" title="Chapter&nbsp;6.&nbsp;Buildroot configuration" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Chapter&nbsp;6, <em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Buildroot configuration</em></a>
for details on some specific configuration aspects.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于配置工具中的每个菜单条目，您可以找到描述条目目的的相关帮助。有关一些特定配置方面的详细信息，请参阅第 6 章“Buildroot 配置”。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Once everything is configured, the configuration tool generates a
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> file that contains the entire configuration. This file will be
read by the top-level Makefile.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一旦一切都配置好了，配置工具将生成一个包含整个配置的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> 文件。此文件将由顶层 Makefile 读取。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To start the build process, simply run:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要开始构建过程，只需运行：</font></font></font></p><pre class="screen"> $ make</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">By default, Buildroot does not support top-level parallel build, so
running <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make -jN</code> is not necessary. There is however experimental
support for top-level parallel build, see
<a class="xref" href="#top-level-parallel-build" title="8.12.&nbsp;Top-level parallel build" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;8.12, “Top-level parallel build”</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">默认情况下，Buildroot 不支持顶层并行构建，因此运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make -jN</code> 是不必要的。但是，顶层并行构建有实验性支持，请参见第 8.12 节“顶层并行构建”。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> command will generally perform the following steps:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> 命令通常会执行以下步骤：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
download source files (as required);
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">下载源文件（如有需要）;</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
configure, build and install the cross-compilation toolchain, or
  simply import an external toolchain;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">配置，构建和安装交叉编译工具链，或者简单地导入外部工具链;</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
configure, build and install selected target packages;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">配置，构建和安装所选目标软件包;</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
build a kernel image, if selected;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">构建内核映像，如果选择的话;</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
build a bootloader image, if selected;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">构建引导加载程序映像，如果选择的话;</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
create a root filesystem in selected formats.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在选定的格式中创建根文件系统。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot output is stored in a single directory, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/</code>.
This directory contains several subdirectories:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 输出存储在一个单独的目录中， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/</code> 。该目录包含几个子目录：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">images/</code> where all the images (kernel image, bootloader and root
  filesystem images) are stored. These are the files you need to put
  on your target system.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">images/</code> ，其中存储了所有的镜像（内核镜像、引导加载程序和根文件系统镜像）。这些是您需要放在目标系统上的文件。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">build/</code> where all the components are built (this includes tools
  needed by Buildroot on the host and packages compiled for the
  target). This directory contains one subdirectory for each of these
  components.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">build/</code> ，其中构建了所有的组件（这包括 Buildroot 在主机上需要的工具和为目标编译的软件包）。该目录包含每个组件的一个子目录。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host/</code> contains both the tools built for the host, and the sysroot
  of the target toolchain. The former is an installation of tools
  compiled for the host that are needed for the proper execution of
  Buildroot, including the cross-compilation toolchain. The latter
  is a hierarchy similar to a root filesystem hierarchy. It contains
  the headers and libraries of all user-space packages that provide
  and install libraries used by other packages. However, this
  directory is <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">not</em></span> intended to be the root filesystem for the target:
  it contains a lot of development files, unstripped binaries and
  libraries that make it far too big for an embedded system. These
  development files are used to compile libraries and applications for
  the target that depend on other libraries.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host/</code>
 包含为主机构建的工具和目标工具链的 sysroot。前者是为主机编译的工具的安装，这些工具是 Buildroot 
正确执行所需的，包括交叉编译工具链。后者是类似于根文件系统层次结构的层次结构。它包含所有用户空间软件包的头文件和库，这些软件包提供并安装其他软件
包使用的库。但是，此目录不打算成为目标的根文件系统：它包含大量开发文件、未剥离的二进制文件和库，使其对于嵌入式系统来说太大。这些开发文件用于为依
赖其他库的目标编译库和应用程序。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">staging/</code> is a symlink to the target toolchain sysroot inside
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host/</code>, which exists for backwards compatibility.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">staging/</code> 是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host/</code> 中目标工具链 sysroot 的符号链接，用于向后兼容。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">target/</code> which contains <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">almost</em></span> the complete root filesystem for
  the target: everything needed is present except the device files in
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/dev/</code> (Buildroot can’t create them because Buildroot doesn’t run
  as root and doesn’t want to run as root). Also, it doesn’t have the correct
  permissions (e.g. setuid for the busybox binary). Therefore, this directory
  <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">should not be used on your target</strong></span>. Instead, you should use one of
  the images built in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">images/</code> directory. If you need an
  extracted image of the root filesystem for booting over NFS, then
  use the tarball image generated in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">images/</code> and extract it as
  root. Compared to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">staging/</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">target/</code> contains only the files and
  libraries needed to run the selected target applications: the
  development files (headers, etc.) are not present, the binaries are
  stripped.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">target/</code> 包含了目标设备几乎完整的根文件系统：除了 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/dev/</code>
 中的设备文件之外，一切所需的文件都已经准备就绪（Buildroot 无法创建这些文件，因为 Buildroot 不以 root 
用户身份运行，也不希望以 root 用户身份运行）。此外，它也没有正确的权限（例如，busybox 二进制文件的 
setuid）。因此，这个目录不应该在您的目标设备上使用。相反，您应该使用在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">images/</code> 目录中构建的其中一个镜像。如果您需要一个用于通过 NFS 引导的根文件系统的提取镜像，那么请使用在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">images/</code> 中生成的 tarball 镜像，并以 root 用户身份进行提取。与 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">staging/</code> 相比， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">target/</code> 只包含了运行所选目标应用程序所需的文件和库：开发文件（头文件等）不包含在内，二进制文件已经剥离。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">These commands, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make menuconfig|nconfig|gconfig|xconfig</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code>, are the
basic ones that allow to easily and quickly generate images fitting
your needs, with all the features and applications you enabled.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这些命令， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make menuconfig|nconfig|gconfig|xconfig</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> ，是基本命令，可以轻松快速地生成符合您需求的图像，具有您启用的所有功能和应用程序。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">More details about the "make" command usage are given in
<a class="xref" href="#make-tips" title="8.1.&nbsp;make tips" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;8.1, “<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</em></span> tips”</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有关“make”命令用法的更多详细信息，请参阅第 8.1 节“make 技巧”。</font></font></font></p></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="community-resources" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;5.&nbsp;Community resources<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 5 章 社区资源</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Like any open source project, Buildroot has different ways to share
information in its community and outside.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">与任何开源项目一样，Buildroot 在其社区内部和外部分享信息的方式各不相同。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Each of those ways may interest you if you are looking for some help,
want to understand Buildroot or contribute to the project.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您正在寻求帮助，想了解 Buildroot 或为项目做出贡献，那么这些方式可能会引起您的兴趣。</font></font></font></p><div class="variablelist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl class="variablelist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="term" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Mailing List
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">邮件列表</font></font></font></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot has a mailing list for discussion and development. It is the
main method of interaction for Buildroot users and developers.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 有一个用于讨论和开发的邮件列表。这是 Buildroot 用户和开发人员进行互动的主要方法。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Only subscribers to the Buildroot mailing list are allowed to post to
this list. You can subscribe via the
<a class="ulink" href="http://lists.buildroot.org/mailman/listinfo/buildroot" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mailing list info
page</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">只有订阅了 Buildroot 邮件列表的订阅者才可以在此列表上发布。您可以通过邮件列表信息页面订阅。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Mails that are sent to the mailing list are also available in the
mailing list archives, available through
<a class="ulink" href="http://lists.buildroot.org/pipermail/buildroot" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Mailman</a> or at
<a class="ulink" href="https://lore.kernel.org/buildroot/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">lore.kernel.org</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">发送到邮件列表的邮件也可以在邮件列表归档中找到，可通过 Mailman 或 lore.kernel.org 访问。</font></font></font></p></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="term" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
IRC
</span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The Buildroot IRC channel <a class="ulink" href="irc://irc.oftc.net/#buildroot" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">#buildroot</a> is
hosted on <a class="ulink" href="https://www.oftc.net/WebChat/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">OFTC</a>. It is a useful place to
ask quick questions or discuss on certain topics.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot IRC 频道＃buildroot 托管在 OFTC 上。这是一个提问快速问题或讨论特定主题的有用场所。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When asking for help on IRC, share relevant logs or pieces of code
using a code sharing website, such as <a class="ulink" href="https://paste.ack.tf/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">https://paste.ack.tf/</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 IRC 上寻求帮助时，请使用代码共享网站（例如 https://paste.ack.tf/）分享相关日志或代码片段。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Note that for certain questions, posting to the mailing list may be
better as it will reach more people, both developers and users.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，对于某些问题，将问题发布到邮件列表可能更好，因为这样可以让更多的人看到，包括开发人员和用户。</font></font></font></p></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="term" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Bug tracker
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Bug 跟踪器</font></font></font></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Bugs in Buildroot can be reported via the mailing list or alternatively
via the <a class="ulink" href="https://bugs.buildroot.org/buglist.cgi?product=buildroot" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Buildroot
bugtracker</a>. Please refer to <a class="xref" href="#reporting-bugs" title="22.6.&nbsp;Reporting issues/bugs or getting help" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;22.6, “Reporting issues/bugs or getting help”</a> before creating a bug
report.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">可以通过邮件列表或者通过 Buildroot bugtracker 报告 Buildroot 中的错误。在创建错误报告之前，请参考第 22.6 节“报告问题/错误或获取帮助”。</font></font></font></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="term" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Wiki
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">维基</font></font></font></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a class="ulink" href="http://elinux.org/Buildroot" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">The Buildroot wiki page</a> is hosted on
the <a class="ulink" href="http://elinux.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">eLinux</a> wiki. It contains some useful links, an
overview of past and upcoming events, and a TODO list.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 维基页面托管在 eLinux 维基上。它包含一些有用的链接，过去和即将发生的事件概述，以及一个待办事项列表。</font></font></font></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="term" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Patchwork
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">补丁工作</font></font></font></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Patchwork is a web-based patch tracking system designed to facilitate
the contribution and management of contributions to an open-source
project. Patches that have been sent to a mailing list are 'caught' by
the system, and appear on a web page. Any comments posted that
reference the patch are appended to the patch page too. For more
information on Patchwork see
<a class="ulink" href="http://jk.ozlabs.org/projects/patchwork/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">http://jk.ozlabs.org/projects/patchwork/</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">补
丁工作是一个基于网络的补丁跟踪系统，旨在促进对开源项目的贡献和管理。已发送到邮件列表的补丁会被系统“捕捉”，并显示在网页上。任何涉及该补丁的发布
的评论也会附加到补丁页面上。有关补丁工作的更多信息，请参阅 http://jk.ozlabs.org/projects/patchwork/。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot’s Patchwork website is mainly for use by Buildroot’s
maintainer to ensure patches aren’t missed. It is also used by Buildroot
patch reviewers (see also <a class="xref" href="#apply-patches-patchwork" title="22.3.1.&nbsp;Applying Patches from Patchwork" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;22.3.1, “Applying Patches from Patchwork”</a>).
However, since the website exposes patches and their corresponding
review comments in a clean and concise web interface, it can be useful
for all Buildroot developers.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot
 的 Patchwork 网站主要供 Buildroot 的维护者使用，以确保不会错过补丁。它还被 Buildroot 
补丁审阅者使用（另请参见第 22.3.1 节“从 Patchwork 
应用补丁”）。然而，由于该网站以清晰简洁的网络界面展示补丁及其相应的审阅评论，因此对所有 Buildroot 开发人员都有用。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The Buildroot patch management interface is available at
<a class="ulink" href="https://patchwork.ozlabs.org/project/buildroot/list/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">https://patchwork.ozlabs.org/project/buildroot/list/</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 补丁管理界面可在 https://patchwork.ozlabs.org/project/buildroot/list/找到。</font></font></font></p></dd></dl></div></div></div><div class="part" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h1 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_user_guide" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Part&nbsp;II.&nbsp;User guide<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第二部分 用户指南</font></font></font></h1></div></div></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="configure" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;6.&nbsp;Buildroot configuration<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 6 章 Buildroot 配置</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">All the configuration options in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make *config</code> have a help text
providing details about the option.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make *config</code> 中的所有配置选项都有帮助文本，提供有关该选项的详细信息。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make *config</code> commands also offer a search tool. Read the help
message in the different frontend menus to know how to use it:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make *config</code> 命令还提供搜索工具。阅读不同前端菜单中的帮助消息，了解如何使用它：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
in <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">menuconfig</em></span>, the search tool is called by pressing <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/</code>;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 menuconfig 中，按 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/</code> 键调用搜索工具；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
in <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">xconfig</em></span>, the search tool is called by pressing <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Ctrl</code> + <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">f</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 xconfig 中，按下 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Ctrl</code> + <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">f</code> 可调用搜索工具。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The result of the search shows the help message of the matching items.
In <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">menuconfig</em></span>, numbers in the left column provide a shortcut to the
corresponding entry. Just type this number to directly jump to the
entry, or to the containing menu in case the entry is not selectable due
to a missing dependency.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">搜索结果显示匹配项目的帮助消息。在 menuconfig 中，左列的数字为对应条目提供了快捷方式。只需键入该数字即可直接跳转到该条目，或者跳转到包含菜单（如果由于缺少依赖项而无法选择该条目）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Although the menu structure and the help text of the entries should be
sufficiently self-explanatory, a number of topics require additional
explanation that cannot easily be covered in the help text and are
therefore covered in the following sections.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">尽管菜单结构和条目的帮助文本应该足够自解释，但有一些主题需要额外解释，这些内容不容易在帮助文本中涵盖，因此在以下部分进行了介绍。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_cross_compilation_toolchain" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>6.1.&nbsp;Cross-compilation toolchain<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">6.1. 交叉编译工具链</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">A compilation toolchain is the set of tools that allows you to compile
code for your system. It consists of a compiler (in our case, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gcc</code>),
binary utils like assembler and linker (in our case, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">binutils</code>) and a
C standard library (for example
<a class="ulink" href="http://www.gnu.org/software/libc/libc.html" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">GNU Libc</a>,
<a class="ulink" href="http://www.uclibc-ng.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uClibc-ng</a>).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">编译工具链是一组工具，允许您为您的系统编译代码。它包括编译器（在我们的情况下， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gcc</code> ），二进制工具如汇编器和链接器（在我们的情况下， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">binutils</code> ）和 C 标准库（例如 GNU Libc，uClibc-ng）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The system installed on your development station certainly already has
a compilation toolchain that you can use to compile an application
that runs on your system. If you’re using a PC, your compilation
toolchain runs on an x86 processor and generates code for an x86
processor. Under most Linux systems, the compilation toolchain uses
the GNU libc (glibc) as the C standard library. This compilation
toolchain is called the "host compilation toolchain". The machine on
which it is running, and on which you’re working, is called the "host
system" <a href="#ftn.idm368" class="footnote" id="idm368" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><sup class="footnote" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[3]</sup></a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">安
装在您的开发站点上的系统肯定已经有一个编译工具链，您可以使用它来编译在您的系统上运行的应用程序。如果您使用的是个人电脑，您的编译工具链在 x86
 处理器上运行，并为 x86 处理器生成代码。在大多数 Linux 系统下，编译工具链使用 GNU libc（glibc）作为 C 
标准库。这个编译工具链被称为“主机编译工具链”。它正在运行的机器，以及您正在工作的机器，被称为“主机系统” <sup class="footnote" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[3]</sup> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The compilation toolchain is provided by your distribution, and
Buildroot has nothing to do with it (other than using it to build a
cross-compilation toolchain and other tools that are run on the
development host).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">编译工具链由您的发行版提供，Buildroot 与之无关（除了使用它来构建交叉编译工具链和在开发主机上运行的其他工具）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">As said above, the compilation toolchain that comes with your system
runs on and generates code for the processor in your host system. As
your embedded system has a different processor, you need a
cross-compilation toolchain - a compilation toolchain that runs on
your <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host system</em></span> but generates code for your <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">target system</em></span> (and
target processor). For example, if your host system uses x86 and your
target system uses ARM, the regular compilation toolchain on your host
runs on x86 and generates code for x86, while the cross-compilation
toolchain runs on x86 and generates code for ARM.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如
上所述，系统自带的编译工具链在您的主机系统上运行，并为主机系统中的处理器生成代码。由于您的嵌入式系统使用不同的处理器，您需要一个交叉编译工具链 -
 一个在您的主机系统上运行但为目标系统（和目标处理器）生成代码的编译工具链。例如，如果您的主机系统使用 x86，而目标系统使用 
ARM，那么主机上的常规编译工具链在 x86 上运行并为 x86 生成代码，而交叉编译工具链在 x86 上运行并为 ARM 生成代码。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot provides two solutions for the cross-compilation toolchain:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 为交叉编译工具链提供了两种解决方案：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">internal toolchain backend</strong></span>, called <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Buildroot toolchain</code> in
   the configuration interface.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">内部工具链后端，在配置界面中称为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Buildroot toolchain</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">external toolchain backend</strong></span>, called <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">External toolchain</code> in
   the configuration interface.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">外部工具链后端，在配置界面中称为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">External toolchain</code> 。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The choice between these two solutions is done using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain
Type</code> option in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain</code> menu. Once one solution has been
chosen, a number of configuration options appear, they are detailed in
the following sections.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain</code> 菜单中使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain
Type</code> 选项来选择这两个解决方案之间的选择。一旦选择了一个解决方案，将出现一些配置选项，这些选项在以下部分中详细说明。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="internal-toolchain-backend" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>6.1.1.&nbsp;Internal toolchain backend<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">6.1.1. 内部工具链后端</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">internal toolchain backend</em></span> is the backend where Buildroot builds
by itself a cross-compilation toolchain, before building the userspace
applications and libraries for your target embedded system.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">内部工具链后端是 Buildroot 在构建目标嵌入式系统的用户空间应用程序和库之前，通过自身构建交叉编译工具链的后端。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This backend supports several C libraries:
<a class="ulink" href="http://www.uclibc-ng.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uClibc-ng</a>,
<a class="ulink" href="http://www.gnu.org/software/libc/libc.html" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">glibc</a> and
<a class="ulink" href="http://www.musl-libc.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">musl</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">该后端支持几种 C 库：uClibc-ng、glibc 和 musl。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Once you have selected this backend, a number of options appear. The
most important ones allow to:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一旦选择了这个后端，将会出现许多选项。其中最重要的选项允许：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Change the version of the Linux kernel headers used to build the
   toolchain. This item deserves a few explanations. In the process of
   building a cross-compilation toolchain, the C library is being
   built. This library provides the interface between userspace
   applications and the Linux kernel. In order to know how to "talk"
   to the Linux kernel, the C library needs to have access to the
   <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Linux kernel headers</em></span> (i.e. the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.h</code> files from the kernel), which
   define the interface between userspace and the kernel (system
   calls, data structures, etc.). Since this interface is backward
   compatible, the version of the Linux kernel headers used to build
   your toolchain do not need to match <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">exactly</em></span> the version of the
   Linux kernel you intend to run on your embedded system. They only
   need to have a version equal or older to the version of the Linux
   kernel you intend to run. If you use kernel headers that are more
   recent than the Linux kernel you run on your embedded system, then
   the C library might be using interfaces that are not provided by
   your Linux kernel.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">更
改用于构建工具链的 Linux 内核头文件的版本。这一项值得一些解释。在构建交叉编译工具链的过程中，正在构建 C 
库。该库提供了用户空间应用程序与 Linux 内核之间的接口。为了知道如何与 Linux 内核“交流”，C 库需要访问 Linux 
内核头文件（即内核中的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.h</code>
 文件），这些文件定义了用户空间和内核之间的接口（系统调用、数据结构等）。由于这个接口是向后兼容的，用于构建工具链的 Linux 
内核头文件的版本不需要完全匹配您打算在嵌入式系统上运行的 Linux 内核的版本。它们只需要具有与您打算运行的 Linux 
内核版本相等或更旧的版本。如果您使用的内核头文件比您在嵌入式系统上运行的 Linux 内核更新，那么 C 库可能会使用您的 Linux 
内核未提供的接口。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Change the version of the GCC compiler, binutils and the C library.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">更改 GCC 编译器、binutils 和 C 库的版本。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Select a number of toolchain options (uClibc only): whether the
   toolchain should have RPC support (used mainly for NFS),
   wide-char support, locale support (for internationalization),
   C++ support or thread support. Depending on which options you choose,
   the number of userspace applications and libraries visible in
   Buildroot menus will change: many applications and libraries require
   certain toolchain options to be enabled. Most packages show a comment
   when a certain toolchain option is required to be able to enable
   those packages. If needed, you can further refine the uClibc
   configuration by running <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make uclibc-menuconfig</code>. Note however that
   all packages in Buildroot are tested against the default uClibc
   configuration bundled in Buildroot: if you deviate from this
   configuration by removing features from uClibc, some packages may no
   longer build.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">选
择一些工具链选项（仅限 uClibc）：工具链是否应具有 RPC 支持（主要用于 
NFS）、宽字符支持、区域设置支持（用于国际化）、C++支持或线程支持。根据您选择的选项，Buildroot 
菜单中可见的用户空间应用程序和库的数量将发生变化：许多应用程序和库需要启用某些工具链选项。大多数软件包在需要启用某些工具链选项以启用这些软件包时
会显示注释。如果需要，您可以通过运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make uclibc-menuconfig</code> 进一步调整 uClibc 配置。但请注意，Buildroot 中的所有软件包都针对 Buildroot 捆绑的默认 uClibc 配置进行测试：如果您通过从 uClibc 中删除功能而偏离此配置，则某些软件包可能无法构建。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">It is worth noting that whenever one of those options is modified,
then the entire toolchain and system must be rebuilt. See
<a class="xref" href="#full-rebuild" title="8.2.&nbsp;Understanding when a full rebuild is necessary" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;8.2, “Understanding when a full rebuild is necessary”</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">值得注意的是，每当修改这些选项之一时，整个工具链和系统都必须重新构建。请参阅第 8.2 节“了解何时需要进行完全重建”。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Advantages of this backend:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此后端的优势：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Well integrated with Buildroot
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">与 Buildroot 良好集成</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Fast, only builds what’s necessary
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">快速，仅构建必要的内容</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Drawbacks of this backend:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这个后端的缺点：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Rebuilding the toolchain is needed when doing <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make clean</code>, which
  takes time. If you’re trying to reduce your build time, consider
  using the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">External toolchain backend</em></span>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当进行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make clean</code> 时，需要重新构建工具链，这需要时间。如果您想要减少构建时间，请考虑使用外部工具链后端。</font></font></font></li></ul></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="external-toolchain-backend" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>6.1.2.&nbsp;External toolchain backend<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">6.1.2. 外部工具链后端</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">external toolchain backend</em></span> allows to use existing pre-built
cross-compilation toolchains. Buildroot knows about a number of
well-known cross-compilation toolchains (from
<a class="ulink" href="http://www.linaro.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Linaro</a> for ARM,
<a class="ulink" href="http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/editions/lite-edition/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Sourcery
CodeBench</a> for ARM, x86-64, PowerPC, and MIPS, and is capable of
downloading them automatically, or it can be pointed to a custom
toolchain, either available for download or installed locally.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">外
部工具链后端允许使用现有的预构建交叉编译工具链。Buildroot 知道一些知名的交叉编译工具链（来自 Linaro 的 
ARM，Sourcery CodeBench 的 ARM，x86-64，PowerPC 和 
MIPS），并且能够自动下载它们，或者可以指向自定义工具链，无论是可供下载还是本地安装。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Then, you have three solutions to use an external toolchain:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后，您有三种解决方案可以使用外部工具链：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Use a predefined external toolchain profile, and let Buildroot
  download, extract and install the toolchain. Buildroot already knows
  about a few CodeSourcery and Linaro toolchains. Just select the
  toolchain profile in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain</code> from the available ones. This is
  definitely the easiest solution.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用预定义的外部工具链配置文件，让 Buildroot 下载、提取和安装工具链。Buildroot 已经知道一些 CodeSourcery 和 Linaro 的工具链。只需在可用的配置文件中选择工具链配置文件。这绝对是最简单的解决方案。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Use a predefined external toolchain profile, but instead of having
  Buildroot download and extract the toolchain, you can tell Buildroot
  where your toolchain is already installed on your system. Just
  select the toolchain profile in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain</code> through the available
  ones, unselect <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Download toolchain automatically</code>, and fill the
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain path</code> text entry with the path to your cross-compiling
  toolchain.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用预定义的外部工具链配置文件，但是不要让 Buildroot 下载和提取工具链，您可以告诉 Buildroot 您的系统上已经安装了工具链的位置。只需在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain</code> 中选择工具链配置文件，取消选择 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Download toolchain automatically</code> ，并在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain path</code> 文本框中填入交叉编译工具链的路径。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Use a completely custom external toolchain. This is particularly
  useful for toolchains generated using crosstool-NG or with Buildroot
  itself. To do this, select the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Custom toolchain</code> solution in the
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain</code> list. You need to fill the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain path</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain
  prefix</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">External toolchain C library</code> options. Then, you have
  to tell Buildroot what your external toolchain supports. If your
  external toolchain uses the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">glibc</em></span> library, you only have to tell
  whether your toolchain supports C++ or not and whether it has
  built-in RPC support. If your external toolchain uses the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uClibc</em></span>
  library, then you have to tell Buildroot if it supports RPC,
  wide-char, locale, program invocation, threads and C++.
  At the beginning of the execution, Buildroot will tell you if
  the selected options do not match the toolchain configuration.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用完全自定义的外部工具链。这对使用 crosstool-NG 生成的工具链或使用 Buildroot 本身生成的工具链特别有用。要做到这一点，请在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain</code> 列表中选择 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Custom toolchain</code> 解决方案。您需要填写 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain path</code> 、 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain
  prefix</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">External toolchain C library</code>
 选项。然后，您需要告诉 Buildroot 您的外部工具链支持什么。如果您的外部工具链使用 glibc 库，您只需告诉工具链是否支持 
C++，以及是否具有内置的 RPC 支持。如果您的外部工具链使用 uClibc 库，那么您需要告诉 Buildroot 它是否支持 
RPC、宽字符、区域设置、程序调用、线程和 C++。在执行开始时，Buildroot 会告诉您所选选项是否与工具链配置不匹配。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Our external toolchain support has been tested with toolchains from
CodeSourcery and Linaro, toolchains generated by
<a class="ulink" href="http://crosstool-ng.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">crosstool-NG</a>, and toolchains generated by
Buildroot itself. In general, all toolchains that support the
<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sysroot</em></span> feature should work. If not, do not hesitate to contact the
developers.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">我
们的外部工具链支持已经与来自 CodeSourcery 和 Linaro 的工具链，由 crosstool-NG 生成的工具链以及由 
Buildroot 本身生成的工具链进行了测试。一般来说，所有支持 sysroot 
功能的工具链都应该可以工作。如果不能，请不要犹豫与开发人员联系。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">We do not support toolchains or SDK generated by OpenEmbedded or
Yocto, because these toolchains are not pure toolchains (i.e. just the
compiler, binutils, the C and C++ libraries). Instead these toolchains
come with a very large set of pre-compiled libraries and
programs. Therefore, Buildroot cannot import the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sysroot</em></span> of the
toolchain, as it would contain hundreds of megabytes of pre-compiled
libraries that are normally built by Buildroot.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">我
们不支持由 OpenEmbedded 或 Yocto 生成的工具链或 
SDK，因为这些工具链不是纯粹的工具链（即仅包括编译器、binutils、C 和 
C++库）。相反，这些工具链带有非常庞大的预编译库和程序集。因此，Buildroot 无法导入工具链的 
sysroot，因为它将包含数百兆字节的通常由 Buildroot 构建的预编译库。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">We also do not support using the distribution toolchain (i.e. the
gcc/binutils/C library installed by your distribution) as the
toolchain to build software for the target. This is because your
distribution toolchain is not a "pure" toolchain (i.e. only with the
C/C++ library), so we cannot import it properly into the Buildroot
build environment. So even if you are building a system for a x86 or
x86_64 target, you have to generate a cross-compilation toolchain with
Buildroot or crosstool-NG.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">我
们也不支持使用发行版工具链（即由您的发行版安装的 gcc/binutils/C 
库）作为构建目标软件的工具链。这是因为您的发行版工具链不是一个“纯粹”的工具链（即只有 C/C++库），所以我们无法将其正确地导入到 
Buildroot 构建环境中。因此，即使您正在为 x86 或 x86_64 目标构建系统，您也必须使用 Buildroot 或 
crosstool-NG 生成交叉编译工具链。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you want to generate a custom toolchain for your project, that can
be used as an external toolchain in Buildroot, our recommendation is
to build it either with Buildroot itself (see
<a class="xref" href="#build-toolchain-with-buildroot" title="6.1.3.&nbsp;Build an external toolchain with Buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;6.1.3, “Build an external toolchain with Buildroot”</a>) or with
<a class="ulink" href="http://crosstool-ng.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">crosstool-NG</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您想为您的项目生成自定义工具链，以便在 Buildroot 中用作外部工具链，我们建议使用 Buildroot 本身构建（请参阅第 6.1.3 节“使用 Buildroot 构建外部工具链”）或使用 crosstool-NG 构建。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Advantages of this backend:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此后端的优势：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Allows to use well-known and well-tested cross-compilation
  toolchains.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">允许使用知名和经过充分测试的交叉编译工具链。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Avoids the build time of the cross-compilation toolchain, which is
  often very significant in the overall build time of an embedded
  Linux system.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">避免交叉编译工具链的构建时间，这在嵌入式 Linux 系统的整体构建时间中通常非常重要。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Drawbacks of this backend:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">该后端的缺点：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
If your pre-built external toolchain has a bug, may be hard to get a
  fix from the toolchain vendor, unless you build your external
  toolchain by yourself using Buildroot or Crosstool-NG.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您的预构建外部工具链存在错误，则可能很难从工具链供应商那里获得修复，除非您使用 Buildroot 或 Crosstool-NG 自行构建外部工具链。</font></font></font></li></ul></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="build-toolchain-with-buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>6.1.3.&nbsp;Build an external toolchain with Buildroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">6.1.3. 使用 Buildroot 构建外部工具链</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The Buildroot internal toolchain option can be used to create an
external toolchain. Here are a series of steps to build an internal
toolchain and package it up for reuse by Buildroot itself (or other
projects).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">可以使用 Buildroot 内部工具链选项来创建外部工具链。以下是构建内部工具链并将其打包以供 Buildroot 本身（或其他项目）重复使用的一系列步骤。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Create a new Buildroot configuration, with the following details:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">创建一个新的 Buildroot 配置，包括以下细节：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Select the appropriate <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Target options</strong></span> for your target CPU
  architecture
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为您的目标 CPU 架构选择适当的目标选项</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
In the <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain</strong></span> menu, keep the default of <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Buildroot toolchain</strong></span>
  for <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain type</strong></span>, and configure your toolchain as desired
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在工具链菜单中，保持 Buildroot 工具链作为工具链类型的默认设置，并根据需要配置您的工具链</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
In the <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">System configuration</strong></span> menu, select <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">None</strong></span> as the <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Init
  system</strong></span> and <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">none</strong></span> as <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/bin/sh</strong></span><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在系统配置菜单中，选择“None”作为初始系统，选择“none”作为/bin/sh</font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
In the <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Target packages</strong></span> menu, disable <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BusyBox</strong></span><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在目标软件包菜单中，禁用 BusyBox</font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
In the <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Filesystem images</strong></span> menu, disable <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">tar the root filesystem</strong></span><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在文件系统镜像菜单中，禁用 tar 根文件系统</font></font></font>
</li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Then, we can trigger the build, and also ask Buildroot to generate a
SDK. This will conveniently generate for us a tarball which contains
our toolchain:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后，我们可以触发构建，并要求 Buildroot 生成一个 SDK。这将方便地为我们生成一个包含我们的工具链的 tarball：</font></font></font></p><pre class="screen">make sdk</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This produces the SDK tarball in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(O)/images</code>, with a name similar to
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">arm-buildroot-linux-uclibcgnueabi_sdk-buildroot.tar.gz</code>. Save this
tarball, as it is now the toolchain that you can re-use as an external
toolchain in other Buildroot projects.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这将在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(O)/images</code> 中生成 SDK tarball，名称类似于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">arm-buildroot-linux-uclibcgnueabi_sdk-buildroot.tar.gz</code> 。保存这个 tarball，因为现在它是您可以在其他 Buildroot 项目中作为外部工具链重复使用的工具链。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In those other Buildroot projects, in the <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain</strong></span> menu:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在其他 Buildroot 项目中，在工具链菜单中：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Set <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain type</strong></span> to <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">External toolchain</strong></span><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">将工具链类型设置为外部工具链</font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Set <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain</strong></span> to <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Custom toolchain</strong></span><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">将工具链设置为自定义工具链</font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Set <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain origin</strong></span> to <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain to be downloaded and installed</strong></span><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">将工具链源设置为要下载和安装的工具链</font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Set <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain URL</strong></span> to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">file:///path/to/your/sdk/tarball.tar.gz</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">将工具链 URL 设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">file:///path/to/your/sdk/tarball.tar.gz</code> </font></font></font>
</li></ul></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h4 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_external_toolchain_wrapper" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>External toolchain wrapper<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">外部工具链包装器</font></font></font></h4></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When using an external toolchain, Buildroot generates a wrapper program,
that transparently passes the appropriate options (according to the
configuration) to the external toolchain programs. In case you need to
debug this wrapper to check exactly what arguments are passed, you can
set the environment variable <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_DEBUG_WRAPPER</code> to either one of:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当使用外部工具链时，Buildroot 会生成一个包装程序，该程序会根据配置透明地将适当的选项传递给外部工具链程序。如果您需要调试此包装程序以检查传递的确切参数，您可以将环境变量 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_DEBUG_WRAPPER</code> 设置为以下之一：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">0</code>, empty or not set: no debug
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">0</code> ，为空或未设置：无调试</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">1</code>: trace all arguments on a single line
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">1</code> ：在单行上跟踪所有参数</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">2</code>: trace one argument per line
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">2</code> ：每行跟踪一个参数</font></font></font></li></ul></div></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_dev_management" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>6.2.&nbsp;/dev management<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">6.2. /dev 管理</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On a Linux system, the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/dev</code> directory contains special files, called
<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">device files</em></span>, that allow userspace applications to access the
hardware devices managed by the Linux kernel. Without these <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">device
files</em></span>, your userspace applications would not be able to use the
hardware devices, even if they are properly recognized by the Linux
kernel.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 Linux 系统上， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/dev</code> 目录包含称为设备文件的特殊文件，允许用户空间应用程序访问由 Linux 内核管理的硬件设备。如果没有这些设备文件，即使 Linux 内核正确识别了硬件设备，您的用户空间应用程序也无法使用这些硬件设备。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Under <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">System configuration</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/dev management</code>, Buildroot offers four
different solutions to handle the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/dev</code> directory :<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">System configuration</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/dev management</code> 下，Buildroot 提供了四种不同的解决方案来处理 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/dev</code> 目录：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The first solution is <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Static using device table</strong></span>. This is the old
   classical way of handling device files in Linux. With this method,
   the device files are persistently stored in the root filesystem
   (i.e. they persist across reboots), and there is nothing that will
   automatically create and remove those device files when hardware
   devices are added or removed from the system. Buildroot therefore
   creates a standard set of device files using a <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">device table</em></span>, the
   default one being stored in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">system/device_table_dev.txt</code> in the
   Buildroot source code. This file is processed when Buildroot
   generates the final root filesystem image, and the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">device files</em></span>
   are therefore not visible in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/target</code> directory. The
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_STATIC_DEVICE_TABLE</code> option allows to change the
   default device table used by Buildroot, or to add an additional
   device table, so that additional <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">device files</em></span> are created by
   Buildroot during the build. So, if you use this method, and a
   <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">device file</em></span> is missing in your system, you can for example create
   a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;yourcompany&gt;/&lt;yourproject&gt;/device_table_dev.txt</code> file
   that contains the description of your additional <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">device files</em></span>,
   and then you can set <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_STATIC_DEVICE_TABLE</code> to
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">system/device_table_dev.txt
   board/&lt;yourcompany&gt;/&lt;yourproject&gt;/device_table_dev.txt</code>. For more
   details about the format of the device table file, see
   <a class="xref" href="#makedev-syntax" title="Chapter&nbsp;25.&nbsp;Makedev syntax documentation" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Chapter&nbsp;25, <em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Makedev syntax documentation</em></a>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第
一个解决方案是使用设备表的静态解决方案。这是处理 Linux 
中设备文件的旧经典方式。通过这种方法，设备文件被持久地存储在根文件系统中（即它们在重新启动时保持不变），并且没有任何东西会在硬件设备被添加或从系
统中移除时自动创建和移除这些设备文件。因此，Buildroot 使用设备表创建一组标准设备文件，其中默认设备表存储在 Buildroot 
源代码中的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">system/device_table_dev.txt</code> 中。当 Buildroot 生成最终的根文件系统映像时，将处理此文件，因此设备文件在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/target</code> 目录中不可见。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_STATIC_DEVICE_TABLE</code> 选项允许更改 Buildroot 使用的默认设备表，或添加额外的设备表，以便 Buildroot 在构建过程中创建额外的设备文件。因此，如果您使用此方法，并且系统中缺少设备文件，您可以例如创建一个包含您额外设备文件描述的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;yourcompany&gt;/&lt;yourproject&gt;/device_table_dev.txt</code> 文件，然后您可以将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_STATIC_DEVICE_TABLE</code> 设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">system/device_table_dev.txt
   board/&lt;yourcompany&gt;/&lt;yourproject&gt;/device_table_dev.txt</code> 。有关设备表文件格式的更多详细信息，请参阅第 25 章《Makedev 语法文档》。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The second solution is <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Dynamic using devtmpfs only</strong></span>. <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">devtmpfs</em></span> is
   a virtual filesystem inside the Linux kernel that has been
   introduced in kernel 2.6.32 (if you use an older kernel, it is not
   possible to use this option). When mounted in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/dev</code>, this virtual
   filesystem will automatically make <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">device files</em></span> appear and
   disappear as hardware devices are added and removed from the
   system. This filesystem is not persistent across reboots: it is
   filled dynamically by the kernel. Using <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">devtmpfs</em></span> requires the
   following kernel configuration options to be enabled:
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">CONFIG_DEVTMPFS</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">CONFIG_DEVTMPFS_MOUNT</code>. When Buildroot is in
   charge of building the Linux kernel for your embedded device, it
   makes sure that those two options are enabled. However, if you
   build your Linux kernel outside of Buildroot, then it is your
   responsibility to enable those two options (if you fail to do so,
   your Buildroot system will not boot).
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第二种解决方案是仅使用 devtmpfs 的动态解决方案。devtmpfs 是 Linux 内核中的虚拟文件系统，在内核 2.6.32 中引入（如果您使用较旧的内核，则无法使用此选项）。当在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/dev</code> 中挂载时，这个虚拟文件系统会自动使设备文件随着硬件设备被添加到系统中而出现和消失。这个文件系统在重新启动后不是持久的：它由内核动态填充。使用 devtmpfs 需要启用以下内核配置选项： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">CONFIG_DEVTMPFS</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">CONFIG_DEVTMPFS_MOUNT</code> 。当 Buildroot 负责为您的嵌入式设备构建 Linux 内核时，它会确保这两个选项已启用。但是，如果您在 Buildroot 之外构建 Linux 内核，则您有责任启用这两个选项（如果未能这样做，您的 Buildroot 系统将无法启动）。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The third solution is <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Dynamic using devtmpfs + mdev</strong></span>. This method
   also relies on the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">devtmpfs</em></span> virtual filesystem detailed above (so
   the requirement to have <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">CONFIG_DEVTMPFS</code> and
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">CONFIG_DEVTMPFS_MOUNT</code> enabled in the kernel configuration still
   apply), but adds the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mdev</code> userspace utility on top of it. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mdev</code>
   is a program part of BusyBox that the kernel will call every time a
   device is added or removed. Thanks to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/etc/mdev.conf</code>
   configuration file, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mdev</code> can be configured to for example, set
   specific permissions or ownership on a device file, call a script
   or application whenever a device appears or disappear,
   etc. Basically, it allows <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">userspace</em></span> to react on device addition
   and removal events. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mdev</code> can for example be used to automatically
   load kernel modules when devices appear on the system. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mdev</code> is
   also important if you have devices that require a firmware, as it
   will be responsible for pushing the firmware contents to the
   kernel. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mdev</code> is a lightweight implementation (with fewer
   features) of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">udev</code>. For more details about <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mdev</code> and the syntax
   of its configuration file, see
   <a class="ulink" href="http://git.busybox.net/busybox/tree/docs/mdev.txt" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">http://git.busybox.net/busybox/tree/docs/mdev.txt</a>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第三种解决方案是使用 devtmpfs + mdev 的动态解决方案。这种方法也依赖于上面详细介绍的 devtmpfs 虚拟文件系统（因此仍然需要在内核配置中启用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">CONFIG_DEVTMPFS</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">CONFIG_DEVTMPFS_MOUNT</code> ），但在其之上添加了 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mdev</code> 用户空间实用程序。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mdev</code> 是 BusyBox 的一部分程序，内核会在每次添加或移除设备时调用它。通过 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/etc/mdev.conf</code> 配置文件， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mdev</code> 可以被配置为例如，在设备文件上设置特定权限或所有权，每当设备出现或消失时调用脚本或应用程序等。基本上，它允许用户空间对设备添加和移除事件做出反应。例如， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mdev</code> 可以用于在系统上出现设备时自动加载内核模块。如果您有需要固件的设备， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mdev</code> 也很重要，因为它将负责将固件内容推送到内核。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mdev</code> 是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">udev</code> 的轻量级实现（功能较少）。有关 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mdev</code> 和其配置文件语法的更多详细信息，请参阅 http://git.busybox.net/busybox/tree/docs/mdev.txt。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The fourth solution is <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Dynamic using devtmpfs + eudev</strong></span>. This
   method also relies on the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">devtmpfs</em></span> virtual filesystem detailed
   above, but adds the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">eudev</code> userspace daemon on top of it. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">eudev</code>
   is a daemon that runs in the background, and gets called by the
   kernel when a device gets added or removed from the system. It is a
   more heavyweight solution than <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mdev</code>, but provides higher
   flexibility.  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">eudev</code> is a standalone version of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">udev</code>, the
   original userspace daemon used in most desktop Linux distributions,
   which is now part of Systemd. For more details, see
   <a class="ulink" href="http://en.wikipedia.org/wiki/Udev" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">http://en.wikipedia.org/wiki/Udev</a>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第四种解决方案是使用 devtmpfs + eudev 的动态解决方案。这种方法也依赖于上面详细介绍的 devtmpfs 虚拟文件系统，但在其上添加了 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">eudev</code> 用户空间守护程序。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">eudev</code> 是一个在后台运行的守护程序，当系统中添加或移除设备时，会被内核调用。这是一个比 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mdev</code> 更加庞大的解决方案，但提供了更高的灵活性。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">eudev</code> 是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">udev</code> 的独立版本， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">udev</code> 是大多数桌面 Linux 发行版中使用的原始用户空间守护程序，现在已成为 Systemd 的一部分。更多详情请参阅 http://en.wikipedia.org/wiki/Udev。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The Buildroot developers recommendation is to start with the <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Dynamic
using devtmpfs only</strong></span> solution, until you have the need for userspace
to be notified when devices are added/removed, or if firmwares are
needed, in which case <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Dynamic using devtmpfs + mdev</strong></span> is usually a
good solution.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 开发人员建议首先使用仅使用 devtmpfs 的动态解决方案，直到需要在添加/移除设备时通知用户空间，或者需要固件时，此时通常使用动态使用 devtmpfs + mdev 是一个不错的解决方案。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Note that if <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">systemd</code> is chosen as init system, /dev management will
be performed by the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">udev</code> program provided by <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">systemd</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，如果选择 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">systemd</code> 作为初始化系统，则/dev 管理将由 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">systemd</code> 提供的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">udev</code> 程序执行。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="init-system" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>6.3.&nbsp;init system<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">6.3.&nbsp;初始化系统</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">init</em></span> program is the first userspace program started by the
kernel (it carries the PID number 1), and is responsible for starting
the userspace services and programs (for example: web server,
graphical applications, other network servers, etc.).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">初始化程序是内核启动的第一个用户空间程序（它携带 PID 编号 1），负责启动用户空间服务和程序（例如：Web 服务器、图形应用程序、其他网络服务器等）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot allows to use three different types of init systems, which
can be chosen from <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">System configuration</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Init system</code>:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 允许使用三种不同类型的 init 系统，可以从 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">System configuration</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Init system</code> 中选择：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The first solution is <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BusyBox</strong></span>. Amongst many programs, BusyBox has
   an implementation of a basic <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">init</code> program, which is sufficient
   for most embedded systems. Enabling the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_INIT_BUSYBOX</code> will
   ensure BusyBox will build and install its <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">init</code> program. This is
   the default solution in Buildroot. The BusyBox <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">init</code> program will
   read the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/etc/inittab</code> file at boot to know what to do. The syntax
   of this file can be found in
   <a class="ulink" href="http://git.busybox.net/busybox/tree/examples/inittab" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">http://git.busybox.net/busybox/tree/examples/inittab</a> (note that
   BusyBox <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">inittab</code> syntax is special: do not use a random <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">inittab</code>
   documentation from the Internet to learn about BusyBox
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">inittab</code>). The default <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">inittab</code> in Buildroot is stored in
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">system/skeleton/etc/inittab</code>. Apart from mounting a few important
   filesystems, the main job the default inittab does is to start the
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/etc/init.d/rcS</code> shell script, and start a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">getty</code> program (which
   provides a login prompt).
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第一个解决方案是 BusyBox。在许多程序中，BusyBox 具有基本 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">init</code> 程序的实现，这对大多数嵌入式系统来说已经足够了。启用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_INIT_BUSYBOX</code> 将确保 BusyBox 构建并安装其 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">init</code> 程序。这是 Buildroot 中的默认解决方案。BusyBox 的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">init</code> 程序将在启动时读取 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/etc/inittab</code> 文件以了解要执行的操作。此文件的语法可以在 http://git.busybox.net/busybox/tree/examples/inittab 中找到（请注意，BusyBox 的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">inittab</code> 语法很特殊：不要使用来自互联网的随机 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">inittab</code> 文档来了解 BusyBox 的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">inittab</code> ）。Buildroot 中的默认 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">inittab</code> 存储在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">system/skeleton/etc/inittab</code> 中。除了挂载几个重要的文件系统外，默认的 inittab 的主要工作是启动 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/etc/init.d/rcS</code> shell 脚本，并启动一个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">getty</code> 程序（提供登录提示）。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The second solution is <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">systemV</strong></span>. This solution uses the old
   traditional <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sysvinit</em></span> program, packed in Buildroot in
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/sysvinit</code>. This was the solution used in most desktop
   Linux distributions, until they switched to more recent
   alternatives such as Upstart or Systemd. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sysvinit</code> also works with
   an <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">inittab</code> file (which has a slightly different syntax than the
   one from BusyBox). The default <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">inittab</code> installed with this init
   solution is located in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/sysvinit/inittab</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第二种解决方案是 systemV。该解决方案使用了旧传统的 sysvinit 程序，打包在 Buildroot 中 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/sysvinit</code> 。这是大多数桌面 Linux 发行版使用的解决方案，直到它们转向更近期的替代方案，如 Upstart 或 Systemd。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sysvinit</code> 还可以使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">inittab</code> 文件（其语法与 BusyBox 的语法略有不同）。使用此 init 解决方案安装的默认 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">inittab</code> 位于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/sysvinit/inittab</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The third solution is <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">systemd</strong></span>. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">systemd</code> is the new generation
   init system for Linux. It does far more than traditional <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">init</em></span>
   programs: aggressive parallelization capabilities, uses socket and
   D-Bus activation for starting services, offers on-demand starting
   of daemons, keeps track of processes using Linux control groups,
   supports snapshotting and restoring of the system state,
   etc. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">systemd</code> will be useful on relatively complex embedded
   systems, for example the ones requiring D-Bus and services
   communicating between each other. It is worth noting that <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">systemd</code>
   brings a fairly big number of large dependencies: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dbus</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">udev</code>
   and more. For more details about <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">systemd</code>, see
   <a class="ulink" href="http://www.freedesktop.org/wiki/Software/systemd" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">http://www.freedesktop.org/wiki/Software/systemd</a>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第三种解决方案是 systemd。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">systemd</code> 是 Linux 的新一代 init 系统。它比传统的 init 程序做得更多：具有激进的并行化能力，使用套接字和 D-Bus 激活启动服务，提供按需启动守护程序，使用 Linux 控制组跟踪进程，支持系统状态的快照和恢复等。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">systemd</code> 将在相对复杂的嵌入式系统上很有用，例如需要 D-Bus 和服务之间通信的系统。值得注意的是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">systemd</code> 带来了相当多的大型依赖项： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dbus</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">udev</code> 等。有关 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">systemd</code> 的更多详细信息，请参阅 http://www.freedesktop.org/wiki/Software/systemd。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The solution recommended by Buildroot developers is to use the
<span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BusyBox init</strong></span> as it is sufficient for most embedded
systems. <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">systemd</strong></span> can be used for more complex situations.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 开发人员推荐的解决方案是使用 BusyBox init，因为对于大多数嵌入式系统来说已经足够了。systemd 可用于更复杂的情况。</font></font></font></p></div><div class="footnotes" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><br data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><hr style="width:100; text-align:left;margin-left: 0"><div id="ftn.idm368" class="footnote" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a href="#idm368" class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><sup class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[3] </sup></a>This terminology differs from what is used by GNU
configure, where the host is the machine on which the application will
run (which is usually the same as target)<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <sup class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[3] </sup> 这个术语与 GNU 配置中使用的术语不同，在那里主机是应用程序将运行的机器（通常与目标相同）。</font></font></font></p></div></div></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_configuration_of_other_components" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;7.&nbsp;Configuration of other components<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 7 章。其他组件的配置</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Before attempting to modify any of the components below, make sure you
have already configured Buildroot itself, and have enabled the
corresponding package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在尝试修改以下任何组件之前，请确保您已经配置了 Buildroot 本身，并已启用相应的软件包。</font></font></font></p><div class="variablelist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl class="variablelist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="term" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
BusyBox
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">繁忙盒</font></font></font></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you already have a BusyBox configuration file, you can directly
specify this file in the Buildroot configuration, using
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_BUSYBOX_CONFIG</code>. Otherwise, Buildroot will start from a
default BusyBox configuration file.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您已经有一个 BusyBox 配置文件，您可以直接在 Buildroot 配置中指定该文件，使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_BUSYBOX_CONFIG</code> 。否则，Buildroot 将从默认的 BusyBox 配置文件开始。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To make subsequent changes to the configuration, use <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make
busybox-menuconfig</code> to open the BusyBox configuration editor.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要对配置进行后续更改，请使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make
busybox-menuconfig</code> 打开 BusyBox 配置编辑器。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">It is also possible to specify a BusyBox configuration file through an
environment variable, although this is not recommended. Refer to
<a class="xref" href="#env-vars" title="8.6.&nbsp;Environment variables" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;8.6, “Environment variables”</a> for more details.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">也可以通过环境变量指定 BusyBox 配置文件，尽管这不被推荐。有关更多详细信息，请参阅第 8.6 节“环境变量”。</font></font></font></p></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="term" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
uClibc
</span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Configuration of uClibc is done in the same way as for BusyBox. The
configuration variable to specify an existing configuration file is
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_UCLIBC_CONFIG</code>. The command to make subsequent changes is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make
uclibc-menuconfig</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">uClibc 的配置与 BusyBox 相同。指定现有配置文件的配置变量为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_UCLIBC_CONFIG</code> 。进行后续更改的命令为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make
uclibc-menuconfig</code> 。</font></font></font></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="term" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Linux kernel
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Linux 内核</font></font></font></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you already have a kernel configuration file, you can directly
specify this file in the Buildroot configuration, using
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_USE_CUSTOM_CONFIG</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您已经有内核配置文件，可以直接在 Buildroot 配置中指定该文件，使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_USE_CUSTOM_CONFIG</code> 。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you do not yet have a kernel configuration file, you can either start
by specifying a defconfig in the Buildroot configuration, using
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_USE_DEFCONFIG</code>, or start by creating an empty file and
specifying it as custom configuration file, using
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_USE_CUSTOM_CONFIG</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您还没有内核配置文件，可以通过在 Buildroot 配置中指定一个 defconfig（使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_USE_DEFCONFIG</code> ）开始，或者通过创建一个空文件并将其指定为自定义配置文件（使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_USE_CUSTOM_CONFIG</code> ）开始。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To make subsequent changes to the configuration, use <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make
linux-menuconfig</code> to open the Linux configuration editor.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要对配置进行后续更改，请使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make
linux-menuconfig</code> 打开 Linux 配置编辑器。</font></font></font></p></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="term" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Barebox
</span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Configuration of Barebox is done in the same way as for the Linux
kernel. The corresponding configuration variables are
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TARGET_BAREBOX_USE_CUSTOM_CONFIG</code> and
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TARGET_BAREBOX_USE_DEFCONFIG</code>. To open the configuration editor,
use <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make barebox-menuconfig</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Barebox 的配置与 Linux 内核的配置方式相同。相应的配置变量是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TARGET_BAREBOX_USE_CUSTOM_CONFIG</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TARGET_BAREBOX_USE_DEFCONFIG</code> 。要打开配置编辑器，请使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make barebox-menuconfig</code> 。</font></font></font></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="term" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
U-Boot
</span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Configuration of U-Boot (version 2015.04 or newer) is done in the same
way as for the Linux kernel. The corresponding configuration variables
are <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TARGET_UBOOT_USE_CUSTOM_CONFIG</code> and
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TARGET_UBOOT_USE_DEFCONFIG</code>. To open the configuration editor,
use <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make uboot-menuconfig</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">U-Boot 的配置（版本 2015.04 或更新版本）与 Linux 内核的配置方式相同。相应的配置变量是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TARGET_UBOOT_USE_CUSTOM_CONFIG</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TARGET_UBOOT_USE_DEFCONFIG</code> 。要打开配置编辑器，请使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make uboot-menuconfig</code> 。</font></font></font></dd></dl></div></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_general_buildroot_usage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;8.&nbsp;General Buildroot usage<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 8 章 通用 Buildroot 使用</font></font></font></h2></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="make-tips" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>8.1.&nbsp;<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</em></span> tips<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.1. 制作提示</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This is a collection of tips that help you make the most of Buildroot.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这是一些帮助您充分利用 Buildroot 的技巧的集合。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Display all commands executed by make:&nbsp;<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">显示由 make 执行的所有命令：</font></font></font></strong>
</p><pre class="screen"> $ make V=1 &lt;target&gt;</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
</p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Display the list of boards with a defconfig:&nbsp;<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">显示具有 defconfig 的板的列表：</font></font></font></strong>
</p><pre class="screen"> $ make list-defconfigs</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
</p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Display all available targets:&nbsp;<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">显示所有可用的目标：</font></font></font></strong>
</p><pre class="screen"> $ make help</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
</p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Not all targets are always available,
some settings in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> file may hide some targets:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">并非所有目标始终可用， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> 文件中的一些设置可能会隐藏一些目标：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">busybox-menuconfig</code> only works when <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">busybox</code> is enabled;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">仅当启用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">busybox</code> 时， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">busybox-menuconfig</code> 才起作用；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux-menuconfig</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux-savedefconfig</code> only work when
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux</code> is enabled;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">仅当启用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux</code> 时， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux-menuconfig</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux-savedefconfig</code> 才起作用；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uclibc-menuconfig</code> is only available when the uClibc C library is
  selected in the internal toolchain backend;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当在内部工具链后端中选择 uClibc C 库时，只有 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uclibc-menuconfig</code> 可用;</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">barebox-menuconfig</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">barebox-savedefconfig</code> only work when the
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">barebox</code> bootloader is enabled.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">barebox</code> bootloader 启用时，只有 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">barebox-menuconfig</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">barebox-savedefconfig</code> 可用。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uboot-menuconfig</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uboot-savedefconfig</code> only work when the
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">U-Boot</code> bootloader is enabled and the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uboot</code> build system is set
  to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Kconfig</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">U-Boot</code> bootloader 启用且 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uboot</code> 构建系统设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Kconfig</code> 时，只有 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uboot-menuconfig</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uboot-savedefconfig</code> 可用。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Cleaning:&nbsp;</strong>Explicit cleaning is required when any of the architecture or toolchain
configuration options are changed.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">清理：当更改任何架构或工具链配置选项时，需要显式清理。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To delete all build products (including build directories, host, staging
and target trees, the images and the toolchain):<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要删除所有构建产品（包括构建目录、主机、暂存和目标树、映像和工具链）：</font></font></font></p><pre class="screen"> $ make clean</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Generating the manual:&nbsp;</strong>The present manual sources are located in the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">docs/manual</em></span> directory.
To generate the manual:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">生成手册：当前手册源位于 docs/manual 目录中。要生成手册：</font></font></font></p><pre class="screen"> $ make manual-clean
 $ make manual</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The manual outputs will be generated in <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/docs/manual</em></span>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">手册输出将生成在 output/docs/manual 中。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Notes<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意事项</font></font></font></strong></p><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
A few tools are required to build the documentation (see:
  <a class="xref" href="#requirement-optional" title="2.2.&nbsp;Optional packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;2.2, “Optional packages”</a>).
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">构建文档需要一些工具（参见：第 2.2 节，“可选软件包”）。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Resetting Buildroot for a new target:&nbsp;</strong>To delete all build products as well as the configuration:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为新目标重置 Buildroot：要删除所有构建产品以及配置：</font></font></font></p><pre class="screen"> $ make distclean</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Notes.&nbsp;</strong>If <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</code> is enabled, running <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make clean</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">distclean</code> does
not empty the compiler cache used by Buildroot. To delete it, refer
to <a class="xref" href="#ccache" title="8.13.3.&nbsp;Using ccache in Buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;8.13.3, “Using <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</code> in Buildroot”</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意事项。如果启用了 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</code> ，运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make clean</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">distclean</code> 不会清空 Buildroot 使用的编译器缓存。要删除它，请参阅第 8.13.3 节“在 Buildroot 中使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</code> ”。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Dumping the internal make variables:&nbsp;</strong>One can dump the variables known to make, along with their values:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">转储内部制作变量：可以转储已知于制作的变量及其值：</font></font></font></p><pre class="screen"> $ make -s printvars VARS='VARIABLE1 VARIABLE2'
 VARIABLE1=value_of_variable
 VARIABLE2=value_of_variable</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">It is possible to tweak the output using some variables:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">可以使用一些变量来调整输出：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">VARS</code> will limit the listing to variables which names match the
  specified make-patterns - this must be set else nothing is printed
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">VARS</code> 将限制列出与指定制作模式匹配的变量名称 - 必须设置，否则不会打印任何内容</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">QUOTED_VARS</code>, if set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code>, will single-quote the value
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">QUOTED_VARS</code> ，如果设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> ，将对值进行单引号处理</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">RAW_VARS</code>, if set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code>, will print the unexpanded value
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">RAW_VARS</code> ，如果设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> ，将打印未展开的值</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For example:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">例如：</font></font></font></p><pre class="screen"> $ make -s printvars VARS=BUSYBOX_%DEPENDENCIES
 BUSYBOX_DEPENDENCIES=skeleton toolchain
 BUSYBOX_FINAL_ALL_DEPENDENCIES=skeleton toolchain
 BUSYBOX_FINAL_DEPENDENCIES=skeleton toolchain
 BUSYBOX_FINAL_PATCH_DEPENDENCIES=
 BUSYBOX_RDEPENDENCIES=ncurses util-linux</pre><pre class="screen"> $ make -s printvars VARS=BUSYBOX_%DEPENDENCIES QUOTED_VARS=YES
 BUSYBOX_DEPENDENCIES='skeleton toolchain'
 BUSYBOX_FINAL_ALL_DEPENDENCIES='skeleton toolchain'
 BUSYBOX_FINAL_DEPENDENCIES='skeleton toolchain'
 BUSYBOX_FINAL_PATCH_DEPENDENCIES=''
 BUSYBOX_RDEPENDENCIES='ncurses util-linux'</pre><pre class="screen"> $ make -s printvars VARS=BUSYBOX_%DEPENDENCIES RAW_VARS=YES
 BUSYBOX_DEPENDENCIES=skeleton toolchain
 BUSYBOX_FINAL_ALL_DEPENDENCIES=$(sort $(BUSYBOX_FINAL_DEPENDENCIES) $(BUSYBOX_FINAL_PATCH_DEPENDENCIES))
 BUSYBOX_FINAL_DEPENDENCIES=$(sort $(BUSYBOX_DEPENDENCIES))
 BUSYBOX_FINAL_PATCH_DEPENDENCIES=$(sort $(BUSYBOX_PATCH_DEPENDENCIES))
 BUSYBOX_RDEPENDENCIES=ncurses util-linux</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The output of quoted variables can be reused in shell scripts, for example:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">引用变量的输出可以在 shell 脚本中重复使用，例如：</font></font></font></p><pre class="screen"> $ eval $(make -s printvars VARS=BUSYBOX_DEPENDENCIES QUOTED_VARS=YES)
 $ echo $BUSYBOX_DEPENDENCIES
 skeleton toolchain</pre></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="full-rebuild" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>8.2.&nbsp;Understanding when a full rebuild is necessary<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.2.&nbsp;了解何时需要进行完全重建</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot does not attempt to detect what parts of the system should
be rebuilt when the system configuration is changed through <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make
menuconfig</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make xconfig</code> or one of the other configuration
tools. In some cases, Buildroot should rebuild the entire system, in
some cases, only a specific subset of packages. But detecting this in
a completely reliable manner is very difficult, and therefore the
Buildroot developers have decided to simply not attempt to do this.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当系统配置通过 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make
menuconfig</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make xconfig</code>
 或其他配置工具更改时，Buildroot 不会尝试检测应重新构建系统的哪些部分。在某些情况下，Buildroot 
应重新构建整个系统，而在某些情况下，只需重新构建特定的软件包子集。但以完全可靠的方式检测这一点非常困难，因此 Buildroot 
开发人员决定简单地不尝试这样做。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Instead, it is the responsibility of the user to know when a full
rebuild is necessary. As a hint, here are a few rules of thumb that
can help you understand how to work with Buildroot:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">相反，用户有责任知道何时需要进行完全重建。以下是一些经验法则的提示，可以帮助您了解如何使用 Buildroot：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
When the target architecture configuration is changed, a complete
   rebuild is needed. Changing the architecture variant, the binary
   format or the floating point strategy for example has an impact on
   the entire system.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当目标架构配置更改时，需要进行完全重建。例如，更改架构变体、二进制格式或浮点策略会影响整个系统。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
When the toolchain configuration is changed, a complete rebuild
   generally is needed. Changing the toolchain configuration often
   involves changing the compiler version, the type of C library or
   its configuration, or some other fundamental configuration item,
   and these changes have an impact on the entire system.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当工具链配置更改时，通常需要进行完全重建。更改工具链配置通常涉及更改编译器版本、C 库类型或其配置，或者其他一些基本配置项，这些更改会影响整个系统。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
When an additional package is added to the configuration, a full
   rebuild is not necessarily needed. Buildroot will detect that this
   package has never been built, and will build it. However, if this
   package is a library that can optionally be used by packages that
   have already been built, Buildroot will not automatically rebuild
   those. Either you know which packages should be rebuilt, and you
   can rebuild them manually, or you should do a full rebuild. For
   example, let’s suppose you have built a system with the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ctorrent</code>
   package, but without <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">openssl</code>. Your system works, but you realize
   you would like to have SSL support in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ctorrent</code>, so you enable the
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">openssl</code> package in Buildroot configuration and restart the
   build. Buildroot will detect that <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">openssl</code> should be built and
   will be build it, but it will not detect that <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ctorrent</code> should be
   rebuilt to benefit from <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">openssl</code> to add OpenSSL support. You will
   either have to do a full rebuild, or rebuild <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ctorrent</code> itself.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当
向配置中添加额外的软件包时，并不一定需要进行完全重建。Buildroot 
将检测到这个软件包从未被构建过，并将对其进行构建。但是，如果这个软件包是一个库，可以选择性地被已经构建过的软件包使用，Buildroot 
将不会自动重建那些软件包。要么你知道哪些软件包应该被重建，然后可以手动重建它们，要么你应该进行完全重建。例如，假设你已经构建了一个系统，其中包含
 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ctorrent</code> 软件包，但不包含 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">openssl</code> 软件包。你的系统可以运行，但你意识到你想在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ctorrent</code> 中添加 SSL 支持，因此你在 Buildroot 配置中启用了 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">openssl</code> 软件包并重新启动构建。Buildroot 将检测到应该构建 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">openssl</code> 并对其进行构建，但它不会检测到应该重建 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ctorrent</code> 以从 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">openssl</code> 中获益以添加 OpenSSL 支持。你要么进行完全重建，要么重建 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ctorrent</code> 本身。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
When a package is removed from the configuration, Buildroot does
   not do anything special. It does not remove the files installed by
   this package from the target root filesystem or from the toolchain
   <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sysroot</em></span>. A full rebuild is needed to get rid of this
   package. However, generally you don’t necessarily need this package
   to be removed right now: you can wait for the next lunch break to
   restart the build from scratch.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当从配置中删除软件包时，Buildroot 不会执行任何特殊操作。它不会从目标根文件系统或工具链 sysroot 中删除此软件包安装的文件。需要进行完整重建才能摆脱此软件包。但是，通常您不一定需要立即删除此软件包：您可以等到下次午餐时间重新从头开始构建。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
When the sub-options of a package are changed, the package is not
   automatically rebuilt. After making such changes, rebuilding only
   this package is often sufficient, unless enabling the package
   sub-option adds some features to the package that are useful for
   another package which has already been built. Again, Buildroot does
   not track when a package should be rebuilt: once a package has been
   built, it is never rebuilt unless explicitly told to do so.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当更改软件包的子选项时，软件包不会自动重建。在进行此类更改后，通常只需重新构建此软件包，除非启用软件包子选项会为已构建的另一个软件包添加一些功能。同样，Buildroot 不会跟踪何时应重新构建软件包：一旦构建了软件包，除非明确告知，否则永远不会重新构建。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
When a change to the root filesystem skeleton is made, a full
   rebuild is needed. However, when changes to the root filesystem
   overlay, a post-build script or a post-image script are made,
   there is no need for a full rebuild: a simple <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> invocation
   will take the changes into account.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当对根文件系统骨架进行更改时，需要进行完整重建。但是，当对根文件系统叠加、后构建脚本或后图像脚本进行更改时，无需进行完整重建：简单的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> 调用将考虑到更改。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
When a package listed in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES</code> is rebuilt or removed,
   the package <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> is not automatically rebuilt. For example, if a
   package <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bar</code> is listed in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES</code> with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES
   = bar</code> and the configuration of the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bar</code> package is changed, the
   configuration change would not result in a rebuild of package <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code>
   automatically. In this scenario, you may need to either rebuild any
   packages in your build which reference <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bar</code> in their <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DEPENDENCIES</code>,
   or perform a full rebuild to ensure any <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bar</code> dependent packages are
   up to date.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES</code> 中列出的软件包被重新构建或移除时，软件包 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> 不会自动重新构建。例如，如果软件包 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bar</code> 在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES</code> 中与 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES
   = bar</code> 一起列出，并且 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bar</code> 软件包的配置发生更改，则配置更改不会自动导致软件包 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> 重新构建。在这种情况下，您可能需要重新构建任何在构建中引用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bar</code> 的软件包，或者执行完整的重新构建以确保任何 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bar</code> 依赖软件包是最新的。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Generally speaking, when you’re facing a build error and you’re unsure
of the potential consequences of the configuration changes you’ve
made, do a full rebuild. If you get the same build error, then you are
sure that the error is not related to partial rebuilds of packages,
and if this error occurs with packages from the official Buildroot, do
not hesitate to report the problem! As your experience with Buildroot
progresses, you will progressively learn when a full rebuild is really
necessary, and you will save more and more time.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一
般来说，当您面临构建错误并且不确定您所做配置更改的潜在后果时，请进行完整重建。如果您收到相同的构建错误，则可以确定该错误与软件包的部分重建无关，
如果此错误发生在官方 Buildroot 软件包中，请毫不犹豫地报告问题！随着您对 Buildroot 
的经验不断积累，您将逐渐学会何时真正需要进行完整重建，并且将节省越来越多的时间。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For reference, a full rebuild is achieved by running:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">供参考，通过运行以下命令来实现完整重建：</font></font></font></p><pre class="screen">$ make clean all</pre></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="rebuild-pkg" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>8.3.&nbsp;Understanding how to rebuild packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.3.&nbsp;了解如何重新构建软件包</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">One of the most common questions asked by Buildroot users is how to
rebuild a given package or how to remove a package without rebuilding
everything from scratch.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 用户经常问的一个最常见的问题是如何重新构建给定的软件包或如何在不从头开始重新构建的情况下删除软件包。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Removing a package is unsupported by Buildroot without
rebuilding from scratch. This is because Buildroot doesn’t keep track
of which package installs what files in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/staging</code> and
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/target</code> directories, or which package would be compiled differently
depending on the availability of another package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在不从头开始重新构建的情况下，Buildroot 不支持删除软件包。这是因为 Buildroot 不跟踪哪个软件包在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/staging</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/target</code> 目录中安装了哪些文件，或者哪个软件包的编译方式会因为另一个软件包的可用性而有所不同。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The easiest way to rebuild a single package from scratch is to remove
its build directory in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/build</code>. Buildroot will then re-extract,
re-configure, re-compile and re-install this package from scratch. You
can ask buildroot to do this with the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make &lt;package&gt;-dirclean</code> command.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">从头开始重新构建单个软件包的最简单方法是删除其在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/build</code> 中的构建目录。然后 Buildroot 将重新提取、重新配置、重新编译和重新安装此软件包。您可以使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make &lt;package&gt;-dirclean</code> 命令要求 buildroot 这样做。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On the other hand, if you only want to restart the build process of a
package from its compilation step, you can run <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make &lt;package&gt;-rebuild</code>. It
will restart the compilation and installation of the package, but not from
scratch: it basically re-executes <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make install</code> inside the package,
so it will only rebuild files that changed.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">另一方面，如果您只想从编译步骤重新启动软件包的构建过程，可以运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make &lt;package&gt;-rebuild</code> 。它将重新启动软件包的编译和安装过程，但不是从头开始：它基本上重新执行软件包内的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make install</code> ，因此只会重新构建已更改的文件。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you want to restart the build process of a package from its configuration
step, you can run <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make &lt;package&gt;-reconfigure</code>. It will restart the
configuration, compilation and installation of the package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您想从配置步骤重新启动软件包的构建过程，可以运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make &lt;package&gt;-reconfigure</code> 。它将重新启动软件包的配置、编译和安装。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">While <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;package&gt;-rebuild</code> implies <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;package&gt;-reinstall</code> and
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;package&gt;-reconfigure</code> implies <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;package&gt;-rebuild</code>, these targets as well
as <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;package&gt;</code> only act on the said package, and do not trigger re-creating
the root filesystem image. If re-creating the root filesystem in necessary,
one should in addition run <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make all</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">虽然 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;package&gt;-rebuild</code> 意味着 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;package&gt;-reinstall</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;package&gt;-reconfigure</code> 意味着 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;package&gt;-rebuild</code> ，这些目标以及 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;package&gt;</code> 仅对所述软件包起作用，并不会触发重新创建根文件系统映像。如果需要重新创建根文件系统，则还应运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make all</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Internally, Buildroot creates so-called <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">stamp files</em></span> to keep track of
which build steps have been completed for each package. They are
stored in the package build directory,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/build/&lt;package&gt;-&lt;version&gt;/</code> and are named
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.stamp_&lt;step-name&gt;</code>. The commands detailed above simply manipulate
these stamp files to force Buildroot to restart a specific set of
steps of a package build process.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在内部，Buildroot 创建所谓的戳记文件，以跟踪每个软件包的构建步骤已完成的情况。它们存储在软件包构建目录中， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/build/&lt;package&gt;-&lt;version&gt;/</code> ，并命名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.stamp_&lt;step-name&gt;</code> 。上面详细介绍的命令只是简单地操作这些戳记文件，以强制 Buildroot 重新启动软件包构建过程的特定步骤。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Further details about package special make targets are explained in
<a class="xref" href="#pkg-build-steps" title="8.13.5.&nbsp;Package-specific make targets" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;8.13.5, “Package-specific <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</em></span> targets”</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有关软件包特殊的 make 目标的更多细节，请参阅第 8.13.5 节，“软件包特定的 make 目标”。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_offline_builds" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>8.4.&nbsp;Offline builds<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.4. 离线构建</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you intend to do an offline build and just want to download
all sources that you previously selected in the configurator
(<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">menuconfig</em></span>, <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">nconfig</em></span>, <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">xconfig</em></span> or <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gconfig</em></span>), then issue:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您打算进行离线构建，并且只想下载您先前在配置器（menuconfig、nconfig、xconfig 或 gconfig）中选择的所有源代码，请执行以下操作：</font></font></font></p><pre class="screen"> $ make source</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">You can now disconnect or copy the content of your <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dl</code>
directory to the build-host.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您现在可以断开连接或复制您的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dl</code> 目录内容到构建主机。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_building_out_of_tree" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>8.5.&nbsp;Building out-of-tree<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.5. 在树外构建</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">As default, everything built by Buildroot is stored in the directory
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output</code> in the Buildroot tree.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">默认情况下，Buildroot 构建的所有内容都存储在 Buildroot 树中的目录 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output</code> 中。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot also supports building out of tree with a syntax similar to
the Linux kernel. To use it, add <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">O=&lt;directory&gt;</code> to the make command
line:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 还支持类似于 Linux 内核的外部构建。要使用它，请将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">O=&lt;directory&gt;</code> 添加到 make 命令行中：</font></font></font></p><pre class="screen"> $ make O=/tmp/build menuconfig</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Or:</p><pre class="screen"> $ cd /tmp/build; make O=$PWD -C path/to/buildroot menuconfig</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">All the output files will be located under <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/tmp/build</code>. If the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">O</code>
path does not exist, Buildroot will create it.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">所有输出文件将位于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/tmp/build</code> 下。如果 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">O</code> 路径不存在，Buildroot 将创建它。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note:</strong></span> the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">O</code> path can be either an absolute or a relative path, but if it’s
passed as a relative path, it is important to note that it is interpreted
relative to the main Buildroot source directory, <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">not</strong></span> the current working
directory.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">O</code> 路径可以是绝对路径，也可以是相对路径，但如果作为相对路径传递，重要的是要注意，它是相对于主 Buildroot 源目录解释的，而不是当前工作目录。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When using out-of-tree builds, the Buildroot <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> and temporary
files are also stored in the output directory. This means that you can
safely run multiple builds in parallel using the same source tree as
long as they use unique output directories.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在使用 out-of-tree 构建时，Buildroot 的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> 和临时文件也存储在输出目录中。这意味着只要它们使用唯一的输出目录，您可以安全地并行运行多个构建，使用相同的源树。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For ease of use, Buildroot generates a Makefile wrapper in the output
directory - so after the first run, you no longer need to pass <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">O=&lt;…&gt;</code>
and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-C &lt;…&gt;</code>, simply run (in the output directory):<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为了方便使用，Buildroot 在输出目录中生成一个 Makefile 包装器 - 因此在第一次运行后，您不再需要传递 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">O=&lt;…&gt;</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-C &lt;…&gt;</code> ，只需在（输出目录中）运行：</font></font></font></p><pre class="screen"> $ make &lt;target&gt;</pre></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="env-vars" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>8.6.&nbsp;Environment variables<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.6.&nbsp;环境变量</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot also honors some environment variables, when they are passed
to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> or set in the environment:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当传递给 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> 或在环境中设置时，Buildroot 也会尊重一些环境变量：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOSTCXX</code>, the host C++ compiler to use
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOSTCXX</code> ，要使用的主机 C++ 编译器</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOSTCC</code>, the host C compiler to use
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOSTCC</code> ，要使用的主机 C 编译器</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">UCLIBC_CONFIG_FILE=&lt;path/to/.config&gt;</code>, path to
  the uClibc configuration file, used to compile uClibc, if an
  internal toolchain is being built.
 
  Note that the uClibc configuration file can also be set from the
  configuration interface, so through the Buildroot <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> file; this
  is the recommended way of setting it.
 
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">UCLIBC_CONFIG_FILE=&lt;path/to/.config&gt;</code> ，用于编译 uClibc 的 uClibc 配置文件的路径，如果正在构建内部工具链。请注意，也可以从配置界面设置 uClibc 配置文件，因此通过 Buildroot <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> 文件；这是建议的设置方式。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUSYBOX_CONFIG_FILE=&lt;path/to/.config&gt;</code>, path to
  the BusyBox configuration file.
 
  Note that the BusyBox configuration file can also be set from the
  configuration interface, so through the Buildroot <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> file; this
  is the recommended way of setting it.
 
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUSYBOX_CONFIG_FILE=&lt;path/to/.config&gt;</code> ，BusyBox 配置文件的路径。请注意，也可以从配置界面设置 BusyBox 配置文件，因此通过 Buildroot <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> 文件；这是建议的设置方式。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_CCACHE_DIR</code> to override the directory where
  Buildroot stores the cached files when using ccache.
 
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_CCACHE_DIR</code> 用于覆盖 Buildroot 在使用 ccache 时存储缓存文件的目录。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_DL_DIR</code> to override the directory in which
  Buildroot stores/retrieves downloaded files.
 
  Note that the Buildroot download directory can also be set from the
  configuration interface, so through the Buildroot <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> file. See
  <a class="xref" href="#download-location" title="8.13.4.&nbsp;Location of downloaded packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;8.13.4, “Location of downloaded packages”</a> for more details on how you can set the download
  directory.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_DL_DIR</code> 用于覆盖 Buildroot 存储/检索下载文件的目录。请注意，Buildroot 下载目录也可以从配置界面设置，或通过 Buildroot <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> 文件设置。有关如何设置下载目录的更多详细信息，请参阅第 8.13.4 节“下载软件包的位置”。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GRAPH_ALT</code>, if set and non-empty, to use an alternate color-scheme in
  build-time graphs
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GRAPH_ALT</code> ，如果设置且非空，则在构建时图表中使用替代配色方案。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GRAPH_OUT</code> to set the filetype of generated graphs, either <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pdf</code> (the
  default), or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">png</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GRAPH_OUT</code> 设置生成图形的文件类型，可以是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pdf</code> （默认值），也可以是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">png</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GRAPH_DEPS_OPTS</code> to pass extra options to the dependency graph; see
  <a class="xref" href="#graph-depends" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;8.9, “Graphing the dependencies between packages”</a> for the accepted options
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GRAPH_DEPS_OPTS</code> 传递额外选项给依赖图；请参阅第 8.9 节“绘制软件包之间的依赖关系图”以查看可接受的选项。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GRAPH_DOT_OPTS</code> is passed verbatim as options to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dot</code> utility to
  draw the dependency graph.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GRAPH_DOT_OPTS</code> 按原样传递给 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dot</code> 实用程序作为绘制依赖图的选项。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GRAPH_SIZE_OPTS</code> to pass extra options to the size graph; see
  <a class="xref" href="#graph-size" title="8.11.&nbsp;Graphing the filesystem size contribution of packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;8.11, “Graphing the filesystem size contribution of packages”</a> for the acepted options
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GRAPH_SIZE_OPTS</code> 传递额外选项给大小图表；请参阅第 8.11 节，“图表化软件包的文件系统大小贡献”以获取接受的选项</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">An example that uses config files located in the toplevel directory and
in your $HOME:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一个示例，使用位于顶层目录和您的 $HOME 中的配置文件：</font></font></font></p><pre class="screen"> $ make UCLIBC_CONFIG_FILE=uClibc.config BUSYBOX_CONFIG_FILE=$HOME/bb.config</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you want to use a compiler other than the default <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gcc</code>
or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">g</code>++ for building helper-binaries on your host, then do<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您想在主机上构建辅助二进制文件时使用除默认的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gcc</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">g</code> ++ 之外的编译器，则执行</font></font></font></p><pre class="screen"> $ make HOSTCXX=g++-4.3-HEAD HOSTCC=gcc-4.3-HEAD</pre></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_dealing_efficiently_with_filesystem_images" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>8.7.&nbsp;Dealing efficiently with filesystem images<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.7.&nbsp;高效处理文件系统镜像</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Filesystem images can get pretty big, depending on the filesystem you choose,
the number of packages, whether you provisioned free space… Yet, some
locations in the filesystems images may just be <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">empty</em></span> (e.g. a long run of
<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">zeroes</em></span>); such a file is called a <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sparse</em></span> file.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">文件系统映像可能会变得非常庞大，这取决于您选择的文件系统、软件包的数量、是否预留了空闲空间等因素... 然而，在文件系统映像中的某些位置可能是空的（例如，一长串零）；这样的文件称为稀疏文件。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Most tools can handle sparse files efficiently, and will only store or write
those parts of a sparse file that are not empty.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">大多数工具可以高效处理稀疏文件，并且只会存储或写入那些不为空的稀疏文件部分。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For example:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">例如：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">tar</code> accepts the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-S</code> option to tell it to only store non-zero blocks
  of sparse files:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">tar</code> 接受 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-S</code> 选项，告诉它仅存储稀疏文件的非零块：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">tar cf archive.tar -S [files…]</code> will efficiently store sparse files
   in a tarball
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">tar cf archive.tar -S [files…]</code> 将有效地存储 tarball 中的稀疏文件</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">tar xf archive.tar -S</code> will efficiently store sparse files extracted
   from a tarball
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">tar xf archive.tar -S</code> 将有效地存储从 tarball 中提取的稀疏文件</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cp</code> accepts the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--sparse=WHEN</code> option (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">WHEN</code> is one of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">auto</code>,
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">never</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">always</code>):
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cp</code> 接受 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--sparse=WHEN</code> 选项 ( <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">WHEN</code> 是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">auto</code> , <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">never</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">always</code> 之一) ：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cp --sparse=always source.file dest.file</code> will make <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dest.file</code> a
   sparse file if <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">source.file</code> has long runs of zeroes
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">source.file</code> 有长时间的零运行， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cp --sparse=always source.file dest.file</code> 将使 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dest.file</code> 成为稀疏文件</font></font></font></li></ul></div></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Other tools may have similar options. Please consult their respective man
pages.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">其他工具可能具有类似的选项。请参阅各自的 man 手册。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">You can use sparse files if you need to store the filesystem images (e.g.
to transfer from one machine to another), or if you need to send them (e.g.
to the Q&amp;A team).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您需要存储文件系统映像（例如，从一台机器传输到另一台机器），或者需要发送它们（例如，发送给问答团队），则可以使用稀疏文件。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Note however that flashing a filesystem image to a device while using the
sparse mode of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dd</code> may result in a broken filesystem (e.g. the block bitmap
of an ext2 filesystem may be corrupted; or, if you have sparse files in
your filesystem, those parts may not be all-zeroes when read back). You
should only use sparse files when handling files on the build machine, not
when transferring them to an actual device that will be used on the target.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，当使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dd</code>
 的稀疏模式将文件系统映像刷写到设备时，可能会导致文件系统损坏（例如，ext2 
文件系统的块位图可能会损坏；或者，如果文件系统中有稀疏文件，则在读取时这些部分可能不全为零）。只有在处理构建机器上的文件时才应使用稀疏文件，而不
是在将它们传输到将在目标设备上使用的实际设备时。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_details_about_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>8.8.&nbsp;Details about packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.8. 关于软件包的详细信息</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="package-details" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Buildroot can produce a JSON blurb that describes the set of enabled
packages in the current configuration, together with their
dependencies, licenses and other metadata. This JSON blurb is produced
by using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">show-info</code> make target:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 可以生成一个 JSON 摘要，描述当前配置中启用的软件包集合，以及它们的依赖关系、许可证和其他元数据。通过使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">show-info</code> make 目标生成此 JSON 摘要：</font></font></font></p><pre class="screen">make show-info</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot can also produce details about packages as HTML and JSON
output using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pkg-stats</code> make target. Amongst other things, these
details include whether known CVEs (security vulnerabilities) affect
the packages in your current configuration. It also shows if there is
a newer upstream version for those packages.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 还可以使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pkg-stats</code> make 目标生成有关软件包的 HTML 和 JSON 输出的详细信息。除其他事项外，这些详细信息还包括已知 CVE（安全漏洞）是否影响当前配置中的软件包。它还显示这些软件包是否有更新的上游版本。</font></font></font></p><pre class="screen">make pkg-stats</pre></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_graphing_the_dependencies_between_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>8.9.&nbsp;Graphing the dependencies between packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.9. 绘制软件包之间的依赖关系</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="graph-depends" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>One of Buildroot’s jobs is to know the dependencies between packages,
and make sure they are built in the right order. These dependencies
can sometimes be quite complicated, and for a given system, it is
often not easy to understand why such or such package was brought into
the build by Buildroot.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 的工作之一是了解软件包之间的依赖关系，并确保它们按正确顺序构建。这些依赖关系有时可能相当复杂，对于给定的系统，通常不容易理解为什么 Buildroot 会将某个软件包引入构建过程中。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In order to help understanding the dependencies, and therefore better
understand what is the role of the different components in your
embedded Linux system, Buildroot is capable of generating dependency
graphs.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为了帮助理解依赖关系，从而更好地了解嵌入式 Linux 系统中不同组件的作用，Buildroot 能够生成依赖图。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To generate a dependency graph of the full system you have compiled,
simply run:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要生成您编译的完整系统的依赖图，只需运行：</font></font></font></p><pre class="screen">make graph-depends</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">You will find the generated graph in
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/graphs/graph-depends.pdf</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">你将在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/graphs/graph-depends.pdf</code> 中找到生成的图形。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If your system is quite large, the dependency graph may be too complex
and difficult to read. It is therefore possible to generate the
dependency graph just for a given package:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您的系统非常庞大，则依赖图可能过于复杂且难以阅读。因此，可以仅为给定的软件包生成依赖图：</font></font></font></p><pre class="screen">make &lt;pkg&gt;-graph-depends</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">You will find the generated graph in
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/graph/&lt;pkg&gt;-graph-depends.pdf</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">你将在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/graph/&lt;pkg&gt;-graph-depends.pdf</code> 中找到生成的图形。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Note that the dependency graphs are generated using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dot</code> tool
from the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Graphviz</em></span> project, which you must have installed on your
system to use this feature. In most distributions, it is available as
the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">graphviz</code> package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，依赖图是使用 Graphviz 项目中的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dot</code> 工具生成的，您必须在系统上安装此工具才能使用此功能。在大多数发行版中，它作为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">graphviz</code> 软件包提供。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">By default, the dependency graphs are generated in the PDF
format. However, by passing the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GRAPH_OUT</code> environment variable, you
can switch to other output formats, such as PNG, PostScript or
SVG. All formats supported by the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-T</code> option of the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dot</code> tool are
supported.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">默认情况下，依赖图以 PDF 格式生成。但是，通过传递 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GRAPH_OUT</code> 环境变量，您可以切换到其他输出格式，如 PNG、PostScript 或 SVG。所有 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dot</code> 工具的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-T</code> 选项支持的格式都受支持。</font></font></font></p><pre class="screen">BR2_GRAPH_OUT=svg make graph-depends</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">graph-depends</code> behaviour can be controlled by setting options in the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GRAPH_DEPS_OPTS</code> environment variable. The accepted options are:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">graph-depends</code> 的行为可以通过在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GRAPH_DEPS_OPTS</code> 环境变量中设置选项来控制。接受的选项包括：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--depth N</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-d N</code>, to limit the dependency depth to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">N</code> levels. The
  default, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">0</code>, means no limit.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--depth N</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-d N</code> ，将依赖深度限制为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">N</code> 级。默认值 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">0</code> 表示无限制。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--stop-on PKG</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-s PKG</code>, to stop the graph on the package <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PKG</code>.
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PKG</code> can be an actual package name, a glob, the keyword <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">virtual</em></span>
  (to stop on virtual packages), or the keyword <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host</em></span> (to stop on
  host packages). The package is still present on the graph, but its
  dependencies are not.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--stop-on PKG</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-s PKG</code> ，停止图形在包 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PKG</code> 上。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PKG</code> 可以是实际包名称、通配符、关键字 virtual（停在虚拟包上）或关键字 host（停在主机包上）。包仍然存在于图中，但其依赖关系不在图中。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--exclude PKG</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-x PKG</code>, like <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--stop-on</code>, but also omits <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PKG</code> from
  the graph.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--exclude PKG</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-x PKG</code> ，类似于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--stop-on</code> ，但也从图中省略 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PKG</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--transitive</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--no-transitive</code>, to draw (or not) the transitive
  dependencies. The default is to not draw transitive dependencies.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--transitive</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--no-transitive</code> ，绘制（或不绘制）传递依赖项。默认情况下不绘制传递依赖项。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--colors R,T,H</code>, the comma-separated list of colors to draw the
  root package (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">R</code>), the target packages (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">T</code>) and the host packages
  (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">H</code>). Defaults to: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">lightblue,grey,gainsboro</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--colors R,T,H</code> ，逗号分隔的颜色列表，用于绘制根包（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">R</code> ），目标包（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">T</code> ）和主机包（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">H</code> ）。默认为： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">lightblue,grey,gainsboro</code> </font></font></font>
</li></ul></div><pre class="screen">BR2_GRAPH_DEPS_OPTS='-d 3 --no-transitive --colors=red,green,blue' make graph-depends</pre></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_graphing_the_build_duration" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>8.10.&nbsp;Graphing the build duration<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.10. 绘制构建持续时间</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="graph-duration" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>When the build of a system takes a long time, it is sometimes useful
to be able to understand which packages are the longest to build, to
see if anything can be done to speed up the build. In order to help
such build time analysis, Buildroot collects the build time of each
step of each package, and allows to generate graphs from this data.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当系统构建时间较长时，有时了解构建时间最长的软件包是很有用的，以查看是否可以采取措施加快构建速度。为了帮助进行构建时间分析，Buildroot 收集每个软件包每个步骤的构建时间，并允许从这些数据生成图表。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To generate the build time graph after a build, run:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要在构建后生成构建时间图表，请运行：</font></font></font></p><pre class="screen">make graph-build</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This will generate a set of files in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/graphs</code> :<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这将在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/graphs</code> 中生成一组文件：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">build.hist-build.pdf</code>, a histogram of the build time for each
  package, ordered in the build order.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">build.hist-build.pdf</code> ，每个软件包构建时间的直方图，按构建顺序排序。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">build.hist-duration.pdf</code>, a histogram of the build time for each
  package, ordered by duration (longest first)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">build.hist-duration.pdf</code> ，每个软件包构建时间的直方图，按持续时间排序（最长的在前）。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">build.hist-name.pdf</code>, a histogram of the build time for each
  package, order by package name.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">build.hist-name.pdf</code> ，每个软件包构建时间的直方图，按软件包名称排序。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">build.pie-packages.pdf</code>, a pie chart of the build time per package
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">build.pie-packages.pdf</code> ，每个软件包构建时间的饼图</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">build.pie-steps.pdf</code>, a pie chart of the global time spent in each
  step of the packages build process.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">build.pie-steps.pdf</code> ，显示软件包构建过程中每个步骤中全局耗时的饼图</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">graph-build</code> target requires the Python Matplotlib and Numpy
libraries to be installed (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-matplotlib</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-numpy</code> on
most distributions), and also the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">argparse</code> module if you’re using a
Python version older than 2.7 (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-argparse</code> on most
distributions).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">graph-build</code> 目标需要安装 Python Matplotlib 和 Numpy 库（在大多数发行版上为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-matplotlib</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-numpy</code> ），如果您使用的是早于 2.7 版本的 Python，则还需要 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">argparse</code> 模块（在大多数发行版上为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-argparse</code> ）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">By default, the output format for the graph is PDF, but a different
format can be selected using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GRAPH_OUT</code> environment variable. The
only other format supported is PNG:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">默认情况下，图形的输出格式为 PDF，但可以使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GRAPH_OUT</code> 环境变量选择不同的格式。唯一支持的其他格式是 PNG：</font></font></font></p><pre class="screen">BR2_GRAPH_OUT=png make graph-build</pre></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="graph-size" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>8.11.&nbsp;Graphing the filesystem size contribution of packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.11. 绘制文件系统大小对软件包的贡献</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When your target system grows, it is sometimes useful to understand
how much each Buildroot package is contributing to the overall root
filesystem size. To help with such an analysis, Buildroot collects
data about files installed by each package and using this data,
generates a graph and CSV files detailing the size contribution of
the different packages.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当目标系统增长时，了解每个 Buildroot 软件包对整体根文件系统大小的贡献是有用的。为了帮助进行这种分析，Buildroot 收集有关每个软件包安装的文件的数据，并使用这些数据生成关于不同软件包大小贡献的图形和 CSV 文件。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To generate these data after a build, run:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在构建后生成这些数据，请运行：</font></font></font></p><pre class="screen">make graph-size</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This will generate:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这将生成：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/graphs/graph-size.pdf</code>, a pie chart of the contribution of
  each package to the overall root filesystem size
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/graphs/graph-size.pdf</code> ，显示每个软件包对总根文件系统大小的贡献的饼图</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/graphs/package-size-stats.csv</code>, a CSV file giving the size
  contribution of each package to the overall root filesystem size
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/graphs/package-size-stats.csv</code> ，一个 CSV 文件，显示每个软件包对整体根文件系统大小的大小贡献</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/graphs/file-size-stats.csv</code>, a CSV file giving the size
  contribution of each installed file to the package it belongs, and
  to the overall filesystem size.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/graphs/file-size-stats.csv</code> ，一个 CSV 文件，显示每个已安装文件对其所属软件包以及整体文件系统大小的大小贡献</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">graph-size</code> target requires the Python Matplotlib library to be
installed (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-matplotlib</code> on most distributions), and also the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">argparse</code> module if you’re using a Python version older than 2.7
(<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-argparse</code> on most distributions).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">graph-size</code> 目标需要安装 Python Matplotlib 库（在大多数发行版上为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-matplotlib</code> ），如果您使用的是早于 2.7 版本的 Python，则还需要安装 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">argparse</code> 模块（在大多数发行版上为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-argparse</code> ）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Just like for the duration graph, a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GRAPH_OUT</code> environment variable
is supported to adjust the output file format. See <a class="xref" href="#graph-depends" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;8.9, “Graphing the dependencies between packages”</a>
for details about this environment variable.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">就像持续图一样，支持一个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GRAPH_OUT</code> 环境变量来调整输出文件格式。有关此环境变量的详细信息，请参见第 8.9 节“绘制软件包之间的依赖关系”。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Additionally, one may set the environment variable <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GRAPH_SIZE_OPTS</code>
to further control the generated graph. Accepted options are:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">另外，可以设置环境变量 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GRAPH_SIZE_OPTS</code> 来进一步控制生成的图。接受的选项包括：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--size-limit X</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-l X</code>, will group all packages which individual
  contribution is below <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">X</code> percent, to a single entry labelled <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Others</em></span>
  in the graph. By default, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">X=0.01</code>, which means packages each
  contributing less than 1% are grouped under <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Others</em></span>. Accepted values
  are in the range <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[0.0..1.0]</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--size-limit X</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-l X</code> ，将所有个别贡献低于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">X</code> ％的软件包分组到一个名为“其他”的条目中。默认情况下， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">X=0.01</code> ，这意味着每个贡献少于 1％的软件包都分组在其他下。接受的值范围为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[0.0..1.0]</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--iec</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--binary</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--si</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--decimal</code>, to use IEC (binary, powers
  of 1024) or SI (decimal, powers of 1000; the default) prefixes.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--iec</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--binary</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--si</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--decimal</code> ，使用 IEC（二进制，1024 的幂）或 SI（十进制，1000 的幂；默认）前缀。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--biggest-first</code>, to sort packages in decreasing size order, rather
  than in increasing size order.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--biggest-first</code> ，按照大小递减的顺序对软件包进行排序，而不是按照大小递增的顺序。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note.&nbsp;</strong>The collected filesystem size data is only meaningful after a complete
clean rebuild. Be sure to run <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make clean all</code> before using <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make
graph-size</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意。只有在完全清理重建之后，收集的文件系统大小数据才有意义。确保在使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make
graph-size</code> 之前运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make clean all</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To compare the root filesystem size of two different Buildroot compilations,
for example after adjusting the configuration or when switching to another
Buildroot release, use the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">size-stats-compare</code> script. It takes two
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">file-size-stats.csv</code> files (produced by <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make graph-size</code>) as input.
Refer to the help text of this script for more details:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要比较两个不同 Buildroot 编译的根文件系统大小，例如在调整配置或切换到另一个 Buildroot 版本后，请使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">size-stats-compare</code> 脚本。它以两个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">file-size-stats.csv</code> 文件（由 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make graph-size</code> 生成）作为输入。有关更多详细信息，请参考此脚本的帮助文本：</font></font></font></p><pre class="screen">utils/size-stats-compare -h</pre></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="top-level-parallel-build" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>8.12.&nbsp;Top-level parallel build<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.12. 顶层并行构建</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note.&nbsp;</strong>This section deals with a very experimental feature, which is known to
break even in some non-unusual situations. Use at your own risk.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意。本部分涉及一个非常实验性的功能，即使在一些非常规情况下也可能出现故障。请自行承担风险。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot has always been capable of using parallel build on a per
package basis: each package is built by Buildroot using <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make -jN</code> (or
the equivalent invocation for non-make-based build systems). The level
of parallelism is by default number of CPUs + 1, but it can be
adjusted using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_JLEVEL</code> configuration option.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 一直能够在每个软件包基础上使用并行构建：每个软件包由 Buildroot 使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make -jN</code> （或者对于非基于 make 的构建系统的等效调用）构建。并行度默认为 CPU 数量+1，但可以使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_JLEVEL</code> 配置选项进行调整。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Until 2020.02, Buildroot was however building packages in a serial
fashion: each package was built one after the other, without
parallelization of the build between packages. As of 2020.02,
Buildroot has experimental support for <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">top-level parallel build</strong></span>,
which allows some signicant build time savings by building packages
that have no dependency relationship in parallel. This feature is
however marked as experimental and is known not to work in some cases.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">直
到 2020.02，Buildroot 仍然以串行方式构建软件包：每个软件包都是一个接一个地构建的，软件包之间没有构建并行化。从 2020.02
 开始，Buildroot 
具有顶层并行构建的实验性支持，允许在没有依赖关系的软件包之间并行构建，从而节省构建时间。但是，该功能被标记为实验性，并且已知在某些情况下无法正常
工作。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In order to use top-level parallel build, one must:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要使用顶层并行构建，必须：</font></font></font></p><div class="orderedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ol class="orderedlist" type="1" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Enable the option <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PER_PACKAGE_DIRECTORIES</code> in the Buildroot
configuration
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 Buildroot 配置中启用选项 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PER_PACKAGE_DIRECTORIES</code> </font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Use <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make -jN</code> when starting the Buildroot build
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在启动 Buildroot 构建时使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make -jN</code> </font></font></font></li></ol></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Internally, the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PER_PACKAGE_DIRECTORIES</code> will enable a mechanism
called <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">per-package directories</strong></span>, which will have the following
effects:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在内部， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PER_PACKAGE_DIRECTORIES</code> 将启用一个名为每包目录的机制，其将产生以下效果：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Instead of a global <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">target</em></span> directory and a global <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host</em></span> directory
  common to all packages, per-package <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">target</em></span> and <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host</em></span> directories
  will be used, in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(O)/per-package/&lt;pkg&gt;/target/</code> and
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(O)/per-package/&lt;pkg&gt;/host/</code> respectively. Those folders will be
  populated from the corresponding folders of the package dependencies
  at the beginning of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkg&gt;</code> build. The compiler and all other tools
  will therefore only be able to see and access files installed by
  dependencies explicitly listed by <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkg&gt;</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">与所有软件包共享的全局目标目录和全局主机目录不同，将使用每个软件包的目标和主机目录，在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(O)/per-package/&lt;pkg&gt;/target/</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(O)/per-package/&lt;pkg&gt;/host/</code> 中分别使用。这些文件夹将在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkg&gt;</code> 构建开始时从软件包依赖项的相应文件夹中填充。因此，编译器和所有其他工具只能看到和访问由 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkg&gt;</code> 明确列出的依赖项安装的文件。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
At the end of the build, the global <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">target</em></span> and <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host</em></span> directories
  will be populated, located in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(O)/target</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(O)/host</code>
  respectively. This means that during the build, those folders will
  be empty and it’s only at the very end of the build that they will
  be populated.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在构建结束时，全局目标和主机目录将被填充，分别位于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(O)/target</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(O)/host</code> 中。这意味着在构建过程中，这些文件夹将是空的，只有在构建的最后阶段它们才会被填充。</font></font></font></li></ul></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_advanced_usage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>8.13.&nbsp;Advanced usage<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.13. 高级用法</font></font></font></h2></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_using_the_generated_toolchain_outside_buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>8.13.1.&nbsp;Using the generated toolchain outside Buildroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.13.1. 在 Buildroot 之外使用生成的工具链</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">You may want to compile, for your target, your own programs or other
software that are not packaged in Buildroot. In order to do this you
can use the toolchain that was generated by Buildroot.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您可能希望为您的目标编译自己的程序或其他未打包在 Buildroot 中的软件。为了做到这一点，您可以使用 Buildroot 生成的工具链。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The toolchain generated by Buildroot is located by default in
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/host/</code>. The simplest way to use it is to add
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/host/bin/</code> to your PATH environment variable and then to
use <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ARCH-linux-gcc</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ARCH-linux-objdump</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ARCH-linux-ld</code>, etc.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 生成的工具链默认位于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/host/</code> 。使用它的最简单方法是将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/host/bin/</code> 添加到您的 PATH 环境变量，然后使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ARCH-linux-gcc</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ARCH-linux-objdump</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ARCH-linux-ld</code> 等。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Alternatively, Buildroot can also export the toolchain and the development
files of all selected packages, as an SDK, by running the command
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make sdk</code>. This generates a tarball of the content of the host directory
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/host/</code>, named <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;TARGET-TUPLE&gt;_sdk-buildroot.tar.gz</code> (which can be
overriden by setting the environment variable <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_SDK_PREFIX</code>) and
located in the output directory <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/images/</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">或者，Buildroot 还可以通过运行命令 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make sdk</code> 将所选包的工具链和开发文件导出为 SDK。这将生成主机目录 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/host/</code> 内容的 tarball，命名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;TARGET-TUPLE&gt;_sdk-buildroot.tar.gz</code> （可以通过设置环境变量 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_SDK_PREFIX</code> 进行覆盖），并位于输出目录 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/images/</code> 中。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This tarball can then be distributed to application developers, when
they want to develop their applications that are not (yet) packaged as
a Buildroot package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后可以将此 tarball 分发给应用程序开发人员，以便在他们想要开发尚未（尚未）打包为 Buildroot 软件包的应用程序时使用。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Upon extracting the SDK tarball, the user must run the script
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">relocate-sdk.sh</code> (located at the top directory of the SDK), to make
sure all paths are updated with the new location.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在提取 SDK tarball 后，用户必须运行位于 SDK 顶级目录的脚本 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">relocate-sdk.sh</code> ，以确保所有路径都已更新为新位置。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Alternatively, if you just want to prepare the SDK without generating
the tarball (e.g. because you will just be moving the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host</code> directory,
or will be generating the tarball on your own), Buildroot also allows
you to just prepare the SDK with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make prepare-sdk</code> without actually
generating a tarball.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">或者，如果您只想准备 SDK 而不生成 tarball（例如，因为您只会移动 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host</code> 目录，或者将自行生成 tarball），Buildroot 还允许您只使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make prepare-sdk</code> 准备 SDK 而不实际生成 tarball。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For your convenience, by selecting the option
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_HOST_ENVIRONMENT_SETUP</code>, you can get a
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">environment-setup</code> script installed in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/host/</code> and therefore
in your SDK.  This script can be sourced with
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">. your/sdk/path/environment-setup</code> to export a number of environment
variables that will help cross-compile your projects using the
Buildroot SDK: the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PATH</code> will contain the SDK binaries, standard
<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autotools</em></span> variables will be defined with the appropriate values, and
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">CONFIGURE_FLAGS</code> will contain basic <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">./configure</code> options to
cross-compile <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autotools</em></span> projects. It also provides some useful
commands. Note however that once this script is sourced, the
environment is setup only for cross-compilation, and no longer for
native compilation.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为了您的方便，通过选择选项 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_HOST_ENVIRONMENT_SETUP</code> ，您可以在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/host/</code> 中安装一个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">environment-setup</code> 脚本，因此也在您的 SDK 中。 可以使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">. your/sdk/path/environment-setup</code> 来源此脚本，以导出一些环境变量，这些变量将有助于使用 Buildroot SDK 交叉编译您的项目： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PATH</code> 将包含 SDK 二进制文件，标准 autotools 变量将定义为适当的值，并且 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">CONFIGURE_FLAGS</code> 将包含用于交叉编译 autotools 项目的基本 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">./configure</code> 选项。 它还提供一些有用的命令。 但请注意，一旦源化此脚本，环境仅设置为交叉编译，不再适用于本地编译。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_using_literal_gdb_literal_in_buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>8.13.2.&nbsp;Using <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gdb</code> in Buildroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.13.2. 在 Buildroot 中使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gdb</code> </font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot allows to do cross-debugging, where the debugger runs on the
build machine and communicates with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gdbserver</code> on the target to
control the execution of the program.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 允许进行交叉调试，其中调试器在构建机器上运行，并与目标上的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gdbserver</code> 通信以控制程序的执行。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To achieve this:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要实现这一点：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
If you are using an <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">internal toolchain</em></span> (built by Buildroot), you
  must enable <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_HOST_GDB</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_GDB</code> and
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_GDB_SERVER</code>. This ensures that both the cross gdb and
  gdbserver get built, and that gdbserver gets installed to your target.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您正在使用由 Buildroot 构建的内部工具链，您必须启用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_HOST_GDB</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_GDB</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_GDB_SERVER</code> 。这样可以确保交叉 gdb 和 gdbserver 都被构建，并且 gdbserver 被安装到您的目标设备上。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
If you are using an <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">external toolchain</em></span>, you should enable
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_EXTERNAL_GDB_SERVER_COPY</code>, which will copy the
  gdbserver included with the external toolchain to the target. If your
  external toolchain does not have a cross gdb or gdbserver, it is also
  possible to let Buildroot build them, by enabling the same options as
  for the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">internal toolchain backend</em></span>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您正在使用外部工具链，您应该启用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_EXTERNAL_GDB_SERVER_COPY</code> ，这将复制包含在外部工具链中的 gdbserver 到目标设备上。如果您的外部工具链没有交叉 gdb 或 gdbserver，也可以让 Buildroot 构建它们，方法是启用与内部工具链后端相同的选项。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Now, to start debugging a program called <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code>, you should run on the
target:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">现在，要开始调试一个名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> 的程序，您应该在目标设备上运行：</font></font></font></p><pre class="screen">gdbserver :2345 foo</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This will cause <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gdbserver</code> to listen on TCP port 2345 for a connection
from the cross gdb.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这将导致 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gdbserver</code> 监听 TCP 端口 2345，以便从跨 gdb 接收连接。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Then, on the host, you should start the cross gdb using the following
command line:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后，在主机上，您应该使用以下命令行启动跨 gdb：</font></font></font></p><pre class="screen">&lt;buildroot&gt;/output/host/bin/&lt;tuple&gt;-gdb -ix &lt;buildroot&gt;/output/staging/usr/share/buildroot/gdbinit foo</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Of course, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> must be available in the current directory, built
with debugging symbols. Typically you start this command from the
directory where <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> is built (and not from <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/target/</code> as the
binaries in that directory are stripped).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当然， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> 必须在当前目录中可用，并带有调试符号。通常，您从构建 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> 的目录启动此命令（而不是从 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/target/</code> 启动，因为该目录中的二进制文件已经剥离了）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;buildroot&gt;/output/staging/usr/share/buildroot/gdbinit</code> file will tell the
cross gdb where to find the libraries of the target.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;buildroot&gt;/output/staging/usr/share/buildroot/gdbinit</code> 文件将告诉交叉 gdb 在哪里找到目标的库。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Finally, to connect to the target from the cross gdb:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">最后，从交叉 gdb 连接到目标：</font></font></font></p><pre class="screen">(gdb) target remote &lt;target ip address&gt;:2345</pre></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="ccache" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>8.13.3.&nbsp;Using <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</code> in Buildroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 Buildroot 中使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</code> 8.13.3。</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a class="ulink" href="http://ccache.samba.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</a> is a compiler cache. It stores the
object files resulting from each compilation process, and is able to
skip future compilation of the same source file (with same compiler
and same arguments) by using the pre-existing object files. When doing
almost identical builds from scratch a number of times, it can nicely
speed up the build process.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">ccache 是一个编译器缓存。它存储每个编译过程产生的目标文件，并且能够通过使用预先存在的目标文件跳过对相同源文件（使用相同编译器和相同参数）的未来编译。当多次从头开始进行几乎相同的构建时，它可以很好地加快构建过程。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</code> support is integrated in Buildroot. You just have to enable
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Enable compiler cache</code> in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Build options</code>. This will automatically
build <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</code> and use it for every host and target compilation.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</code> 支持已集成在 Buildroot 中。您只需在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Build options</code> 中启用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Enable compiler cache</code> 。这将自动构建 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</code> 并将其用于每个主机和目标编译。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The cache is located in the directory defined by the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_CCACHE_DIR</code>
configuration option, which defaults to
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$HOME/.buildroot-ccache</code>. This default location is outside of
Buildroot output directory so that it can be shared by separate
Buildroot builds. If you want to get rid of the cache, simply remove
this directory.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">缓存位于由 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_CCACHE_DIR</code> 配置选项定义的目录中，默认为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$HOME/.buildroot-ccache</code> 。此默认位置位于 Buildroot 输出目录之外，以便可以被单独的 Buildroot 构建共享。如果要摆脱缓存，只需删除此目录。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">You can get statistics on the cache (its size, number of hits,
misses, etc.) by running <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make ccache-stats</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make ccache-stats</code> ，您可以获取有关缓存的统计信息（其大小、命中次数、未命中次数等）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The make target <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache-options</code> and the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">CCACHE_OPTIONS</code> variable
provide more generic access to the ccache. For example<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">make 目标 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache-options</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">CCACHE_OPTIONS</code> 变量提供了对 ccache 的更通用访问。例如</font></font></font></p><pre class="screen"># set cache limit size
make CCACHE_OPTIONS="--max-size=5G" ccache-options

# zero statistics counters
make CCACHE_OPTIONS="--zero-stats" ccache-options</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</code> makes a hash of the source files and of the compiler options.
If a compiler option is different, the cached object file will not be
used. Many compiler options, however, contain an absolute path to the
staging directory. Because of this, building in a different output
directory would lead to many cache misses.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</code> 对源文件和编译器选项进行哈希处理。如果编译器选项不同，则不会使用缓存的对象文件。然而，许多编译器选项包含到暂存目录的绝对路径。因此，在不同的输出目录中构建将导致许多缓存未命中。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To avoid this issue, buildroot has the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Use relative paths</code> option
(<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_CCACHE_USE_BASEDIR</code>). This will rewrite all absolute paths that
point inside the output directory into relative paths. Thus, changing
the output directory no longer leads to cache misses.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为了避免这个问题，buildroot 有 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Use relative paths</code> 选项（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_CCACHE_USE_BASEDIR</code> ）。这将把指向输出目录内部的所有绝对路径重写为相对路径。因此，更改输出目录不再导致缓存未命中。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">A disadvantage of the relative paths is that they also end up to be
relative paths in the object file. Therefore, for example, the debugger
will no longer find the file, unless you cd to the output directory
first.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">相对路径的一个缺点是它们最终也变成了目标文件中的相对路径。因此，例如，除非您首先 cd 到输出目录，否则调试器将不再找到文件。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">See <a class="ulink" href="https://ccache.samba.org/manual.html#_compiling_in_different_directories" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">the
ccache manual’s section on "Compiling in different directories"</a> for
more details about this rewriting of absolute paths.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有关绝对路径重写的更多详细信息，请参阅 ccache 手册中关于“在不同目录中编译”的部分。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</code> is enabled in Buildroot using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_CCACHE=y</code> option:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当在 Buildroot 中使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_CCACHE=y</code> 选项启用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</code> 时：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</code> is used during the Buildroot build itself
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 Buildroot 构建过程中使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</code> </font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</code> is not used when building outside of Buildroot, for example
  when directly calling the cross-compiler or using the SDK
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 Buildroot 之外构建时不使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</code> ，例如直接调用交叉编译器或使用 SDK</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">One can override this behavior using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_USE_CCACHE</code> environment
variable: when set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">1</code>, usage of ccache is enabled (default during
the Buildroot build), when unset or set to a value different from <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">1</code>,
usage of ccache is disabled.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">可以使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_USE_CCACHE</code> 环境变量覆盖此行为：当设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">1</code> 时，启用 ccache 的使用（在 Buildroot 构建期间默认），当未设置或设置为与 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">1</code> 不同的值时，禁用 ccache 的使用。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="download-location" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>8.13.4.&nbsp;Location of downloaded packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.13.4. 下载软件包的位置</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The various tarballs that are downloaded by Buildroot are all stored
in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_DL_DIR</code>, which by default is the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dl</code> directory. If you want
to keep a complete version of Buildroot which is known to be working
with the associated tarballs, you can make a copy of this directory.
This will allow you to regenerate the toolchain and the target
filesystem with exactly the same versions.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 下载的各种 tarball 都存储在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_DL_DIR</code> 中，默认情况下是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dl</code> 目录。如果您想保留一个已知与相关 tarball 一起工作的完整版本的 Buildroot 副本，可以复制此目录。这将允许您使用完全相同的版本重新生成工具链和目标文件系统。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you maintain several Buildroot trees, it might be better to have a
shared download location. This can be achieved by pointing the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_DL_DIR</code> environment variable to a directory. If this is
set, then the value of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_DL_DIR</code> in the Buildroot configuration is
overridden. The following line should be added to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;~/.bashrc&gt;</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您维护多个 Buildroot 树，则最好有一个共享的下载位置。这可以通过将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_DL_DIR</code> 环境变量指向一个目录来实现。如果设置了这个变量，则 Buildroot 配置中的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_DL_DIR</code> 的值将被覆盖。应添加以下行到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;~/.bashrc&gt;</code> 。</font></font></font></p><pre class="screen"> export BR2_DL_DIR=&lt;shared download location&gt;</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The download location can also be set in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> file, with the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_DL_DIR</code> option. Unlike most options in the .config file, this value
is overridden by the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_DL_DIR</code> environment variable.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">下载位置也可以在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> 文件中使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_DL_DIR</code> 选项进行设置。与.config 文件中的大多数选项不同，这个值会被 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_DL_DIR</code> 环境变量覆盖。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="pkg-build-steps" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>8.13.5.&nbsp;Package-specific <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</em></span> targets<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.13.5. 特定于软件包的 make 目标</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Running <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make &lt;package&gt;</code> builds and installs that particular package
and its dependencies.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make &lt;package&gt;</code> 构建并安装该特定软件包及其依赖项。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For packages relying on the Buildroot infrastructure, there are
numerous special make targets that can be called independently like
this:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于依赖于 Buildroot 基础设施的软件包，有许多特殊的 make 目标可以像这样独立调用：</font></font></font></p><pre class="screen">make &lt;package&gt;-&lt;target&gt;</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The package build targets are (in the order they are executed):<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">软件包构建目标为（按执行顺序排列）：</font></font></font></p><div class="informaltable" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><table class="informaltable" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; " width="90%" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><colgroup data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_1" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_2" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></colgroup><thead data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="center" valign="top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"> command/target    <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">命令/目标</font></font></font></th><th style="border-bottom: 1px solid #527bbd; " align="left" valign="top"> Description</th></tr></thead><tbody data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="center" valign="top"><p><code class="literal">source</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Fetch the source (download the tarball, clone
the source repository, etc)<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">获取源代码（下载压缩包，克隆源代码仓库等）</font></font></font></p></td></tr><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="center" valign="top"><p><code class="literal">depends</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Build and install all dependencies required to
build the package<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">构建并安装构建软件包所需的所有依赖项</font></font></font></p></td></tr><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="center" valign="top"><p><code class="literal">extract</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Put the source in the package build directory
(extract the tarball, copy the source, etc)<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">将源代码放入软件包构建目录（解压 tar 包，复制源代码等）</font></font></font></p></td></tr><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="center" valign="top"><p><code class="literal">patch</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Apply the patches, if any<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">应用补丁（如果有的话）</font></font></font></p></td></tr><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="center" valign="top"><p><code class="literal">configure</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Run the configure commands, if any<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">运行配置命令（如果有的话）</font></font></font></p></td></tr><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="center" valign="top"><p><code class="literal">build</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Run the compilation commands<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">运行编译命令</font></font></font></p></td></tr><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="center" valign="top"><p><code class="literal">install-staging</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">target package:</strong></span> Run the installation of the package in the
staging directory, if necessary<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">目标软件包：如有必要，在暂存目录中运行软件包的安装</font></font></font></p></td></tr><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="center" valign="top"><p><code class="literal">install-target</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">target package:</strong></span> Run the installation of the package in the
target directory, if necessary<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">目标软件包：如有必要，在目标目录中运行软件包的安装</font></font></font></p></td></tr><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><td style="border-right: 1px solid #527bbd; " align="center" valign="top"><p><code class="literal">install</code></p></td><td style="" align="left" valign="top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">target package:</strong></span> Run the 2 previous installation commands<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">目标包: 运行前两个安装命令</font></font></font></p>
<p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host package:</strong></span> Run the installation of the package in the host
directory<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">主机包: 在主机目录中安装包</font></font></font></p></td></tr></tbody></table></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Additionally, there are some other useful make targets:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">另外，还有一些其他有用的 make 目标:</font></font></font></p><div class="informaltable" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><table class="informaltable" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; " width="90%" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><colgroup data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_1" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_2" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></colgroup><thead data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><th style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="center" valign="top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"> command/target    <font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">命令/目标</font></font></font></th><th style="border-bottom: 1px solid #527bbd; " align="left" valign="top"> Description</th></tr></thead><tbody data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="center" valign="top"><p><code class="literal">show-depends</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Displays the first-order dependencies required to build the
package<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">显示构建软件包所需的一阶依赖关系</font></font></font></p></td></tr><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="center" valign="top"><p><code class="literal">show-recursive-depends</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Recursively displays the dependencies
  required to build the package<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">递归显示构建软件包所需的依赖关系</font></font></font></p></td></tr><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="center" valign="top"><p><code class="literal">show-rdepends</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Displays the first-order reverse dependencies of
  the package (i.e packages that directly depend on it)<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">显示软件包的一阶反向依赖项（即直接依赖于它的软件包）</font></font></font></p></td></tr><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="center" valign="top"><p><code class="literal">show-recursive-rdepends</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Recursively displays the reverse
  dependencies of the package (i.e the packages that depend on it,
  directly or indirectly)<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">递归显示软件包的反向依赖项（即直接或间接依赖于它的软件包）</font></font></font></p></td></tr><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="center" valign="top"><p><code class="literal">graph-depends</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Generate a dependency graph of the package, in the
context of the current Buildroot configuration. See
<a class="link" href="#graph-depends" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">this section</a> for more details about dependency
graphs.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在当前 Buildroot 配置的上下文中生成软件包的依赖图。有关依赖图的更多详细信息，请参阅本节。</font></font></font></p></td></tr><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="center" valign="top"><p><code class="literal">graph-rdepends</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Generate a graph of this package reverse
  dependencies (i.e the packages that depend on it, directly or
  indirectly)<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">生成此软件包的反向依赖关系图（即直接或间接依赖于它的软件包）</font></font></font></p></td></tr><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="center" valign="top"><p><code class="literal">dirclean</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Remove the whole package build directory<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">删除整个软件包构建目录</font></font></font></p></td></tr><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="center" valign="top"><p><code class="literal">reinstall</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Re-run the install commands<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">重新运行安装命令</font></font></font></p></td></tr><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="center" valign="top"><p><code class="literal">rebuild</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Re-run the compilation commands - this only makes
sense when using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">OVERRIDE_SRCDIR</code> feature or when you modified a file
directly in the build directory<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">重新运行编译命令 - 仅在使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">OVERRIDE_SRCDIR</code> 功能或直接在构建目录中修改文件时才有意义</font></font></font></p></td></tr><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><td style="border-right: 1px solid #527bbd; " align="center" valign="top"><p><code class="literal">reconfigure</code></p></td><td style="" align="left" valign="top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Re-run the configure commands, then rebuild - this only
makes sense when using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">OVERRIDE_SRCDIR</code> feature or when you modified a
file directly in the build directory<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">重新运行配置命令，然后重新构建 - 仅在使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">OVERRIDE_SRCDIR</code> 功能或直接在构建目录中修改文件时才有意义</font></font></font></p></td></tr></tbody></table></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_using_buildroot_during_development" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>8.13.6.&nbsp;Using Buildroot during development<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">8.13.6. 在开发过程中使用 Buildroot</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The normal operation of Buildroot is to download a tarball, extract
it, configure, compile and install the software component found inside
this tarball. The source code is extracted in
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/build/&lt;package&gt;-&lt;version&gt;</code>, which is a temporary directory:
whenever <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make clean</code> is used, this directory is entirely removed, and
re-created at the next <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> invocation. Even when a Git or
Subversion repository is used as the input for the package source
code, Buildroot creates a tarball out of it, and then behaves as it
normally does with tarballs.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 的正常操作是下载一个 tarball，解压缩，配置，编译和安装该 tarball 中找到的软件组件。源代码被提取到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/build/&lt;package&gt;-&lt;version&gt;</code> 中，这是一个临时目录：每当使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make clean</code> 时，该目录将被完全删除，并在下一次 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> 调用时重新创建。即使使用 Git 或 Subversion 存储库作为软件包源代码的输入，Buildroot 也会从中创建一个 tarball，然后像处理 tarball 一样处理。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This behavior is well-suited when Buildroot is used mainly as an
integration tool, to build and integrate all the components of an
embedded Linux system. However, if one uses Buildroot during the
development of certain components of the system, this behavior is not
very convenient: one would instead like to make a small change to the
source code of one package, and be able to quickly rebuild the system
with Buildroot.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当
 Buildroot 主要用作集成工具，用于构建和集成嵌入式 Linux 
系统的所有组件时，这种行为非常合适。然而，如果在系统的某些组件开发过程中使用 
Buildroot，则这种行为并不是很方便：人们更希望对一个软件包的源代码进行小改动，并能够快速使用 Buildroot 重新构建系统。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Making changes directly in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/build/&lt;package&gt;-&lt;version&gt;</code> is not
an appropriate solution, because this directory is removed on <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make
clean</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">直接在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/build/&lt;package&gt;-&lt;version&gt;</code> 中进行更改并不是一个合适的解决方案，因为该目录会在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make
clean</code> 时被删除。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Therefore, Buildroot provides a specific mechanism for this use case:
the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkg&gt;_OVERRIDE_SRCDIR</code> mechanism. Buildroot reads an <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">override</em></span>
file, which allows the user to tell Buildroot the location of the
source for certain packages.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">因此，Buildroot 为此使用案例提供了一个特定的机制： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkg&gt;_OVERRIDE_SRCDIR</code> 机制。Buildroot 读取一个覆盖文件，允许用户告诉 Buildroot 某些软件包的源位置。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The default location of the override file is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(CONFIG_DIR)/local.mk</code>,
as defined by the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_OVERRIDE_FILE</code> configuration option.
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(CONFIG_DIR)</code> is the location of the Buildroot <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> file, so
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">local.mk</code> by default lives side-by-side with the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> file,
which means:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">覆盖文件的默认位置是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(CONFIG_DIR)/local.mk</code> ，由 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_OVERRIDE_FILE</code> 配置选项定义。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(CONFIG_DIR)</code> 是 Buildroot <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> 文件的位置，因此 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">local.mk</code> 默认情况下与 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> 文件并排，这意味着：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
In the top-level Buildroot source directory for in-tree builds
  (i.e., when <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">O=</code> is not used)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在顶层 Buildroot 源目录中进行内部构建（即，当未使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">O=</code> 时）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
In the out-of-tree directory for out-of-tree builds (i.e., when
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">O=</code> is used)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在树外目录中进行树外构建（即，当使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">O=</code> 时）</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If a different location than these defaults is required, it can be
specified through the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_OVERRIDE_FILE</code> configuration
option.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果需要不同于这些默认值的位置，则可以通过 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_OVERRIDE_FILE</code> 配置选项指定。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In this <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">override</em></span> file, Buildroot expects to find lines of the form:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在此覆盖文件中，Buildroot 期望找到以下形式的行：</font></font></font></p><pre class="screen">&lt;pkg1&gt;_OVERRIDE_SRCDIR = /path/to/pkg1/sources
&lt;pkg2&gt;_OVERRIDE_SRCDIR = /path/to/pkg2/sources</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For example:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">例如：</font></font></font></p><pre class="screen">LINUX_OVERRIDE_SRCDIR = /home/bob/linux/
BUSYBOX_OVERRIDE_SRCDIR = /home/bob/busybox/</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When Buildroot finds that for a given package, an
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkg&gt;_OVERRIDE_SRCDIR</code> has been defined, it will no longer attempt to
download, extract and patch the package. Instead, it will directly use
the source code available in the specified directory and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make clean</code>
will not touch this directory. This allows to point Buildroot to your
own directories, that can be managed by Git, Subversion, or any other
version control system. To achieve this, Buildroot will use <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rsync</em></span> to
copy the source code of the component from the specified
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkg&gt;_OVERRIDE_SRCDIR</code> to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/build/&lt;package&gt;-custom/</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当 Buildroot 发现对于给定的软件包，已经定义了 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkg&gt;_OVERRIDE_SRCDIR</code> ，它将不再尝试下载、提取和打补丁软件包。相反，它将直接使用指定目录中可用的源代码， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make clean</code> 将不会触及此目录。这允许将 Buildroot 指向您自己的目录，可以由 Git、Subversion 或任何其他版本控制系统管理。为了实现这一点，Buildroot 将使用 rsync 将组件的源代码从指定的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkg&gt;_OVERRIDE_SRCDIR</code> 复制到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/build/&lt;package&gt;-custom/</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This mechanism is best used in conjunction with the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make
&lt;pkg&gt;-rebuild</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make &lt;pkg&gt;-reconfigure</code> targets. A <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make
&lt;pkg&gt;-rebuild all</code> sequence will <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rsync</em></span> the source code from
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkg&gt;_OVERRIDE_SRCDIR</code> to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/build/&lt;package&gt;-custom</code> (thanks to
<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rsync</em></span>, only the modified files are copied), and restart the build
process of just this package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这种机制最好与 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make
&lt;pkg&gt;-rebuild</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make &lt;pkg&gt;-reconfigure</code> 目标一起使用。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make
&lt;pkg&gt;-rebuild all</code> 序列将使用 rsync 将源代码从 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkg&gt;_OVERRIDE_SRCDIR</code> 复制到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/build/&lt;package&gt;-custom</code> （由于 rsync，只复制修改过的文件），并重新启动仅此软件包的构建过程。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In the example of the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux</code> package above, the developer can then
make a source code change in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/home/bob/linux</code> and then run:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在上面的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux</code> 包示例中，开发人员可以在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/home/bob/linux</code> 中进行源代码更改，然后运行：</font></font></font></p><pre class="screen">make linux-rebuild all</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">and in a matter of seconds gets the updated Linux kernel image in
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/images</code>. Similarly, a change can be made to the BusyBox source
code in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/home/bob/busybox</code>, and after:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后在几秒钟内在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/images</code> 中获得更新的 Linux 内核映像。类似地，可以对 BusyBox 源代码进行更改 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/home/bob/busybox</code> ，然后：</font></font></font></p><pre class="screen">make busybox-rebuild all</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">the root filesystem image in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/images</code> contains the updated
BusyBox.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/images</code> 中的根文件系统映像包含更新的 BusyBox。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Source trees for big projects often contain hundreds or thousands of
files which are not needed for building, but will slow down the process
of copying the sources with <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rsync</em></span>. Optionally, it is possible define
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkg&gt;_OVERRIDE_SRCDIR_RSYNC_EXCLUSIONS</code> to skip syncing certain files
from the source tree. For example, when working on the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">webkitgtk</code>
package, the following will exclude the tests and in-tree builds from
a local WebKit source tree:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">大型项目的源树通常包含数百甚至数千个文件，这些文件在构建时并不需要，但会减慢使用 rsync 复制源文件的过程。可以选择定义 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkg&gt;_OVERRIDE_SRCDIR_RSYNC_EXCLUSIONS</code> 以跳过从源树同步某些文件。例如，在处理 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">webkitgtk</code> 软件包时，以下内容将从本地 WebKit 源树中排除测试和内部构建：</font></font></font></p><pre class="screen">WEBKITGTK_OVERRIDE_SRCDIR = /home/bob/WebKit
WEBKITGTK_OVERRIDE_SRCDIR_RSYNC_EXCLUSIONS = \
        --exclude JSTests --exclude ManualTests --exclude PerformanceTests \
        --exclude WebDriverTests --exclude WebKitBuild --exclude WebKitLibraries \
        --exclude WebKit.xcworkspace --exclude Websites --exclude Examples</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">By default, Buildroot skips syncing of VCS artifacts (e.g., the <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.git</strong></span> and
<span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.svn</strong></span> directories). Some packages prefer to have these VCS directories
available during build, for example for automatically determining a precise
commit reference for version information. To undo this built-in filtering at a
cost of a slower speed, add these directories back:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">默认情况下，Buildroot 跳过同步 VCS 文件（例如 .git 和 .svn 目录）。一些软件包希望在构建过程中保留这些 VCS 目录，例如用于自动确定精确的提交引用以获取版本信息。要取消这种内置过滤，以换取较慢的速度，请将这些目录添加回来：</font></font></font></p><pre class="screen">LINUX_OVERRIDE_SRCDIR_RSYNC_EXCLUSIONS = --include .git</pre></div></div></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="customize" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;9.&nbsp;Project-specific customization<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第九章 项目特定定制</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Typical actions you may need to perform for a given project are:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您可能需要为特定项目执行的典型操作包括：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
configuring Buildroot (including build options and toolchain,
  bootloader, kernel, package and filesystem image type selection)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">配置 Buildroot（包括构建选项和工具链、引导加载程序、内核、软件包和文件系统镜像类型选择）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
configuring other components, like the Linux kernel and BusyBox
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">配置其他组件，如 Linux 内核和 BusyBox</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
customizing the generated target filesystem
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">自定义生成的目标文件系统</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
adding or overwriting files on the target filesystem (using
     <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_OVERLAY</code>)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在目标文件系统上添加或覆盖文件（使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_OVERLAY</code> ）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
modifying or deleting files on the target filesystem (using
     <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_POST_BUILD_SCRIPT</code>)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">修改或删除目标文件系统上的文件（使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_POST_BUILD_SCRIPT</code> ）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
running arbitrary commands prior to generating the filesystem image
     (using <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_POST_BUILD_SCRIPT</code>)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在生成文件系统映像之前运行任意命令（使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_POST_BUILD_SCRIPT</code> ）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
setting file permissions and ownership (using
     <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_DEVICE_TABLE</code>)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">设置文件权限和所有权（使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_DEVICE_TABLE</code> ）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
adding custom devices nodes (using
     <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_STATIC_DEVICE_TABLE</code>)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加自定义设备节点（使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_STATIC_DEVICE_TABLE</code> ）</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
adding custom user accounts (using <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_USERS_TABLES</code>)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加自定义用户帐户（使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_USERS_TABLES</code> ）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
running arbitrary commands after generating the filesystem image
  (using <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_POST_IMAGE_SCRIPT</code>)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在生成文件系统映像后运行任意命令（使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_POST_IMAGE_SCRIPT</code> ）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
adding project-specific patches to some packages (using
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code>)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">向某些软件包添加项目特定的补丁（使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> ）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
adding project-specific packages
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加项目特定的软件包</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">An important note regarding such <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">project-specific</em></span> customizations:
please carefully consider which changes are indeed project-specific and
which changes are also useful to developers outside your project. The
Buildroot community highly recommends and encourages the upstreaming of
improvements, packages and board support to the official Buildroot
project. Of course, it is sometimes not possible or desirable to
upstream because the changes are highly specific or proprietary.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">关于这些项目特定定制的重要说明：请仔细考虑哪些更改确实是项目特定的，哪些更改对项目外的开发人员也有用。Buildroot 社区强烈建议并鼓励将改进、软件包和板支持上游到官方 Buildroot 项目。当然，有时由于更改非常具体或专有，可能无法或不希望上游。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This chapter describes how to make such project-specific customizations
in Buildroot and how to store them in a way that you can build the same
image in a reproducible way, even after running <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make clean</em></span>. By
following the recommended strategy, you can even use the same Buildroot
tree to build multiple distinct projects!<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">本
章描述了如何在 Buildroot 中进行这种项目特定的定制以及如何以一种方式存储它们，以便您可以以可重现的方式构建相同的映像，即使在运行 
make clean 后也是如此。通过遵循建议的策略，您甚至可以使用相同的 Buildroot 树来构建多个不同的项目！</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="customize-dir-structure" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>9.1.&nbsp;Recommended directory structure<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.1. 推荐的目录结构</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When customizing Buildroot for your project, you will be creating one or
more project-specific files that need to be stored somewhere. While most
of these files could be placed in <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">any</em></span> location as their path is to be
specified in the Buildroot configuration, the Buildroot developers
recommend a specific directory structure which is described in this
section.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当为您的项目定制 Buildroot 时，您将创建一个或多个需要存储在某处的特定项目文件。尽管这些文件中的大多数可以放置在任何位置，因为它们的路径需要在 Buildroot 配置中指定，但 Buildroot 开发人员建议使用本节中描述的特定目录结构。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Orthogonal to this directory structure, you can choose <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">where</em></span> you place
this structure itself: either inside the Buildroot tree, or outside of
it using a br2-external tree. Both options are valid, the choice is up
to you.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">与此目录结构正交的是，您可以选择将此结构放置在何处：要么在 Buildroot 树内部，要么在外部使用 br2-external 树。这两个选项都是有效的，选择权在您手中。</font></font></font></p><pre class="screen">+-- board/
|   +-- &lt;company&gt;/
|       +-- &lt;boardname&gt;/
|           +-- linux.config
|           +-- busybox.config
|           +-- &lt;other configuration files&gt;
|           +-- post_build.sh
|           +-- post_image.sh
|           +-- rootfs_overlay/
|           |   +-- etc/
|           |   +-- &lt;some files&gt;
|           +-- patches/
|               +-- foo/
|               |   +-- &lt;some patches&gt;
|               +-- libbar/
|                   +-- &lt;some other patches&gt;
|
+-- configs/
|   +-- &lt;boardname&gt;_defconfig
|
+-- package/
|   +-- &lt;company&gt;/
|       +-- Config.in (if not using a br2-external tree)
|       +-- &lt;company&gt;.mk (if not using a br2-external tree)
|       +-- package1/
|       |    +-- Config.in
|       |    +-- package1.mk
|       +-- package2/
|           +-- Config.in
|           +-- package2.mk
|
+-- Config.in (if using a br2-external tree)
+-- external.mk (if using a br2-external tree)
+-- external.desc (if using a br2-external tree)</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Details on the files shown above are given further in this chapter.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">上面显示的文件的详细信息将在本章中进一步给出。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Note: if you choose to place this structure outside of the Buildroot
tree but in a br2-external tree, the &lt;company&gt; and possibly &lt;boardname&gt;
components may be superfluous and can be left out.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意：如果您选择将此结构放在 Buildroot 树之外，而是放在一个 br2-external 树中，则&lt;company&gt;和可能的&lt;boardname&gt;组件可能是多余的，可以省略。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_implementing_layered_customizations" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>9.1.1.&nbsp;Implementing layered customizations<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.1.1. 实施分层定制</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">It is quite common for a user to have several related projects that partly
need the same customizations. Instead of duplicating these
customizations for each project, it is recommended to use a layered
customization approach, as explained in this section.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">用户经常有几个相关项目，其中部分需要相同的定制。建议不要为每个项目重复这些定制，而是建议使用分层定制方法，如本节所述。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Almost all of the customization methods available in Buildroot, like
post-build scripts and root filesystem overlays, accept a
space-separated list of items. The specified items are always treated in
order, from left to right. By creating more than one such item, one for
the common customizations and another one for the really
project-specific customizations, you can avoid unnecessary duplication.
Each layer is typically embodied by a separate directory inside
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;company&gt;/</code>. Depending on your projects, you could even introduce
more than two layers.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在
 Buildroot 
中提供的几乎所有定制方法，如构建后脚本和根文件系统叠加层，都接受一个以空格分隔的项目列表。指定的项目总是按顺序处理，从左到右。通过创建一个以上的
这种项目，一个用于常见定制，另一个用于真正的项目特定定制，您可以避免不必要的重复。每个层通常由 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;company&gt;/</code> 内的单独目录体现。根据您的项目，甚至可以引入两个以上的层。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">An example directory structure for where a user has two customization
layers <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">common</em></span> and <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">fooboard</em></span> is:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">用户有两个定制层 common 和 fooboard 的示例目录结构如下：</font></font></font></p><pre class="screen">+-- board/
    +-- &lt;company&gt;/
        +-- common/
        |   +-- post_build.sh
        |   +-- rootfs_overlay/
        |   |   +-- ...
        |   +-- patches/
        |       +-- ...
        |
        +-- fooboard/
            +-- linux.config
            +-- busybox.config
            +-- &lt;other configuration files&gt;
            +-- post_build.sh
            +-- rootfs_overlay/
            |   +-- ...
            +-- patches/
                +-- ...</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For example, if the user has the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> configuration
option set as:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">例如，如果用户将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> 配置选项设置为：</font></font></font></p><pre class="screen">BR2_GLOBAL_PATCH_DIR="board/&lt;company&gt;/common/patches board/&lt;company&gt;/fooboard/patches"</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">then first the patches from the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">common</em></span> layer would be applied,
followed by the patches from the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">fooboard</em></span> layer.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后首先应用来自公共层的补丁，然后应用来自 fooboard 层的补丁。</font></font></font></p></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="outside-br-custom" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>9.2.&nbsp;Keeping customizations outside of Buildroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.2. 将定制内容保留在 Buildroot 之外</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">As already briefly mentioned in <a class="xref" href="#customize-dir-structure" title="9.1.&nbsp;Recommended directory structure" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;9.1, “Recommended directory structure”</a>, you can
place project-specific customizations in two locations:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">正如在第 9.1 节“推荐的目录结构”中简要提到的那样，您可以将项目特定的定制内容放在两个位置：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
directly within the Buildroot tree, typically maintaining them using
   branches in a version control system so that upgrading to a newer
   Buildroot release is easy.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">直接在 Buildroot 树内部，通常使用版本控制系统中的分支来维护它们，以便轻松升级到更新的 Buildroot 版本。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
outside of the Buildroot tree, using the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">br2-external</em></span> mechanism.
   This mechanism allows to keep package recipes, board support and
   configuration files outside of the Buildroot tree, while still
   having them nicely integrated in the build logic. We call this
   location a <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">br2-external tree</em></span>. This section explains how to use
   the br2-external mechanism and what to provide in a br2-external
   tree.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在
 Buildroot 树之外，使用 br2-external 机制。该机制允许将软件包配方、板支持和配置文件保留在 Buildroot 
树之外，同时仍然将它们很好地集成到构建逻辑中。我们将此位置称为 br2-external 树。本节解释了如何使用 br2-external 
机制以及在 br2-external 树中提供什么。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">One can tell Buildroot to use one or more br2-external trees by setting
the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_EXTERNAL</code> make variable set to the path(s) of the br2-external
tree(s) to use. It can be passed to any Buildroot <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> invocation. It
is automatically saved in the hidden <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.br2-external.mk</code> file in the output
directory. Thanks to this, there is no need to pass <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_EXTERNAL</code> at
every <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> invocation. It can however be changed at any time by
passing a new value, and can be removed by passing an empty value.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">可以通过将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_EXTERNAL</code> make 变量设置为要使用的 br2-external 树的路径（路径）来告诉 Buildroot 使用一个或多个 br2-external 树。它可以传递给任何 Buildroot <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> 调用。它会自动保存在输出目录中的隐藏 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.br2-external.mk</code> 文件中。由于这一点，没有必要在每次 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> 调用时传递 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_EXTERNAL</code> 。但是，可以随时通过传递新值来更改它，并且可以通过传递空值来删除它。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note.&nbsp;</strong>The path to a br2-external tree can be either absolute or relative.
If it is passed as a relative path, it is important to note that it is
interpreted relative to the main Buildroot source directory, <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">not</strong></span> to
the Buildroot output directory.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意。对于 br2-external 树的路径可以是绝对路径，也可以是相对路径。如果作为相对路径传递，重要的是要注意，它是相对于主 Buildroot 源目录解释的，而不是相对于 Buildroot 输出目录。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note:&nbsp;</strong>If using an br2-external tree from before Buildroot 2016.11, you need to
convert it before you can use it with Buildroot 2016.11 onward. See
<a class="xref" href="#br2-external-converting" title="27.2.&nbsp;Migrating to 2016.11" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;27.2, “Migrating to 2016.11”</a> for help on doing so.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意：如果使用的是 Buildroot 2016.11 之前的 br2-external 树，您需要在将其用于 Buildroot 2016.11 及以后版本之前进行转换。请参阅第 27.2 节“迁移到 2016.11”以获取帮助。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Some examples:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一些示例：</font></font></font></p><pre class="screen">buildroot/ $ make BR2_EXTERNAL=/path/to/foo menuconfig</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">From now on, definitions from the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/path/to/foo</code> br2-external tree
will be used:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">从现在开始，将使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/path/to/foo</code> br2-external 树中的定义：</font></font></font></p><pre class="screen">buildroot/ $ make
buildroot/ $ make legal-info</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">We can switch to another br2-external tree at any time:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">我们可以随时切换到另一个 br2-external 树：</font></font></font></p><pre class="screen">buildroot/ $ make BR2_EXTERNAL=/where/we/have/bar xconfig</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">We can also use multiple br2-external trees:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">我们还可以使用多个 br2-external 树：</font></font></font></p><pre class="screen">buildroot/ $ make BR2_EXTERNAL=/path/to/foo:/where/we/have/bar menuconfig</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Or disable the usage of any br2-external tree:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">或者禁用任何 br2-external 树的使用：</font></font></font></p><pre class="screen">buildroot/ $ make BR2_EXTERNAL= xconfig</pre><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_layout_of_a_br2_external_tree" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>9.2.1.&nbsp;Layout of a br2-external tree<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.2.1. br2-external 树的布局</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">A br2-external tree must contain at least those three files, described
in the following chapters:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一个 br2-external 树必须至少包含以下章节中描述的这三个文件：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">external.desc</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">external.mk</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code>
</li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Apart from those mandatory files, there may be additional and optional
content that may be present in a br2-external tree, like the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">configs/</code>
or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">provides/</code> directories. They are described in the following chapters
as well.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">除了那些强制性文件外，br2-external 树中可能还存在其他可选内容，例如 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">configs/</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">provides/</code> 目录。它们也在后续章节中进行了描述。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">A complete example br2-external tree layout is also described later.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">完整的 br2-external 树布局示例也将在后面进行描述。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h4 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_the_literal_external_desc_literal_file" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">external.desc</code> file<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">external.desc</code> 文件</font></font></font></h4></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">That file describes the br2-external tree: the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">name</em></span> and <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">description</em></span>
for that br2-external tree.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">该文件描述了 br2-external 树：br2-external 树的名称和描述。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The format for this file is line based, with each line starting by a
keyword, followed by a colon and one or more spaces, followed by the
value assigned to that keyword. There are two keywords currently
recognised:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">该文件的格式是基于行的，每行以关键字开头，后跟一个冒号和一个或多个空格，然后是分配给该关键字的值。目前识别两个关键字：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">name</code>, mandatory, defines the name for that br2-external tree. That
   name must only use ASCII characters in the set <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[A-Za-z0-9_]</code>; any
   other character is forbidden. Buildroot sets the variable
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_EXTERNAL_$(NAME)_PATH</code> to the absolute path of the br2-external
   tree, so that you can use it to refer to your br2-external tree. This
   variable is available both in Kconfig, so you can use it to source your
   Kconfig files (see below) and in the Makefile, so that you can use it
   to include other Makefiles (see below) or refer to other files (like
   data files) from your br2-external tree.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">name</code> ，强制，定义了 br2-external 树的名称。该名称只能使用 ASCII 字符集中的字符 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[A-Za-z0-9_]</code> ；任何其他字符都是禁止的。Buildroot 将变量 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_EXTERNAL_$(NAME)_PATH</code>
 设置为 br2-external 树的绝对路径，以便您可以用它来引用您的 br2-external 树。此变量在 Kconfig 
中可用，因此您可以用它来源自您的 Kconfig 文件（见下文），并且在 Makefile 中也可以使用它来包含其他 
Makefile（见下文）或引用 br2-external 树中的其他文件（如数据文件）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note:&nbsp;</strong>Since it is possible to use multiple br2-external trees at once, this
  name is used by Buildroot to generate variables for each of those trees.
  That name is used to identify your br2-external tree, so try to come up
  with a name that really describes your br2-external tree, in order for
  it to be relatively unique, so that it does not clash with another name
  from another br2-external tree, especially if you are planning on
  somehow sharing your br2-external tree with third parties or using
  br2-external trees from third parties.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注
意：由于可以同时使用多个 br2-external 树，因此 Buildroot 使用此名称为每个树生成变量。该名称用于标识您的 
br2-external 树，因此请尽量想出一个真正描述您的 br2-external 树的名称，以使其相对唯一，以免与另一个 
br2-external 树的名称冲突，特别是如果您计划以某种方式与第三方共享您的 br2-external 树或使用第三方的 
br2-external 树。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">desc</code>, optional, provides a short description for that br2-external
   tree. It shall fit on a single line, is mostly free-form (see below),
   and is used when displaying information about a br2-external tree (e.g.
   above the list of defconfig files, or as the prompt in the menuconfig);
   as such, it should relatively brief (40 chars is probably a good upper
   limit). The description is available in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_EXTERNAL_$(NAME)_DESC</code>
   variable.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">desc</code>
 ，可选，为该 br2-external 树提供简短描述。它应适合一行，大多是自由格式（见下文），在显示有关 br2-external 
树的信息时使用（例如在 defconfig 文件列表上方，或作为 menuconfig 中的提示）；因此，它应该相对简短（40 
个字符可能是一个很好的上限）。描述可在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_EXTERNAL_$(NAME)_DESC</code> 变量中使用。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Examples of names and the corresponding <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_EXTERNAL_$(NAME)_PATH</code>
variables:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">名称示例及相应的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_EXTERNAL_$(NAME)_PATH</code> 变量：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO</code> → <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_EXTERNAL_FOO_PATH</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BAR_42</code> → <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_EXTERNAL_BAR_42_PATH</code>
</li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In the following examples, it is assumed the name to be set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BAR_42</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在以下示例中，假定名称设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BAR_42</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note:&nbsp;</strong>Both <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_EXTERNAL_$(NAME)_PATH</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_EXTERNAL_$(NAME)_DESC</code> are
  available in the Kconfig files and the Makefiles. They are also
  exported in the environment so are available in post-build, post-image
  and in-fakeroot scripts.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意：Kconfig 文件和 Makefiles 中都可以使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_EXTERNAL_$(NAME)_PATH</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_EXTERNAL_$(NAME)_DESC</code> 。它们也会被导出到环境中，因此可以在构建后、生成镜像后以及伪根环境脚本中使用。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h4 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_the_literal_config_in_literal_and_literal_external_mk_literal_files" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">external.mk</code> files<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">external.mk</code> 文件</font></font></font></h4></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Those files (which may each be empty) can be used to define package
recipes (i.e. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo/Config.in</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo/foo.mk</code> like for packages bundled
in Buildroot itself) or other custom configuration options or make logic.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这些文件（每个文件可能为空）可用于定义软件包配方（即类似于 Buildroot 本身捆绑软件包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo/Config.in</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo/foo.mk</code> ）或其他自定义配置选项或构建逻辑。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot automatically includes the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> from each br2-external
tree to make it appear in the top-level configuration menu, and includes
the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">external.mk</code> from each br2-external tree with the rest of the
makefile logic.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 会自动将每个 br2-external 树中的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 包含在顶层配置菜单中，并将每个 br2-external 树中的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">external.mk</code> 与其余的 makefile 逻辑一起包含进来。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The main usage of this is to store package recipes. The recommended way
to do this is to write a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> file that looks like:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这主要用于存储软件包配方。建议的做法是编写一个类似于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 的文件：</font></font></font></p><pre class="screen">source "$BR2_EXTERNAL_BAR_42_PATH/package/package1/Config.in"
source "$BR2_EXTERNAL_BAR_42_PATH/package/package2/Config.in"</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Then, have an <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">external.mk</code> file that looks like:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后，编写一个类似于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">external.mk</code> 的文件：</font></font></font></p><pre class="screen">include $(sort $(wildcard $(BR2_EXTERNAL_BAR_42_PATH)/package/*/*.mk))</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">And then in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(BR2_EXTERNAL_BAR_42_PATH)/package/package1</code> and
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(BR2_EXTERNAL_BAR_42_PATH)/package/package2</code> create normal
Buildroot package recipes, as explained in <a class="xref" href="#adding-packages" title="Chapter&nbsp;18.&nbsp;Adding new packages to Buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Chapter&nbsp;18, <em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Adding new packages to Buildroot</em></a>.
If you prefer, you can also group the packages in subdirectories
called &lt;boardname&gt; and adapt the above paths accordingly.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(BR2_EXTERNAL_BAR_42_PATH)/package/package1</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(BR2_EXTERNAL_BAR_42_PATH)/package/package2</code> 中创建普通的 Buildroot 软件包配方，如第 18 章“将新软件包添加到 Buildroot”中所述。如果您愿意，还可以将软件包分组到名为的子目录中，并相应地调整上述路径。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">You can also define custom configuration options in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> and
custom make logic in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">external.mk</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您还可以在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 中定义自定义配置选项，并在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">external.mk</code> 中定义自定义构建逻辑。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h4 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_the_literal_configs_literal_directory" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">configs/</code> directory<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">configs/</code> 目录</font></font></font></h4></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">One can store Buildroot defconfigs in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">configs</code> subdirectory of
the br2-external tree. Buildroot will automatically show them in the
output of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make list-defconfigs</code> and allow them to be loaded with the
normal <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make &lt;name&gt;_defconfig</code> command. They will be visible in the
<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make list-defconfigs</em></span> output, below an <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">External configs</code> label that
contains the name of the br2-external tree they are defined in.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">可以将 Buildroot defconfigs 存储在 br2-external 树的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">configs</code> 子目录中。Buildroot 将自动在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make list-defconfigs</code> 的输出中显示它们，并允许使用正常的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make &lt;name&gt;_defconfig</code> 命令加载它们。它们将在 make list-defconfigs 输出中可见，在一个包含它们所定义的 br2-external 树名称的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">External configs</code> 标签下。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note:&nbsp;</strong>If a defconfig file is present in more than one br2-external tree, then
the one from the last br2-external tree is used. It is thus possible
to override a defconfig bundled in Buildroot or another br2-external
tree.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意：如果一个 defconfig 文件存在于多个 br2-external 树中，则将使用最后一个 br2-external 树中的文件。因此，可以覆盖 Buildroot 或另一个 br2-external 树中捆绑的 defconfig。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h4 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_the_literal_provides_literal_directory" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">provides/</code> directory<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">provides/</code> 目录</font></font></font></h4></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For some packages, Buildroot provides a choice between two (or more)
implementations of API-compatible such packages. For example, there is
a choice to choose either libjpeg ot jpeg-turbo; there is one between
openssl or libressl; there is one to select one of the known,
pre-configured toolchains…<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于一些软件包，Buildroot 提供了在两个（或更多）实现 API 兼容的软件包之间进行选择的选项。例如，可以选择 libjpeg 或 jpeg-turbo；可以选择 openssl 或 libressl；可以选择已知的、预配置的工具链之一…</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">It is possible for a br2-external to extend those choices, by providing
a set of files that define those alternatives:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过提供一组定义这些替代方案的文件，br2-external 可以扩展这些选择：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">provides/toolchains.in</code> defines the pre-configured toolchains, which
  will then be listed in the toolchain selection;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">provides/toolchains.in</code> 定义了预配置的工具链，然后这些工具链将列在工具链选择中；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">provides/jpeg.in</code> defines the alternative libjpeg implementations;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">provides/jpeg.in</code> 定义了替代的 libjpeg 实现;</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">provides/openssl.in</code> defines the alternative openssl implementations;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">provides/openssl.in</code> 定义了替代的 openssl 实现;</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">provides/skeleton.in</code> defines the alternative skeleton implementations;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">provides/skeleton.in</code> 定义了替代的骨架实现;</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">provides/init.in</code> defines the alternative init system implementations, this
  can be used to select a default skeleton for your init.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">provides/init.in</code> 定义了替代的 init 系统实现，这可以用于选择默认的 init 骨架。</font></font></font></li></ul></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h4 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_free_form_content" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Free-form content<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">自由格式内容</font></font></font></h4></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">One can store all the board-specific configuration files there, such
as the kernel configuration, the root filesystem overlay, or any other
configuration file for which Buildroot allows to set the location (by
using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_EXTERNAL_$(NAME)_PATH</code> variable). For example, you
could set the paths to a global patch directory, to a rootfs overlay
and to the kernel configuration file as follows (e.g. by running
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make menuconfig</code> and filling in these options):<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">可以将所有特定于板级的配置文件存储在那里，例如内核配置、根文件系统叠加，或者任何其他 Buildroot 允许设置位置的配置文件（通过使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_EXTERNAL_$(NAME)_PATH</code> 变量）。例如，您可以设置全局补丁目录、根文件系统叠加和内核配置文件的路径，方法如下（例如，通过运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make menuconfig</code> 并填写这些选项）：</font></font></font></p><pre class="screen">BR2_GLOBAL_PATCH_DIR=$(BR2_EXTERNAL_BAR_42_PATH)/patches/
BR2_ROOTFS_OVERLAY=$(BR2_EXTERNAL_BAR_42_PATH)/board/&lt;boardname&gt;/overlay/
BR2_LINUX_KERNEL_CUSTOM_CONFIG_FILE=$(BR2_EXTERNAL_BAR_42_PATH)/board/&lt;boardname&gt;/kernel.config</pre></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h4 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_additional_linux_kernel_extensions" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Additional Linux kernel extensions<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">附加的 Linux 内核扩展</font></font></font></h4></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Additional Linux kernel extensions (see <a class="xref" href="#linux-kernel-ext" title="18.22.2.&nbsp;linux-kernel-extensions" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;18.22.2, “linux-kernel-extensions”</a>) can
be added by storing them in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux/</code> directory at the root of a
br2-external tree.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">可以通过将附加的 Linux 内核扩展（请参阅第 18.22.2 节“linux-kernel-extensions”）存储在 br2-external 树的根目录中的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux/</code> 目录中来添加。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h4 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_example_layout" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Example layout<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例布局</font></font></font></h4></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Here is an example layout using all features of br2-external (the sample
content is shown for the file above it, when it is relevant to explain
the br2-external tree; this is all entirely made up just for the sake of
illustration, of course):<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这是一个使用 br2-external 所有功能的示例布局（当与解释 br2-external 树相关时，将显示上面文件的示例内容；当然，这完全是为了说明而虚构的）</font></font></font></p><pre class="screen">/path/to/br2-ext-tree/
  |- external.desc
  |     |name: BAR_42
  |     |desc: Example br2-external tree
  |     `----
  |
  |- Config.in
  |     |source "$BR2_EXTERNAL_BAR_42_PATH/toolchain/toolchain-external-mine/Config.in.options"
  |     |source "$BR2_EXTERNAL_BAR_42_PATH/package/pkg-1/Config.in"
  |     |source "$BR2_EXTERNAL_BAR_42_PATH/package/pkg-2/Config.in"
  |     |source "$BR2_EXTERNAL_BAR_42_PATH/package/my-jpeg/Config.in"
  |     |
  |     |config BAR_42_FLASH_ADDR
  |     |    hex "my-board flash address"
  |     |    default 0x10AD
  |     `----
  |
  |- external.mk
  |     |include $(sort $(wildcard $(BR2_EXTERNAL_BAR_42_PATH)/package/*/*.mk))
  |     |include $(sort $(wildcard $(BR2_EXTERNAL_BAR_42_PATH)/toolchain/*/*.mk))
  |     |
  |     |flash-my-board:
  |     |    $(BR2_EXTERNAL_BAR_42_PATH)/board/my-board/flash-image \
  |     |        --image $(BINARIES_DIR)/image.bin \
  |     |        --address $(BAR_42_FLASH_ADDR)
  |     `----
  |
  |- package/pkg-1/Config.in
  |     |config BR2_PACKAGE_PKG_1
  |     |    bool "pkg-1"
  |     |    help
  |     |      Some help about pkg-1
  |     `----
  |- package/pkg-1/pkg-1.hash
  |- package/pkg-1/pkg-1.mk
  |     |PKG_1_VERSION = 1.2.3
  |     |PKG_1_SITE = /some/where/to/get/pkg-1
  |     |PKG_1_LICENSE = blabla
  |     |
  |     |define PKG_1_INSTALL_INIT_SYSV
  |     |    $(INSTALL) -D -m 0755 $(PKG_1_PKGDIR)/S99my-daemon \
  |     |                          $(TARGET_DIR)/etc/init.d/S99my-daemon
  |     |endef
  |     |
  |     |$(eval $(autotools-package))
  |     `----
  |- package/pkg-1/S99my-daemon
  |
  |- package/pkg-2/Config.in
  |- package/pkg-2/pkg-2.hash
  |- package/pkg-2/pkg-2.mk
  |
  |- provides/jpeg.in
  |     |config BR2_PACKAGE_MY_JPEG
  |     |    bool "my-jpeg"
  |     `----
  |- package/my-jpeg/Config.in
  |     |config BR2_PACKAGE_PROVIDES_JPEG
  |     |    default "my-jpeg" if BR2_PACKAGE_MY_JPEG
  |     `----
  |- package/my-jpeg/my-jpeg.mk
  |     |# This is a normal package .mk file
  |     |MY_JPEG_VERSION = 1.2.3
  |     |MY_JPEG_SITE = https://example.net/some/place
  |     |MY_JPEG_PROVIDES = jpeg
  |     |$(eval $(autotools-package))
  |     `----
  |
  |- provides/init.in
  |     |config BR2_INIT_MINE
  |     |    bool "my custom init"
  |     |    select BR2_PACKAGE_MY_INIT
  |     |    select BR2_PACKAGE_SKELETON_INIT_MINE if BR2_ROOTFS_SKELETON_DEFAULT
  |     `----
  |
  |- provides/skeleton.in
  |     |config BR2_ROOTFS_SKELETON_MINE
  |     |    bool "my custom skeleton"
  |     |    select BR2_PACKAGE_SKELETON_MINE
  |     `----
  |- package/skeleton-mine/Config.in
  |     |config BR2_PACKAGE_SKELETON_MINE
  |     |    bool
  |     |    select BR2_PACKAGE_HAS_SKELETON
  |     |
  |     |config BR2_PACKAGE_PROVIDES_SKELETON
  |     |    default "skeleton-mine" if BR2_PACKAGE_SKELETON_MINE
  |     `----
  |- package/skeleton-mine/skeleton-mine.mk
  |     |SKELETON_MINE_ADD_TOOLCHAIN_DEPENDENCY = NO
  |     |SKELETON_MINE_ADD_SKELETON_DEPENDENCY = NO
  |     |SKELETON_MINE_PROVIDES = skeleton
  |     |SKELETON_MINE_INSTALL_STAGING = YES
  |     |$(eval $(generic-package))
  |     `----
  |
  |- provides/toolchains.in
  |     |config BR2_TOOLCHAIN_EXTERNAL_MINE
  |     |    bool "my custom toolchain"
  |     |    depends on BR2_some_arch
  |     |    select BR2_INSTALL_LIBSTDCPP
  |     `----
  |- toolchain/toolchain-external-mine/Config.in.options
  |     |if BR2_TOOLCHAIN_EXTERNAL_MINE
  |     |config BR2_TOOLCHAIN_EXTERNAL_PREFIX
  |     |    default "arch-mine-linux-gnu"
  |     |config BR2_PACKAGE_PROVIDES_TOOLCHAIN_EXTERNAL
  |     |    default "toolchain-external-mine"
  |     |endif
  |     `----
  |- toolchain/toolchain-external-mine/toolchain-external-mine.mk
  |     |TOOLCHAIN_EXTERNAL_MINE_SITE = https://example.net/some/place
  |     |TOOLCHAIN_EXTERNAL_MINE_SOURCE = my-toolchain.tar.gz
  |     |$(eval $(toolchain-external-package))
  |     `----
  |
  |- linux/Config.ext.in
  |     |config BR2_LINUX_KERNEL_EXT_EXAMPLE_DRIVER
  |     |    bool "example-external-driver"
  |     |    help
  |     |      Example external driver
  |     |---
  |- linux/linux-ext-example-driver.mk
  |
  |- configs/my-board_defconfig
  |     |BR2_GLOBAL_PATCH_DIR="$(BR2_EXTERNAL_BAR_42_PATH)/patches/"
  |     |BR2_ROOTFS_OVERLAY="$(BR2_EXTERNAL_BAR_42_PATH)/board/my-board/overlay/"
  |     |BR2_ROOTFS_POST_IMAGE_SCRIPT="$(BR2_EXTERNAL_BAR_42_PATH)/board/my-board/post-image.sh"
  |     |BR2_LINUX_KERNEL_CUSTOM_CONFIG_FILE="$(BR2_EXTERNAL_BAR_42_PATH)/board/my-board/kernel.config"
  |     `----
  |
  |- patches/linux/0001-some-change.patch
  |- patches/linux/0002-some-other-change.patch
  |- patches/busybox/0001-fix-something.patch
  |
  |- board/my-board/kernel.config
  |- board/my-board/overlay/var/www/index.html
  |- board/my-board/overlay/var/www/my.css
  |- board/my-board/flash-image
  `- board/my-board/post-image.sh
        |#!/bin/sh
        |generate-my-binary-image \
        |    --root ${BINARIES_DIR}/rootfs.tar \
        |    --kernel ${BINARIES_DIR}/zImage \
        |    --dtb ${BINARIES_DIR}/my-board.dtb \
        |    --output ${BINARIES_DIR}/image.bin
        `----</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The br2-external tree will then be visible in the menuconfig (with
the layout expanded):<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后，br2-external 树将在 menuconfig 中可见（布局已展开）：</font></font></font></p><pre class="screen">External options  ---&gt;
    *** Example br2-external tree (in /path/to/br2-ext-tree/)
    [ ] pkg-1
    [ ] pkg-2
    (0x10AD) my-board flash address</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you are using more than one br2-external tree, it would look like
(with the layout expanded and the second one with name <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_27</code> but no
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">desc:</code> field in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">external.desc</code>):<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您使用多个 br2-external 树，它看起来会像这样（布局已展开，第二个树的名称为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_27</code> ，但在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">external.desc</code> 中没有 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">desc:</code> 字段）：</font></font></font></p><pre class="screen">External options  ---&gt;
    Example br2-external tree  ---&gt;
        *** Example br2-external tree (in /path/to/br2-ext-tree)
        [ ] pkg-1
        [ ] pkg-2
        (0x10AD) my-board flash address
    FOO_27  ---&gt;
        *** FOO_27 (in /path/to/another-br2-ext)
        [ ] foo
        [ ] bar</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Additionally, the jpeg provider will be visible in the jpeg choice:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此外，jpeg 提供程序将在 jpeg 选择中可见：</font></font></font></p><pre class="screen">Target packages  ---&gt;
    Libraries  ---&gt;
        Graphics  ---&gt;
            [*] jpeg support
                jpeg variant ()  ---&gt;
                    ( ) jpeg
                    ( ) jpeg-turbo
                        *** jpeg from: Example br2-external tree ***
                    (X) my-jpeg
                        *** jpeg from: FOO_27 ***
                    ( ) another-jpeg</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">And similarly for the toolchains:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">以及工具链类似：</font></font></font></p><pre class="screen">Toolchain  ---&gt;
    Toolchain ()  ---&gt;
        ( ) Custom toolchain
            *** Toolchains from: Example br2-external tree ***
        (X) my custom toolchain</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note.&nbsp;</strong>The toolchain options in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">toolchain/toolchain-external-mine/Config.in.options</code>
will not appear in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain</code> menu. They must be explicitly included
from within the br2-external’s top-level <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> and will thus appear
in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">External options</code> menu.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">toolchain/toolchain-external-mine/Config.in.options</code> 中的工具链选项不会出现在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain</code> 菜单中。它们必须从 br2-external 的顶层 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 中显式包含，因此会出现在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">External options</code> 菜单中。</font></font></font></p></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="customize-store-buildroot-config" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>9.3.&nbsp;Storing the Buildroot configuration<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.3. 存储 Buildroot 配置</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The Buildroot configuration can be stored using the command
 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make savedefconfig</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用命令 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make savedefconfig</code> 可以存储 Buildroot 配置。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This strips the Buildroot configuration down by removing configuration
options that are at their default value. The result is stored in a file
called <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">defconfig</code>. If you want to save it in another place, change the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_DEFCONFIG</code> option in the Buildroot configuration itself, or call
make with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make savedefconfig BR2_DEFCONFIG=&lt;path-to-defconfig&gt;</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这将通过删除处于默认值的配置选项来简化 Buildroot 配置。结果存储在名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">defconfig</code> 的文件中。如果想将其保存在其他位置，请在 Buildroot 配置本身中更改 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_DEFCONFIG</code> 选项，或使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make savedefconfig BR2_DEFCONFIG=&lt;path-to-defconfig&gt;</code> 调用 make。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The recommended place to store this defconfig is
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">configs/&lt;boardname&gt;_defconfig</code>. If you follow this recommendation, the
configuration will be listed in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make list-defconfigs</code> and can be set
again by running <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make &lt;boardname&gt;_defconfig</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">建议将此 defconfig 存储在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">configs/&lt;boardname&gt;_defconfig</code> 。如果遵循此建议，配置将列在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make list-defconfigs</code> 中，并可以通过运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make &lt;boardname&gt;_defconfig</code> 再次设置。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Alternatively, you can copy the file to any other place and rebuild with
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make defconfig BR2_DEFCONFIG=&lt;path-to-defconfig-file&gt;</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">或者，您可以将文件复制到任何其他位置，并使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make defconfig BR2_DEFCONFIG=&lt;path-to-defconfig-file&gt;</code> 重新构建。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="customize-store-package-config" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>9.4.&nbsp;Storing the configuration of other components<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.4. 存储其他组件的配置</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The configuration files for BusyBox, the Linux kernel, Barebox, U-Boot
and uClibc should be stored as well if changed. For each of these
components, a Buildroot configuration option exists to point to an input
configuration file, e.g. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_CUSTOM_CONFIG_FILE</code>. To store
their configuration, set these configuration options to a path where you
want to save the configuration files, and then use the helper targets
described below to actually store the configuration.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果更改了 BusyBox、Linux 内核、Barebox、U-Boot 和 uClibc 的配置文件，则应该将其存储。对于这些组件中的每一个，都存在一个 Buildroot 配置选项，用于指向一个输入配置文件，例如 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_CUSTOM_CONFIG_FILE</code> 。要存储它们的配置，请将这些配置选项设置为您想要保存配置文件的路径，然后使用下面描述的辅助目标来实际存储配置。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">As explained in <a class="xref" href="#customize-dir-structure" title="9.1.&nbsp;Recommended directory structure" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;9.1, “Recommended directory structure”</a>, the recommended path to
store these configuration files is
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;company&gt;/&lt;boardname&gt;/foo.config</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如第 9.1 节“推荐目录结构”中所解释的，存储这些配置文件的推荐路径是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;company&gt;/&lt;boardname&gt;/foo.config</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Make sure that you create a configuration file <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">before</em></span> changing
the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_CUSTOM_CONFIG_FILE</code> etc. options. Otherwise,
Buildroot will try to access this config file, which doesn’t exist
yet, and will fail. You can create the configuration file by running
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make linux-menuconfig</code> etc.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在更改 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_CUSTOM_CONFIG_FILE</code> 等选项之前，请确保创建配置文件。否则，Buildroot 将尝试访问此配置文件，但该文件尚不存在，操作将失败。您可以通过运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make linux-menuconfig</code> 等来创建配置文件。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot provides a few helper targets to make the saving of
configuration files easier.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 提供了一些辅助目标，以使配置文件的保存更加容易。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make linux-update-defconfig</code> saves the linux configuration to the
  path specified by <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_CUSTOM_CONFIG_FILE</code>. It
  simplifies the config file by removing default values. However,
  this only works with kernels starting from 2.6.33. For earlier
  kernels, use <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make linux-update-config</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make linux-update-defconfig</code> 将 Linux 配置保存到由 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_CUSTOM_CONFIG_FILE</code> 指定的路径。它通过删除默认值简化配置文件。但是，这仅适用于从 2.6.33 开始的内核。对于较早的内核，请使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make linux-update-config</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make busybox-update-config</code> saves the busybox configuration to the
  path specified by <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_BUSYBOX_CONFIG</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make busybox-update-config</code> 将 BusyBox 配置保存到由 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_BUSYBOX_CONFIG</code> 指定的路径。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make uclibc-update-config</code> saves the uClibc configuration to the
  path specified by <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_UCLIBC_CONFIG</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make uclibc-update-config</code> 将 uClibc 配置保存到由 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_UCLIBC_CONFIG</code> 指定的路径。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make barebox-update-defconfig</code> saves the barebox configuration to the
  path specified by <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TARGET_BAREBOX_CUSTOM_CONFIG_FILE</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make barebox-update-defconfig</code> 将 barebox 配置保存到指定路径 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TARGET_BAREBOX_CUSTOM_CONFIG_FILE</code> 中。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make uboot-update-defconfig</code> saves the U-Boot configuration to the
  path specified by <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TARGET_UBOOT_CUSTOM_CONFIG_FILE</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make uboot-update-defconfig</code> 将 U-Boot 配置保存到指定路径 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TARGET_UBOOT_CUSTOM_CONFIG_FILE</code> 中。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
For at91bootstrap3, no helper exists so you have to copy the config
  file manually to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TARGET_AT91BOOTSTRAP3_CUSTOM_CONFIG_FILE</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于 at91bootstrap3，没有辅助程序，因此您必须手动将配置文件复制到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TARGET_AT91BOOTSTRAP3_CUSTOM_CONFIG_FILE</code> 。</font></font></font></li></ul></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="rootfs-custom" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>9.5.&nbsp;Customizing the generated target filesystem<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.5.&nbsp;定制生成的目标文件系统</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Besides changing the configuration through <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make *config</code>,
there are a few other ways to customize the resulting target filesystem.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">除了通过 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make *config</code> 更改配置之外，还有其他几种方式可以定制生成的目标文件系统。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The two recommended methods, which can co-exist, are root filesystem
overlay(s) and post build script(s).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">两种推荐的方法，可以共存，分别是根文件系统叠加和构建后脚本。</font></font></font></p><div class="variablelist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl class="variablelist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="term" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Root filesystem overlays (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_OVERLAY</code>)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">根文件系统叠加 ( <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_OVERLAY</code> )</font></font></font></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">A filesystem overlay is a tree of files that is copied directly
  over the target filesystem after it has been built. To enable this
  feature, set config option <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_OVERLAY</code> (in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">System
  configuration</code> menu) to the root of the overlay. You can even specify
  multiple overlays, space-separated. If you specify a relative path,
  it will be relative to the root of the Buildroot tree. Hidden
  directories of version control systems, like <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.git</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.svn</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hg</code>,
  etc., files called <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.empty</code> and files ending in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">~</code> are excluded from
  the copy.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">文件系统叠加是一个文件树，它在构建完成后直接复制到目标文件系统上。要启用此功能，请将配置选项 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_OVERLAY</code> (在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">System
  configuration</code> 菜单中) 设置为叠加的根目录。您甚至可以指定多个叠加，以空格分隔。如果指定相对路径，它将相对于 Buildroot 树的根目录。版本控制系统的隐藏目录，如 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.git</code> 、 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.svn</code> 、 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hg</code> 等，名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.empty</code> 的文件和以 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">~</code> 结尾的文件将被排除在复制之外。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_MERGED_USR</code> is enabled, then the overlay must not
  contain the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/bin</em></span>, <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/lib</em></span> or <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/sbin</em></span> directories, as Buildroot will
  create them as symbolic links to the relevant folders in <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/usr</em></span>.  In
  such a situation, should the overlay have any programs or libraries,
  they should be placed in <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/usr/bin</em></span>, <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/usr/sbin</em></span> and <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/usr/lib</em></span>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当启用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_MERGED_USR</code>
 时，叠加不能包含 /bin、/lib 或 /sbin 目录，因为 Buildroot 将创建它们作为指向 /usr 
中相关文件夹的符号链接。在这种情况下，如果叠加包含任何程序或库，它们应放置在 /usr/bin、/usr/sbin 和 /usr/lib 中。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">As shown in <a class="xref" href="#customize-dir-structure" title="9.1.&nbsp;Recommended directory structure" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;9.1, “Recommended directory structure”</a>, the recommended path for
  this overlay is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;company&gt;/&lt;boardname&gt;/rootfs-overlay</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如第 9.1 节“推荐目录结构”所示，此叠加层的推荐路径为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;company&gt;/&lt;boardname&gt;/rootfs-overlay</code> 。</font></font></font></p></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="term" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Post-build scripts (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_POST_BUILD_SCRIPT</code>)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">构建后脚本（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_POST_BUILD_SCRIPT</code> ）</font></font></font></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Post-build scripts are shell scripts called <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">after</em></span> Buildroot builds
  all the selected software, but <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">before</em></span> the rootfs images are
  assembled. To enable this feature, specify a space-separated list of
  post-build scripts in config option <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_POST_BUILD_SCRIPT</code> (in
  the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">System configuration</code> menu). If you specify a relative path, it
  will be relative to the root of the Buildroot tree.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">构建后脚本是在 Buildroot 构建所有选定软件之后但在组装根文件系统镜像之前调用的 shell 脚本。要启用此功能，请在配置选项 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_POST_BUILD_SCRIPT</code> （在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">System configuration</code> 菜单中）中指定一个以空格分隔的构建后脚本列表。如果指定相对路径，它将相对于 Buildroot 树的根目录。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Using post-build scripts, you can remove or modify any file in your
  target filesystem. You should, however, use this feature with care.
  Whenever you find that a certain package generates wrong or unneeded
  files, you should fix that package rather than work around it with some
  post-build cleanup scripts.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用后构建脚本，您可以删除或修改目标文件系统中的任何文件。但是，您应该谨慎使用此功能。每当您发现某个软件包生成错误或不需要的文件时，您应该修复该软件包，而不是通过一些后构建清理脚本来解决问题。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">As shown in <a class="xref" href="#customize-dir-structure" title="9.1.&nbsp;Recommended directory structure" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;9.1, “Recommended directory structure”</a>, the recommended path for
  this script is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;company&gt;/&lt;boardname&gt;/post_build.sh</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如第 9.1 节“推荐的目录结构”所示，此脚本的推荐路径为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;company&gt;/&lt;boardname&gt;/post_build.sh</code> 。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The post-build scripts are run with the main Buildroot tree as current
  working directory. The path to the target filesystem is passed as the
  first argument to each script. If the config option
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_POST_SCRIPT_ARGS</code> is not empty, these arguments will be
  passed to the script too. All the scripts will be passed the exact
  same set of arguments, it is not possible to pass different sets of
  arguments to each script.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">后构建脚本在主 Buildroot 树中运行，当前工作目录为当前目标文件系统。目标文件系统的路径将作为第一个参数传递给每个脚本。如果配置选项 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_POST_SCRIPT_ARGS</code> 不为空，则这些参数也将传递给脚本。所有脚本将传递完全相同的参数集，无法向每个脚本传递不同的参数集。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In addition, you may also use these environment variables:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">另外，您还可以使用这些环境变量：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_CONFIG</code>: the path to the Buildroot .config file
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_CONFIG</code> ：Buildroot .config 文件的路径</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">CONFIG_DIR</code>: the directory containing the .config file, and
    therefore the top-level Buildroot Makefile to use (which is
    correct for both in-tree and out-of-tree builds)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">CONFIG_DIR</code> ：包含 .config 文件的目录，因此可以使用顶层 Buildroot Makefile（对于树内和树外构建都是正确的）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_DIR</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">STAGING_DIR</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TARGET_DIR</code>: see
    <a class="xref" href="#generic-package-reference" title="18.6.2.&nbsp;generic-package reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;18.6.2, “<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> reference”</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_DIR</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">STAGING_DIR</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TARGET_DIR</code> ：请参阅第 18.6.2 节，“ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 参考”</font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUILD_DIR</code>: the directory where packages are extracted and built
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUILD_DIR</code> ：包被提取和构建的目录</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BINARIES_DIR</code>: the place where all binary files (aka images) are
    stored
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BINARIES_DIR</code> ：存储所有二进制文件（也称为图像）的位置</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BASE_DIR</code>: the base output directory
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BASE_DIR</code> ：基本输出目录</font></font></font></li></ul></div></dd></dl></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Below three more methods of customizing the target filesystem are
described, but they are not recommended.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">下面描述了另外三种自定义目标文件系统的方法，但不建议使用。</font></font></font></p><div class="variablelist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl class="variablelist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="term" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Direct modification of the target filesystem
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">直接修改目标文件系统</font></font></font></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For temporary modifications, you can modify the target filesystem
  directly and rebuild the image. The target filesystem is available
  under <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/target/</code>. After making your changes, run <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> to
  rebuild the target filesystem image.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于临时修改，您可以直接修改目标文件系统并重新构建映像。目标文件系统可在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/target/</code> 下找到。进行更改后，运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> 以重新构建目标文件系统映像。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This method allows you to do anything to the target filesystem, but if
  you need to clean your Buildroot tree using <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make clean</code>, these
  changes will be lost. Such cleaning is necessary in several cases,
  refer to <a class="xref" href="#full-rebuild" title="8.2.&nbsp;Understanding when a full rebuild is necessary" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;8.2, “Understanding when a full rebuild is necessary”</a> for details. This solution is therefore
  only useful for quick tests: <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">changes do not survive the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make clean</code>
  command</em></span>. Once you have validated your changes, you should make sure
  that they will persist after a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make clean</code>, using a root filesystem
  overlay or a post-build script.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此方法允许您对目标文件系统进行任何操作，但如果您需要使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make clean</code> 清理您的 Buildroot 树，这些更改将会丢失。在几种情况下，这种清理是必要的，请参阅第 8.2 节“了解何时需要进行完全重建”以获取详细信息。因此，此解决方案仅适用于快速测试：更改不会在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make clean</code> 命令后保留。一旦您验证了更改，您应确保它们在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make clean</code> 后仍然存在，可以使用根文件系统叠加或后构建脚本。</font></font></font></p></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="term" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Custom target skeleton (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_SKELETON_CUSTOM</code>)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">自定义目标骨架（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_SKELETON_CUSTOM</code> ）</font></font></font></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The root filesystem image is created from a target skeleton, on top of
  which all packages install their files. The skeleton is copied to the
  target directory <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/target</code> before any package is built and
  installed. The default target skeleton provides the standard Unix
  filesystem layout and some basic init scripts and configuration files.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">根文件系统镜像是从目标骨架创建的，在这个骨架上，所有软件包都会安装它们的文件。在构建和安装任何软件包之前，骨架会被复制到目标目录 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/target</code> 中。默认的目标骨架提供了标准的 Unix 文件系统布局以及一些基本的初始化脚本和配置文件。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If the default skeleton (available under <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">system/skeleton</code>) does not
  match your needs, you would typically use a root filesystem overlay or
  post-build script to adapt it. However, if the default skeleton is
  entirely different than what you need, using a custom skeleton may be
  more suitable.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果默认的骨架（位于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">system/skeleton</code> 下）不符合您的需求，您通常会使用根文件系统叠加或后期构建脚本来进行调整。然而，如果默认的骨架与您的需求完全不同，使用自定义骨架可能更合适。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To enable this feature, enable config option
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_SKELETON_CUSTOM</code> and set <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_SKELETON_CUSTOM_PATH</code>
  to the path of your custom skeleton. Both options are available in the
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">System configuration</code> menu. If you specify a relative path, it will
  be relative to the root of the Buildroot tree.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要启用此功能，请启用配置选项 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_SKELETON_CUSTOM</code> 并将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_SKELETON_CUSTOM_PATH</code> 设置为您自定义骨架的路径。这两个选项都可以在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">System configuration</code> 菜单中找到。如果指定相对路径，它将相对于 Buildroot 树的根目录。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Custom skeletons don’t need to contain the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/bin</em></span>, <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/lib</em></span> or <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/sbin</em></span>
  directories, since they are created automatically during the build.
  When <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_MERGED_USR</code> is enabled, then the custom skeleton must
  not contain the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/bin</em></span>, <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/lib</em></span> or <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/sbin</em></span> directories, as Buildroot
  will create them as symbolic links to the relevant folders in <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/usr</em></span>.
  In such a situation, should the skeleton have any programs or
  libraries, they should be placed in <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/usr/bin</em></span>, <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/usr/sbin</em></span> and
  <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/usr/lib</em></span>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">自定义骨架不需要包含/bin、/lib 或/sbin 目录，因为它们会在构建过程中自动生成。当启用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_MERGED_USR</code> 时，自定义骨架不应包含/bin、/lib 或/sbin 目录，因为 Buildroot 会将它们创建为指向/usr 中相关文件夹的符号链接。在这种情况下，如果骨架中有任何程序或库，它们应放置在/usr/bin、/usr/sbin 和/usr/lib 中。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This method is not recommended because it duplicates the entire
  skeleton, which prevents taking advantage of the fixes or improvements
  brought to the default skeleton in later Buildroot releases.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">不推荐使用此方法，因为它会复制整个骨架，这将阻止利用后续 Buildroot 版本中默认骨架的修复或改进。</font></font></font></p></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="term" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Post-fakeroot scripts (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_POST_FAKEROOT_SCRIPT</code>)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">后伪根脚本（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_POST_FAKEROOT_SCRIPT</code> ）</font></font></font></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When aggregating the final images, some parts of the process requires
  root rights: creating device nodes in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/dev</code>, setting permissions or
  ownership to files and directories… To avoid requiring actual root
  rights, Buildroot uses <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">fakeroot</code> to simulate root rights. This is not
  a complete substitute for actually being root, but is enough for what
  Buildroot needs.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在聚合最终图像时，某些过程的某些部分需要 root 权限：在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/dev</code> 中创建设备节点，设置文件和目录的权限或所有权... 为了避免需要实际的 root 权限，Buildroot 使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">fakeroot</code> 来模拟 root 权限。这并不能完全替代实际的 root 权限，但对于 Buildroot 需要的内容足够了。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Post-fakeroot scripts are shell scripts that are called at the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">end</em></span> of
  the fakeroot phase, <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">right before</em></span> the filesystem image generator is
  called. As such, they are called in the fakeroot context.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">后伪装脚本是在伪装阶段结束时调用的 shell 脚本，在文件系统图像生成器被调用之前调用。因此，它们是在伪装上下文中调用的。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Post-fakeroot scripts can be useful in case you need to tweak the
  filesystem to do modifications that are usually only available to the
  root user.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">后伪装脚本在需要调整文件系统以进行通常仅对 root 用户可用的修改时非常有用。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note:&nbsp;</strong>It is recommended to use the existing mechanisms to set file permissions
  or create entries in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/dev</code> (see <a class="xref" href="#customize-device-permission" title="9.5.1.&nbsp;Setting file permissions and ownership and adding custom devices nodes" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;9.5.1, “Setting file permissions and ownership and adding custom devices nodes”</a>) or
  to create users (see <a class="xref" href="#customize-users" title="9.6.&nbsp;Adding custom user accounts" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;9.6, “Adding custom user accounts”</a>)<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意：建议使用现有机制设置文件权限或在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/dev</code> 中创建条目（请参见第 9.5.1 节“设置文件权限和所有权以及添加自定义设备节点”）或创建用户（请参见第 9.6 节“添加自定义用户帐户”）</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note:&nbsp;</strong>The difference between post-build scripts (above) and fakeroot scripts,
  is that post-build scripts are not called in the fakeroot context.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意：后构建脚本（上文）和 fakeroot 脚本之间的区别在于后构建脚本不在 fakeroot 上下文中调用。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note:&nbsp;</strong>Using <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">fakeroot</code> is not an absolute substitute for actually being root.
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">fakeroot</code> only ever fakes the file access rights and types (regular,
  block-or-char device…) and uid/gid; these are emulated in-memory.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意：使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">fakeroot</code> 并非绝对替代实际的 root。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">fakeroot</code> 只是伪造文件访问权限和类型（常规、块设备或字符设备...）以及 uid/gid；这些都是在内存中模拟的。</font></font></font></p></dd></dl></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="customize-device-permission" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>9.5.1.&nbsp;Setting file permissions and ownership and adding custom devices nodes<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.5.1. 设置文件权限和所有权以及添加自定义设备节点</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Sometimes it is needed to set specific permissions or ownership on files
or device nodes. For example, certain files may need to be owned by
root. Since the post-build scripts are not run as root, you cannot do
such changes from there unless you use an explicit fakeroot from the
post-build script.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有时需要在文件或设备节点上设置特定权限或所有权。例如，某些文件可能需要由 root 所有。由于后构建脚本不是以 root 身份运行的，因此除非您在后构建脚本中使用显式 fakeroot，否则无法进行此类更改。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Instead, Buildroot provides support for so-called <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">permission tables</em></span>.
To use this feature, set config option <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_DEVICE_TABLE</code> to a
space-separated list of permission tables, regular text files following
the <a class="link" href="#makedev-syntax" title="Chapter&nbsp;25.&nbsp;Makedev syntax documentation" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">makedev syntax</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">相反，Buildroot 提供了所谓的权限表支持。要使用此功能，请将配置选项 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_DEVICE_TABLE</code> 设置为以空格分隔的权限表列表，这些权限表是遵循 makedev 语法的常规文本文件。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you are using a static device table (i.e. not using <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">devtmpfs</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mdev</code>, or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">(e)udev</code>) then you can add device nodes using the same
syntax, in so-called <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">device tables</em></span>. To use this feature, set config
option <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_STATIC_DEVICE_TABLE</code> to a space-separated list of
device tables.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您正在使用静态设备表（即不使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">devtmpfs</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mdev</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">(e)udev</code> ），那么您可以使用相同的语法在所谓的设备表中添加设备节点。要使用此功能，请将配置选项 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_STATIC_DEVICE_TABLE</code> 设置为设备表的空格分隔列表。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">As shown in <a class="xref" href="#customize-dir-structure" title="9.1.&nbsp;Recommended directory structure" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;9.1, “Recommended directory structure”</a>, the recommended location for
such files is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;company&gt;/&lt;boardname&gt;/</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如第 9.1 节“推荐的目录结构”所示，此类文件的推荐位置是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;company&gt;/&lt;boardname&gt;/</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">It should be noted that if the specific permissions or device nodes are
related to a specific application, you should set variables
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_PERMISSIONS</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEVICES</code> in the package’s <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file instead
(see <a class="xref" href="#generic-package-reference" title="18.6.2.&nbsp;generic-package reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;18.6.2, “<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> reference”</a>).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">应注意，如果特定权限或设备节点与特定应用程序相关，则应在软件包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件中设置变量 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_PERMISSIONS</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEVICES</code> （请参阅第 18.6.2 节“ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 参考”）。</font></font></font></p></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="customize-users" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>9.6.&nbsp;Adding custom user accounts<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.6. 添加自定义用户帐户</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Sometimes it is needed to add specific users in the target system.
To cover this requirement, Buildroot provides support for so-called
<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">users tables</em></span>. To use this feature, set config option
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_USERS_TABLES</code> to a space-separated list of users tables,
regular text files following the <a class="link" href="#makeuser-syntax" title="Chapter&nbsp;26.&nbsp;Makeusers syntax documentation" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">makeusers syntax</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有时需要在目标系统中添加特定用户。为了满足这一要求，Buildroot 提供了对所谓的用户表的支持。要使用此功能，请将配置选项 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_USERS_TABLES</code> 设置为用户表的空格分隔列表，这些用户表是遵循 makeusers 语法的常规文本文件。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">As shown in <a class="xref" href="#customize-dir-structure" title="9.1.&nbsp;Recommended directory structure" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;9.1, “Recommended directory structure”</a>, the recommended location for
such files is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;company&gt;/&lt;boardname&gt;/</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如第 9.1 节“推荐的目录结构”所示，此类文件的推荐位置是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;company&gt;/&lt;boardname&gt;/</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">It should be noted that if the custom users are related to a specific
application, you should set variable <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_USERS</code> in the package’s <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code>
file instead (see <a class="xref" href="#generic-package-reference" title="18.6.2.&nbsp;generic-package reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;18.6.2, “<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> reference”</a>).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">需要注意的是，如果自定义用户与特定应用程序相关联，应该在软件包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件中设置变量 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_USERS</code> （请参阅第 18.6.2 节“ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 参考”）。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_customization_emphasis_after_emphasis_the_images_have_been_created" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>9.7.&nbsp;Customization <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">after</em></span> the images have been created<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.7. 在图像创建后进行自定义</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">While post-build scripts (<a class="xref" href="#rootfs-custom" title="9.5.&nbsp;Customizing the generated target filesystem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;9.5, “Customizing the generated target filesystem”</a>) are run <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">before</em></span>
building the filesystem image, kernel and bootloader, <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">post-image
scripts</strong></span> can be used to perform some specific actions <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">after</em></span> all images
have been created.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在构建文件系统映像、内核和引导加载程序之前运行后构建脚本（第 9.5 节“定制生成的目标文件系统”），后图像脚本可用于在创建所有图像后执行一些特定操作。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Post-image scripts can for example be used to automatically extract your
root filesystem tarball in a location exported by your NFS server, or
to create a special firmware image that bundles your root filesystem and
kernel image, or any other custom action required for your project.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">例如，后图像脚本可用于自动提取您的根文件系统 tarball 到由 NFS 服务器导出的位置，或者创建一个捆绑您的根文件系统和内核映像的特殊固件映像，或者为您的项目需要的任何其他自定义操作。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To enable this feature, specify a space-separated list of post-image
scripts in config option <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_POST_IMAGE_SCRIPT</code> (in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">System
configuration</code> menu). If you specify a relative path, it will be
relative to the root of the Buildroot tree.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要启用此功能，请在配置选项 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_POST_IMAGE_SCRIPT</code> （在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">System
configuration</code> 菜单中）中指定一组以空格分隔的后图像脚本列表。如果指定相对路径，它将相对于 Buildroot 树的根目录。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Just like post-build scripts, post-image scripts are run with the main
Buildroot tree as current working directory. The path to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">images</code>
output directory is passed as the first argument to each script. If the
config option <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_POST_SCRIPT_ARGS</code> is not empty, these
arguments will be passed to the script too. All the scripts will be
passed the exact same set of arguments, it is not possible to pass
different sets of arguments to each script.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">就像后构建脚本一样，后图像脚本会以主 Buildroot 树作为当前工作目录运行。将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">images</code> 输出目录的路径作为每个脚本的第一个参数传递。如果配置选项 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_POST_SCRIPT_ARGS</code> 不为空，则这些参数也将传递给脚本。所有脚本将传递完全相同的参数集，无法向每个脚本传递不同的参数集。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Again just like for the post-build scripts, the scripts have access to
the environment variables <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_CONFIG</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_DIR</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">STAGING_DIR</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TARGET_DIR</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUILD_DIR</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BINARIES_DIR</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">CONFIG_DIR</code> and
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BASE_DIR</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">就像对于后构建脚本一样，脚本可以访问环境变量 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_CONFIG</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_DIR</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">STAGING_DIR</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TARGET_DIR</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUILD_DIR</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BINARIES_DIR</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">CONFIG_DIR</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BASE_DIR</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The post-image scripts will be executed as the user that executes
Buildroot, which should normally <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">not</em></span> be the root user. Therefore, any
action requiring root permissions in one of these scripts will require
special handling (usage of fakeroot or sudo), which is left to the
script developer.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">后图像脚本将以执行 Buildroot 的用户身份执行，这通常不应该是 root 用户。因此，在这些脚本中需要根权限的任何操作将需要特殊处理（使用 fakeroot 或 sudo），这留给脚本开发者处理。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_adding_project_specific_patches_and_hashes" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>9.8.&nbsp;Adding project-specific patches and hashes<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.8. 添加项目特定的补丁和哈希值</font></font></font></h2></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="customize-patches" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>9.8.1.&nbsp;Providing extra patches<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.8.1. 提供额外的补丁</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">It is sometimes useful to apply <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">extra</em></span> patches to packages - on top of
those provided in Buildroot. This might be used to support custom
features in a project, for example, or when working on a new
architecture.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有时候，在构建系统提供的基础上，向软件包应用额外的补丁是很有用的。这可能用于支持项目中的自定义功能，例如在开发新架构时。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> configuration option can be used to specify
a space separated list of one or more directories containing package
patches.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">" <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> "配置选项可用于指定一个或多个包含软件包补丁的空格分隔目录列表。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For a specific version <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packageversion&gt;</code> of a specific package
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;</code>, patches are applied from <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> as
follows:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于特定版本 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packageversion&gt;</code> 的特定软件包 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;</code> ，补丁将从 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> 应用如下：</font></font></font></p><div class="orderedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ol class="orderedlist" type="1" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
For every directory - <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;global-patch-dir&gt;</code> - that exists in
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code>, a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;package-patch-dir&gt;</code> will be determined as
  follows:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于每个存在于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> 中的目录 - <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;global-patch-dir&gt;</code> -，将按以下方式确定 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;package-patch-dir&gt;</code> ：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;global-patch-dir&gt;/&lt;packagename&gt;/&lt;packageversion&gt;/</code> if the
  directory exists.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果目录存在，则 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;global-patch-dir&gt;/&lt;packagename&gt;/&lt;packageversion&gt;/</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Otherwise, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;global-patch-dir&gt;/&lt;packagename&gt;</code> if the directory
  exists.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">否则，如果目录存在，则 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;global-patch-dir&gt;/&lt;packagename&gt;</code> 。</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Patches will then be applied from a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;package-patch-dir&gt;</code> as
  follows:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后将从 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;package-patch-dir&gt;</code> 应用补丁。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
If a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">series</code> file exists in the package directory, then patches are
  applied according to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">series</code> file;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果软件包目录中存在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">series</code> 文件，则根据 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">series</code> 文件应用补丁；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Otherwise, patch files matching <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*.patch</code> are applied in
  alphabetical order.  So, to ensure they are applied in the right
  order, it is highly recommended to name the patch files like this:
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;number&gt;-&lt;description&gt;.patch</code>, where <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;number&gt;</code> refers to the
  <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">apply order</em></span>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">否则，按字母顺序应用与 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*.patch</code> 匹配的补丁文件。因此，为确保它们按正确顺序应用，强烈建议将补丁文件命名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;number&gt;-&lt;description&gt;.patch</code> ，其中 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;number&gt;</code> 表示应用顺序。</font></font></font></li></ul></div></li></ol></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For information about how patches are applied for a package, see
<a class="xref" href="#patch-apply-order" title="19.2.&nbsp;How patches are applied" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;19.2, “How patches are applied”</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有关如何为软件包应用补丁的信息，请参阅第 19.2 节“如何应用补丁”。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> option is the preferred method for
specifying a custom patch directory for packages. It can be used to
specify a patch directory for any package in buildroot. It should also
be used in place of the custom patch directory options that are
available for packages such as U-Boot and Barebox. By doing this, it
will allow a user to manage their patches from one top-level
directory.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> 选项是指定软件包自定义补丁目录的首选方法。它可用于为 buildroot 中的任何软件包指定补丁目录。还应该用它来替代可用于软件包（如 U-Boot 和 Barebox）的自定义补丁目录选项。通过这样做，用户可以从一个顶级目录管理他们的补丁。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The exception to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> being the preferred method for
specifying custom patches is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_PATCH</code>.
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_PATCH</code> should be used to specify kernel patches that
are available at a URL. <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note:</strong></span> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_PATCH</code> specifies kernel
patches that are applied after patches available in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code>,
as it is done from a post-patch hook of the Linux package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">除了 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> 是指定自定义补丁的首选方法之外， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_PATCH</code> 是一个例外。应该使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_PATCH</code> 来指定可在 URL 上找到的内核补丁。注意： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_PATCH</code> 指定了在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> 中可用的补丁之后应用的内核补丁，因为它是从 Linux 软件包的后补丁钩子中执行的。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="customize-hashes" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>9.8.2.&nbsp;Providing extra hashes<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.8.2. 提供额外哈希值</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot bundles a <a class="link" href="#adding-packages-hash" title="18.4.&nbsp;The .hash file" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">list of hashes</a> against
which it checks the integrity of the downloaded archives, or of those
it generates locally from VCS checkouts. However, it can only do so
for the known versions; for packages where it is possible to specify
a custom version (e.g. a custom version string, a remote tarball URL,
or a VCS repository location and changeset), Buildroot can’t carry
hashes for those.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot
 捆绑了一系列哈希值，用于检查下载的存档文件的完整性，或者从 VCS 
检出本地生成的存档文件。但是，它只能对已知版本执行此操作；对于可以指定自定义版本的软件包（例如自定义版本字符串、远程 tarball URL 或
 VCS 存储库位置和更改集的软件包），Buildroot 无法携带这些哈希值。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For users concerned with the integrity of such downloads, it is possible
to provide a list of hashes that Buildroot can use to check arbitrary
downloaded files. Those extra hashes are looked up similarly to the
extra patches (above); for each directory in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code>,
the first file to exist is used to check a package download:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于关心此类下载完整性的用户，可以提供一系列哈希值，Buildroot 可以用来检查任意下载的文件。这些额外的哈希值类似于额外的补丁（上文）进行查找；对于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> 中的每个目录，用于检查软件包下载的第一个存在的文件是：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;global-patch-dir&gt;/&lt;packagename&gt;/&lt;packageversion&gt;/&lt;packagename&gt;.hash</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;global-patch-dir&gt;/&lt;packagename&gt;/&lt;packagename&gt;.hash</code>
</li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">utils/add-custom-hashes</code> script can be used to generate these files.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">utils/add-custom-hashes</code> 脚本可用于生成这些文件。</font></font></font></p></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="customize-packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>9.9.&nbsp;Adding project-specific packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.9. 添加项目特定软件包</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In general, any new package should be added directly in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package</code>
directory and submitted to the Buildroot upstream project. How to add
packages to Buildroot in general is explained in full detail in
<a class="xref" href="#adding-packages" title="Chapter&nbsp;18.&nbsp;Adding new packages to Buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Chapter&nbsp;18, <em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Adding new packages to Buildroot</em></a> and will not be repeated here. However, your
project may need some proprietary packages that cannot be upstreamed.
This section will explain how you can keep such project-specific
packages in a project-specific directory.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一般来说，任何新软件包都应直接添加到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package</code>
 目录，并提交到 Buildroot 上游项目。一般情况下如何向 Buildroot 添加软件包在第 18 章“向 Buildroot 
添加新软件包”中有详细说明，这里不再重复。但是，您的项目可能需要一些无法上游的专有软件包。本节将解释如何将这些项目特定软件包保留在项目特定目录
中。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">As shown in <a class="xref" href="#customize-dir-structure" title="9.1.&nbsp;Recommended directory structure" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;9.1, “Recommended directory structure”</a>, the recommended location for
project-specific packages is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/&lt;company&gt;/</code>. If you are using the
br2-external tree feature (see <a class="xref" href="#outside-br-custom" title="9.2.&nbsp;Keeping customizations outside of Buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;9.2, “Keeping customizations outside of Buildroot”</a>) the recommended
location is to put them in a sub-directory named <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/</code> in your
br2-external tree.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如第 9.1 节“推荐的目录结构”所示，项目特定软件包的推荐位置是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/&lt;company&gt;/</code> 。如果您正在使用 br2-external 树功能（请参阅第 9.2 节“将自定义内容放在 Buildroot 之外”），建议将它们放在 br2-external 树中名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/</code> 的子目录中。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">However, Buildroot will not be aware of the packages in this location,
unless we perform some additional steps. As explained in
<a class="xref" href="#adding-packages" title="Chapter&nbsp;18.&nbsp;Adding new packages to Buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Chapter&nbsp;18, <em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Adding new packages to Buildroot</em></a>, a package in Buildroot basically consists of two
files: a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file (describing how to build the package) and a
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> file (describing the configuration options for this
package).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">但是，除非我们执行一些额外的步骤，否则 Buildroot 将不会意识到此位置中的软件包。如第 18 章“向 Buildroot 添加新软件包”中所解释的，Buildroot 中的软件包基本上由两个文件组成：一个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件（描述如何构建软件包）和一个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件（描述此软件包的配置选项）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot will automatically include the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> files in first-level
subdirectories of the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package</code> directory (using the pattern
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/*/*.mk</code>). If we want Buildroot to include <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> files from
deeper subdirectories (like <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/&lt;company&gt;/package1/</code>) then we
simply have to add a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file in a first-level subdirectory that
includes these additional <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> files. Therefore, create a file
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/&lt;company&gt;/&lt;company&gt;.mk</code> with following contents (assuming you
have only one extra directory level below <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/&lt;company&gt;/</code>):<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 将自动包含 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package</code> 目录的一级子目录中的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件（使用模式 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/*/*.mk</code> ）。如果我们希望 Buildroot 包含更深层子目录（如 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/&lt;company&gt;/package1/</code> ）中的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件，那么我们只需在包含这些额外 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件的一级子目录中添加一个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件。因此，请创建一个文件 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/&lt;company&gt;/&lt;company&gt;.mk</code> ，其中包含以下内容（假设您在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/&lt;company&gt;/</code> 下只有一个额外的目录级别）：</font></font></font></p><pre class="screen">include $(sort $(wildcard package/&lt;company&gt;/*/*.mk))</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> files, create a file <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/&lt;company&gt;/Config.in</code>
that includes the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> files of all your packages. An exhaustive
list has to be provided since wildcards are not supported in the source command of kconfig.
For example:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件，请创建一个文件 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/&lt;company&gt;/Config.in</code> ，其中包含所有软件包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件。必须提供详尽的列表，因为 kconfig 的源命令中不支持通配符。例如：</font></font></font></p><pre class="screen">source "package/&lt;company&gt;/package1/Config.in"
source "package/&lt;company&gt;/package2/Config.in"</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Include this new file <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/&lt;company&gt;/Config.in</code> from
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/Config.in</code>, preferably in a company-specific menu to make
merges with future Buildroot versions easier.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">包括从 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/Config.in</code> 中的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/&lt;company&gt;/Config.in</code> 新文件，最好放在公司特定菜单中，以便将来更容易地与 Buildroot 版本合并。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If using a br2-external tree, refer to <a class="xref" href="#outside-br-custom" title="9.2.&nbsp;Keeping customizations outside of Buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;9.2, “Keeping customizations outside of Buildroot”</a> for how
to fill in those files.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果使用 br2-external 树，请参阅第 9.2 节“将自定义内容保留在 Buildroot 之外”以了解如何填写这些文件。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_quick_guide_to_storing_your_project_specific_customizations" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>9.10.&nbsp;Quick guide to storing your project-specific customizations<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">9.10. 存储项目特定自定义的快速指南</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Earlier in this chapter, the different methods for making
project-specific customizations have been described. This section will
now summarize all this by providing step-by-step instructions to storing your
project-specific customizations. Clearly, the steps that are not relevant to
your project can be skipped.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在本章的前面部分，已经描述了制作项目特定定制的不同方法。本节将通过提供逐步说明来总结所有内容，以存储您的项目特定定制。显然，与您的项目无关的步骤可以跳过。</font></font></font></p><div class="orderedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ol class="orderedlist" type="1" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make menuconfig</code> to configure toolchain, packages and kernel.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make menuconfig</code> 配置工具链、软件包和内核。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make linux-menuconfig</code> to update the kernel config, similar for
   other configuration like busybox, uclibc, …
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make linux-menuconfig</code> 更新内核配置，其他配置类似于 busybox、uclibc 等。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mkdir -p board/&lt;manufacturer&gt;/&lt;boardname&gt;</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Set the following options to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;manufacturer&gt;/&lt;boardname&gt;/&lt;package&gt;.config</code>
   (as far as they are relevant):
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">将以下选项设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;manufacturer&gt;/&lt;boardname&gt;/&lt;package&gt;.config</code> （只要它们是相关的）：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_CUSTOM_CONFIG_FILE</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_BUSYBOX_CONFIG</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_UCLIBC_CONFIG</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TARGET_AT91BOOTSTRAP3_CUSTOM_CONFIG_FILE</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TARGET_BAREBOX_CUSTOM_CONFIG_FILE</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TARGET_UBOOT_CUSTOM_CONFIG_FILE</code>
</li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Write the configuration files:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">编写配置文件：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make linux-update-defconfig</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make busybox-update-config</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make uclibc-update-config</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cp &lt;output&gt;/build/at91bootstrap3-*/.config
     board/&lt;manufacturer&gt;/&lt;boardname&gt;/at91bootstrap3.config</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make barebox-update-defconfig</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make uboot-update-defconfig</code>
</li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Create <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;manufacturer&gt;/&lt;boardname&gt;/rootfs-overlay/</code> and fill it
   with additional files you need on your rootfs, e.g.
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;manufacturer&gt;/&lt;boardname&gt;/rootfs-overlay/etc/inittab</code>.
   Set <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_OVERLAY</code>
   to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;manufacturer&gt;/&lt;boardname&gt;/rootfs-overlay</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">创建 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;manufacturer&gt;/&lt;boardname&gt;/rootfs-overlay/</code> 并填充所需的其他文件到您的 rootfs，例如 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;manufacturer&gt;/&lt;boardname&gt;/rootfs-overlay/etc/inittab</code> 。将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_OVERLAY</code> 设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;manufacturer&gt;/&lt;boardname&gt;/rootfs-overlay</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Create a post-build script
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;manufacturer&gt;/&lt;boardname&gt;/post_build.sh</code>. Set
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_POST_BUILD_SCRIPT</code> to
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;manufacturer&gt;/&lt;boardname&gt;/post_build.sh</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">创建一个后构建脚本 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;manufacturer&gt;/&lt;boardname&gt;/post_build.sh</code> 。将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_POST_BUILD_SCRIPT</code> 设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;manufacturer&gt;/&lt;boardname&gt;/post_build.sh</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
If additional setuid permissions have to be set or device nodes have
   to be created, create <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;manufacturer&gt;/&lt;boardname&gt;/device_table.txt</code>
   and add that path to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_DEVICE_TABLE</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果需要设置额外的 setuid 权限或创建设备节点，请创建 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;manufacturer&gt;/&lt;boardname&gt;/device_table.txt</code> 并将该路径添加到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_DEVICE_TABLE</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
If additional user accounts have to be created, create
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;manufacturer&gt;/&lt;boardname&gt;/users_table.txt</code> and add that path
   to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_USERS_TABLES</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果需要创建额外的用户帐户，请创建 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;manufacturer&gt;/&lt;boardname&gt;/users_table.txt</code> 并将该路径添加到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_USERS_TABLES</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
To add custom patches to certain packages, set <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code>
   to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;manufacturer&gt;/&lt;boardname&gt;/patches/</code> and add your patches
   for each package in a subdirectory named after the package. Each
   patch should be called <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;-&lt;num&gt;-&lt;description&gt;.patch</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要向某些软件包添加自定义补丁，请将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> 设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;manufacturer&gt;/&lt;boardname&gt;/patches/</code> ，并为每个软件包添加一个以软件包命名的子目录中的补丁。每个补丁应命名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;-&lt;num&gt;-&lt;description&gt;.patch</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Specifically for the Linux kernel, there also exists the option
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_PATCH</code> with as main advantage that it can also
   download patches from a URL. If you do not need this,
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> is preferred. U-Boot, Barebox, at91bootstrap
   and at91bootstrap3 also have separate options, but these do not
   provide any advantage over <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> and will likely be
   removed in the future.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">特别针对 Linux 内核，还存在选项 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_PATCH</code> ，其主要优势是还可以从 URL 下载补丁。如果您不需要此功能，则更推荐 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> 。U-Boot、Barebox、at91bootstrap 和 at91bootstrap3 也有单独的选项，但这些选项与 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> 没有任何优势，并且可能会在将来被移除。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
If you need to add project-specific packages, create
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/&lt;manufacturer&gt;/</code> and place your packages in that
   directory. Create an overall <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;manufacturer&gt;.mk</code> file that
   includes the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> files of all your packages. Create an overall
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> file that sources the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> files of all your
   packages. Include this <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> file from Buildroot’s
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/Config.in</code> file.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您需要添加特定于项目的软件包，请创建 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/&lt;manufacturer&gt;/</code> 并将软件包放入该目录。创建一个总体 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;manufacturer&gt;.mk</code> 文件，其中包含所有软件包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件。创建一个总体 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件，其中包含所有软件包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件。从 Buildroot 的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/Config.in</code> 文件中包含此 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make savedefconfig</code> to save the buildroot configuration.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make savedefconfig</code> 保存 buildroot 配置。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cp defconfig configs/&lt;boardname&gt;_defconfig</code>
</li></ol></div></div></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="integration" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;10.&nbsp;Integration topics<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 10 章 集成主题</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This chapter discusses how various things are integrated at system
level. Buildroot is highly configurable, almost everything discussed
here can be changed or overridden by <a class="link" href="#rootfs-custom" title="9.5.&nbsp;Customizing the generated target filesystem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rootfs overlay
or custom skeleton</a> configuration.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">本章讨论了系统级别如何集成各种事物。Buildroot 是高度可配置的，几乎这里讨论的所有内容都可以通过 rootfs 叠加或自定义骨架配置进行更改或覆盖。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="integration-systemd" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>10.1.&nbsp;Systemd</h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This chapter describes the decisions taken in Buildroot’s integration of
systemd, and how various use cases can be implemented.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">本章描述了 Buildroot 集成 systemd 所做的决定，以及如何实现各种用例。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_dbus_daemon" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>10.1.1.&nbsp;DBus daemon<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">10.1.1.&nbsp;DBus 守护程序</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Systemd requires a DBus daemon. There are two options for it: traditional dbus
(<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_DBUS</code>) and bus1 dbus-broker (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_DBUS_BROKER</code>). At
least one of them must be chosen. If both are included in the configuration,
dbus-broker will be used as system bus, but the traditional dbus-daemon is
still installed as well and can be used as session bus. Also its tools (e.g.
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dbus-send</code>) can be used (systemd itself has <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">busctl</code> as an alternative). In
addition, the traditional dbus package is the only one that provides <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libdbus</code>,
which is used by many packages as dbus integration library.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Systemd 需要一个 DBus 守护程序。有两个选项可供选择：传统的 dbus（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_DBUS</code> ）和 bus1 dbus-broker（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_DBUS_BROKER</code> ）。必须选择其中至少一个。如果两者都包含在配置中，dbus-broker 将被用作系统总线，但传统的 dbus-daemon 仍然安装，并且可以用作会话总线。此外，它的工具（例如 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dbus-send</code> ）可以使用（systemd 本身有 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">busctl</code> 作为替代）。此外，传统的 dbus 软件包是唯一提供 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libdbus</code> 的软件包，许多软件包使用它作为 dbus 集成库。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Both in the dbus and in the dbus-broker case, the daemon runs as user <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dbus</code>.
The DBus configuration files are also identical for both.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">无论是 dbus 还是 dbus-broker 情况下，守护程序都以用户 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dbus</code> 身份运行。两者的 DBus 配置文件也是相同的。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To make sure that only one of the two daemons is started as system bus, the
systemd activation files of the dbus package (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dbus.socket</code> and the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dbus.service</code> symlink in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">multi-user.target.wants</code>) are removed when
dbus-broker is selected.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为了确保只有其中一个守护程序作为系统总线启动，当选择 dbus-broker 时，dbus 软件包的 systemd 激活文件（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dbus.socket</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">multi-user.target.wants</code> 中的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dbus.service</code> 符号链接）将被删除。</font></font></font></p></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="selinux" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>10.2.&nbsp;Using SELinux in Buildroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">10.2. 在 Buildroot 中使用 SELinux</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a class="ulink" href="https://selinuxproject.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SELinux</a> is a Linux kernel security module
enforcing access control policies. In addition to the traditional file
permissions and access control lists, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SELinux</code> allows to write rules
for users or processes to access specific functions of resources
(files, sockets…).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">SELinux 是一个 Linux 内核安全模块，强制执行访问控制策略。除了传统的文件权限和访问控制列表外， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SELinux</code> 允许编写规则，以便用户或进程访问特定资源的功能（文件，套接字...）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SELinux</em></span> has three modes of operation:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">SELinux 有三种操作模式：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Disabled</em></span>: the policy is not applied
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">禁用：策略未应用</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Permissive</em></span>: the policy is applied, and non-authorized actions are
  simply logged. This mode is often used for troubleshooting SELinux
  issues.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">宽松：策略已应用，并且未授权的操作仅被记录。此模式通常用于排除 SELinux 问题。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Enforcing</em></span>: the policy is applied, and non-authorized actions are
  denied
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">强制：策略已应用，并且未授权的操作被拒绝。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In Buildroot the mode of operation is controlled by the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_REFPOLICY_POLICY_STATE_*</code> configuration options. The
Linux kernel also has various configuration options that affect how
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SELinux</code> is enabled (see <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">security/selinux/Kconfig</code> in the Linux
kernel sources).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 Buildroot 中，操作模式由 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_REFPOLICY_POLICY_STATE_*</code> 配置选项控制。Linux 内核也有各种配置选项，影响 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SELinux</code> 如何启用（请参见 Linux 内核源代码中的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">security/selinux/Kconfig</code> ）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">By default in Buildroot the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SELinux</code> policy is provided by the
upstream <a class="ulink" href="https://github.com/SELinuxProject/refpolicy" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">refpolicy</a>
project, enabled with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_REFPOLICY</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 Buildroot 中，默认情况下， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SELinux</code> 策略由上游 refpolicy 项目提供，并使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_REFPOLICY</code> 启用。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="enabling-selinux" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>10.2.1.&nbsp;Enabling SELinux support<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">10.2.1. 启用 SELinux 支持</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To have proper support for <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SELinux</code> in a Buildroot generated system,
the following configuration options must be enabled:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 Buildroot 生成的系统中正确支持 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SELinux</code> ，必须启用以下配置选项：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_LIBSELINUX</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_REFPOLICY</code>
</li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In addition, your filesystem image format must support extended
attributes.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">另外，您的文件系统镜像格式必须支持扩展属性。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="selinux-policy-tweaking" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>10.2.2.&nbsp;SELinux policy tweaking<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">10.2.2. SELinux 策略调整</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SELinux refpolicy</code> contains modules that can be enabled or
disabled when being built. Each module provide a number of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SELinux</code>
rules. In Buildroot the non-base modules are disabled by default and
several ways to enable such modules are provided:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SELinux refpolicy</code> 包含可以在构建时启用或禁用的模块。每个模块提供一些 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SELinux</code> 规则。在 Buildroot 中，默认情况下禁用非基本模块，并提供了几种启用这些模块的方法：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Packages can enable a list of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SELinux</code> modules within the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">refpolicy</code> using
  the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;_SELINUX_MODULES</code> variable.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">包可以使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;_SELINUX_MODULES</code> 变量在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">refpolicy</code> 中启用一系列 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SELinux</code> 模块。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Packages can provide additional <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SELinux</code> modules by putting them (.fc, .if
  and .te files) in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/&lt;packagename&gt;/selinux/</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">包可以通过将它们（.fc、.if 和 .te 文件）放在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/&lt;packagename&gt;/selinux/</code> 中来提供额外的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SELinux</code> 模块。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Extra <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SELinux</code> modules can be added in directories pointed by the
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_REFPOLICY_EXTRA_MODULES_DIRS</code> configuration option.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">可以在由 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_REFPOLICY_EXTRA_MODULES_DIRS</code> 配置选项指向的目录中添加额外的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SELinux</code> 模块。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Additional modules in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">refpolicy</code> can be enabled if listed in the
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_REFPOLICY_EXTRA_MODULES_DEPENDENCIES</code> configuration option.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_REFPOLICY_EXTRA_MODULES_DEPENDENCIES</code> 配置选项中列出，可以启用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">refpolicy</code> 中的附加模块。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot also allows to completely override the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">refpolicy</code>. This
allows to provide a full custom policy designed specifically for a
given system. When going this way, all of the above mechanisms are
disabled: no extra <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SElinux</code> module is added to the policy, and all
the available modules within the custom policy are enabled and built
into the final binary policy. The custom policy must be a fork of the
official <a class="ulink" href="https://github.com/SELinuxProject/refpolicy" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">refpolicy</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 还允许完全覆盖 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">refpolicy</code> 。这允许提供一个专门为特定系统设计的完整自定义策略。选择这种方式时，所有上述机制都被禁用：不会向策略添加额外的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SElinux</code> 模块，并且自定义策略中的所有可用模块都会被启用并构建到最终的二进制策略中。自定义策略必须是官方 refpolicy 的分支。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In order to fully override the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">refpolicy</code> the following configuration
variables have to be set:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为了完全覆盖 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">refpolicy</code> ，必须设置以下配置变量：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_REFPOLICY_CUSTOM_GIT</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_REFPOLICY_CUSTOM_REPO_URL</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_REFPOLICY_CUSTOM_REPO_VERSION</code>
</li></ul></div></div></div></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_frequently_asked_questions_amp_troubleshooting" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;11.&nbsp;Frequently Asked Questions &amp; Troubleshooting<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 11 章。常见问题和故障排除</font></font></font></h2></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="faq-boot-hang-after-starting" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>11.1.&nbsp;The boot hangs after <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Starting network…</em></span><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">11.1. 启动网络后卡住</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If the boot process seems to hang after the following messages
(messages not necessarily exactly similar, depending on the list of
packages selected):<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果引导过程在以下消息后似乎挂起（消息可能不完全相似，取决于所选软件包列表）：</font></font></font></p><pre class="screen">Freeing init memory: 3972K
Initializing random number generator... done.
Starting network...
Starting dropbear sshd: generating rsa key... generating dsa key... OK</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">then it means that your system is running, but didn’t start a shell on
the serial console. In order to have the system start a shell on your
serial console, you have to go into the Buildroot configuration, in
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">System configuration</code>, modify <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Run a getty (login prompt) after boot</code>
and set the appropriate port and baud rate in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">getty options</code>
submenu. This will automatically tune the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/etc/inittab</code> file of the
generated system so that a shell starts on the correct serial port.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这意味着您的系统正在运行，但未在串行控制台上启动 shell。为了让系统在串行控制台上启动 shell，您必须进入 Buildroot 配置，在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">System configuration</code> 中修改 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Run a getty (login prompt) after boot</code> 并在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">getty options</code> 子菜单中设置适当的端口和波特率。这将自动调整生成系统的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/etc/inittab</code> 文件，以便在正确的串行端口上启动 shell。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="faq-no-compiler-on-target" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>11.2.&nbsp;Why is there no compiler on the target?<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">11.2. 为什么目标设备上没有编译器？</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">It has been decided that support for the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">native compiler on the
target</em></span> would be stopped from the Buildroot-2012.11 release because:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">决定从 Buildroot-2012.11 版本开始停止对目标设备上本地编译器的支持。原因是：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
this feature was neither maintained nor tested, and often broken;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此功能既未维护也未经过测试，经常出现故障；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
this feature was only available for Buildroot toolchains;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此功能仅适用于 Buildroot 工具链；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Buildroot mostly targets <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">small</em></span> or <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">very small</em></span> target hardware
  with limited resource onboard (CPU, ram, mass-storage), for which
  compiling on the target does not make much sense;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 主要针对具有有限资源（CPU、内存、大容量存储）的小型或超小型目标硬件，因此在目标硬件上编译并不太合适；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Buildroot aims at easing the cross-compilation, making native
  compilation on the target unnecessary.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 旨在简化交叉编译，使目标上的本地编译变得不必要。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you need a compiler on your target anyway, then Buildroot is not
suitable for your purpose. In such case, you need a <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">real
distribution</em></span> and you should opt for something like:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您无论如何需要在目标上使用编译器，则 Buildroot 不适合您的目的。在这种情况下，您需要一个真正的发行版，您应该选择类似于：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<a class="ulink" href="http://www.openembedded.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">openembedded</a>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<a class="ulink" href="https://www.yoctoproject.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">yocto</a>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<a class="ulink" href="https://www.debian.org/ports/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Debian</a>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<a class="ulink" href="https://fedoraproject.org/wiki/Architectures" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Fedora</a>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<a class="ulink" href="http://en.opensuse.org/Portal:ARM" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">openSUSE ARM</a>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<a class="ulink" href="http://archlinuxarm.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Arch Linux ARM</a>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
…
</li></ul></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="faq-no-dev-files-on-target" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>11.3.&nbsp;Why are there no development files on the target?<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">11.3. 为什么目标设备上没有开发文件？</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Since there is no compiler available on the target (see
<a class="xref" href="#faq-no-compiler-on-target" title="11.2.&nbsp;Why is there no compiler on the target?" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;11.2, “Why is there no compiler on the target?”</a>), it does not make sense to waste
space with headers or static libraries.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">由于目标设备上没有编译器可用（请参见第 11.2 节“为什么目标设备上没有编译器？”），因此在头文件或静态库上浪费空间是没有意义的。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Therefore, those files are always removed from the target since the
Buildroot-2012.11 release.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">因此，自 Buildroot-2012.11 版本发布以来，这些文件始终会从目标设备中删除。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="faq-no-doc-on-target" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>11.4.&nbsp;Why is there no documentation on the target?<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">11.4. 目标设备上为什么没有文档？</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Because Buildroot mostly targets <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">small</em></span> or <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">very small</em></span> target
hardware with limited resource onboard (CPU, ram, mass-storage), it
does not make sense to waste space with the documentation data.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">因为 Buildroot 主要针对具有有限资源（CPU、内存、大容量存储）的小型或非常小型目标硬件，因此在文档数据中浪费空间是没有意义的。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you need documentation data on your target anyway, then Buildroot
is not suitable for your purpose, and you should look for a <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">real
distribution</em></span> (see: <a class="xref" href="#faq-no-compiler-on-target" title="11.2.&nbsp;Why is there no compiler on the target?" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;11.2, “Why is there no compiler on the target?”</a>).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您无论如何需要目标上的文档数据，则 Buildroot 不适合您的目的，您应该寻找一个真正的发行版（参见：第 11.2 节，“为什么目标上没有编译器？”）。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="faq-why-not-visible-package" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>11.5.&nbsp;Why are some packages not visible in the Buildroot config menu?<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">11.5. 为什么在 Buildroot 配置菜单中有些软件包不可见？</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If a package exists in the Buildroot tree and does not appear in the
config menu, this most likely means that some of the package’s
dependencies are not met.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果在 Buildroot 树中存在一个软件包，但在配置菜单中找不到它，这很可能意味着一些软件包的依赖关系没有满足。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To know more about the dependencies of a package, search for the
package symbol in the config menu (see <a class="xref" href="#make-tips" title="8.1.&nbsp;make tips" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;8.1, “<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</em></span> tips”</a>).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要了解软件包的依赖关系，请在配置菜单中搜索软件包符号（参见第 8.1 节“make tips”）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Then, you may have to recursively enable several options (which
correspond to the unmet dependencies) to finally be able to select
the package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后，您可能需要递归启用几个选项（对应于未满足的依赖关系），最终才能选择该软件包。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If the package is not visible due to some unmet toolchain options,
then you should certainly run a full rebuild (see <a class="xref" href="#make-tips" title="8.1.&nbsp;make tips" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;8.1, “<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</em></span> tips”</a> for
more explanations).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果由于某些未满足的工具链选项而导致软件包不可见，则您应该确保进行完整重建（有关更多解释，请参见第 8.1 节“make tips”）。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="faq-why-not-use-target-as-chroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>11.6.&nbsp;Why not use the target directory as a chroot directory?<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">11.6. 为什么不将目标目录用作 chroot 目录？</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">There are plenty of reasons to <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">not</strong></span> use the target directory a chroot
one, among these:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有很多理由不将目标目录用作 chroot 目录之一，其中包括：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
file ownerships, modes and permissions are not correctly set in the
  target directory;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">目标目录中的文件所有权、模式和权限设置不正确；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
device nodes are not created in the target directory.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">目标目录中未创建设备节点。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For these reasons, commands run through chroot, using the target
directory as the new root, will most likely fail.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">出于这些原因，通过 chroot 在目标目录上运行的命令很可能会失败。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you want to run the target filesystem inside a chroot, or as an NFS
root, then use the tarball image generated in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">images/</code> and extract it
as root.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您想在 chroot 内运行目标文件系统，或者作为 NFS 根目录，则使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">images/</code> 生成的 tarball 映像，并将其提取为 root。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="faq-no-binary-packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>11.7.&nbsp;Why doesn’t Buildroot generate binary packages (.deb, .ipkg…)?<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">11.7. 为什么 Buildroot 不生成二进制软件包（.deb，.ipkg…）？</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">One feature that is often discussed on the Buildroot list is the
general topic of "package management". To summarize, the idea
would be to add some tracking of which Buildroot package installs
what files, with the goals of:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 Buildroot 列表中经常讨论的一个功能是“软件包管理”的一般主题。 总结一下，想法是添加一些跟踪哪个 Buildroot 软件包安装了哪些文件，目标是：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
being able to remove files installed by a package when this package
   gets unselected from the menuconfig;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当从 menuconfig 中取消选择软件包时，能够删除软件包安装的文件；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
being able to generate binary packages (ipk or other format) that
   can be installed on the target without re-generating a new root
   filesystem image.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">能够生成二进制软件包（ipk 或其他格式），可以在目标设备上安装，而无需重新生成新的根文件系统镜像。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In general, most people think it is easy to do: just track which package
installed what and remove it when the package is unselected. However, it
is much more complicated than that:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一般来说，大多数人认为这很容易实现：只需跟踪哪个软件包安装了什么，并在取消选择软件包时将其删除。然而，事实要比这复杂得多：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
It is not only about the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">target/</code> directory, but also the sysroot in
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host/&lt;tuple&gt;/sysroot</code> and the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host/</code> directory itself. All files
   installed in those directories by various packages must be tracked.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">不仅仅是关于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">target/</code> 目录，还有 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host/&lt;tuple&gt;/sysroot</code> 中的 sysroot 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host/</code> 目录本身。各种软件包在这些目录中安装的所有文件都必须被跟踪。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
When a package is unselected from the configuration, it is not
   sufficient to remove just the files it installed. One must also
   remove all its reverse dependencies (i.e. packages relying on it)
   and rebuild all those packages. For example, package A depends
   optionally on the OpenSSL library. Both are selected, and Buildroot
   is built. Package A is built with crypto support using OpenSSL.
   Later on, OpenSSL gets unselected from the configuration, but
   package A remains (since OpenSSL is an optional dependency, this
   is possible.) If only OpenSSL files are removed, then the files
   installed by package A are broken: they use a library that is no
   longer present on the target. Although this is technically doable,
   it adds a lot of complexity to Buildroot, which goes against the
   simplicity we try to stick to.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当
从配置中取消选择软件包时，仅删除其安装的文件是不够的。还必须删除所有依赖于它的逆向依赖项（即依赖于它的软件包）并重新构建所有这些软件包。例如，软
件包 A 可选择依赖于 OpenSSL 库。两者都被选择，并构建了 Buildroot。软件包 A 使用 OpenSSL 
构建了加密支持。后来，OpenSSL 从配置中取消选择，但软件包 A 仍然存在（因为 OpenSSL 是一个可选依赖项，这是可能的）。如果仅删除
 OpenSSL 文件，则软件包 A 安装的文件将损坏：它们使用一个在目标上不再存在的库。尽管从技术上讲这是可行的，但它给 Buildroot 
增加了很多复杂性，这与我们试图坚持的简单原则相悖。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
In addition to the previous problem, there is the case where the
   optional dependency is not even known to Buildroot. For example,
   package A in version 1.0 never used OpenSSL, but in version 2.0 it
   automatically uses OpenSSL if available. If the Buildroot .mk file
   hasn’t been updated to take this into account, then package A will
   not be part of the reverse dependencies of OpenSSL and will not be
   removed and rebuilt when OpenSSL is removed. For sure, the .mk file
   of package A should be fixed to mention this optional dependency,
   but in the mean time, you can have non-reproducible behaviors.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">除
了之前的问题之外，还有一种情况，即可选依赖项甚至对 Buildroot 都不知道。例如，版本 1.0 中的软件包 A 从未使用 
OpenSSL，但在版本 2.0 中，如果可用，它会自动使用 OpenSSL。如果 Buildroot 的.mk 
文件没有更新以考虑这一点，那么软件包 A 将不会成为 OpenSSL 的反向依赖项的一部分，并且在删除 OpenSSL 
时不会被删除和重建。当然，软件包 A 的.mk 文件应该修复以提及这个可选依赖项，但与此同时，可能会出现不可重现的行为。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The request is to also allow changes in the menuconfig to be
   applied on the output directory without having to rebuild
   everything from scratch. However, this is very difficult to achieve
   in a reliable way: what happens when the suboptions of a package
   are changed (we would have to detect this, and rebuild the package
   from scratch and potentially all its reverse dependencies), what
   happens if toolchain options are changed, etc. At the moment, what
   Buildroot does is clear and simple so its behaviour is very
   reliable and it is easy to support users. If configuration changes
   done in menuconfig are applied after the next make, then it has to
   work correctly and properly in all situations, and not have some
   bizarre corner cases. The risk is to get bug reports like "I have
   enabled package A, B and C, then ran make, then disabled package
   C and enabled package D and ran make, then re-enabled package C
   and enabled package E and then there is a build failure". Or worse
   "I did some configuration, then built, then did some changes,
   built, some more changes, built, some more changes, built, and now
   it fails, but I don’t remember all the changes I did and in which
   order". This will be impossible to support.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">
 请求也允许在 menuconfig 
中的更改应用于输出目录，而无需从头开始重建一切。然而，以可靠的方式实现这一点非常困难：当更改软件包的子选项时会发生什么（我们必须检测到这一点，并
从头开始重建软件包及其所有反向依赖项），当更改工具链选项时会发生什么等等。目前，Buildroot 
的做法是清晰简单的，因此其行为非常可靠且易于支持用户。如果在 menuconfig 中进行的配置更改在下一次 make 
之后应用，那么它必须在所有情况下都能正确且正常工作，而不会出现一些奇怪的边缘情况。风险在于收到类似“我已启用软件包 A、B 和 C，然后运行 
make，然后禁用软件包 C 并启用软件包 D 并运行 make，然后重新启用软件包 C 并启用软件包 
E，然后出现构建失败”的错误报告。或者更糟糕的是“我进行了一些配置，然后构建，然后进行了一些更改，构建，再进行了一些更改，构建，再进行了一些更
改，构建，现在失败了，但我不记得我做了所有的更改以及顺序”。 这将是不可能支持的。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For all these reasons, the conclusion is that adding tracking of
installed files to remove them when the package is unselected, or to
generate a repository of binary packages, is something that is very
hard to achieve reliably and will add a lot of complexity.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">出于所有这些原因，结论是，添加对已安装文件的跟踪以在取消选择软件包时删除它们，或生成二进制软件包存储库，是一项非常难以可靠实现并将增加大量复杂性的工作。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On this matter, the Buildroot developers make this position statement:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在这个问题上，Buildroot 开发人员发表了这一立场声明：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Buildroot strives to make it easy to generate a root filesystem (hence
   the name, by the way.) That is what we want to make Buildroot good at:
   building root filesystems.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 致力于使生成根文件系统变得简单（顺便说一句，这就是我们想要让 Buildroot 擅长的：构建根文件系统。）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Buildroot is not meant to be a distribution (or rather, a distribution
   generator.) It is the opinion of most Buildroot developers that this
   is not a goal we should pursue. We believe that there are other tools
   better suited to generate a distro than Buildroot is. For example,
   <a class="ulink" href="http://openembedded.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Open Embedded</a>, or <a class="ulink" href="https://openwrt.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">openWRT</a>,
   are such tools.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot
 并不打算成为一个发行版（或者说，一个发行版生成器）。大多数 Buildroot 
开发人员认为这不是我们应该追求的目标。我们认为有其他工具更适合生成发行版，而不是 Buildroot。例如，Open Embedded 或 
openWRT 就是这样的工具。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
We prefer to push Buildroot in a direction that makes it easy (or even
   easier) to generate complete root filesystems. This is what makes
   Buildroot stands out in the crowd (among other things, of course!)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">我们更倾向于推动 Buildroot 朝着使生成完整根文件系统变得简单（甚至更简单）的方向发展。这正是使 Buildroot 在众多工具中脱颖而出的原因之一（当然还有其他原因！）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
We believe that for most embedded Linux systems, binary packages are
   not necessary, and potentially harmful. When binary packages are
   used, it means that the system can be partially upgraded, which
   creates an enormous number of possible combinations of package
   versions that should be tested before doing the upgrade on the
   embedded device. On the other hand, by doing complete system
   upgrades by upgrading the entire root filesystem image at once,
   the image deployed to the embedded system is guaranteed to really
   be the one that has been tested and validated.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">我
们认为对于大多数嵌入式 Linux 
系统来说，二进制软件包是不必要的，而且可能有害。当使用二进制软件包时，意味着系统可以部分升级，这会产生大量可能的软件包版本组合，应在对嵌入式设备
进行升级之前进行测试。另一方面，通过一次性升级整个根文件系统映像来完成完整的系统升级，可以确保部署到嵌入式系统的映像确实是经过测试和验证的映像。</font></font></font></li></ul></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="faq-speeding-up-build" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>11.8.&nbsp;How to speed-up the build process?<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">11.8. 如何加快构建过程？</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Since Buildroot often involves doing full rebuilds of the entire
system that can be quite long, we provide below a number of tips to
help reduce the build time:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">由于 Buildroot 经常涉及对整个系统进行完全重建，这可能需要相当长的时间，因此我们在下面提供了一些提示，以帮助减少构建时间：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Use a pre-built external toolchain instead of the default Buildroot
   internal toolchain. By using a pre-built Linaro toolchain (on ARM)
   or a Sourcery CodeBench toolchain (for ARM, x86, x86-64, MIPS,
   etc.), you will save the build time of the toolchain at each
   complete rebuild, approximately 15 to 20 minutes. Note that
   temporarily using an external toolchain does not prevent you to
   switch back to an internal toolchain (that may provide a higher
   level of customization) once the rest of your system is working;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使
用预构建的外部工具链，而不是默认的 Buildroot 内部工具链。通过使用预构建的 Linaro 工具链（用于 ARM）或 Sourcery 
CodeBench 工具链（用于 ARM、x86、x86-64、MIPS 等），您将在每次完全重建时节省工具链的构建时间，大约 15 到 20 
分钟。请注意，暂时使用外部工具链并不妨碍您切换回内部工具链（可能提供更高级别的定制），一旦您的系统的其余部分正常工作；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Use the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</code> compiler cache (see: <a class="xref" href="#ccache" title="8.13.3.&nbsp;Using ccache in Buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;8.13.3, “Using <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</code> in Buildroot”</a>);
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</code> 编译器缓存（参见：第 8.13.3 节，“在 Buildroot 中使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ccache</code> ”）；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Learn about rebuilding only the few packages you actually care
   about (see <a class="xref" href="#rebuild-pkg" title="8.3.&nbsp;Understanding how to rebuild packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;8.3, “Understanding how to rebuild packages”</a>), but beware that sometimes full
   rebuilds are anyway necessary (see <a class="xref" href="#full-rebuild" title="8.2.&nbsp;Understanding when a full rebuild is necessary" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;8.2, “Understanding when a full rebuild is necessary”</a>);
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">了解仅重新构建您真正关心的少数软件包（请参阅第 8.3 节，“了解如何重新构建软件包”），但请注意有时仍然需要完全重建（请参阅第 8.2 节，“了解何时需要完全重建”）；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Make sure you are not using a virtual machine for the Linux system
   used to run Buildroot. Most of the virtual machine technologies are
   known to cause a significant performance impact on I/O, which is
   really important for building source code;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">确保您不是在用于运行 Buildroot 的 Linux 系统中使用虚拟机。大多数虚拟机技术已知会对 I/O 造成显著的性能影响，而这对于构建源代码非常重要；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Make sure that you’re using only local files: do not attempt to do
   a build over NFS, which significantly slows down the build. Having
   the Buildroot download folder available locally also helps a bit.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">确保您仅使用本地文件：不要尝试通过 NFS 进行构建，这会显著减慢构建速度。同时，将 Buildroot 下载文件夹放在本地也有所帮助。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Buy new hardware. SSDs and lots of RAM are key to speeding up the
   builds.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">购买新硬件。固态硬盘和大量内存是加快构建速度的关键。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Experiment with top-level parallel build, see
   <a class="xref" href="#top-level-parallel-build" title="8.12.&nbsp;Top-level parallel build" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;8.12, “Top-level parallel build”</a>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">尝试顶层并行构建，参见第 8.12 节“顶层并行构建”。</font></font></font></li></ul></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="faq-2038" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>11.9.&nbsp;How does Buildroot support Y2038?<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">11.9. Buildroot 如何支持 Y2038？</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">There are multiple situations to consider:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有多种情况需要考虑：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
On 64-bit architectures, there is no problem, as <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">time_t</code> has
   always been 64-bit.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 64 位架构上，没有问题，因为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">time_t</code> 一直是 64 位的。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
On 32-bit architectures, the situation depends on the C library:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 32 位架构上，情况取决于 C 库：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
With <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uclibc-ng</em></span>, there is no support for 64-bit <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">time_t</code> on
    32-bit architectures, so systems using <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uclibc-ng</em></span> on 32-bit
    platforms will not be Y2038 compatible.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 uclibc-ng 上，32 位架构上不支持 64 位 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">time_t</code> ，因此在 32 位平台上使用 uclibc-ng 的系统将不兼容 Y2038。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
With <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">musl</em></span>, 64-bit <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">time_t</code> has always been used on 32-bit
    architectures, so systems using <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">musl</em></span> on 32-bit platforms are
    Y2038 compatible.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 musl，32 位架构上一直使用 64 位 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">time_t</code> ，因此在 32 位平台上使用 musl 的系统是 Y2038 兼容的。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
With <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">glibc</em></span>, 64-bit <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">time_t</code> on 32-bit architectures is enabled
    by the Buildroot option <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TIME_BITS_64</code>. With this option
    enabled, systems using <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">glibc</em></span> on 32-bit platforms are Y2038
    compatible.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 glibc，在 32 位架构上启用 64 位 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">time_t</code> 是通过 Buildroot 选项 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TIME_BITS_64</code> 实现的。启用此选项后，使用 glibc 在 32 位平台上的系统是 Y2038 兼容的。</font></font></font></li></ul></div></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Note that the above only comments about the capabilities of the C
library. Individual user-space libraries or applications, even when
built in a Y2038-compatible setup, can exhibit incorrect behavior if
they do not make correct use of the time APIs and types.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，上述仅评论了 C 库的功能。即使在 Y2038 兼容的设置中构建，单独的用户空间库或应用程序如果未正确使用时间 API 和类型，则可能表现出不正确的行为。</font></font></font></p></div></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_known_issues" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;12.&nbsp;Known issues<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 12 章。已知问题</font></font></font></h2></div></div></div><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
It is not possible to pass extra linker options via <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TARGET_LDFLAGS</code>
  if such options contain a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$</code> sign. For example, the following is known
  to break: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TARGET_LDFLAGS="-Wl,-rpath='$ORIGIN/../lib'"</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果这些选项包含 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$</code> 符号，则无法通过 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TARGET_LDFLAGS</code> 传递额外的链接器选项。 例如，已知以下内容会中断： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TARGET_LDFLAGS="-Wl,-rpath='$ORIGIN/../lib'"</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libffi</code> package is not supported on the SuperH 2 and ARMv7-M
  architectures.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libffi</code> 软件包不支持 SuperH 2 和 ARMv7-M 架构。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">prboom</code> package triggers a compiler failure with the SuperH 4
  compiler from Sourcery CodeBench, version 2012.09.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">prboom</code> 软件包会导致 Sourcery CodeBench 2012.09 版本的 SuperH 4 编译器编译失败。</font></font></font></li></ul></div></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="legal-info" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;13.&nbsp;Legal notice and licensing<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 13 章 法律声明和许可</font></font></font></h2></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_complying_with_open_source_licenses" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>13.1.&nbsp;Complying with open source licenses<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">13.1 遵守开源许可证</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">All of the end products of Buildroot (toolchain, root filesystem, kernel,
bootloaders) contain open source software, released under various licenses.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 的所有最终产品（工具链、根文件系统、内核、引导加载程序）都包含在各种许可下发布的开源软件。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Using open source software gives you the freedom to build rich embedded
systems, choosing from a wide range of packages, but also imposes some
obligations that you must know and honour.
Some licenses require you to publish the license text in the documentation of
your product. Others require you to redistribute the source code of the
software to those that receive your product.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用开源软件使您能够构建丰富的嵌入式系统，可以从各种软件包中进行选择，但也会施加一些您必须了解和遵守的义务。一些许可证要求您在产品文档中发布许可证文本。其他许可证要求您向接收您产品的人重新分发软件的源代码。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The exact requirements of each license are documented in each package, and
it is your responsibility (or that of your legal office) to comply with those
requirements.
To make this easier for you, Buildroot can collect for you some material you
will probably need. To produce this material, after you have configured
Buildroot with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make menuconfig</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make xconfig</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make gconfig</code>, run:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">每个许可证的具体要求都记录在每个软件包中，您有责任（或您的法律部门有责任）遵守这些要求。为了让您更容易做到这一点，Buildroot 可以为您收集您可能需要的一些材料。要生成这些材料，请在使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make menuconfig</code> 、 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make xconfig</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make gconfig</code> 配置了 Buildroot 之后运行：</font></font></font></p><pre class="screen">make legal-info</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot will collect legally-relevant material in your output directory,
under the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">legal-info/</code> subdirectory.
There you will find:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 将在您的输出目录中的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">legal-info/</code> 子目录下收集与法律相关的材料。在那里您会找到：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
A <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">README</code> file, that summarizes the produced material and contains warnings
  about material that Buildroot could not produce.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">README</code> 文件，总结了生成的材料，并包含有关 Buildroot 无法生成的材料的警告。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">buildroot.config</code>: this is the Buildroot configuration file that is usually
  produced with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make menuconfig</code>, and which is necessary to reproduce the
  build.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">buildroot.config</code> ：这是通常与 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make menuconfig</code> 一起生成的 Buildroot 配置文件，是重现构建所必需的。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The source code for all packages; this is saved in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sources/</code> and
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-sources/</code> subdirectories for target and host packages respectively.
  The source code for packages that set <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;PKG&gt;_REDISTRIBUTE = NO</code> will not be
  saved.
  Patches that were applied are also saved, along with a file named <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">series</code>
  that lists the patches in the order they were applied. Patches are under the
  same license as the files that they modify.
  Note: Buildroot applies additional patches to Libtool scripts of
  autotools-based packages. These patches can be found under
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">support/libtool</code> in the Buildroot source and, due to technical
  limitations, are not saved with the package sources. You may need to
  collect them manually.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">所有软件包的源代码；这些保存在目标软件包和主机软件包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sources/</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-sources/</code> 子目录中。不保存设置了 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;PKG&gt;_REDISTRIBUTE = NO</code> 的软件包的源代码。还保存了应用的补丁，以及一个名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">series</code> 的文件，其中列出了按顺序应用的补丁。补丁的许可与它们修改的文件相同。注意：Buildroot 对基于 autotools 的软件包的 Libtool 脚本应用了额外的补丁。这些补丁可以在 Buildroot 源代码的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">support/libtool</code> 中找到，并且由于技术限制，不会与软件包源代码一起保存。您可能需要手动收集它们。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
A manifest file (one for host and one for target packages) listing the
  configured packages, their version, license and related information.
  Some of this information might not be defined in Buildroot; such items are
  marked as "unknown".
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一个清单文件（一个用于主机，一个用于目标软件包）列出了配置的软件包、它们的版本、许可证和相关信息。其中一些信息可能在 Buildroot 中未定义；这些项目标记为“未知”。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The license texts of all packages, in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">licenses/</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-licenses/</code>
  subdirectories for target and host packages respectively.
  If the license file(s) are not defined in Buildroot, the file is not produced
  and a warning in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">README</code> indicates this.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">所有软件包的许可证文本，分别位于目标软件包和主机软件包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">licenses/</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-licenses/</code> 子目录中。如果许可证文件未在 Buildroot 中定义，则不会生成该文件，并且 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">README</code> 中的警告会指示此情况。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Please note that the aim of the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">legal-info</code> feature of Buildroot is to
produce all the material that is somehow relevant for legal compliance with the
package licenses. Buildroot does not try to produce the exact material that
you must somehow make public. Certainly, more material is produced than is
needed for a strict legal compliance. For example, it produces the source code
for packages released under BSD-like licenses, that you are not required to
redistribute in source form.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，Buildroot 的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">legal-info</code> 功能的目的是生成所有与软件包许可证合规性相关的材料。Buildroot 不会尝试生成您必须公开的确切材料。当然，生成的材料比严格的法律合规性所需的要多。例如，它会生成以类似 BSD 许可证发布的软件包的源代码，而您并非必须以源代码形式重新分发。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Moreover, due to technical limitations, Buildroot does not produce some
material that you will or may need, such as the toolchain source code for
some of the external toolchains and the Buildroot source code itself.
When you run <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make legal-info</code>, Buildroot produces warnings in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">README</code>
file to inform you of relevant material that could not be saved.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此外，由于技术限制，Buildroot 不会生成您将需要或可能需要的一些材料，例如某些外部工具链的工具链源代码以及 Buildroot 源代码本身。当您运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make legal-info</code> 时，Buildroot 会在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">README</code> 文件中生成警告，通知您无法保存的相关材料。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Finally, keep in mind that the output of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make legal-info</code> is based on
declarative statements in each of the packages recipes. The Buildroot
developers try to do their best to keep those declarative statements as
accurate as possible, to the best of their knowledge. However, it is very
well possible that those declarative statements are not all fully accurate
nor exhaustive. You (or your legal department) <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">have</em></span> to check the output
of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make legal-info</code> before using it as your own compliance delivery. See
the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO WARRANTY</em></span> clauses (clauses 11 and 12) in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">COPYING</code> file at the
root of the Buildroot distribution.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">最后，请记住， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make legal-info</code> 的输出是基于每个软件包配方中的声明性语句。Buildroot 开发人员尽力使这些声明性语句尽可能准确，尽其所知。然而，这些声明性语句可能并非全部完全准确或详尽。在将其用作您自己的合规交付之前，您（或您的法律部门）必须检查 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make legal-info</code> 的输出。请参阅 Buildroot 发行版根目录下的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">COPYING</code> 文件中的无担保条款（第 11 和 12 条款）。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="legal-info-buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>13.2.&nbsp;Complying with the Buildroot license<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">13.2. 遵守 Buildroot 许可证</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot itself is an open source software, released under the
<a class="ulink" href="http://www.gnu.org/licenses/old-licenses/gpl-2.0.html" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">GNU General
Public License, version 2</a> or (at your option) any later version, with
the exception of the package patches detailed below.
However, being a build system, it is not normally part of the end product:
if you develop the root filesystem, kernel, bootloader or toolchain for a
device, the code of Buildroot is only present on the development machine, not
in the device storage.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot
 本身是一款开源软件，根据 GNU 通用公共许可证第 2 
版或（根据您的选择）任何更新版本发布，除了下面详细说明的软件包补丁。然而，作为构建系统，它通常不是最终产品的一部分：如果您为设备开发根文件系统、
内核、引导加载程序或工具链，则 Buildroot 的代码仅存在于开发机器上，而不在设备存储中。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Nevertheless, the general view of the Buildroot developers is that you should
release the Buildroot source code along with the source code of other packages
when releasing a product that contains GPL-licensed software.
This is because the
<a class="ulink" href="http://www.gnu.org/licenses/old-licenses/gpl-2.0.html" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">GNU GPL</a>
defines the "<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">complete source code</em></span>" for an executable work as "<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">all the
source code for all modules it contains, plus any associated interface
definition files, plus the scripts used to control compilation and installation
of the executable</em></span>".
Buildroot is part of the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">scripts used to control compilation and
installation of the executable</em></span>, and as such it is considered part of the
material that must be redistributed.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然
而，Buildroot 开发人员的普遍观点是，在发布包含 GPL 许可软件的产品时，应该连同其他软件包的源代码一起发布 Buildroot 
源代码。这是因为 GNU GPL 
将可执行作品的“完整源代码”定义为“它包含的所有模块的所有源代码，以及任何相关的接口定义文件，以及用于控制可执行文件的编译和安装的脚本”。
Buildroot 是用于控制可执行文件的编译和安装的脚本的一部分，因此被视为必须重新分发的材料的一部分。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Keep in mind that this is only the Buildroot developers' opinion, and you
should consult your legal department or lawyer in case of any doubt.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请记住，这仅代表 Buildroot 开发人员的观点，如果有任何疑问，您应该咨询您的法律部门或律师。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_patches_to_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>13.2.1.&nbsp;Patches to packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">13.2.1. 软件包的补丁</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot also bundles patch files, which are applied to the sources
of the various packages. Those patches are not covered by the license
of Buildroot. Instead, they are covered by the license of the software
to which the patches are applied. When said software is available
under multiple licenses, the Buildroot patches are only provided under
the publicly accessible licenses.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 还捆绑了补丁文件，这些补丁文件会应用到各种软件包的源代码中。这些补丁不受 Buildroot 许可证的覆盖。相反，它们受到应用补丁的软件许可证的覆盖。当所述软件在多个许可证下可用时，Buildroot 补丁仅在公开可访问的许可证下提供。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">See <a class="xref" href="#patch-policy" title="Chapter&nbsp;19.&nbsp;Patching a package" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Chapter&nbsp;19, <em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Patching a package</em></a> for the technical details.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有关技术细节，请参阅第 19 章“打补丁”。</font></font></font></p></div></div></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_beyond_buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;14.&nbsp;Beyond Buildroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 14 章。超越 Buildroot</font></font></font></h2></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_boot_the_generated_images" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>14.1.&nbsp;Boot the generated images<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">14.1.&nbsp;启动生成的镜像</font></font></font></h2></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_nfs_boot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>14.1.1.&nbsp;NFS boot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">14.1.1.&nbsp;NFS 启动</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To achieve NFS-boot, enable <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">tar root filesystem</em></span> in the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Filesystem
images</em></span> menu.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要实现 NFS 启动，请在文件系统镜像菜单中启用 tar 根文件系统。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">After a complete build, just run the following commands to setup the
NFS-root directory:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在完成构建后，只需运行以下命令来设置 NFS 根目录：</font></font></font></p><pre class="screen">sudo tar -xavf /path/to/output_dir/rootfs.tar -C /path/to/nfs_root_dir</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Remember to add this path to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/etc/exports</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">记得将此路径添加到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/etc/exports</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Then, you can execute a NFS-boot from your target.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后，您可以从目标设备执行 NFS 引导。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_live_cd" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>14.1.2.&nbsp;Live CD</h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To build a live CD image, enable the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">iso image</em></span> option in the
<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Filesystem images</em></span> menu. Note that this option is only available on
the x86 and x86-64 architectures, and if you are building your kernel
with Buildroot.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要构建一个 Live CD 映像，请在文件系统映像菜单中启用 iso 映像选项。请注意，此选项仅适用于 x86 和 x86-64 架构，并且仅在使用 Buildroot 构建内核时才可用。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">You can build a live CD image with either IsoLinux, Grub or Grub 2 as
a bootloader, but only Isolinux supports making this image usable both
as a live CD and live USB (through the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Build hybrid image</em></span> option).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您可以使用 IsoLinux、Grub 或 Grub 2 作为引导加载程序构建 Live CD 映像，但只有 Isolinux 支持使此映像既可用作 Live CD 又可用作 Live USB（通过构建混合映像选项）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">You can test your live CD image using QEMU:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您可以使用 QEMU 测试您的 Live CD 映像：</font></font></font></p><pre class="screen">qemu-system-i386 -cdrom output/images/rootfs.iso9660</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Or use it as a hard-drive image if it is a hybrid ISO:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果是混合 ISO，则可以将其用作硬盘映像：</font></font></font></p><pre class="screen">qemu-system-i386 -hda output/images/rootfs.iso9660</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">It can be easily flashed to a USB drive with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dd</code>:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">它可以使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dd</code> 轻松刷写到 USB 驱动器中：</font></font></font></p><pre class="screen">dd if=output/images/rootfs.iso9660 of=/dev/sdb</pre></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_chroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>14.2.&nbsp;Chroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">14.2. Chroot</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you want to chroot in a generated image, then there are few thing
you should be aware of:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您想在生成的映像中进行 chroot，则有一些事情您应该注意：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
you should setup the new root from the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">tar root filesystem</em></span> image;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您应该从 tar 根文件系统映像设置新根；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
either the selected target architecture is compatible with your host
  machine, or you should use some <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">qemu-*</code> binary and correctly set it
  within the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">binfmt</code> properties to be able to run the binaries built
  for the target on your host machine;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要么所选的目标架构与您的主机兼容，要么您应该使用一些 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">qemu-*</code> 二进制文件，并在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">binfmt</code> 属性中正确设置它，以便能够在主机上运行为目标构建的二进制文件；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Buildroot does not currently provide <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-qemu</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">binfmt</code>
  correctly built and set for that kind of use.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 目前不提供为这种用途正确构建和设置的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-qemu</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">binfmt</code> 。</font></font></font></li></ul></div></div></div></div><div class="part" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h1 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_developer_guide" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Part&nbsp;III.&nbsp;Developer guide<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第三部分。开发人员指南</font></font></font></h1></div></div></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_how_buildroot_works" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;15.&nbsp;How Buildroot works<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 15 章。Buildroot 的工作原理</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">As mentioned above, Buildroot is basically a set of Makefiles that
download, configure, and compile software with the correct options. It
also includes patches for various software packages - mainly the ones
involved in the cross-compilation toolchain (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gcc</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">binutils</code> and
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uClibc</code>).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如上所述，Buildroot 基本上是一组 Makefile，用于下载、配置和编译具有正确选项的软件。它还包括各种软件包的补丁 - 主要是与交叉编译工具链（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gcc</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">binutils</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uClibc</code> ）有关的软件包。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">There is basically one Makefile per software package, and they are
named with the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> extension. Makefiles are split into many different
parts.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">每个软件包基本上都有一个 Makefile，并且它们的名称带有 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 扩展名。Makefile 被分成许多不同的部分。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">toolchain/</code> directory contains the Makefiles
  and associated files for all software related to the
  cross-compilation toolchain: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">binutils</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gcc</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gdb</code>,
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kernel-headers</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uClibc</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">" <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">toolchain/</code> " 目录包含了与交叉编译工具链相关的所有软件的 Makefiles 和相关文件： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">binutils</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gcc</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gdb</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kernel-headers</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uClibc</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">arch/</code> directory contains the definitions for all the processor
  architectures that are supported by Buildroot.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">" <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">arch/</code> " 目录包含了 Buildroot 支持的所有处理器架构的定义。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/</code> directory contains the Makefiles and
  associated files for all user-space tools and libraries that Buildroot
  can compile and add to the target root filesystem. There is one
  sub-directory per package.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">" <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/</code> " 目录包含了 Buildroot 可以编译并添加到目标根文件系统中的所有用户空间工具和库的 Makefiles 和相关文件。每个软件包都有一个子目录。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux/</code> directory contains the Makefiles and associated files for
  the Linux kernel.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">" <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux/</code> " 目录包含 Linux 内核的 Makefiles 和相关文件。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">boot/</code> directory contains the Makefiles and associated files for
  the bootloaders supported by Buildroot.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">" <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">boot/</code> " 目录包含 Buildroot 支持的引导加载程序的 Makefiles 和相关文件。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">system/</code> directory contains support for system integration, e.g.
  the target filesystem skeleton and the selection of an init system.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">" <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">system/</code> " 目录包含系统集成支持，例如目标文件系统骨架和初始化系统的选择。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">fs/</code> directory contains the Makefiles and
  associated files for software related to the generation of the
  target root filesystem image.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">" <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">fs/</code> " 目录包含了与生成目标根文件系统镜像相关的软件的 Makefiles 和相关文件。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Each directory contains at least 2 files:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">每个目录至少包含 2 个文件：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">something.mk</code> is the Makefile that downloads, configures,
  compiles and installs the package <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">something</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">" <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">something.mk</code> " 是下载、配置、编译和安装软件包 " <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">something</code> " 的 Makefile。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> is a part of the configuration tool
  description file. It describes the options related to the
  package.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 是配置工具描述文件的一部分。它描述与软件包相关的选项。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The main Makefile performs the following steps (once the
configuration is done):<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">主 Makefile 在配置完成后执行以下步骤：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Create all the output directories: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">staging</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">target</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">build</code>,
  etc. in the output directory (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/</code> by default,
  another value can be specified using <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">O=</code>)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在输出目录中创建所有输出目录： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">staging</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">target</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">build</code> 等（默认为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/</code> ，也可以使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">O=</code> 指定另一个值）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Generate the toolchain target. When an internal toolchain is used, this
  means generating the cross-compilation toolchain. When an external
  toolchain is used, this means checking the features of the external
  toolchain and importing it into the Buildroot environment.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">生成工具链目标。当使用内部工具链时，这意味着生成交叉编译工具链。当使用外部工具链时，这意味着检查外部工具链的特性并将其导入到 Buildroot 环境中。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Generate all the targets listed in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TARGETS</code> variable. This
  variable is filled by all the individual components'
  Makefiles. Generating these targets will trigger the compilation of
  the userspace packages (libraries, programs), the kernel, the
  bootloader and the generation of the root filesystem images,
  depending on the configuration.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">生成 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TARGETS</code> 变量中列出的所有目标。此变量由所有单独组件的 Makefile 填充。生成这些目标将触发用户空间软件包（库、程序）、内核、引导加载程序的编译以及根文件系统映像的生成，具体取决于配置。</font></font></font></li></ul></div></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_coding_style" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;16.&nbsp;Coding style<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 16 章。编码风格</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Overall, these coding style rules are here to help you to add new files in
Buildroot or refactor existing ones.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">总的来说，这些编码风格规则旨在帮助您在 Buildroot 中添加新文件或重构现有文件。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you slightly modify some existing file, the important thing is
to keep the consistency of the whole file, so you can:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您稍微修改了一些现有文件，重要的是保持整个文件的一致性，这样您就可以：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
either follow the potentially deprecated coding style used in this
file,
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要么遵循此文件中使用的可能已弃用的编码风格，</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
or entirely rework it in order to make it comply with these rules.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">或者完全重新制定以使其符合这些规则。</font></font></font></li></ul></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="writing-rules-config-in" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>16.1.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> file<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">16.1. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> files contain entries for almost anything configurable in
Buildroot.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件包含几乎在 Buildroot 中可配置的所有内容的条目。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">An entry has the following pattern:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">条目具有以下模式：</font></font></font></p><pre class="screen">config BR2_PACKAGE_LIBFOO
        bool "libfoo"
        depends on BR2_PACKAGE_LIBBAZ
        select BR2_PACKAGE_LIBBAR
        help
          This is a comment that explains what libfoo is. The help text
          should be wrapped.

          http://foosoftware.org/libfoo/</pre><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bool</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">help</code> lines are indented
  with one tab.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bool</code> 、 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code> 、 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">help</code> 行缩进一个制表符。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The help text itself should be indented with one tab and two
  spaces.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">帮助文本本身应缩进一个制表符和两个空格。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The help text should be wrapped to fit 72 columns, where tab counts
  for 8, so 62 characters in the text itself.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">帮助文本应该换行以适应 72 列，其中制表符占 8 个字符，因此文本本身为 62 个字符。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> files are the input for the configuration tool
used in Buildroot, which is the regular <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Kconfig</em></span>. For further
details about the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Kconfig</em></span> language, refer to
<a class="ulink" href="http://kernel.org/doc/Documentation/kbuild/kconfig-language.txt" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">http://kernel.org/doc/Documentation/kbuild/kconfig-language.txt</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code>
 文件是 Buildroot 中使用的配置工具的输入，该工具是常规的 Kconfig。有关 Kconfig 语言的更多详细信息，请参阅 
http://kernel.org/doc/Documentation/kbuild/kconfig-language.txt。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="writing-rules-mk" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>16.2.&nbsp;The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">16.2. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件</font></font></font></h2></div></div></div><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Header: The file starts with a header. It contains the module name,
preferably in lowercase, enclosed between separators made of 80 hashes. A
blank line is mandatory after the header:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">头部：文件以头部开始。它包含模块名称，最好是小写，位于由 80 个井号制成的分隔符之间。头部之后必须有一个空行：</font></font></font></p><pre class="screen">################################################################################
#
# libfoo
#
################################################################################</pre></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Assignment: use <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">=</code> preceded and followed by one space:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">赋值：使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">=</code> ，前后各有一个空格：</font></font></font></p><pre class="screen">LIBFOO_VERSION = 1.0
LIBFOO_CONF_OPTS += --without-python-support</pre><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Do not align the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">=</code> signs.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">不要对齐 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">=</code> 标记。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Indentation: use tab only:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">缩进：只使用制表符：</font></font></font></p><pre class="screen">define LIBFOO_REMOVE_DOC
        $(RM) -r $(TARGET_DIR)/usr/share/libfoo/doc \
                $(TARGET_DIR)/usr/share/man/man3/libfoo*
endef</pre><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Note that commands inside a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">define</code> block should always start with a tab,
so <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</em></span> recognizes them as commands.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">define</code> 块内部的命令应始终以制表符开头，以便 make 将其识别为命令。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Optional dependency:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">可选依赖项：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Prefer multi-line syntax.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">更喜欢多行语法。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">YES:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">是：</font></font></font></p><pre class="screen">ifeq ($(BR2_PACKAGE_PYTHON3),y)
LIBFOO_CONF_OPTS += --with-python-support
LIBFOO_DEPENDENCIES += python3
else
LIBFOO_CONF_OPTS += --without-python-support
endif</pre><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO:</p><pre class="screen">LIBFOO_CONF_OPTS += --with$(if $(BR2_PACKAGE_PYTHON3),,out)-python-support
LIBFOO_DEPENDENCIES += $(if $(BR2_PACKAGE_PYTHON3),python3,)</pre></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Keep configure options and dependencies close together.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">保持配置选项和依赖项紧密结合在一起。</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Optional hooks: keep hook definition and assignment together in one
  if block.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">可选钩子：将钩子定义和分配保持在一个 if 块中。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">YES:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">是：</font></font></font></p><pre class="screen">ifneq ($(BR2_LIBFOO_INSTALL_DATA),y)
define LIBFOO_REMOVE_DATA
        $(RM) -r $(TARGET_DIR)/usr/share/libfoo/data
endef
LIBFOO_POST_INSTALL_TARGET_HOOKS += LIBFOO_REMOVE_DATA
endif</pre><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO:</p><pre class="screen">define LIBFOO_REMOVE_DATA
        $(RM) -r $(TARGET_DIR)/usr/share/libfoo/data
endef

ifneq ($(BR2_LIBFOO_INSTALL_DATA),y)
LIBFOO_POST_INSTALL_TARGET_HOOKS += LIBFOO_REMOVE_DATA
endif</pre></li></ul></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="writing-genimage-cfg" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>16.3.&nbsp;The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">genimage.cfg</code> file<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">16.3. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">genimage.cfg</code> 文件</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">genimage.cfg</code> files contain the output image layout that genimage utility
uses to create final .img file.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">genimage.cfg</code> 个文件包含 genimage 实用程序用于创建最终 .img 文件的输出图像布局。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">An example follows:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">以下是一个示例：</font></font></font></p><pre class="screen">image efi-part.vfat {
        vfat {
                file EFI {
                        image = "efi-part/EFI"
                }

                file Image {
                        image = "Image"
                }
        }

        size = 32M
}

image sdimage.img {
        hdimage {
        }

        partition u-boot {
                image = "efi-part.vfat"
                offset = 8K
        }

        partition root {
                image = "rootfs.ext2"
                size = 512M
        }
}</pre><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Every <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">section</code>(i.e. hdimage, vfat etc.), <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">partition</code> must be indented
  with one tab.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">每个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">section</code> （即 hdimage、vfat 等）， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">partition</code> 必须缩进一个制表符。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Every <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">file</code> or other <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">subnode</code> must be indented with two tabs.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">每个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">file</code> 或其他 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">subnode</code> 都必须缩进两个制表符。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Every node(<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">section</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">partition</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">file</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">subnode</code>) must have an open
  curly bracket on the same line of the node’s name, while the closing one
  must be on a newline and after it a newline must be added except for the
  last one node. Same goes for its option, for example option <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">size</code> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">=</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">每个节点（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">section</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">partition</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">file</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">subnode</code> ）的开放大括号必须在节点名称的同一行上，而关闭大括号必须在新行上，并在其后添加一个换行符，除了最后一个节点外。对于其选项也是一样，例如选项 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">size</code>  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">=</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Every <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">option</code>(i.e. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">image</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">offset</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">size</code>) must have the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">=</code>
  assignment one space from it and one space from the value specified.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">每个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">option</code> （即 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">image</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">offset</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">size</code> ）必须将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">=</code> 赋值与其之间各有一个空格。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Filename must at least begin with genimage prefix and have the .cfg
  extension to be easy to recognize.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">文件名必须至少以 genimage 前缀开头，并且具有.cfg 扩展名，以便易于识别。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Allowed notations for <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">offset</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">size</code> options are: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">G</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">M</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">K</code>
  (not <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">k</code>).  If it’s not possible to express a precise byte count
  with notations above then use hexadecimal <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">0x</code> prefix or, as last
  chance, the byte count.  In comments instead use <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">GB</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">MB</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">KB</code>
  (not <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kb</code>) in place of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">G</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">M</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">K</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">offset</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">size</code> 选项的允许表示法为： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">G</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">M</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">K</code> （不是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">k</code> ）。如果使用上述表示法无法准确表示字节计数，则使用十六进制 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">0x</code> 前缀，或者作为最后一种选择，使用字节计数。在注释中，应该使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">G</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">M</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">K</code> 的位置，而不是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">GB</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">MB</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">KB</code> （不是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kb</code> ）。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
For GPT partitions, the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">partition-type-uuid</code> value must be <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">U</code> for
  the EFI System Partition (expanded to
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">c12a7328-f81f-11d2-ba4b-00a0c93ec93b</code> by <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">genimage</em></span>), <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">F</code> for a FAT
  partition (expanded to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ebd0a0a2-b9e5-4433-87c0-68b6b72699c7</code> by
  <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">genimage</em></span>) or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">L</code> for the root filesystem or other filesystems
  (expanded to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">0fc63daf-8483-4772-8e79-3d69d8477de4</code> by
  <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">genimage</em></span>). Even though <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">L</code> is the default value of <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">genimage</em></span>, we
  prefer to have it explicitly specified in our <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">genimage.cfg</code>
  files. Finally, these shortcuts should be used without double
  quotes, e.g <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">partition-type-uuid = U</code>. If an explicit GUID is
  specified, lower-case letters should be used.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于 GPT 分区， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">partition-type-uuid</code> 值必须为 EFI 系统分区（由 genimage 扩展到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">c12a7328-f81f-11d2-ba4b-00a0c93ec93b</code> ）、FAT 分区（由 genimage 扩展到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ebd0a0a2-b9e5-4433-87c0-68b6b72699c7</code> ）或根文件系统或其他文件系统（由 genimage 扩展到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">0fc63daf-8483-4772-8e79-3d69d8477de4</code> ）的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">F</code> 值。尽管 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">L</code> 是 genimage 的默认值，但我们更喜欢在我们的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">genimage.cfg</code> 文件中明确指定它。最后，这些快捷方式应该在没有双引号的情况下使用，例如 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">partition-type-uuid = U</code> 。如果指定了明确的 GUID，则应使用小写字母。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">genimage.cfg</code> files are the input for the genimage tool used in
Buildroot to generate the final image file(i.e. sdcard.img). For further
details about the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">genimage</em></span> language, refer to
<a class="ulink" href="https://github.com/pengutronix/genimage/blob/master/README.rst" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">https://github.com/pengutronix/genimage/blob/master/README.rst</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">genimage.cfg</code>
 文件是 Buildroot 中用于生成最终镜像文件（即 sdcard.img）的 genimage 工具的输入。有关 genimage 
语言的更多详细信息，请参阅 
https://github.com/pengutronix/genimage/blob/master/README.rst。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_the_documentation" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>16.4.&nbsp;The documentation<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">16.4. 文档</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The documentation uses the
<a class="ulink" href="https://asciidoc-py.github.io/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">asciidoc</a> format.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">文档使用 asciidoc 格式。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For further details about the asciidoc syntax, refer to
<a class="ulink" href="https://asciidoc-py.github.io/userguide.html" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">https://asciidoc-py.github.io/userguide.html</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有关 asciidoc 语法的更多详细信息，请参阅 https://asciidoc-py.github.io/userguide.html。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_support_scripts" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>16.5.&nbsp;Support scripts<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">16.5. 支持脚本</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Some scripts in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">support/</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">utils/</code> directories are written in
Python and should follow the
<a class="ulink" href="https://www.python.org/dev/peps/pep-0008/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PEP8 Style Guide for Python Code</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">support/</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">utils/</code> 目录中的一些脚本是用 Python 编写的，应遵循 Python 代码的 PEP8 风格指南。</font></font></font></p></div></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="adding-board-support" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;17.&nbsp;Adding support for a particular board<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 17 章 添加对特定板的支持</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot contains basic configurations for several publicly available
hardware boards, so that users of such a board can easily build a system
that is known to work. You are welcome to add support for other boards
to Buildroot too.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 包含了几个公开可用硬件板的基本配置，以便这些板的用户可以轻松构建已知可用的系统。欢迎您也向 Buildroot 添加对其他板的支持。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To do so, you need to create a normal Buildroot configuration that
builds a basic system for the hardware: (internal) toolchain, kernel,
bootloader, filesystem and a simple BusyBox-only userspace. No specific
package should be selected: the configuration should be as minimal as
possible, and should only build a working basic BusyBox system for the
target platform. You can of course use more complicated configurations
for your internal projects, but the Buildroot project will only
integrate basic board configurations. This is because package
selections are highly application-specific.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要
做到这一点，您需要创建一个普通的 Buildroot 配置，用于为硬件构建基本系统：（内部）工具链、内核、引导加载程序、文件系统和一个仅包含简单
 BusyBox 用户空间的系统。不应选择任何特定的软件包：配置应尽可能简化，并且应仅为目标平台构建一个可工作的基本 BusyBox 
系统。当然，您可以为内部项目使用更复杂的配置，但 Buildroot 项目将仅集成基本板配置。这是因为软件包选择高度特定于应用程序。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Once you have a known working configuration, run <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make
savedefconfig</code>. This will generate a minimal <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">defconfig</code> file at the
root of the Buildroot source tree. Move this file into the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">configs/</code>
directory, and rename it <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;boardname&gt;_defconfig</code>. If the configuration
is a bit more complicated, it is nice to manually reformat it and
separate it into sections, with a comment before each section. Typical
sections are <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Architecture</em></span>, <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Toolchain options</em></span> (typically just linux
headers version), <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Firmware</em></span>, <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Bootloader</em></span>, <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Kernel</em></span>, and <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Filesystem</em></span>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一旦您有一个已知的工作配置，请运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make
savedefconfig</code> 。这将在 Buildroot 源树的根目录生成一个最小的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">defconfig</code> 文件。将此文件移动到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">configs/</code> 目录，并将其重命名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;boardname&gt;_defconfig</code> 。如果配置有点复杂，最好手动重新格式化并将其分成几个部分，并在每个部分之前加上注释。典型的部分包括架构、工具链选项（通常只是 Linux 头文件版本）、固件、引导加载程序、内核和文件系统。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Always use fixed versions or commit hashes for the different
components, not the "latest" version. For example, set
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_CUSTOM_VERSION=y</code> and
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_CUSTOM_VERSION_VALUE</code> to the kernel version you tested
with.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">始终为不同组件使用固定版本或提交哈希值，而不是使用“最新”版本。例如，将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_CUSTOM_VERSION=y</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_LINUX_KERNEL_CUSTOM_VERSION_VALUE</code> 设置为您测试过的内核版本。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">It is recommended to use as much as possible upstream versions of the
Linux kernel and bootloaders, and to use as much as possible default
kernel and bootloader configurations. If they are incorrect for your
board, or no default exists, we encourage you to send fixes to the
corresponding upstream projects.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">建议尽可能使用 Linux 内核和引导加载程序的上游版本，并尽可能使用默认的内核和引导加载程序配置。如果它们对您的板子不正确，或者没有默认配置存在，我们鼓励您向相应的上游项目发送修复程序。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">However, in the mean time, you may want to store kernel or bootloader
configuration or patches specific to your target platform. To do so,
create a directory <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;manufacturer&gt;</code> and a subdirectory
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;manufacturer&gt;/&lt;boardname&gt;</code>. You can then store your patches
and configurations in these directories, and reference them from the main
Buildroot configuration. Refer to <a class="xref" href="#customize" title="Chapter&nbsp;9.&nbsp;Project-specific customization" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Chapter&nbsp;9, <em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Project-specific customization</em></a> for more details.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">但是，在此期间，您可能希望存储特定于目标平台的内核或引导加载程序配置或补丁。为此，请创建一个目录 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;manufacturer&gt;</code> 和一个子目录 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">board/&lt;manufacturer&gt;/&lt;boardname&gt;</code> 。然后，您可以将补丁和配置存储在这些目录中，并从主 Buildroot 配置中引用它们。有关更多详细信息，请参阅第 9 章“项目特定定制”。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Before submitting patches for new boards it is recommended to test it by
building it using latest gitlab-CI docker container. To do this use
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">utils/docker-run</code> script and inside it issue these commands:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在为新板提交补丁之前，建议使用最新的 gitlab-CI docker 容器构建并测试它。要做到这一点，请使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">utils/docker-run</code> 脚本，并在其中发出以下命令：</font></font></font></p><pre class="screen"> $ make &lt;boardname&gt;_defconfig
 $ make</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">By default, Buildroot developers use the official image hosted on the
<a class="ulink" href="https://gitlab.com/buildroot.org/buildroot/container_registry/2395076" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gitlab.com
registry</a> and it should be convenient for most usage. If you still want
to build your own docker image, you can base it off the official image
as the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FROM</code> directive of your own <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Dockerfile</em></span>:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">默认情况下，Buildroot 开发人员使用托管在 gitlab.com 注册表上的官方映像，这对大多数用途应该很方便。如果您仍然想构建自己的 docker 映像，可以将其基于官方映像作为您自己 Dockerfile 的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FROM</code> 指令：</font></font></font></p><pre class="screen">FROM registry.gitlab.com/buildroot.org/buildroot/base:YYYYMMDD.HHMM
RUN ...
COPY ...</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The current version <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YYYYMMDD.HHMM</em></span> can be found in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.gitlab-ci.yml</code>
file at the top of the Buildroot source tree; all past versions are
listed in the aforementioned registry as well.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当前版本 YYYYMMDD.HHMM 可以在 Buildroot 源代码树顶部的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.gitlab-ci.yml</code> 文件中找到；所有过去的版本也在上述注册表中列出。</font></font></font></p></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="adding-packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;18.&nbsp;Adding new packages to Buildroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 18 章 添加新软件包到 Buildroot</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This section covers how new packages (userspace libraries or
applications) can be integrated into Buildroot. It also shows how
existing packages are integrated, which is needed for fixing issues or
tuning their configuration.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">本节介绍如何将新软件包（用户空间库或应用程序）集成到 Buildroot 中。它还展示了如何集成现有软件包，这对于修复问题或调整其配置是必要的。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When you add a new package, be sure to test it in various conditions
(see <a class="xref" href="#testing-package" title="18.25.3.&nbsp;How to test your package" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;18.25.3, “How to test your package”</a>) and also check it for coding style (see
<a class="xref" href="#check-package" title="18.25.2.&nbsp;How to check the coding style" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;18.25.2, “How to check the coding style”</a>).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当您添加新软件包时，请务必在各种条件下进行测试（请参阅第 18.25.3 节“如何测试您的软件包”），并检查其编码风格（请参阅第 18.25.2 节“如何检查编码风格”）。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_package_directory" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.1.&nbsp;Package directory<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.1. 软件包目录</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First of all, create a directory under the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package</code> directory for
your software, for example <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package</code> 目录下为您的软件创建一个目录，例如 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Some packages have been grouped by topic in a sub-directory:
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">x11r7</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">qt5</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gstreamer</code>. If your package fits in
one of these categories, then create your package directory in these.
New subdirectories are discouraged, however.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一些软件包已按主题分组到子目录中： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">x11r7</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">qt5</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gstreamer</code> 。如果您的软件包属于这些类别之一，请在这些类别中创建您的软件包目录。不过，不鼓励创建新的子目录。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_config_files" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.2.&nbsp;Config files<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.2. 配置文件</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For the package to be displayed in the configuration tool, you need to
create a Config file in your package directory. There are two types:
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in.host</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要在配置工具中显示软件包，您需要在软件包目录中创建一个配置文件。有两种类型： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in.host</code> 。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_literal_config_in_literal_file" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.2.1.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> file<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.2.1. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For packages used on the target, create a file named <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code>. This
file will contain the option descriptions related to our <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo</code> software
that will be used and displayed in the configuration tool. It should basically
contain:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于在目标上使用的软件包，请创建一个名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 的文件。该文件将包含与我们的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo</code> 软件相关的选项描述，这些选项将在配置工具中使用和显示。它基本上应包含：</font></font></font></p><pre class="screen">config BR2_PACKAGE_LIBFOO
        bool "libfoo"
        help
          This is a comment that explains what libfoo is. The help text
          should be wrapped.

          http://foosoftware.org/libfoo/</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bool</code> line, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">help</code> line and other metadata information about the
configuration option must be indented with one tab. The help text
itself should be indented with one tab and two spaces, lines should
be wrapped to fit 72 columns, where tab counts for 8, so 62 characters
in the text itself. The help text must mention the upstream URL of the
project after an empty line.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">配置选项的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bool</code> 行、 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">help</code> 行和其他元数据信息必须缩进一个制表符。帮助文本本身应缩进一个制表符和两个空格，行应换行以适应 72 列，其中制表符占 8，因此文本本身为 62 个字符。帮助文本必须在空行后提及项目的上游 URL。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">As a convention specific to Buildroot, the ordering of the attributes
is as follows:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">作为 Buildroot 特定的约定，属性的顺序如下：</font></font></font></p><div class="orderedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ol class="orderedlist" type="1" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The type of option: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bool</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">string</code>… with the prompt
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">选项类型： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bool</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">string</code> ...与提示</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
If needed, the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">default</code> value(s)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果需要， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">default</code> 值(s)</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Any dependencies on the target in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code> form
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">任何对目标的依赖以 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code> 形式</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Any dependencies on the toolchain in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code> form
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">任何对工具链的依赖以 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code> 形式</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Any dependencies on other packages in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code> form
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">任何对其他软件包的依赖以 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code> 形式</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Any dependency of the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select</code> form
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">任何 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select</code> 表单的依赖项</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The help keyword and help text.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">帮助关键字和帮助文本。</font></font></font></li></ol></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">You can add other sub-options into a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">if BR2_PACKAGE_LIBFOO…endif</code>
statement to configure particular things in your software. You can look at
examples in other packages. The syntax of the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> file is the same
as the one for the kernel Kconfig file. The documentation for this syntax is
available at <a class="ulink" href="http://kernel.org/doc/Documentation/kbuild/kconfig-language.txt" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">http://kernel.org/doc/Documentation/kbuild/kconfig-language.txt</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您可以将其他子选项添加到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">if BR2_PACKAGE_LIBFOO…endif</code> 语句中，以配置软件中的特定内容。您可以查看其他软件包中的示例。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件的语法与内核 Kconfig 文件的语法相同。有关此语法的文档，请访问 http://kernel.org/doc/Documentation/kbuild/kconfig-language.txt</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Finally you have to add your new <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo/Config.in</code> to
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/Config.in</code> (or in a category subdirectory if you decided to
put your package in one of the existing categories). The files
included there are <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sorted alphabetically</em></span> per category and are <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NOT</em></span>
supposed to contain anything but the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bare</em></span> name of the package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">最后，您必须将您的新 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo/Config.in</code> 添加到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/Config.in</code> （或者如果您决定将您的软件包放在现有类别之一中，则添加到类别子目录中）。那里包含的文件按类别按字母顺序排列，除了软件包的纯名称之外不应包含任何内容。</font></font></font></p><pre class="screen">source "package/libfoo/Config.in"</pre></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_literal_config_in_host_literal_file" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.2.2.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in.host</code> file<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.2.2. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in.host</code> 文件</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Some packages also need to be built for the host system. There are two
options here:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有些软件包还需要为主机系统构建。这里有两个选项：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The host package is only required to satisfy build-time
  dependencies of one or more target packages. In this case, add
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-foo</code> to the target package’s <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BAR_DEPENDENCIES</code> variable. No
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in.host</code> file should be created.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">主机软件包仅需要满足一个或多个目标软件包的构建时依赖关系。在这种情况下，将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-foo</code> 添加到目标软件包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BAR_DEPENDENCIES</code> 变量中。不应创建 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in.host</code> 文件。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The host package should be explicitly selectable by the user from
  the configuration menu. In this case, create a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in.host</code> file
  for that host package:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">主机软件包应由用户从配置菜单中明确选择。在这种情况下，为该主机软件包创建一个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in.host</code> 文件：</font></font></font></p><pre class="screen">config BR2_PACKAGE_HOST_FOO
        bool "host foo"
        help
          This is a comment that explains what foo for the host is.

          http://foosoftware.org/foo/</pre><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The same coding style and options as for the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> file are valid.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">与 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件相同的编码风格和选项是有效的。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Finally you have to add your new <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo/Config.in.host</code> to
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/Config.in.host</code>. The files included there are <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sorted alphabetically</em></span>
and are <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NOT</em></span> supposed to contain anything but the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bare</em></span> name of the package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">最后，您必须将您的新 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo/Config.in.host</code> 添加到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/Config.in.host</code> 中。那里包含的文件是按字母顺序排列的，除了包的基本名称之外不应包含任何内容。</font></font></font></p><pre class="screen">source "package/foo/Config.in.host"</pre><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The host package will then be available from the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Host utilities</code> menu.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后，主机包将从 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Host utilities</code> 菜单中可用。</font></font></font></p></li></ul></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="depends-on-vs-select" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.2.3.&nbsp;Choosing <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.2.3. 选择 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select</code> </font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> file of your package must also ensure that
dependencies are enabled. Typically, Buildroot uses the following
rules:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您的软件包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件还必须确保依赖项已启用。通常，Buildroot 使用以下规则：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Use a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select</code> type of dependency for dependencies on
  libraries. These dependencies are generally not obvious and it
  therefore make sense to have the kconfig system ensure that the
  dependencies are selected. For example, the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libgtk2</em></span> package uses
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select BR2_PACKAGE_LIBGLIB2</code> to make sure this library is also
  enabled.
  The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select</code> keyword expresses the dependency with a backward
  semantic.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对库的依赖使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select</code> 类型的依赖项。这些依赖通常不明显，因此让 kconfig 系统确保选择了依赖项是有意义的。例如，libgtk2 软件包使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select BR2_PACKAGE_LIBGLIB2</code> 来确保该库也已启用。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select</code> 关键字以反向语义表示依赖关系。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Use a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code> type of dependency when the user really needs to
  be aware of the dependency. Typically, Buildroot uses this type of
  dependency for dependencies on target architecture, MMU support and
  toolchain options (see <a class="xref" href="#dependencies-target-toolchain-options" title="18.2.4.&nbsp;Dependencies on target and toolchain options" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;18.2.4, “Dependencies on target and toolchain options”</a>),
  or for dependencies on "big" things, such as the X.org system.
  The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code> keyword expresses the dependency with a forward
  semantic.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当用户确实需要了解依赖关系时，请使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code> 类型的依赖项。通常，Buildroot 在目标架构、MMU 支持和工具链选项的依赖项（请参见第 18.2.4 节，“目标和工具链选项的依赖项”）或者对“大”事物的依赖，例如 X.org 系统时使用这种类型的依赖。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code> 关键字以正向语义表示依赖关系。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note.&nbsp;</strong>The current problem with the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kconfig</em></span> language is that these two
dependency semantics are not internally linked. Therefore, it may be
possible to select a package, whom one of its dependencies/requirement
is not met.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意。Kconfig 语言当前的问题是这两种依赖语义没有内部链接。因此，可能会选择一个包，其中一个依赖/要求未满足。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">An example illustrates both the usage of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一个示例说明了 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code> 的用法。</font></font></font></p><pre class="screen">config BR2_PACKAGE_RRDTOOL
        bool "rrdtool"
        depends on BR2_USE_WCHAR
        select BR2_PACKAGE_FREETYPE
        select BR2_PACKAGE_LIBART
        select BR2_PACKAGE_LIBPNG
        select BR2_PACKAGE_ZLIB
        help
          RRDtool is the OpenSource industry standard, high performance
          data logging and graphing system for time series data.

          http://oss.oetiker.ch/rrdtool/

comment "rrdtool needs a toolchain w/ wchar"
        depends on !BR2_USE_WCHAR</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Note that these two dependency types are only transitive with the
dependencies of the same kind.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，这两种依赖类型只与相同类型的依赖项具有传递性。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This means, in the following example:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这意味着，在以下示例中：</font></font></font></p><pre class="screen">config BR2_PACKAGE_A
        bool "Package A"

config BR2_PACKAGE_B
        bool "Package B"
        depends on BR2_PACKAGE_A

config BR2_PACKAGE_C
        bool "Package C"
        depends on BR2_PACKAGE_B

config BR2_PACKAGE_D
        bool "Package D"
        select BR2_PACKAGE_B

config BR2_PACKAGE_E
        bool "Package E"
        select BR2_PACKAGE_D</pre><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Selecting <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package C</code> will be visible if <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package B</code> has been
  selected, which in turn is only visible if <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package A</code> has been
  selected.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果选择 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package C</code> ，则只有在选择 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package B</code> 后才会显示，而选择 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package B</code> 只有在选择 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package A</code> 后才会显示。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Selecting <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package E</code> will select <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package D</code>, which will select
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package B</code>, it will not check for the dependencies of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package B</code>,
  so it will not select <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package A</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">选择 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package E</code> 将选择 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package D</code> ，然后选择 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package B</code> ，它不会检查 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package B</code> 的依赖关系，因此不会选择 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package A</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Since <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package B</code> is selected but <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package A</code> is not, this violates
  the dependency of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package B</code> on <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package A</code>. Therefore, in such a
  situation, the transitive dependency has to be added explicitly:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">由于选择了 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package B</code> ，但未选择 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package A</code> ，这违反了 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package B</code> 对 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Package A</code> 的依赖关系。因此，在这种情况下，必须显式添加传递性依赖：</font></font></font></li></ul></div><pre class="screen">config BR2_PACKAGE_D
        bool "Package D"
        depends on BR2_PACKAGE_A
        select BR2_PACKAGE_B

config BR2_PACKAGE_E
        bool "Package E"
        depends on BR2_PACKAGE_A
        select BR2_PACKAGE_D</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Overall, for package library dependencies, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select</code> should be
preferred.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">总体而言，对于软件包库依赖项，应优先选择 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Note that such dependencies will ensure that the dependency option
is also enabled, but not necessarily built before your package. To do
so, the dependency also needs to be expressed in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file of the
package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，这样的依赖关系将确保依赖选项也已启用，但不一定在您的软件包之前构建。为此，依赖项还需要在软件包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件中表达。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Further formatting details: see <a class="link" href="#writing-rules-config-in" title="16.1.&nbsp;Config.in file" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">the
coding style</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">更多格式化细节：请参阅编码风格。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="dependencies-target-toolchain-options" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.2.4.&nbsp;Dependencies on target and toolchain options<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.2.4. 对目标和工具链选项的依赖</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Many packages depend on certain options of the toolchain: the choice of
C library, C++ support, thread support, RPC support, wchar support,
or dynamic library support. Some packages can only be built on certain
target architectures, or if an MMU is available in the processor.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">许多软件包依赖于工具链的某些选项：C 库的选择，C++支持，线程支持，RPC 支持，wchar 支持或动态库支持。某些软件包只能在特定的目标架构上构建，或者如果处理器中有 MMU 可用。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">These dependencies have to be expressed with the appropriate <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends
on</em></span> statements in the Config.in file. Additionally, for dependencies on
toolchain options, a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">comment</code> should be displayed when the option is
not enabled, so that the user knows why the package is not available.
Dependencies on target architecture or MMU support should not be
made visible in a comment: since it is unlikely that the user can
freely choose another target, it makes little sense to show these
dependencies explicitly.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这些依赖关系必须在 Config.in 文件中用适当的 depends on 语句来表示。此外，对于工具链选项的依赖关系，在选项未启用时应显示 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">comment</code> ，以便用户知道为什么包不可用。不应在注释中显示对目标架构或 MMU 支持的依赖关系：因为用户不太可能自由选择另一个目标，因此没有必要明确显示这些依赖关系。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">comment</code> should only be visible if the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">config</code> option itself would
be visible when the toolchain option dependencies are met. This means
that all other dependencies of the package (including dependencies on
target architecture and MMU support) have to be repeated on the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">comment</code> definition. To keep it clear, the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code> statement for
these non-toolchain option should be kept separate from the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code>
statement for the toolchain options.
If there is a dependency on a config option in that same file (typically
the main package) it is preferable to have a global <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">if … endif</code>
construct rather than repeating the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code> statement on the
comment and other config options.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当工具链选项的依赖关系得到满足时， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">comment</code> 应仅在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">config</code> 选项本身可见时才可见。这意味着包的所有其他依赖关系（包括对目标架构和 MMU 支持的依赖关系）必须在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">comment</code> 定义中重复。为了保持清晰，这些非工具链选项的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code> 语句应与工具链选项的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code> 语句分开。如果在同一文件中存在对配置选项的依赖关系（通常是主包），最好使用全局 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">if … endif</code> 结构，而不是在注释和其他配置选项上重复 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code> 语句。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The general format of a dependency <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">comment</code> for package foo is:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">包 foo 的依赖 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">comment</code> 的一般格式为：</font></font></font></p><pre class="screen">foo needs a toolchain w/ featA, featB, featC</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">for example:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">例如：</font></font></font></p><pre class="screen">mpd needs a toolchain w/ C++, threads, wchar</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">or</p><pre class="screen">crda needs a toolchain w/ threads</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Note that this text is kept brief on purpose, so that it will fit on a
80-character terminal.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，这段文字故意保持简短，以便适合 80 字符的终端。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The rest of this section enumerates the different target and toolchain
options, the corresponding config symbols to depend on, and the text to
use in the comment.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">本节的其余部分列举了不同的目标和工具链选项，相应的配置符号依赖项，以及在注释中使用的文本。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Target architecture
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">目标架构</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Dependency symbol: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_powerpc</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_mips</code>, … (see <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">arch/Config.in</code>)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">依赖符号: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_powerpc</code> , <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_mips</code> , … (参见 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">arch/Config.in</code> )</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Comment string: no comment to be added
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注释字符串：无需添加注释</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
MMU support
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">MMU 支持</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Dependency symbol: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_USE_MMU</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">依赖符号： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_USE_MMU</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Comment string: no comment to be added
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注释字符串：无需添加注释</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Gcc <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="emphasis"><em>_sync</em></span>*</code> built-ins used for atomic operations. They are
  available in variants operating on 1 byte, 2 bytes, 4 bytes and 8
  bytes. Since different architectures support atomic operations on
  different sizes, one dependency symbol is available for each size:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Gcc <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="emphasis"><em>_sync</em></span>*</code> 内建函数用于原子操作。它们可用于操作 1 字节、2 字节、4 字节和 8 字节的变体。由于不同的架构支持不同大小的原子操作，因此每个大小都有一个依赖符号可用：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Dependency symbol: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HAS_SYNC_1</code> for 1 byte,
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HAS_SYNC_2</code> for 2 bytes,
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HAS_SYNC_4</code> for 4 bytes, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HAS_SYNC_8</code>
   for 8 bytes.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">依赖符号： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HAS_SYNC_1</code> 用于 1 字节， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HAS_SYNC_2</code> 用于 2 字节， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HAS_SYNC_4</code> 用于 4 字节， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HAS_SYNC_8</code> 用于 8 字节。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Comment string: no comment to be added
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注释字符串：无需添加注释</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Gcc <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="emphasis"><em>_atomic</em></span>*</code> built-ins used for atomic operations.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">用于原子操作的 Gcc <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="emphasis"><em>_atomic</em></span>*</code> 内建函数。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Dependency symbol: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HAS_ATOMIC</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">依赖符号： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HAS_ATOMIC</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Comment string: no comment to be added
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注释字符串：无需添加注释</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Kernel headers
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">内核头文件</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Dependency symbol: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HEADERS_AT_LEAST_X_Y</code>, (replace
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">X_Y</code> with the proper version, see <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">toolchain/Config.in</code>)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">依赖符号： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HEADERS_AT_LEAST_X_Y</code> ，（用正确的版本替换 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">X_Y</code> ，参见 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">toolchain/Config.in</code> ）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Comment string: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">headers &gt;= X.Y</code> and/or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">headers &lt;= X.Y</code> (replace
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">X.Y</code> with the proper version)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注释字符串: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">headers &gt;= X.Y</code> 和/或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">headers &lt;= X.Y</code> (用正确的版本替换 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">X.Y</code> )</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
GCC version
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">GCC 版本</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Dependency symbol: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_GCC_AT_LEAST_X_Y</code>, (replace
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">X_Y</code> with the proper version, see <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">toolchain/Config.in</code>)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">依赖符号: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_GCC_AT_LEAST_X_Y</code> ，(用正确的版本替换 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">X_Y</code> ，参见 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">toolchain/Config.in</code> )</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Comment string: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gcc &gt;= X.Y</code> and/or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gcc &lt;= X.Y</code> (replace
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">X.Y</code> with the proper version)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注释字符串： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gcc &gt;= X.Y</code> 和/或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gcc &lt;= X.Y</code> （用正确的版本替换 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">X.Y</code> ）</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Host GCC version
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">主机 GCC 版本</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Dependency symbol: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_HOST_GCC_AT_LEAST_X_Y</code>, (replace
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">X_Y</code> with the proper version, see <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code>)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">依赖符号： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_HOST_GCC_AT_LEAST_X_Y</code> ，（用正确的版本替换 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">X_Y</code> ，参见 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> ）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Comment string: no comment to be added
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注释字符串：无需添加注释</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Note that it is usually not the package itself that has a minimum
   host GCC version, but rather a host-package on which it depends.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，通常不是软件包本身具有最低主机 GCC 版本，而是它所依赖的主机软件包。</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
C library
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">C 库</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Dependency symbol: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_USES_GLIBC</code>,
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_USES_MUSL</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_USES_UCLIBC</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">依赖符号: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_USES_GLIBC</code> , <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_USES_MUSL</code> , <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_USES_UCLIBC</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Comment string: for the C library, a slightly different comment text
   is used: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo needs a glibc toolchain</code>, or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo needs a glibc
   toolchain w/ C++</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注释字符串: 对于 C 库，使用略有不同的注释文本: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo needs a glibc toolchain</code> , 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo needs a glibc
   toolchain w/ C++</code> </font></font></font>
</li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
C++ support
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">C++ 支持</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Dependency symbol: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_INSTALL_LIBSTDCPP</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">依赖符号: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_INSTALL_LIBSTDCPP</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Comment string: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">C++</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注释字符串: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">C++</code> </font></font></font>
</li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
D support
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">D 支持</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Dependency symbol: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HAS_DLANG</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">依赖符号: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HAS_DLANG</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Comment string: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Dlang</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注释字符串: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Dlang</code> </font></font></font>
</li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Fortran support
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Fortran 支持</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Dependency symbol: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HAS_FORTRAN</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">依赖符号: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HAS_FORTRAN</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Comment string: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">fortran</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注释字符串: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">fortran</code> </font></font></font>
</li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
thread support
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">线程支持</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Dependency symbol: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HAS_THREADS</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">依赖符号: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HAS_THREADS</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Comment string: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">threads</code> (unless <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HAS_THREADS_NPTL</code>
   is also needed, in which case, specifying only <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NPTL</code> is sufficient)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注释字符串: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">threads</code> （除非还需要 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HAS_THREADS_NPTL</code> ，否则仅指定 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NPTL</code> 即可）</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
NPTL thread support
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">NPTL 线程支持</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Dependency symbol: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HAS_THREADS_NPTL</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">依赖符号: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HAS_THREADS_NPTL</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Comment string: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NPTL</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注释字符串: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NPTL</code> </font></font></font>
</li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
RPC support
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">RPC 支持</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Dependency symbol: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HAS_NATIVE_RPC</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">依赖符号: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_TOOLCHAIN_HAS_NATIVE_RPC</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Comment string: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">RPC</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注释字符串: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">RPC</code> </font></font></font>
</li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
wchar support
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">宽字符支持</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Dependency symbol: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_USE_WCHAR</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">依赖符号: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_USE_WCHAR</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Comment string: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">wchar</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注释字符串: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">wchar</code> </font></font></font>
</li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
dynamic library
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">动态库</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Dependency symbol: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">!BR2_STATIC_LIBS</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">依赖符号: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">!BR2_STATIC_LIBS</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Comment string: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dynamic library</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注释字符串: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dynamic library</code> </font></font></font>
</li></ul></div></li></ul></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_dependencies_on_a_linux_kernel_built_by_buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.2.5.&nbsp;Dependencies on a Linux kernel built by buildroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.2.5. 依赖于由 buildroot 构建的 Linux 内核</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Some packages need a Linux kernel to be built by buildroot. These are
typically kernel modules or firmware. A comment should be added in the
Config.in file to express this dependency, similar to dependencies on
toolchain options. The general format is:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一些软件包需要使用 Linux 内核由 buildroot 构建。这些通常是内核模块或固件。应在 Config.in 文件中添加注释以表达此依赖关系，类似于对工具链选项的依赖关系。一般格式如下：</font></font></font></p><pre class="screen">foo needs a Linux kernel to be built</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If there is a dependency on both toolchain options and the Linux
kernel, use this format:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果对工具链选项和 Linux 内核都有依赖关系，请使用此格式：</font></font></font></p><pre class="screen">foo needs a toolchain w/ featA, featB, featC and a Linux kernel to be built</pre></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_dependencies_on_udev_dev_management" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.2.6.&nbsp;Dependencies on udev /dev management<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.2.6. 对 udev /dev 管理的依赖关系</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If a package needs udev /dev management, it should depend on symbol
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_HAS_UDEV</code>, and the following comment should be added:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果一个软件包需要 udev /dev 管理，则应依赖于符号 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_HAS_UDEV</code> ，并添加以下注释：</font></font></font></p><pre class="screen">foo needs udev /dev management</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If there is a dependency on both toolchain options and udev /dev
management, use this format:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果依赖于工具链选项和 udev /dev 管理，则使用以下格式：</font></font></font></p><pre class="screen">foo needs udev /dev management and a toolchain w/ featA, featB, featC</pre></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_dependencies_on_features_provided_by_virtual_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.2.7.&nbsp;Dependencies on features provided by virtual packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.2.7. 依赖于虚拟软件包提供的功能</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Some features can be provided by more than one package, such as the
openGL libraries.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一些功能可以由多个软件包提供，例如 openGL 库。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">See <a class="xref" href="#virtual-package-tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;18.12, “Infrastructure for virtual packages”</a> for more on the virtual packages.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有关虚拟软件包的更多信息，请参阅第 18.12 节“虚拟软件包的基础设施”。</font></font></font></p></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_the_literal_mk_literal_file" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.3.&nbsp;The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.3. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="adding-packages-mk" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Finally, here’s the hardest part. Create a file named <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo.mk</code>. It
describes how the package should be downloaded, configured, built,
installed, etc.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">最后，这是最困难的部分。创建一个名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo.mk</code> 的文件。它描述了软件包应如何下载、配置、构建、安装等。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Depending on the package type, the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file must be written in a
different way, using different infrastructures:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">根据软件包类型的不同， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件必须以不同的方式编写，使用不同的基础设施：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Makefiles for generic packages</strong></span> (not using autotools or CMake):
  These are based on an infrastructure similar to the one used for
  autotools-based packages, but require a little more work from the
  developer. They specify what should be done for the configuration,
  compilation and installation of the package. This
  infrastructure must be used for all packages that do not use the
  autotools as their build system. In the future, other specialized
  infrastructures might be written for other build systems. We cover
  them through in a <a class="link" href="#generic-package-tutorial" title="18.6.1.&nbsp;generic-package tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">tutorial</a> and a
  <a class="link" href="#generic-package-reference" title="18.6.2.&nbsp;generic-package reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">reference</a>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通
用软件包的 Makefiles（不使用 autotools 或 CMake）：这些基于类似于用于基于 autotools 
的软件包的基础设施，但需要开发人员做更多工作。它们指定了配置、编译和安装软件包所需执行的操作。这种基础设施必须用于所有不使用 autotools
 作为构建系统的软件包。未来，可能会为其他构建系统编写其他专门的基础设施。我们通过教程和参考资料介绍它们。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Makefiles for autotools-based software</strong></span> (autoconf, automake, etc.):
  We provide a dedicated infrastructure for such packages, since
  autotools is a very common build system. This infrastructure <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">must</em></span>
  be used for new packages that rely on the autotools as their build
  system. We cover them through a <a class="link" href="#autotools-package-tutorial" title="18.7.1.&nbsp;autotools-package tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">tutorial</a>
  and <a class="link" href="#autotools-package-reference" title="18.7.2.&nbsp;autotools-package reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">reference</a>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">基
于 autotools 的软件的 Makefiles（autoconf、automake 等）：我们为这类软件包提供了专门的基础设施，因为 
autotools 是一种非常常见的构建系统。这种基础设施必须用于依赖 autotools 
作为构建系统的新软件包。我们通过教程和参考资料介绍它们。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Makefiles for cmake-based software</strong></span>: We provide a dedicated
   infrastructure for such packages, as CMake is a more and more
   commonly used build system and has a standardized behaviour. This
   infrastructure <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">must</em></span> be used for new packages that rely on
   CMake. We cover them through a <a class="link" href="#cmake-package-tutorial" title="18.8.1.&nbsp;cmake-package tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">tutorial</a>
   and <a class="link" href="#cmake-package-reference" title="18.8.2.&nbsp;cmake-package reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">reference</a>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为基于 cmake 的软件制作 Makefiles：我们为这类软件包提供了专用基础设施，因为 CMake 是一种越来越常用的构建系统，并且具有标准化行为。必须为依赖于 CMake 的新软件包使用此基础设施。我们通过教程和参考资料来覆盖它们。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Makefiles for Python modules</strong></span>: We have a dedicated infrastructure
   for Python modules that use the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">flit</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pep517</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setuptools</code>,
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setuptools-rust</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">maturin</code> mechanisms. We cover them through a
   <a class="link" href="#python-package-tutorial" title="18.9.1.&nbsp;python-package tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">tutorial</a> and a
   <a class="link" href="#python-package-reference" title="18.9.2.&nbsp;python-package reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">reference</a>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为 Python 模块制作 Makefiles：我们为使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">flit</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pep517</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setuptools</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setuptools-rust</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">maturin</code> 机制的 Python 模块提供了专用基础设施。我们通过教程和参考资料来覆盖它们。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Makefiles for Lua modules</strong></span>: We have a dedicated infrastructure for
   Lua modules available through the LuaRocks web site. We cover them
   through a <a class="link" href="#luarocks-package-tutorial" title="18.10.1.&nbsp;luarocks-package tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">tutorial</a> and a
   <a class="link" href="#luarocks-package-reference" title="18.10.2.&nbsp;luarocks-package reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">reference</a>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为 Lua 模块制作 Makefiles：我们为 Lua 模块提供了专用基础设施，可通过 LuaRocks 网站获得。我们通过教程和参考资料来覆盖它们。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Further formatting details: see <a class="link" href="#writing-rules-mk" title="16.2.&nbsp;The .mk file" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">the writing
rules</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">进一步的格式细节：请参阅写作规则。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="adding-packages-hash" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.4.&nbsp;The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> file<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.4. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> 文件</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When possible, you must add a third file, named <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo.hash</code>, that
contains the hashes of the downloaded files for the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo</code>
package. The only reason for not adding a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> file is when hash
checking is not possible due to how the package is downloaded.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在可能的情况下，您必须添加第三个文件，命名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo.hash</code> ，其中包含 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo</code> 软件包的下载文件的哈希值。不添加 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> 文件的唯一原因是由于软件包的下载方式导致无法进行哈希检查。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When a package has a version selection choice, then the hash file may be
stored in a subdirectory named after the version, e.g.
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/libfoo/1.2.3/libfoo.hash</code>. This is especially important if the
different versions have different licensing terms, but they are stored
in the same file. Otherwise, the hash file should stay in the package’s
directory.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当软件包有版本选择时，哈希文件可以存储在以版本命名的子目录中，例如 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/libfoo/1.2.3/libfoo.hash</code> 。如果不同版本具有不同的许可条款但存储在同一文件中，则这一点尤为重要。否则，哈希文件应保留在软件包的目录中。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The hashes stored in that file are used to validate the integrity of the
downloaded files and of the license files.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">存储在该文件中的哈希用于验证已下载文件和许可文件的完整性。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The format of this file is one line for each file for which to check the
hash, each line with the following three fields separated by two spaces:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">该文件的格式是每个要检查哈希的文件的一行，每行有以下三个字段，用两个空格分隔：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
the type of hash, one of:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">哈希类型之一：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">md5</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha1</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha224</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha256</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha384</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha512</code>
</li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
the hash of the file:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">文件的哈希值：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
for <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">md5</code>, 32 hexadecimal characters
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">md5</code> ，32 个十六进制字符</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
for <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha1</code>, 40 hexadecimal characters
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha1</code> ，40 个十六进制字符</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
for <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha224</code>, 56 hexadecimal characters
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha224</code> ，56 个十六进制字符</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
for <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha256</code>, 64 hexadecimal characters
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha256</code> ，64 个十六进制字符</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
for <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha384</code>, 96 hexadecimal characters
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha384</code> ，96 个十六进制字符</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
for <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha512</code>, 128 hexadecimal characters
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">用于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha512</code> ，128 个十六进制字符</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
the name of the file:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">文件名：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
for a source archive: the basename of the file, without any directory
   component,
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于源存档：文件的基本名称，不包含任何目录组件，</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
for a license file: the path as it appears in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_LICENSE_FILES</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">用于许可文件：路径与 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_LICENSE_FILES</code> 中显示的路径相同。</font></font></font></li></ul></div></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Lines starting with a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">#</code> sign are considered comments, and ignored. Empty
lines are ignored.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">以 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">#</code> 符号开头的行被视为注释，并被忽略。空行也会被忽略。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">There can be more than one hash for a single file, each on its own line. In
this case, all hashes must match.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于单个文件可以有多个哈希值，每个哈希值占据一行。在这种情况下，所有哈希值必须匹配。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note.&nbsp;</strong>Ideally, the hashes stored in this file should match the hashes published by
upstream, e.g. on their website, in the e-mail announcement… If upstream
provides more than one type of hash (e.g. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha1</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha512</code>), then it is
best to add all those hashes in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> file. If upstream does not
provide any hash, or only provides an <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">md5</code> hash, then compute at least one
strong hash yourself (preferably <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha256</code>, but not <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">md5</code>), and mention
this in a comment line above the hashes.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意。理想情况下，此文件中存储的哈希应与上游发布的哈希匹配，例如在其网站、电子邮件公告中... 如果上游提供多种类型的哈希（例如 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha1</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha512</code> ），则最好将所有这些哈希添加到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> 文件中。如果上游没有提供任何哈希，或者只提供一个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">md5</code> 哈希，则至少自己计算一个强哈希（最好是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha256</code> ，但不是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">md5</code> ），并在哈希上方的注释行中提及此事。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note.&nbsp;</strong>The hashes for license files are used to detect a license change when a
package version is bumped. The hashes are checked during the make legal-info
target run. For a package with multiple versions (like Qt5),
create the hash file in a subdirectory <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packageversion&gt;</code> of that package
(see also <a class="xref" href="#patch-apply-order" title="19.2.&nbsp;How patches are applied" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;19.2, “How patches are applied”</a>).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意。许可文件的哈希用于在软件包版本升级时检测许可证更改。在运行 make legal-info 目标时会检查这些哈希。对于具有多个版本的软件包（如 Qt5），请在该软件包的子目录 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packageversion&gt;</code> 中创建哈希文件（另请参见第 19.2 节“如何应用补丁”）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The example below defines a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha1</code> and a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha256</code> published by upstream for
the main <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo-1.2.3.tar.bz2</code> tarball, an <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">md5</code> from upstream and a
locally-computed <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha256</code> hashes for a binary blob, a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha256</code> for a
downloaded patch, and an archive with no hash:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">下面的示例定义了上游发布的主 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo-1.2.3.tar.bz2</code> 压缩包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha1</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha256</code> ，上游的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">md5</code> 以及本地计算的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha256</code> 二进制 blob 的哈希，一个下载的补丁的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sha256</code> ，以及一个没有哈希的存档：</font></font></font></p><pre class="screen"># Hashes from: http://www.foosoftware.org/download/libfoo-1.2.3.tar.bz2.{sha1,sha256}:
sha1  486fb55c3efa71148fe07895fd713ea3a5ae343a  libfoo-1.2.3.tar.bz2
sha256  efc8103cc3bcb06bda6a781532d12701eb081ad83e8f90004b39ab81b65d4369  libfoo-1.2.3.tar.bz2

# md5 from: http://www.foosoftware.org/download/libfoo-1.2.3.tar.bz2.md5, sha256 locally computed:
md5  2d608f3c318c6b7557d551a5a09314f03452f1a1  libfoo-data.bin
sha256  01ba4719c80b6fe911b091a7c05124b64eeece964e09c058ef8f9805daca546b  libfoo-data.bin

# Locally computed:
sha256  ff52101fb90bbfc3fe9475e425688c660f46216d7e751c4bbdb1dc85cdccacb9  libfoo-fix-blabla.patch

# Hash for license files:
sha256  a45a845012742796534f7e91fe623262ccfb99460a2bd04015bd28d66fba95b8  COPYING
sha256  01b1f9f2c8ee648a7a596a1abe8aa4ed7899b1c9e5551bda06da6e422b04aa55  doc/COPYING.LGPL</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> file is present, and it contains one or more hashes for a
downloaded file, the hash(es) computed by Buildroot (after download) must
match the hash(es) stored in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> file. If one or more hashes do
not match, Buildroot considers this an error, deletes the downloaded file,
and aborts.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> 文件存在，并且包含一个或多个用于下载文件的哈希值，则 Buildroot 计算的哈希值（下载后）必须与 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> 文件中存储的哈希值匹配。如果一个或多个哈希值不匹配，Buildroot 将视为错误，删除已下载的文件，并中止操作。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> file is present, but it does not contain a hash for a
downloaded file, Buildroot considers this an error and aborts. However,
the downloaded file is left in the download directory since this
typically indicates that the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> file is wrong but the downloaded
file is probably OK.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> 文件存在，但不包含用于下载文件的哈希值，则 Buildroot 将视为错误并中止操作。但是，已下载的文件将保留在下载目录中，因为这通常表示 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> 文件错误，但已下载的文件可能是正确的。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Hashes are currently checked for files fetched from http/ftp servers,
Git or subversion repositories, files copied using scp and local files.
Hashes are not checked for other version control systems (such as CVS,
mercurial) because Buildroot currently does not generate reproducible
tarballs when source code is fetched from such version control
systems.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">目
前对从 http/ftp 服务器、Git 或 subversion 仓库获取的文件、使用 scp 
复制的文件和本地文件进行哈希检查。不对其他版本控制系统（如 CVS、mercurial）的文件进行哈希检查，因为 Buildroot 
目前无法从这些版本控制系统获取源代码时生成可重现的 tarballs。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Additionally, for packages for which it is possible to specify a custom
version (e.g. a custom version string, a remote tarball URL, or a VCS
repository location and changeset), Buildroot can’t carry hashes for
those. It is however possible to <a class="link" href="#customize-hashes" title="9.8.2.&nbsp;Providing extra hashes" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">provide a list of
extra hashes</a> that can cover such cases.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此外，对于可以指定自定义版本的软件包（例如自定义版本字符串、远程 tarball URL 或 VCS 存储库位置和更改集），Buildroot 无法为其携带哈希。但可以提供一组额外的哈希列表，以涵盖这种情况。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Hashes should only be added in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> files for files that are
guaranteed to be stable. For example, patches auto-generated by Github
are not guaranteed to be stable, and therefore their hashes can change
over time. Such patches should not be downloaded, and instead be added
locally to the package folder.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">只应在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> 文件中添加哈希，用于保证稳定的文件。例如，Github 自动生成的补丁不能保证稳定，因此它们的哈希值可能随时间变化。这样的补丁不应被下载，而应该本地添加到软件包文件夹中。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> file is missing, then no check is done at all.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> 文件丢失，则根本不进行任何检查。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="adding-packages-start-script" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.5.&nbsp;The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SNNfoo</code> start script<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.5. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SNNfoo</code> 启动脚本</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Packages that provide a system daemon usually need to be started somehow
at boot.  Buildroot comes with support for several init systems, some
are considered tier one (see <a class="xref" href="#init-system" title="6.3.&nbsp;init system" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;6.3, “init system”</a>), while others are also
available but do not have the same level of integration.  Ideally, all
packages providing a system daemon should provide a start script for
BusyBox/SysV init and a systemd unit file.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">提
供系统守护程序的软件包通常需要在启动时以某种方式启动。Buildroot 支持几种 init 系统，其中一些被视为一级支持（请参阅第 6.3 
节“init 系统”），而其他一些也可用但集成级别不同。理想情况下，所有提供系统守护程序的软件包都应提供一个适用于 BusyBox/SysV 
init 的启动脚本和一个 systemd 单元文件。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For consistency, the start script must follow the style and composition
as shown in the reference: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/busybox/S01syslogd</code>. An annotated
example of this style is shown below. There is no specific coding style
for systemd unit files, but if a package comes with its own unit file,
that is preferred over a buildroot specific one, if it is compatible
with buildroot.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为了保持一致性，启动脚本必须遵循参考中显示的样式和构成： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/busybox/S01syslogd</code> 。下面显示了此样式的带注释示例。systemd 单元文件没有特定的编码样式，但如果软件包附带自己的单元文件，则与 Buildroot 特定的单元文件兼容的情况下，应优先使用软件包自带的单元文件。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The name of the start script is composed of the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SNN</code> and the daemon
name.  The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NN</code> is the start order number which needs to be carefully
chosen.  For example, a program that requires networking to be up should
not start before <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">S40network</code>.  The scripts are started in alphabetical
order, so <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">S01syslogd</code> starts before <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">S01watchdogd</code>, and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">S02sysctl</code>
start thereafter.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">启动脚本的名称由 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SNN</code> 和守护程序名称组成。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NN</code> 是需要仔细选择的启动顺序号。例如，需要网络连接正常工作的程序不应在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">S40network</code> 之前启动。脚本按字母顺序启动，因此 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">S01syslogd</code> 在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">S01watchdogd</code> 之前启动， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">S02sysctl</code> 在其后启动。</font></font></font></p><pre class="screen">01: #!/bin/sh
02:
03: DAEMON="syslogd"
04: PIDFILE="/var/run/$DAEMON.pid"
05:
06: SYSLOGD_ARGS=""
07:
08: # shellcheck source=/dev/null
09: [ -r "/etc/default/$DAEMON" ] &amp;&amp; . "/etc/default/$DAEMON"
10:
11: # BusyBox' syslogd does not create a pidfile, so pass "-n" in the command line
12: # and use "-m" to instruct start-stop-daemon to create one.
13: start() {
14:     printf 'Starting %s: ' "$DAEMON"
15:     # shellcheck disable=SC2086 # we need the word splitting
16:     start-stop-daemon -b -m -S -q -p "$PIDFILE" -x "/sbin/$DAEMON" \
17:             -- -n $SYSLOGD_ARGS
18:     status=$?
19:     if [ "$status" -eq 0 ]; then
20:             echo "OK"
21:     else
22:             echo "FAIL"
23:     fi
24:     return "$status"
25: }
26:
27: stop() {
28:     printf 'Stopping %s: ' "$DAEMON"
29:     start-stop-daemon -K -q -p "$PIDFILE"
30:     status=$?
31:     if [ "$status" -eq 0 ]; then
32:             rm -f "$PIDFILE"
33:             echo "OK"
34:     else
35:             echo "FAIL"
36:     fi
37:     return "$status"
38: }
39:
40: restart() {
41:     stop
42:     sleep 1
43:     start
44: }
45:
46: case "$1" in
47:     start|stop|restart)
48:             "$1";;
49:     reload)
50:             # Restart, since there is no true "reload" feature.
51:             restart;;
52:     *)
53:             echo "Usage: $0 {start|stop|restart|reload}"
54:             exit 1
55: esac</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note:</strong></span> programs that support reloading their configuration in some
fashion (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SIGHUP</code>) should provide a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">reload()</code> function similar to
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">stop()</code>.  The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">start-stop-daemon</code> supports <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-K -s HUP</code> for this.
It is recommended to always append <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-x "/sbin/$DAEMON"</code> to all the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">start-stop-daemon</code> commands to ensure signals are set to a PID that
matches <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$DAEMON</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意：支持以某种方式重新加载其配置的程序（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SIGHUP</code> ）应提供类似于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">stop()</code> 的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">reload()</code> 函数。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">start-stop-daemon</code> 支持 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-K -s HUP</code> 。建议始终将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-x "/sbin/$DAEMON"</code> 附加到所有 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">start-stop-daemon</code> 命令，以确保信号设置为与 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$DAEMON</code> 匹配的 PID。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Both start scripts and unit files can source command line arguments from
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/etc/default/foo</code>, in general, if such a file does not exist it should
not block the start of the daemon, unless there is some site specirfic
command line argument the daemon requires to start.  For start scripts a
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_ARGS="-s -o -m -e -args"</code> can be defined to a default value in and
the user can override this from <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/etc/default/foo</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">启动脚本和单元文件都可以从 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/etc/default/foo</code> 中获取命令行参数，一般来说，如果这样的文件不存在，守护进程的启动不应该被阻塞，除非守护进程启动需要一些特定于站点的命令行参数。对于启动脚本，可以在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_ARGS="-s -o -m -e -args"</code> 中定义一个默认值，用户可以从 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/etc/default/foo</code> 中覆盖这个值。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_infrastructure_for_packages_with_specific_build_systems" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.6.&nbsp;Infrastructure for packages with specific build systems<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.6. 用于具有特定构建系统的软件包的基础设施</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">By <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">packages with specific build systems</em></span> we mean all the packages
whose build system is not one of the standard ones, such as
<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autotools</em></span> or <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">CMake</em></span>. This typically includes packages whose build
system is based on hand-written Makefiles or shell scripts.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过具有特定构建系统的软件包，我们指的是所有构建系统不是标准构建系统之一的软件包，例如 autotools 或 CMake。这通常包括构建系统基于手写的 Makefile 或 shell 脚本的软件包。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="generic-package-tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.6.1.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> tutorial<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.6.1. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 教程</font></font></font></h3></div></div></div><pre class="screen">01: ################################################################################
02: #
03: # libfoo
04: #
05: ################################################################################
06:
07: LIBFOO_VERSION = 1.0
08: LIBFOO_SOURCE = libfoo-$(LIBFOO_VERSION).tar.gz
09: LIBFOO_SITE = http://www.foosoftware.org/download
10: LIBFOO_LICENSE = GPL-3.0+
11: LIBFOO_LICENSE_FILES = COPYING
12: LIBFOO_INSTALL_STAGING = YES
13: LIBFOO_CONFIG_SCRIPTS = libfoo-config
14: LIBFOO_DEPENDENCIES = host-libaaa libbbb
15:
16: define LIBFOO_BUILD_CMDS
17:     $(MAKE) $(TARGET_CONFIGURE_OPTS) -C $(@D) all
18: endef
19:
20: define LIBFOO_INSTALL_STAGING_CMDS
21:     $(INSTALL) -D -m 0755 $(@D)/libfoo.a $(STAGING_DIR)/usr/lib/libfoo.a
22:     $(INSTALL) -D -m 0644 $(@D)/foo.h $(STAGING_DIR)/usr/include/foo.h
23:     $(INSTALL) -D -m 0755 $(@D)/libfoo.so* $(STAGING_DIR)/usr/lib
24: endef
25:
26: define LIBFOO_INSTALL_TARGET_CMDS
27:     $(INSTALL) -D -m 0755 $(@D)/libfoo.so* $(TARGET_DIR)/usr/lib
28:     $(INSTALL) -d -m 0755 $(TARGET_DIR)/etc/foo.d
29: endef
30:
31: define LIBFOO_USERS
32:     foo -1 libfoo -1 * - - - LibFoo daemon
33: endef
34:
35: define LIBFOO_DEVICES
36:     /dev/foo c 666 0 0 42 0 - - -
37: endef
38:
39: define LIBFOO_PERMISSIONS
40:     /bin/foo f 4755 foo libfoo - - - - -
41: endef
42:
43: $(eval $(generic-package))</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The Makefile begins on line 7 to 11 with metadata information: the
version of the package (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_VERSION</code>), the name of the
tarball containing the package (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SOURCE</code>) (xz-ed tarball recommended)
the Internet location at which the tarball can be downloaded from
(<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code>), the license (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_LICENSE</code>) and file with the
license text (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_LICENSE_FILES</code>). All variables must start with
the same prefix, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_</code> in this case. This prefix is always the
uppercased version of the package name (see below to understand where
the package name is defined).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Makefile 从第 7 到 11 行开始包含元数据信息：软件包的版本（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_VERSION</code> ），包含软件包的 tarball 的名称（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SOURCE</code> ）（建议使用 xz-ed tarball），可以从中下载 tarball 的互联网位置（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> ），许可证（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_LICENSE</code> ）和带有许可证文本的文件（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_LICENSE_FILES</code> ）。所有变量必须以相同的前缀开始，本例中为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_</code> 。这个前缀始终是软件包名称的大写版本（请参阅下面了解软件包名称的定义位置）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 12, we specify that this package wants to install something to
the staging space. This is often needed for libraries, since they must
install header files and other development files in the staging space.
This will ensure that the commands listed in the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING_CMDS</code> variable will be executed.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 12 行，我们指定此软件包希望将某些内容安装到暂存空间。这通常对库是必要的，因为它们必须将头文件和其他开发文件安装到暂存空间中。这将确保将执行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING_CMDS</code> 变量中列出的命令。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 13, we specify that there is some fixing to be done to some
of the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo-config</em></span> files that were installed during
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING_CMDS</code> phase.
These *-config files are executable shell script files that are
located in <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(STAGING_DIR)/usr/bin</em></span> directory and are executed
by other 3rd party packages to find out the location and the linking
flags of this particular package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 13 行，我们指定在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING_CMDS</code> 阶段安装的一些 libfoo-config 文件需要进行修复。这些 *-config 文件是可执行的 shell 脚本文件，位于 $(STAGING_DIR)/usr/bin 目录中，并由其他第三方软件包执行，以查找此特定软件包的位置和链接标志。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The problem is that all these *-config files by default give wrong,
host system linking flags that are unsuitable for cross-compiling.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">问题在于所有这些 *-config 文件默认提供错误的主机系统链接标志，这些标志不适用于交叉编译。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For example:    <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-I/usr/include</em></span> instead of <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-I$(STAGING_DIR)/usr/include</em></span>
or:             <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-L/usr/lib</em></span> instead of <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-L$(STAGING_DIR)/usr/lib</em></span><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">例如：-I/usr/include 而不是 -I$(STAGING_DIR)/usr/include 或：-L/usr/lib 而不是 -L$(STAGING_DIR)/usr/lib</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">So some sed magic is done to these scripts to make them give correct
flags.
The argument to be given to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONFIG_SCRIPTS</code> is the file name(s)
of the shell script(s) needing fixing. All these names are relative to
<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(STAGING_DIR)/usr/bin</em></span> and if needed multiple names can be given.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">因此，对这些脚本进行了一些 sed 魔术操作，使它们提供正确的标志。要传递给 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONFIG_SCRIPTS</code> 的参数是需要修复的 shell 脚本的文件名(s)。所有这些名称都是相对于$(STAGING_DIR)/usr/bin 的，如果需要，可以提供多个名称。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In addition, the scripts listed in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONFIG_SCRIPTS</code> are removed
from <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(TARGET_DIR)/usr/bin</code>, since they are not needed on the target.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">另外，从 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(TARGET_DIR)/usr/bin</code> 中删除了 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONFIG_SCRIPTS</code> 中列出的脚本，因为它们在目标上不需要。</font></font></font></p><div class="example" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a id="idm3369" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a><p class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Example&nbsp;18.1.&nbsp;Config script: <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">divine</em></span> package<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 18.1。配置脚本：神圣包</font></font></font></strong></p><div class="example-contents" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Package divine installs shell script <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(STAGING_DIR)/usr/bin/divine-config</em></span>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">包神安装 shell 脚本$(STAGING_DIR)/usr/bin/divine-config。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">So its fixup would be:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">因此它的修复将是：</font></font></font></p><pre class="screen">DIVINE_CONFIG_SCRIPTS = divine-config</pre></div></div><br class="example-break" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="example" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><a id="idm3376" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a><p class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Example&nbsp;18.2.&nbsp;Config script: <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">imagemagick</em></span> package:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">示例 18.2。配置脚本：imagemagick 包：</font></font></font></strong></p><div class="example-contents" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Package imagemagick installs the following scripts:
<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(STAGING_DIR)/usr/bin/{Magick,Magick++,MagickCore,MagickWand,Wand}-config</em></span><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">软件包 imagemagick 安装以下脚本：$(STAGING_DIR)/usr/bin/{Magick,Magick++,MagickCore,MagickWand,Wand}-config</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">So it’s fixup would be:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">因此，它的修复将是：</font></font></font></p><pre class="screen">IMAGEMAGICK_CONFIG_SCRIPTS = \
   Magick-config Magick++-config \
   MagickCore-config MagickWand-config Wand-config</pre></div></div><br class="example-break" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 14, we specify the list of dependencies this package relies
on. These dependencies are listed in terms of lower-case package names,
which can be packages for the target (without the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-</code>
prefix) or packages for the host (with the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-</code>) prefix).
Buildroot will ensure that all these packages are built and installed
<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">before</em></span> the current package starts its configuration.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 14 行，我们指定了此软件包依赖的依赖项列表。这些依赖项按照小写软件包名称列出，可以是目标软件包（不带 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-</code> 前缀）或主机软件包（带 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-</code> 前缀）。Buildroot 将确保在当前软件包开始配置之前构建和安装所有这些软件包。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The rest of the Makefile, lines 16..29, defines what should be done
at the different steps of the package configuration, compilation and
installation.
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_BUILD_CMDS</code> tells what steps should be performed to
build the package. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING_CMDS</code> tells what
steps should be performed to install the package in the staging space.
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET_CMDS</code> tells what steps should be
performed to install the package in the target space.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Makefile 的其余部分，第 16 到 29 行，定义了在软件包配置、编译和安装的不同步骤中应该执行的操作。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_BUILD_CMDS</code> 指定了构建软件包时应执行的步骤。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING_CMDS</code> 指定了将软件包安装到暂存空间时应执行的步骤。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET_CMDS</code> 指定了将软件包安装到目标空间时应执行的步骤。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">All these steps rely on the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(@D)</code> variable, which
contains the directory where the source code of the package has been
extracted.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">所有这些步骤都依赖于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(@D)</code> 变量，该变量包含了已提取软件包源代码的目录。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On lines 31..33, we define a user that is used by this package (e.g.
to run a daemon as non-root) (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_USERS</code>).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 31 到 33 行，我们定义了一个由该软件包使用的用户（例如，以非 root 用户身份运行守护程序）（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_USERS</code> ）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 35..37, we define a device-node file used by this package
(<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_DEVICES</code>).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 35 到 37 行，我们定义了该软件包使用的设备节点文件（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_DEVICES</code> ）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 39..41, we define the permissions to set to specific files
installed by this package (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PERMISSIONS</code>).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 39..41 行，我们定义了要设置为此软件包安装的特定文件的权限（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PERMISSIONS</code> ）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Finally, on line 43, we call the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> function, which
generates, according to the variables defined previously, all the
Makefile code necessary to make your package working.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">最后，在第 43 行，我们调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 函数，根据先前定义的变量生成所有必要的 Makefile 代码，使您的软件包正常工作。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="generic-package-reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.6.2.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> reference<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.6.2. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 参考</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">There are two variants of the generic target. The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> macro is
used for packages to be cross-compiled for the target. The
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-generic-package</code> macro is used for host packages, natively compiled
for the host. It is possible to call both of them in a single <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code>
file: once to create the rules to generate a target
package and once to create the rules to generate a host package:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通用目标有两个变体。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 宏用于要为目标交叉编译的软件包。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-generic-package</code> 宏用于主机软件包，为主机本地编译。可以在单个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件中调用它们两次：一次用于创建生成目标软件包的规则，一次用于创建生成主机软件包的规则：</font></font></font></p><pre class="screen">$(eval $(generic-package))
$(eval $(host-generic-package))</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This might be useful if the compilation of the target package requires
some tools to be installed on the host. If the package name is
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo</code>, then the name of the package for the target is also
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo</code>, while the name of the package for the host is
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-libfoo</code>. These names should be used in the DEPENDENCIES
variables of other packages, if they depend on <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo</code> or
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-libfoo</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果编译目标软件包需要在主机上安装一些工具，则这可能很有用。如果软件包名称是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo</code> ，那么目标软件包的名称也是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo</code> ，而主机软件包的名称是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-libfoo</code> 。如果其他软件包依赖于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-libfoo</code> ，则应在其他软件包的 DEPENDENCIES 变量中使用这些名称。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The call to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> and/or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-generic-package</code> macro
<span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">must</strong></span> be at the end of the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file, after all variable definitions.
The call to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-generic-package</code> <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">must</strong></span> be after the call to
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code>, if any.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 和/或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-generic-package</code> 宏的调用必须在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件的末尾，在所有变量定义之后。对 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-generic-package</code> 的调用必须在对 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 的调用之后，如果有的话。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For the target package, the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> uses the variables defined by
the .mk file and prefixed by the uppercased package name:
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_*</code>. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-generic-package</code> uses the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_*</code> variables. For
<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">some</em></span> variables, if the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_</code> prefixed variable doesn’t
exist, the package infrastructure uses the corresponding variable
prefixed by <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_</code>. This is done for variables that are likely to
have the same value for both the target and host packages. See below
for details.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于目标软件包， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 使用由.mk 文件定义并以大写软件包名称为前缀的变量： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_*</code> 。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-generic-package</code> 使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_*</code> 变量。对于某些变量，如果不存在以 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_</code> 为前缀的变量，则软件包基础设施使用相应的以 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_</code> 为前缀的变量。这是为了那些目标软件包和主机软件包可能具有相同值的变量。详情请参见下文。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The list of variables that can be set in a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file to give metadata
information is (assuming the package name is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo</code>) :<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">可在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件中设置的变量列表，以提供元数据信息（假设软件包名称为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo</code> ）：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_VERSION</code>, mandatory, must contain the version of the
  package. Note that if <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_VERSION</code> doesn’t exist, it is
  assumed to be the same as <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_VERSION</code>. It can also be a
  revision number or a tag for packages that are fetched directly
  from their version control system. Examples:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_VERSION</code> ，强制，必须包含软件包的版本。请注意，如果 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_VERSION</code> 不存在，则假定与 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_VERSION</code> 相同。也可以是用于直接从版本控制系统获取软件包的修订号或标记。示例：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
a version for a release tarball: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_VERSION = 0.1.2</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一个发布 tarball 的版本： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_VERSION = 0.1.2</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
a sha1 for a git tree: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_VERSION = cb9d6aa9429e838f0e54faa3d455bcbab5eef057</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一个 git 树的 sha1： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_VERSION = cb9d6aa9429e838f0e54faa3d455bcbab5eef057</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
a tag for a git tree <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_VERSION = v0.1.2</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一个 git 树的标签： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_VERSION = v0.1.2</code> </font></font></font>
</p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note:&nbsp;</strong>Using a branch name as <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_VERSION</code> is not supported, because it does
not and can not work as people would expect it should:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意：不支持将分支名称用作 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_VERSION</code> ，因为它不会按照人们期望的方式工作：</font></font></font></p><div class="orderedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ol class="orderedlist" type="1" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
due to local caching, Buildroot will not re-fetch the repository,
     so people who expect to be able to follow the remote repository
     would be quite surprised and disappointed;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">由于本地缓存，Buildroot 不会重新获取存储库，因此那些希望能够跟踪远程存储库的人可能会感到非常惊讶和失望；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
because two builds can never be perfectly simultaneous, and because
     the remote repository may get new commits on the branch anytime,
     two users, using the same Buildroot tree and building the same
     configuration, may get different source, thus rendering the build
     non reproducible, and people would be quite surprised and
     disappointed.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">因为两个构建永远不可能完全同时进行，而且远程存储库随时可能在分支上获得新的提交，因此使用相同的 Buildroot 树和构建相同配置的两个用户可能会获得不同的源代码，从而使构建无法重现，人们可能会感到非常惊讶和失望。</font></font></font></li></ol></div></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SOURCE</code> may contain the name of the tarball of the package,
  which Buildroot will use to download the tarball from
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code>. If <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_SOURCE</code> is not specified, it defaults
  to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SOURCE</code>. If none are specified, then the value is assumed
  to be <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo-$(LIBFOO_VERSION).tar.gz</code>.
  Example: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SOURCE = foobar-$(LIBFOO_VERSION).tar.bz2</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SOURCE</code> 可能包含软件包的 tarball 名称，Buildroot 将使用它从 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> 下载 tarball 。如果未指定 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_SOURCE</code> ，则默认为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SOURCE</code> 。如果未指定任何内容，则假定该值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo-$(LIBFOO_VERSION).tar.gz</code> 。示例： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SOURCE = foobar-$(LIBFOO_VERSION).tar.bz2</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PATCH</code> may contain a space-separated list of patch file
  names, that Buildroot will download and apply to the package source
  code. If an entry contains <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">://</code>, then Buildroot will assume it is a
  full URL and download the patch from this location. Otherwise,
  Buildroot will assume that the patch should be downloaded from
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code>. If <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_PATCH</code> is not specified, it defaults
  to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PATCH</code>. Note that patches that are included in Buildroot
  itself use a different mechanism: all files of the form
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*.patch</code> present in the package directory inside
  Buildroot will be applied to the package after extraction (see
  <a class="link" href="#patch-policy" title="Chapter&nbsp;19.&nbsp;Patching a package" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">patching a package</a>). Finally, patches listed in
  the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PATCH</code> variable are applied <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">before</em></span> the patches stored
  in the Buildroot package directory.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PATCH</code> 可能包含一个空格分隔的补丁文件名列表，Buildroot 将下载并应用于软件包源代码。如果条目包含 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">://</code> ，则 Buildroot 将假定它是完整的 URL 并从此位置下载补丁。否则，Buildroot 将假定应从 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> 下载补丁。如果未指定 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_PATCH</code> ，则默认为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PATCH</code> 。请注意，Buildroot 自身包含的补丁使用不同的机制：Buildroot 内部软件包目录中存在的形式为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*.patch</code> 的所有文件将在提取后应用于软件包（请参阅应用补丁到软件包）。最后，在 Buildroot 软件包目录中存储的补丁之前应用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PATCH</code> 变量中列出的补丁。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> provides the location of the package, which can be a
  URL or a local filesystem path. HTTP, FTP and SCP are supported URL
  types for retrieving package tarballs. In these cases don’t include a
  trailing slash: it will be added by Buildroot between the directory
  and the filename as appropriate. Git, Subversion, Mercurial,
  and Bazaar are supported URL types for retrieving packages directly
  from source code management systems. There is a helper function to make
  it easier to download source tarballs from GitHub (refer to
  <a class="xref" href="#github-download-url" title="18.25.4.&nbsp;How to add a package from GitHub" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;18.25.4, “How to add a package from GitHub”</a> for details). A filesystem path may be used
  to specify either a tarball or a directory containing the package
  source code. See <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE_METHOD</code> below for more details on how
  retrieval works.
  Note that SCP URLs should be of the form
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">scp://[user@]host:filepath</code>, and that filepath is relative to the
  user’s home directory, so you may want to prepend the path with a
  slash for absolute paths:
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">scp://[user@]host:/absolutepath</code>. The same goes for SFTP URLs.
  If <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_SITE</code> is not specified, it defaults to
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code>.
  Examples:
    <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE=http://www.libfoosoftware.org/libfoo</code>
    <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE=http://svn.xiph.org/trunk/Tremor</code>
    <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE=/opt/software/libfoo.tar.gz</code>
    <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE=$(TOPDIR)/../src/libfoo</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code>
 提供了软件包的位置，可以是 URL 或本地文件系统路径。支持使用 HTTP、FTP 和 SCP 作为 URL 类型来检索软件包 
tarballs。在这些情况下，不要包含尾部斜杠：Buildroot 
会根据需要在目录和文件名之间添加。Git、Subversion、Mercurial 和 Bazaar 是支持的 URL 
类型，可直接从源代码管理系统中检索软件包。有一个辅助函数可使从 GitHub 下载源 tarballs 更容易（有关详细信息，请参阅第 
18.25.4 节“如何从 GitHub 添加软件包”）。文件系统路径可用于指定 tarball 
或包含软件包源代码的目录。有关检索工作原理的更多详细信息，请参见 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE_METHOD</code> 。请注意，SCP URL 应为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">scp://[user@]host:filepath</code> 的形式，并且 filepath 是相对于用户的主目录的，因此您可能需要在绝对路径前加上斜杠： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">scp://[user@]host:/absolutepath</code> 。SFTP URL 也是如此。如果未指定 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_SITE</code> ，则默认为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> 。示例： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE=http://www.libfoosoftware.org/libfoo</code> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE=http://svn.xiph.org/trunk/Tremor</code> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE=/opt/software/libfoo.tar.gz</code> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE=$(TOPDIR)/../src/libfoo</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_DL_OPTS</code> is a space-separated list of additional options to
  pass to the downloader. Useful for retrieving documents with
  server-side checking for user logins and passwords, or to use a proxy.
  All download methods valid for <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE_METHOD</code> are supported;
  valid options depend on the download method (consult the man page
  for the respective download utilities).
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_DL_OPTS</code> 是传递给下载器的一组以空格分隔的附加选项。用于检索具有服务器端检查用户登录和密码或使用代理的文档。支持所有适用于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE_METHOD</code> 的下载方法；有效选项取决于下载方法（请参阅相应下载实用程序的 man 页面）。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_EXTRA_DOWNLOADS</code> is a space-separated list of additional
  files that Buildroot should download. If an entry contains <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">://</code>
  then Buildroot will assume it is a complete URL and will download
  the file using this URL. Otherwise, Buildroot will assume the file
  to be downloaded is located at <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code>. Buildroot will not do
  anything with those additional files, except download them: it will
  be up to the package recipe to use them from <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(LIBFOO_DL_DIR)</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_EXTRA_DOWNLOADS</code> 是 Buildroot 应下载的一组以空格分隔的附加文件。如果条目包含 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">://</code> ，则 Buildroot 将假定它是完整的 URL，并将使用此 URL 下载文件。否则，Buildroot 将假定要下载的文件位于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> 。Buildroot 不会对这些附加文件执行任何操作，除了下载它们：将由软件包配方使用它们从 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(LIBFOO_DL_DIR)</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE_METHOD</code> determines the method used to fetch or copy the
  package source code. In many cases, Buildroot guesses the method
  from the contents of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> and setting <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE_METHOD</code>
  is unnecessary. When <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_SITE_METHOD</code> is not specified, it
  defaults to the value of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE_METHOD</code>.
  The possible values of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE_METHOD</code> are:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE_METHOD</code> 确定用于获取或复制软件包源代码的方法。在许多情况下，Buildroot 会从 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> 的内容猜测方法，并设置 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE_METHOD</code> 是不必要的。当未指定 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_SITE_METHOD</code> 时，默认为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE_METHOD</code> 的值。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE_METHOD</code> 的可能值为：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">wget</code> for normal FTP/HTTP downloads of tarballs. Used by
     default when <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> begins with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">http://</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">https://</code> or
     <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ftp://</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">wget</code> 用于普通 FTP/HTTP 下载 tarballs。当 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> 以 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">http://</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">https://</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ftp://</code> 开头时，默认使用。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">scp</code> for downloads of tarballs over SSH with scp. Used by
     default when <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> begins with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">scp://</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">scp</code> 用于通过 scp 使用 SSH 下载 tarballs。当 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> 以 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">scp://</code> 开头时，默认使用。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sftp</code> for downloads of tarballs over SSH with sftp. Used by
     default when <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> begins with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sftp://</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sftp</code> 用于通过 sftp 使用 SSH 下载 tarballs。当 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> 以 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sftp://</code> 开头时，默认使用。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">svn</code> for retrieving source code from a Subversion repository.
     Used by default when <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> begins with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">svn://</code>. When a
     <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">http://</code> Subversion repository URL is specified in
     <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code>, one <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">must</em></span> specify <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE_METHOD=svn</code>.
     Buildroot performs a checkout which is preserved as a tarball in
     the download cache; subsequent builds use the tarball instead of
     performing another checkout.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">svn</code> 用于从 Subversion 存储库检索源代码。当 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> 以 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">svn://</code> 开头时，默认使用。当在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> 中指定了 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">http://</code> Subversion 存储库 URL 时，必须指定 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE_METHOD=svn</code> 。Buildroot 执行检出操作，将其保留为下载缓存中的 tarball；后续构建使用 tarball 而不是执行另一个检出操作。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cvs</code> for retrieving source code from a CVS repository.
     Used by default when <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> begins with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cvs://</code>.
     The downloaded source code is cached as with the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">svn</code> method.
     Anonymous pserver mode is assumed otherwise explicitly defined
     on <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code>. Both
     <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE=cvs://libfoo.net:/cvsroot/libfoo</code> and
     <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE=cvs://:ext:libfoo.net:/cvsroot/libfoo</code>
     are accepted, on the former anonymous pserver access mode is
     assumed.
     <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">must</em></span> contain the source URL as well as the remote
     repository directory. The module is the package name.
     <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_VERSION</code> is <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mandatory</em></span> and <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">must</em></span> be a tag, a branch, or
     a date (e.g. "2014-10-20", "2014-10-20 13:45", "2014-10-20
     13:45+01" see "man cvs" for further details).
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cvs</code> 用于从 CVS 存储库检索源代码。当 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> 以 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cvs://</code> 开头时，默认使用。下载的源代码与 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">svn</code> 方法一样被缓存。否则，假定为匿名 pserver 模式，或在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> 上明确定义。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE=cvs://libfoo.net:/cvsroot/libfoo</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE=cvs://:ext:libfoo.net:/cvsroot/libfoo</code> 都被接受，前者假定为匿名 pserver 访问模式。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> 必须包含源 URL 以及远程存储库目录。模块是软件包名称。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_VERSION</code> 是必需的，必须是标签、分支或日期（例如“2014-10-20”，“2014-10-20 13:45”，“2014-10-20 13:45+01”参见“man cvs”获取更多详细信息）。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git</code> for retrieving source code from a Git repository. Used by
     default when <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> begins with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git://</code>. The downloaded
     source code is cached as with the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">svn</code> method.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git</code> 用于从 Git 存储库检索源代码。当 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> 以 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git://</code> 开头时，默认使用。下载的源代码与 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">svn</code> 方法一样被缓存。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">hg</code> for retrieving source code from a Mercurial repository. One
     <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">must</em></span> specify <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE_METHOD=hg</code> when <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code>
     contains a Mercurial repository URL. The downloaded source code
     is cached as with the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">svn</code> method.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">从 Mercurial 存储库检索源代码的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">hg</code> 。当 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> 包含 Mercurial 存储库 URL 时，必须指定 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE_METHOD=hg</code> 。下载的源代码与 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">svn</code> 方法一样被缓存。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bzr</code> for retrieving source code from a Bazaar repository. Used
     by default when <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> begins with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bzr://</code>. The
     downloaded source code is cached as with the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">svn</code> method.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">从 Bazaar 存储库检索源代码的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bzr</code> 。当 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> 以 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bzr://</code> 开头时，默认使用。下载的源代码与 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">svn</code> 方法一样被缓存。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">file</code> for a local tarball. One should use this when
     <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> specifies a package tarball as a local filename.
     Useful for software that isn’t available publicly or in version
     control.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">用于本地 tarball 的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">file</code> 。当 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> 指定软件包 tarball 作为本地文件名时，应使用此选项。适用于公开不可用或不在版本控制中的软件。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">local</code> for a local source code directory. One should use this
     when <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> specifies a local directory path containing
     the package source code. Buildroot copies the contents of the
     source directory into the package’s build directory. Note that
     for <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">local</code> packages, no patches are applied. If you need to
     still patch the source code, use <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_POST_RSYNC_HOOKS</code>, see
     <a class="xref" href="#hooks-rsync" title="18.23.1.&nbsp;Using the POST_RSYNC hook" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;18.23.1, “Using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">POST_RSYNC</code> hook”</a>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">local</code> 用于本地源代码目录。当 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> 指定包含软件包源代码的本地目录路径时，应使用此选项。Buildroot 将源目录的内容复制到软件包的构建目录中。请注意，对于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">local</code> 软件包，不会应用补丁。如果仍然需要对源代码打补丁，请使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_POST_RSYNC_HOOKS</code> ，请参阅第 18.23.1 节“使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">POST_RSYNC</code> 挂钩”。</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_GIT_SUBMODULES</code> can be set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> to create an archive
  with the git submodules in the repository.  This is only available
  for packages downloaded with git (i.e. when
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE_METHOD=git</code>).  Note that we try not to use such git
  submodules when they contain bundled libraries, in which case we
  prefer to use those libraries from their own package.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_GIT_SUBMODULES</code> 可以设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> ，以创建包含存储库中 git 子模块的存档。这仅适用于使用 git 下载的软件包（即当 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE_METHOD=git</code> 时）。请注意，当 git 子模块包含捆绑库时，我们尽量不使用这些 git 子模块，在这种情况下，我们更喜欢从其自己的软件包中使用这些库。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_GIT_LFS</code> should be set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> if the Git repository uses
  Git LFS to store large files out of band.  This is only available for
  packages downloaded with git (i.e. when <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE_METHOD=git</code>).
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果 Git 存储库使用 Git LFS 存储大文件，则应将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_GIT_LFS</code> 设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> 。这仅适用于使用 git 下载的软件包（即当 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE_METHOD=git</code> 时）。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SVN_EXTERNALS</code> can be set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> to create an archive with
  the svn external references. This is only available for packages
  downloaded with subversion.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SVN_EXTERNALS</code> 可设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> 以创建带有 svn 外部引用的存档。这仅适用于使用 subversion 下载的软件包。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_STRIP_COMPONENTS</code> is the number of leading components
  (directories) that tar must strip from file names on extraction.
  The tarball for most packages has one leading component named
  "&lt;pkg-name&gt;-&lt;pkg-version&gt;", thus Buildroot passes
  --strip-components=1 to tar to remove it.
  For non-standard packages that don’t have this component, or
  that have more than one leading component to strip, set this
  variable with the value to be passed to tar. Default: 1.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_STRIP_COMPONENTS</code>
 是 tar 在提取文件名时必须剥离的前导组件（目录）的数量。大多数软件包的 tarball 具有一个名为 "-" 的前导组件，因此 
Buildroot 传递 --strip-components=1 给 tar 
以将其删除。对于没有此组件或有多个要剥离的前导组件的非标准软件包，请将此变量设置为要传递给 tar 的值。默认值：1。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_EXCLUDES</code> is a space-separated list of patterns to exclude
  when extracting the archive. Each item from that list is passed as
  a tar’s <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--exclude</code> option. By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_EXCLUDES</code> 是在提取存档时要排除的模式的空格分隔列表。该列表中的每个项目都作为 tar 的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--exclude</code> 选项传递。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_DEPENDENCIES</code> lists the dependencies (in terms of package
  name) that are required for the current target package to
  compile. These dependencies are guaranteed to be compiled and
  installed before the configuration of the current package starts.
  However, modifications to configuration of these dependencies will
  not force a rebuild of the current package. In a similar way,
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_DEPENDENCIES</code> lists the dependencies for the current
  host package.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_DEPENDENCIES</code> 列出了（按软件包名称）编译当前目标软件包所需的依赖关系。这些依赖关系在当前软件包的配置开始之前保证已经编译和安装。但是，对这些依赖关系的配置进行修改不会强制重新构建当前软件包。类似地， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_DEPENDENCIES</code> 列出了当前主机软件包的依赖关系。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_EXTRACT_DEPENDENCIES</code> lists the dependencies (in terms of
  package name) that are required for the current target package to be
  extracted. These dependencies are guaranteed to be compiled and
  installed before the extract step of the current package
  starts. This is only used internally by the package infrastructure,
  and should typically not be used directly by packages.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_EXTRACT_DEPENDENCIES</code> 列出了（按软件包名称）提取当前目标软件包所需的依赖关系。这些依赖关系在当前软件包的提取步骤开始之前保证已经编译和安装。这仅在软件包基础设施内部使用，通常不应直接由软件包使用。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PATCH_DEPENDENCIES</code> lists the dependencies (in terms of
  package name) that are required for the current package to be
  patched. These dependencies are guaranteed to be extracted and
  patched (but not necessarily built) before the current package is
  patched. In a similar way, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_PATCH_DEPENDENCIES</code> lists
  the dependencies for the current host package.
  This is seldom used; usually, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_DEPENDENCIES</code> is what you
  really want to use.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PATCH_DEPENDENCIES</code> 列出了（按软件包名称）修补当前软件包所需的依赖关系。这些依赖关系在当前软件包被修补之前保证已经被提取和修补（但不一定构建）。类似地， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_PATCH_DEPENDENCIES</code> 列出了当前主机软件包的依赖关系。这很少使用；通常， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_DEPENDENCIES</code> 才是您真正想要使用的。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PROVIDES</code> lists all the virtual packages <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo</code> is an
  implementation of. See <a class="xref" href="#virtual-package-tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;18.12, “Infrastructure for virtual packages”</a>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PROVIDES</code> 列出所有虚拟包 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo</code> 的实现。请参阅第 18.12 节“虚拟包基础设施”。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING</code> can be set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code> (default). If
  set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code>, then the commands in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING_CMDS</code>
  variables are executed to install the package into the staging
  directory.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING</code> 可以设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code> （默认）。如果设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> ，则在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING_CMDS</code> 变量中的命令将被执行以将软件包安装到暂存目录中。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET</code> can be set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> (default) or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code>. If
  set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code>, then the commands in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET_CMDS</code>
  variables are executed to install the package into the target
  directory.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET</code> 可以设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> （默认）或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code> 。如果设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> ，则在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET_CMDS</code> 变量中的命令将被执行以将软件包安装到目标目录中。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_IMAGES</code> can be set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code> (default). If
  set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code>, then the commands in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_IMAGES_CMDS</code>
  variable are executed to install the package into the images
  directory.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_IMAGES</code> 可设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code> （默认）。如果设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> ，则执行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_IMAGES_CMDS</code> 变量中的命令以将软件包安装到 images 目录中。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONFIG_SCRIPTS</code> lists the names of the files in
  <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(STAGING_DIR)/usr/bin</em></span> that need some special fixing to make them
  cross-compiling friendly. Multiple file names separated by space can
  be given and all are relative to <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(STAGING_DIR)/usr/bin</em></span>. The files
  listed in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONFIG_SCRIPTS</code> are also removed from
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(TARGET_DIR)/usr/bin</code> since they are not needed on the target.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONFIG_SCRIPTS</code> 列出$(STAGING_DIR)/usr/bin 中需要进行一些特殊修复以使其适用于交叉编译的文件名称。可以给出多个以空格分隔的文件名，所有文件名都是相对于$(STAGING_DIR)/usr/bin 的。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONFIG_SCRIPTS</code> 中列出的文件也会从 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(TARGET_DIR)/usr/bin</code> 中删除，因为它们在目标设备上不需要。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_DEVICES</code> lists the device files to be created by Buildroot
  when using the static device table. The syntax to use is the
  makedevs one. You can find some documentation for this syntax in the
  <a class="xref" href="#makedev-syntax" title="Chapter&nbsp;25.&nbsp;Makedev syntax documentation" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Chapter&nbsp;25, <em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Makedev syntax documentation</em></a>. This variable is optional.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_DEVICES</code> 列出 Buildroot 在使用静态设备表时要创建的设备文件。要使用的语法是 makedevs 语法。您可以在第 25 章“Makedev 语法文档”中找到有关此语法的一些文档。此变量是可选的。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PERMISSIONS</code> lists the changes of permissions to be done at
  the end of the build process. The syntax is once again the makedevs one.
  You can find some documentation for this syntax in the <a class="xref" href="#makedev-syntax" title="Chapter&nbsp;25.&nbsp;Makedev syntax documentation" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Chapter&nbsp;25, <em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Makedev syntax documentation</em></a>.
  This variable is optional.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PERMISSIONS</code> 列出了在构建过程结束时要执行的权限更改。 语法再次是 makedevs 的语法。 您可以在第 25 章“Makedev 语法文档”中找到有关此语法的一些文档。 此变量是可选的。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_USERS</code> lists the users to create for this package, if it installs
  a program you want to run as a specific user (e.g. as a daemon, or as a
  cron-job). The syntax is similar in spirit to the makedevs one, and is
  described in the <a class="xref" href="#makeuser-syntax" title="Chapter&nbsp;26.&nbsp;Makeusers syntax documentation" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Chapter&nbsp;26, <em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Makeusers syntax documentation</em></a>. This variable is optional.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_USERS</code> 列出了要为此软件包创建的用户，如果它安装了您希望以特定用户身份运行的程序（例如作为守护程序或作为 cron 作业）。 语法在精神上类似于 makedevs，并在第 26 章“Makeusers 语法文档”中进行了描述。 此变量是可选的。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_LICENSE</code> defines the license (or licenses) under which the package
  is released.
  This name will appear in the manifest file produced by <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make legal-info</code>.
  If the license appears in <a class="ulink" href="https://spdx.org/licenses/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">the SPDX License List</a>,
  use the SPDX short identifier to make the manifest file uniform.
  Otherwise, describe the license in a precise and concise way, avoiding
  ambiguous names such as <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BSD</code> which actually name a family of licenses.
  This variable is optional. If it is not defined, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">unknown</code> will appear in
  the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">license</code> field of the manifest file for this package.
  The expected format for this variable must comply with the following rules:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_LICENSE</code> 定义了软件包发布的许可证（或许可证）。 此名称将出现在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make legal-info</code> 生成的清单文件中。 如果许可证出现在 SPDX 许可证列表中，请使用 SPDX 短标识符使清单文件统一。 否则，请以准确简洁的方式描述许可证，避免诸如 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BSD</code> 之类的模糊名称，实际上是许可证系列的名称。 此变量是可选的。 如果未定义， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">unknown</code> 将出现在此软件包的清单文件的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">license</code> 字段中。 此变量的预期格式必须符合以下规则：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
If different parts of the package are released under different
     licenses, then <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">comma</code> separate licenses (e.g. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><code class="literal">LIBFOO_LICENSE =
     GPL-2.0+, LGPL-2.1+</code></code>). If there is clear distinction between which
     component is licensed under what license, then annotate the license
     with that component, between parenthesis (e.g. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><code class="literal">LIBFOO_LICENSE =
     GPL-2.0+ (programs), LGPL-2.1+ (libraries)</code></code>).
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果软件包的不同部分使用不同的许可证发布，则 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">comma</code> 单独许可证（例如 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><code class="literal">LIBFOO_LICENSE =
     GPL-2.0+, LGPL-2.1+</code></code> ）。如果清楚地区分了哪个组件使用了什么许可证，则在括号内注明该组件的许可证（例如 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><code class="literal">LIBFOO_LICENSE =
     GPL-2.0+ (programs), LGPL-2.1+ (libraries)</code></code> ）。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
If some licenses are conditioned on a sub-option being enabled, append
     the conditional licenses with a comma (e.g.: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_LICENSE += , GPL-2.0+
     (programs)</code>); the infrastructure will internally remove the space before
     the comma.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果某些许可证取决于启用子选项，则将有条件的许可证附加上逗号（例如： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_LICENSE += , GPL-2.0+
     (programs)</code> ）；基础设施将在逗号之前内部删除空格。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
If the package is dual licensed, then separate licenses with the
     <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">or</code> keyword (e.g. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><code class="literal">LIBFOO_LICENSE = AFL-2.1 or GPL-2.0+</code></code>).
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果软件包是双许可的，则使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">or</code> 关键字分隔许可证（例如 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><code class="literal">LIBFOO_LICENSE = AFL-2.1 or GPL-2.0+</code></code> ）。</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_LICENSE_FILES</code> is a space-separated list of files in the package
  tarball that contain the license(s) under which the package is released.
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make legal-info</code> copies all of these files in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">legal-info</code> directory.
  See <a class="xref" href="#legal-info" title="Chapter&nbsp;13.&nbsp;Legal notice and licensing" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Chapter&nbsp;13, <em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Legal notice and licensing</em></a> for more information.
  This variable is optional. If it is not defined, a warning will be produced
  to let you know, and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">not saved</code> will appear in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">license files</code> field
  of the manifest file for this package.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_LICENSE_FILES</code> 是包 tarball 中包含的许可证下发布的文件的空格分隔列表。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make legal-info</code> 将所有这些文件复制到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">legal-info</code> 目录中。有关更多信息，请参阅第 13 章《法律声明和许可》。此变量是可选的。如果未定义，将生成警告以通知您，并且 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">not saved</code> 将出现在此软件包的清单文件的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">license files</code> 字段中。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_ACTUAL_SOURCE_TARBALL</code> only applies to packages whose
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> / <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SOURCE</code> pair points to an archive that does
  not actually contain source code, but binary code. This a very
  uncommon case, only known to apply to external toolchains which come
  already compiled, although theoretically it might apply to other
  packages. In such cases a separate tarball is usually available with
  the actual source code. Set <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_ACTUAL_SOURCE_TARBALL</code> to the
  name of the actual source code archive and Buildroot will download
  it and use it when you run <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make legal-info</code> to collect
  legally-relevant material.  Note this file will not be downloaded
  during regular builds nor by <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make source</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_ACTUAL_SOURCE_TARBALL</code> 仅适用于其 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> / <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SOURCE</code> 对指向实际不包含源代码而是二进制代码的存档的软件包。这是一种非常罕见的情况，只知道适用于已经编译的外部工具链，尽管从理论上讲，它可能适用于其他软件包。在这种情况下，通常会提供一个单独的 tarball，其中包含实际的源代码。将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_ACTUAL_SOURCE_TARBALL</code> 设置为实际源代码存档的名称，Buildroot 将在运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make legal-info</code> 以收集与法律相关的材料时下载并使用它。请注意，此文件不会在常规构建期间下载，也不会被 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make source</code> 下载。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_ACTUAL_SOURCE_SITE</code> provides the location of the actual
  source tarball. The default value is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code>, so you don’t
  need to set this variable if the binary and source archives are
  hosted on the same directory.  If <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_ACTUAL_SOURCE_TARBALL</code> is
  not set, it doesn’t make sense to define
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_ACTUAL_SOURCE_SITE</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_ACTUAL_SOURCE_SITE</code> 提供实际源代码包的位置。默认值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> ，因此如果二进制文件和源代码存档托管在同一目录中，则无需设置此变量。如果未设置 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_ACTUAL_SOURCE_TARBALL</code> ，则定义 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_ACTUAL_SOURCE_SITE</code> 就没有意义。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_REDISTRIBUTE</code> can be set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> (default) or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code> to indicate if
  the package source code is allowed to be redistributed. Set it to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code> for
  non-opensource packages: Buildroot will not save the source code for this
  package when collecting the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">legal-info</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_REDISTRIBUTE</code> 可以设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> （默认）或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code> ，以指示是否允许重新分发软件包源代码。将其设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code> 以用于非开源软件包：在收集 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">legal-info</code> 时，Buildroot 将不保存此软件包的源代码。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_FLAT_STACKSIZE</code> defines the stack size of an application built into
  the FLAT binary format. The application stack size on the NOMMU architecture
  processors can’t be enlarged at run time. The default stack size for the
  FLAT binary format is only 4k bytes. If the application consumes more stack,
  append the required number here.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_FLAT_STACKSIZE</code> 定义构建为 FLAT 二进制格式的应用程序的堆栈大小。NOMMU 架构处理器上的应用程序堆栈大小无法在运行时扩展。FLAT 二进制格式的默认堆栈大小仅为 4k 字节。如果应用程序使用更多堆栈，请在此处添加所需的数量。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_BIN_ARCH_EXCLUDE</code> is a space-separated list of paths (relative
  to the target directory) to ignore when checking that the package
  installs correctly cross-compiled binaries. You seldom need to set this
  variable, unless the package installs binary blobs outside the default
  locations, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/lib/firmware</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/usr/lib/firmware</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/lib/modules</code>,
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/usr/lib/modules</code>, and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/usr/share</code>, which are automatically excluded.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_BIN_ARCH_EXCLUDE</code> 是一个空格分隔的路径列表（相对于目标目录），用于在检查软件包是否正确安装交叉编译二进制文件时要忽略的路径。除非软件包在默认位置之外安装二进制文件块，否则很少需要设置此变量， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/lib/firmware</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/usr/lib/firmware</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/lib/modules</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/usr/lib/modules</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/usr/share</code> 会自动被排除。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_IGNORE_CVES</code> is a space-separated list of CVEs that tells
  Buildroot CVE tracking tools which CVEs should be ignored for this
  package. This is typically used when the CVE is fixed by a patch in
  the package, or when the CVE for some reason does not affect the
  Buildroot package. A Makefile comment must always precede the
  addition of a CVE to this variable. Example:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_IGNORE_CVES</code>
 是一个空格分隔的 CVE 列表，告诉 Buildroot CVE 跟踪工具应忽略哪些 CVE 与此软件包有关。当 CVE 
通过软件包中的补丁修复，或者由于某种原因 CVE 不影响 Buildroot 软件包时，通常会使用此选项。在将 CVE 
添加到此变量之前，必须始终添加一个 Makefile 注释。示例：</font></font></font></p><pre class="screen"># 0001-fix-cve-2020-12345.patch
LIBFOO_IGNORE_CVES += CVE-2020-12345
# only when built with libbaz, which Buildroot doesn't support
LIBFOO_IGNORE_CVES += CVE-2020-54321</pre></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<a id="cpe-id" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CPE_ID_*</code> variables is a set of variables that allows the
  package to define its <a class="ulink" href="https://nvd.nist.gov/products/cpe" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">CPE
  identifier</a>. The available variables are:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CPE_ID_*</code> 变量是一组变量，允许软件包定义其 CPE 标识符。可用的变量有：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CPE_ID_VALID</code>, if set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code>, specifies that the default
   values for each of the following variables is appropriate, and
   generates a valid CPE ID.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CPE_ID_VALID</code> ，如果设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> ，则指定每个以下变量的默认值是适当的，并生成有效的 CPE ID。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CPE_ID_PREFIX</code>, specifies the prefix of the CPE identifier,
   i.e the first three fields. When not defined, the default value is
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cpe:2.3:a</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CPE_ID_PREFIX</code> ，指定 CPE 标识符的前缀，即前三个字段。未定义时，默认值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cpe:2.3:a</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CPE_ID_VENDOR</code>, specifies the vendor part of the CPE
   identifier. When not defined, the default value is
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkgname&gt;_project</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CPE_ID_VENDOR</code> ，指定 CPE 标识符的供应商部分。未定义时，默认值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkgname&gt;_project</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CPE_ID_PRODUCT</code>, specifies the product part of the CPE
   identifier. When not defined, the default value is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkgname&gt;</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CPE_ID_PRODUCT</code> ，指定 CPE 标识符的产品部分。如果未定义，则默认值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkgname&gt;</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CPE_ID_VERSION</code>, specifies the version part of the CPE
   identifier. When not defined the default value is
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(LIBFOO_VERSION)</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CPE_ID_VERSION</code> ，指定 CPE 标识符的版本部分。如果未定义，则默认值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(LIBFOO_VERSION)</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CPE_ID_UPDATE</code> specifies the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">update</em></span> part of the CPE
   identifier. When not defined the default value is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CPE_ID_UPDATE</code> 指定 CPE 标识符的更新部分。如果未定义，则默认值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*</code> 。</font></font></font></li></ul></div><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If any of those variables is defined, then the generic package
infrastructure assumes the package provides valid CPE information. In
this case, the generic package infrastructure will define
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CPE_ID</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果其中任何一个变量被定义，则通用软件包基础设施会假定软件包提供有效的 CPE 信息。在这种情况下，通用软件包基础设施将定义 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CPE_ID</code> 。</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For a host package, if its <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CPE_ID_*</code> variables are not
defined, it inherits the value of those variables from the
corresponding target package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于主机软件包，如果其 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CPE_ID_*</code> 变量未定义，则从相应目标软件包继承这些变量的值。</font></font></font></p></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The recommended way to define these variables is to use the following
syntax:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">定义这些变量的推荐方法是使用以下语法：</font></font></font></p><pre class="screen">LIBFOO_VERSION = 2.32</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Now, the variables that define what should be performed at the
different steps of the build process.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">现在，定义构建过程不同步骤应执行的变量。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_EXTRACT_CMDS</code> lists the actions to be performed to extract
  the package. This is generally not needed as tarballs are
  automatically handled by Buildroot. However, if the package uses a
  non-standard archive format, such as a ZIP or RAR file, or has a
  tarball with a non-standard organization, this variable allows to
  override the package infrastructure default behavior.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_EXTRACT_CMDS</code>
 列出要执行的操作以提取软件包。一般情况下不需要，因为 tarballs 会被 Buildroot 
自动处理。但是，如果软件包使用非标准的存档格式，比如 ZIP 或 RAR 文件，或者 tarball 
具有非标准的组织，此变量允许覆盖软件包基础设施的默认行为。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONFIGURE_CMDS</code> lists the actions to be performed to
  configure the package before its compilation.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONFIGURE_CMDS</code> 列出要在编译之前对软件包进行配置的操作。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_BUILD_CMDS</code> lists the actions to be performed to
  compile the package.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_BUILD_CMDS</code> 列出要执行的操作以编译软件包。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_INSTALL_CMDS</code> lists the actions to be performed
  to install the package, when the package is a host package. The
  package must install its files to the directory given by
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(HOST_DIR)</code>. All files, including development files such as
  headers should be installed, since other packages might be compiled
  on top of this package.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_INSTALL_CMDS</code> 列出要执行的操作以安装软件包，当软件包是主机软件包时。软件包必须将其文件安装到由 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(HOST_DIR)</code> 给出的目录中。应安装所有文件，包括开发文件（如头文件），因为其他软件包可能会在此软件包之上进行编译。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET_CMDS</code> lists the actions to be
  performed to install the package to the target directory, when the
  package is a target package. The package must install its files to
  the directory given by <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(TARGET_DIR)</code>. Only the files required for
  <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">execution</em></span> of the package have to be
  installed. Header files, static libraries and documentation will be
  removed again when the target filesystem is finalized.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET_CMDS</code> 列出要执行的操作以将软件包安装到目标目录，当软件包是目标软件包时。软件包必须将其文件安装到由 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(TARGET_DIR)</code> 给出的目录中。只需安装软件包执行所需的文件。当目标文件系统最终确定时，头文件、静态库和文档将被删除。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING_CMDS</code> lists the actions to be
  performed to install the package to the staging directory, when the
  package is a target package. The package must install its files to
  the directory given by <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(STAGING_DIR)</code>. All development files
  should be installed, since they might be needed to compile other
  packages.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING_CMDS</code> 列出了在将软件包安装到暂存目录时要执行的操作，当软件包是目标软件包时。软件包必须将其文件安装到由 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(STAGING_DIR)</code> 给出的目录中。应安装所有开发文件，因为它们可能需要用于编译其他软件包。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_IMAGES_CMDS</code> lists the actions to be performed to
  install the package to the images directory, when the package is a
  target package. The package must install its files to the directory
  given by <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(BINARIES_DIR)</code>. Only files that are binary images (aka
  images) that do not belong in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TARGET_DIR</code> but are necessary
  for booting the board should be placed here. For example, a package
  should utilize this step if it has binaries which would be similar
  to the kernel image, bootloader or root filesystem images.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_IMAGES_CMDS</code> 列出了在将软件包安装到图像目录时要执行的操作，当软件包是目标软件包时。软件包必须将其文件安装到由 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(BINARIES_DIR)</code> 给出的目录中。只能将二进制图像（也称为图像）文件放在这里，这些文件不属于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TARGET_DIR</code> ，但对于引导板是必要的。例如，如果软件包具有类似于内核映像、引导加载程序或根文件系统映像的二进制文件，则应使用此步骤。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_INIT_SYSV</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_INIT_OPENRC</code> and
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_INIT_SYSTEMD</code> list the actions to install init
  scripts either for the systemV-like init systems (busybox,
  sysvinit, etc.), openrc or for the systemd units. These commands
  will be run only when the relevant init system is installed (i.e.
  if systemd is selected as the init system in the configuration,
  only <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_INIT_SYSTEMD</code> will be run). The only exception
  is when openrc is chosen as init system and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_INIT_OPENRC</code>
  has not been set, in such situation <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_INIT_SYSV</code> will
  be called, since openrc supports sysv init scripts.
  When systemd is used as the init system, buildroot will automatically enable
  all services using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">systemctl preset-all</code> command in the final phase of
  image building. You can add preset files to prevent a particular unit from
  being automatically enabled by buildroot.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_INIT_SYSV</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_INIT_OPENRC</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_INIT_SYSTEMD</code>
 列出了安装 init 脚本的操作，可以用于 systemV 类似的 init 系统（busybox，sysvinit 等），openrc 或 
systemd 单元。这些命令只有在相关的 init 系统安装时才会运行（即如果在配置中选择 systemd 作为 init 系统，则只会运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_INIT_SYSTEMD</code> ）。唯一的例外是当选择 openrc 作为 init 系统且未设置 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_INIT_OPENRC</code> 时，在这种情况下将调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_INIT_SYSV</code> ，因为 openrc 支持 sysv init 脚本。当 systemd 用作 init 系统时，buildroot 将在镜像构建的最后阶段使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">systemctl preset-all</code> 命令自动启用所有服务。您可以添加预设文件以防止 buildroot 自动启用特定单元。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_HELP_CMDS</code> lists the actions to print the package help, which
  is included to the main <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make help</code> output. These commands can print
  anything in any format.
  This is seldom used, as packages rarely have custom rules. <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Do not use
  this variable</strong></span>, unless you really know that you need to print help.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_HELP_CMDS</code> 列出了打印软件包帮助的操作，该操作包含在主 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make help</code> 输出中。这些命令可以以任何格式打印任何内容。这很少使用，因为软件包很少具有自定义规则。除非您真的知道需要打印帮助，否则不要使用此变量。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_LINUX_CONFIG_FIXUPS</code> lists the Linux kernel configuration
  options that are needed to build and use this package, and without
  which the package is fundamentally broken. This shall be a set of
  calls to one of the kconfig tweaking option: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">KCONFIG_ENABLE_OPT</code>,
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">KCONFIG_DISABLE_OPT</code>, or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">KCONFIG_SET_OPT</code>.
  This is seldom used, as package usually have no strict requirements on
  the kernel options.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_LINUX_CONFIG_FIXUPS</code> 列出了构建和使用此软件包所需的 Linux 内核配置选项，没有这些选项，软件包将无法正常工作。这将是对 kconfig 调整选项之一的一组调用： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">KCONFIG_ENABLE_OPT</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">KCONFIG_DISABLE_OPT</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">KCONFIG_SET_OPT</code> 。这很少使用，因为软件包通常对内核选项没有严格要求。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The preferred way to define these variables is:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">定义这些变量的首选方法是：</font></font></font></p><pre class="screen">define LIBFOO_CONFIGURE_CMDS
        action 1
        action 2
        action 3
endef</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In the action definitions, you can use the following variables:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在操作定义中，您可以使用以下变量：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(LIBFOO_PKGDIR)</code> contains the path to the directory containing the
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo.mk</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> files. This variable is useful when it is
  necessary to install a file bundled in Buildroot, like a runtime
  configuration file, a splashscreen image…
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(LIBFOO_PKGDIR)</code> 包含包含 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo.mk</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件的目录的路径。当需要安装 Buildroot 中捆绑的文件时，例如运行时配置文件、启动画面图像时，此变量非常有用...</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(@D)</code>, which contains the directory in which the package source
  code has been uncompressed.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(@D)</code> 包含已解压缩软件包源代码的目录。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(LIBFOO_DL_DIR)</code> contains the path to the directory where all the downloads
  made by Buildroot for <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo</code> are stored in.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(LIBFOO_DL_DIR)</code> 包含了 Buildroot 为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libfoo</code> 下载的所有文件存储的目录路径。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(TARGET_CC)</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(TARGET_LD)</code>, etc. to get the target
  cross-compilation utilities
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(TARGET_CC)</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(TARGET_LD)</code> ，等等，用于获取目标交叉编译工具。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(TARGET_CROSS)</code> to get the cross-compilation toolchain prefix
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(TARGET_CROSS)</code> 用于获取交叉编译工具链前缀。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Of course the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(HOST_DIR)</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(STAGING_DIR)</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(TARGET_DIR)</code>
  variables to install the packages properly. Those variables point to
  the global <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host</em></span>, <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">staging</em></span> and <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">target</em></span> directories, unless
  <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">per-package directory</em></span> support is used, in which case they point to
  the current package <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host</em></span>, <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">staging</em></span> and <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">target</em></span> directories. In
  both cases, it doesn’t make any difference from the package point of
  view: it should simply use <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_DIR</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">STAGING_DIR</code> and
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TARGET_DIR</code>. See <a class="xref" href="#top-level-parallel-build" title="8.12.&nbsp;Top-level parallel build" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;8.12, “Top-level parallel build”</a> for more details
  about <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">per-package directory</em></span> support.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当然， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(HOST_DIR)</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(STAGING_DIR)</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(TARGET_DIR)</code> 变量用于正确安装软件包。这些变量指向全局主机、暂存和目标目录，除非使用每个软件包目录支持，此时它们指向当前软件包主机、暂存和目标目录。在这两种情况下，从软件包的角度来看并没有任何区别：它应该简单地使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_DIR</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">STAGING_DIR</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TARGET_DIR</code> 。有关每个软件包目录支持的更多详细信息，请参见第 8.12 节“顶层并行构建”。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Finally, you can also use hooks. See <a class="xref" href="#hooks" title="18.23.&nbsp;Hooks available in the various build steps" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;18.23, “Hooks available in the various build steps”</a> for more information.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">最后，您还可以使用钩子。有关更多信息，请参见第 18.23 节“各构建步骤中可用的钩子”。</font></font></font></p></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_infrastructure_for_autotools_based_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.7.&nbsp;Infrastructure for autotools-based packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.7.基于 autotools 的软件包的基础设施</font></font></font></h2></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="autotools-package-tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.7.1.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autotools-package</code> tutorial<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.7.1. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autotools-package</code> 教程</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First, let’s see how to write a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file for an autotools-based
package, with an example :<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，让我们看看如何为基于 autotools 的软件包编写 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件，附带示例：</font></font></font></p><pre class="screen">01: ################################################################################
02: #
03: # libfoo
04: #
05: ################################################################################
06:
07: LIBFOO_VERSION = 1.0
08: LIBFOO_SOURCE = libfoo-$(LIBFOO_VERSION).tar.gz
09: LIBFOO_SITE = http://www.foosoftware.org/download
10: LIBFOO_INSTALL_STAGING = YES
11: LIBFOO_INSTALL_TARGET = NO
12: LIBFOO_CONF_OPTS = --disable-shared
13: LIBFOO_DEPENDENCIES = libglib2 host-pkgconf
14:
15: $(eval $(autotools-package))</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 7, we declare the version of the package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 7 行，我们声明了包的版本。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 8 and 9, we declare the name of the tarball (xz-ed tarball recommended)
and the location of the tarball on the Web. Buildroot will automatically
download the tarball from this location.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 8 和 9 行，我们声明了 tarball 的名称（建议使用 xz-ed tarball）和 tarball 在 Web 上的位置。Buildroot 将自动从此位置下载 tarball。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 10, we tell Buildroot to install the package to the staging
directory. The staging directory, located in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/staging/</code>
is the directory where all the packages are installed, including their
development files, etc. By default, packages are not installed to the
staging directory, since usually, only libraries need to be installed in
the staging directory: their development files are needed to compile
other libraries or applications depending on them. Also by default, when
staging installation is enabled, packages are installed in this location
using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make install</code> command.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 10 行，我们告诉 Buildroot 将软件包安装到暂存目录中。暂存目录位于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/staging/</code> ，是所有软件包安装的目录，包括它们的开发文件等。默认情况下，软件包不会安装到暂存目录，因为通常只有库需要安装到暂存目录：它们的开发文件需要用于编译依赖于它们的其他库或应用程序。同样，默认情况下，启用暂存安装时，软件包将使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make install</code> 命令安装在此位置。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 11, we tell Buildroot to not install the package to the
target directory. This directory contains what will become the root
filesystem running on the target. For purely static libraries, it is
not necessary to install them in the target directory because they will
not be used at runtime. By default, target installation is enabled; setting
this variable to NO is almost never needed. Also by default, packages are
installed in this location using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make install</code> command.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在
第 11 行，我们告诉 Buildroot 
不要将软件包安装到目标目录中。该目录包含将在目标设备上运行的根文件系统。对于纯静态库，不必将其安装到目标目录中，因为它们在运行时不会被使用。默认
情况下，目标安装是启用的；将此变量设置为 NO 几乎是不需要的。默认情况下，软件包使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make install</code> 命令安装在此位置。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 12, we tell Buildroot to pass a custom configure option, that
will be passed to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">./configure</code> script before configuring
and building the package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 12 行，我们告诉 Buildroot 传递一个自定义配置选项，该选项将在配置和构建软件包之前传递给 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">./configure</code> 脚本。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 13, we declare our dependencies, so that they are built
before the build process of our package starts.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 13 行，我们声明我们的依赖关系，以便它们在我们的软件包构建过程开始之前构建。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Finally, on line line 15, we invoke the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autotools-package</code>
macro that generates all the Makefile rules that actually allows the
package to be built.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">最后，在第 15 行，我们调用生成实际允许构建软件包的所有 Makefile 规则的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autotools-package</code> 宏。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="autotools-package-reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.7.2.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autotools-package</code> reference<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.7.2. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autotools-package</code> 参考</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The main macro of the autotools package infrastructure is
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autotools-package</code>. It is similar to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> macro. The ability to
have target and host packages is also available, with the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-autotools-package</code> macro.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">autotools 软件包基础设施的主要宏是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autotools-package</code> 。它类似于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 宏。还可以使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-autotools-package</code> 宏来拥有目标和主机软件包。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Just like the generic infrastructure, the autotools infrastructure
works by defining a number of variables before calling the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autotools-package</code> macro.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">就像通用基础设施一样，autotools 基础设施是通过在调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autotools-package</code> 宏之前定义一些变量来工作的。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First, all the package metadata information variables that exist in the
generic infrastructure also exist in the autotools infrastructure:
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_VERSION</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SOURCE</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PATCH</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SUBDIR</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_DEPENDENCIES</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，在通用基础设施中存在的所有软件包元数据信息变量在 autotools 基础设施中也存在： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_VERSION</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SOURCE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PATCH</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SUBDIR</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_DEPENDENCIES</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">A few additional variables, specific to the autotools infrastructure,
can also be defined. Many of them are only useful in very specific
cases, typical packages will therefore only use a few of them.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">还可以定义一些特定于 autotools 基础设施的附加变量。其中许多只在非常特定的情况下有用，典型的软件包因此只会使用其中的一部分。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SUBDIR</code> may contain the name of a subdirectory
  inside the package that contains the configure script. This is useful,
  if for example, the main configure script is not at the root of the
  tree extracted by the tarball. If <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_SUBDIR</code> is
  not specified, it defaults to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SUBDIR</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SUBDIR</code> 可能包含包含配置脚本的包内子目录的名称。例如，如果主配置脚本不在 tarball 提取的树的根目录下，则这很有用。如果未指定 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_SUBDIR</code> ，则默认为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SUBDIR</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONF_ENV</code>, to specify additional environment
  variables to pass to the configure script. By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONF_ENV</code> ，用于指定要传递给配置脚本的额外环境变量。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONF_OPTS</code>, to specify additional configure
  options to pass to the configure script. By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONF_OPTS</code> ，用于指定要传递给配置脚本的额外配置选项。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_MAKE</code>, to specify an alternate <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code>
  command. This is typically useful when parallel make is enabled in
  the configuration (using <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_JLEVEL</code>) but that this
  feature should be disabled for the given package, for one reason or
  another. By default, set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(MAKE)</code>. If parallel building
  is not supported by the package, then it should be set to
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_MAKE=$(MAKE1)</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_MAKE</code> ，以指定替代的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> 命令。当配置中启用并行构建（使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_JLEVEL</code> ）但对于某种原因应禁用此功能以针对特定软件包时，通常很有用。默认设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(MAKE)</code> 。如果软件包不支持并行构建，则应设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_MAKE=$(MAKE1)</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_MAKE_ENV</code>, to specify additional environment
  variables to pass to make in the build step. These are passed before
  the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> command. By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_MAKE_ENV</code> ，以指定传递给构建步骤中 make 的额外环境变量。这些变量在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> 命令之前传递。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_MAKE_OPTS</code>, to specify additional variables to
  pass to make in the build step. These are passed after the
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> command. By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_MAKE_OPTS</code> ，以指定传递给构建步骤中 make 的额外变量。这些变量在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> 命令之后传递。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_AUTORECONF</code>, tells whether the package should
  be autoreconfigured or not (i.e. if the configure script and
  Makefile.in files should be re-generated by re-running autoconf,
  automake, libtool, etc.). Valid values are <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> and
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code>. By default, the value is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_AUTORECONF</code> ，指示是否应自动重新配置软件包（即是否应通过重新运行 autoconf、automake、libtool 等来重新生成 configure 脚本和 Makefile.in 文件）。有效值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code> 。默认情况下，该值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_AUTORECONF_ENV</code>, to specify additional environment
  variables to pass to the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autoreconf</em></span> program if
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_AUTORECONF=YES</code>. These are passed in the environment of
  the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autoreconf</em></span> command. By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_AUTORECONF_ENV</code> ，用于指定传递给 autoreconf 程序的其他环境变量，如果 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_AUTORECONF=YES</code> 。这些变量将传递给 autoreconf 命令的环境。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_AUTORECONF_OPTS</code> to specify additional options
  passed to the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autoreconf</em></span> program if
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_AUTORECONF=YES</code>. By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_AUTORECONF_OPTS</code> 用于指定传递给 autoreconf 程序的其他选项，如果 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_AUTORECONF=YES</code> 。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_AUTOPOINT</code>, tells whether the package should be
  autopointed or not (i.e. if the package needs I18N infrastructure
  copied in.) Only valid when <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_AUTORECONF=YES</code>. Valid
  values are <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code>. The default is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_AUTOPOINT</code> ，指示包是否应该自动指向（即包是否需要复制 I18N 基础设施）。仅在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_AUTORECONF=YES</code> 有效。有效值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code> 。默认值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_LIBTOOL_PATCH</code> tells whether the Buildroot
  patch to fix libtool cross-compilation issues should be applied or
  not. Valid values are <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code>. By
  default, the value is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_LIBTOOL_PATCH</code> 指示是否应用 Buildroot 补丁以解决 libtool 交叉编译问题。有效值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code> 。默认情况下，该值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> 。</font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING_OPTS</code> contains the make options
  used to install the package to the staging directory. By default, the
  value is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DESTDIR=$(STAGING_DIR) install</code>, which is
  correct for most autotools packages. It is still possible to override
  it.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING_OPTS</code> 包含用于将软件包安装到分段目录的 make 选项。默认情况下，该值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DESTDIR=$(STAGING_DIR) install</code> ，对大多数 autotools 软件包而言是正确的。仍然可以覆盖它。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET_OPTS</code> contains the make options
  used to install the package to the target directory. By default, the
  value is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DESTDIR=$(TARGET_DIR) install</code>. The default
  value is correct for most autotools packages, but it is still possible
  to override it if needed.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET_OPTS</code> 包含用于将软件包安装到目标目录的制作选项。默认情况下，该值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DESTDIR=$(TARGET_DIR) install</code> 。对于大多数 autotools 软件包来说，默认值是正确的，但如果需要，仍然可以覆盖它。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">With the autotools infrastructure, all the steps required to build
and install the packages are already defined, and they generally work
well for most autotools-based packages. However, when required, it is
still possible to customize what is done in any particular step:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 autotools 基础设施，构建和安装软件包所需的所有步骤已经定义，并且它们通常适用于大多数基于 autotools 的软件包。但是，如果需要，仍然可以自定义在任何特定步骤中执行的操作：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
By adding a post-operation hook (after extract, patch, configure,
  build or install). See <a class="xref" href="#hooks" title="18.23.&nbsp;Hooks available in the various build steps" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;18.23, “Hooks available in the various build steps”</a> for details.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过添加后操作挂钩（在提取、打补丁、配置、构建或安装之后）。有关详细信息，请参阅第 18.23 节“各构建步骤中可用的挂钩”。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
By overriding one of the steps. For example, even if the autotools
  infrastructure is used, if the package <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file defines its
  own <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONFIGURE_CMDS</code> variable, it will be used
  instead of the default autotools one. However, using this method
  should be restricted to very specific cases. Do not use it in the
  general case.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过覆盖其中一个步骤。例如，即使使用了 autotools 基础设施，如果软件包 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件定义了自己的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONFIGURE_CMDS</code> 变量，它将被用来代替默认的 autotools 变量。然而，应该将使用这种方法限制在非常特定的情况下。不要在一般情况下使用它。</font></font></font></li></ul></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_infrastructure_for_cmake_based_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.8.&nbsp;Infrastructure for CMake-based packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.8.&nbsp;基于 CMake 的软件包基础设施</font></font></font></h2></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="cmake-package-tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.8.1.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cmake-package</code> tutorial<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.8.1. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cmake-package</code> 教程</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First, let’s see how to write a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file for a CMake-based package,
with an example :<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，让我们看看如何为基于 CMake 的软件包编写一个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件，附带一个示例：</font></font></font></p><pre class="screen">01: ################################################################################
02: #
03: # libfoo
04: #
05: ################################################################################
06:
07: LIBFOO_VERSION = 1.0
08: LIBFOO_SOURCE = libfoo-$(LIBFOO_VERSION).tar.gz
09: LIBFOO_SITE = http://www.foosoftware.org/download
10: LIBFOO_INSTALL_STAGING = YES
11: LIBFOO_INSTALL_TARGET = NO
12: LIBFOO_CONF_OPTS = -DBUILD_DEMOS=ON
13: LIBFOO_DEPENDENCIES = libglib2 host-pkgconf
14:
15: $(eval $(cmake-package))</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 7, we declare the version of the package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 7 行，我们声明了包的版本。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 8 and 9, we declare the name of the tarball (xz-ed tarball recommended)
and the location of the tarball on the Web. Buildroot will automatically
download the tarball from this location.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 8 和 9 行，我们声明了 tarball 的名称（建议使用 xz-ed tarball）和 tarball 在 Web 上的位置。Buildroot 将自动从此位置下载 tarball。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 10, we tell Buildroot to install the package to the staging
directory. The staging directory, located in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/staging/</code>
is the directory where all the packages are installed, including their
development files, etc. By default, packages are not installed to the
staging directory, since usually, only libraries need to be installed in
the staging directory: their development files are needed to compile
other libraries or applications depending on them. Also by default, when
staging installation is enabled, packages are installed in this location
using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make install</code> command.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 10 行，我们告诉 Buildroot 将软件包安装到暂存目录中。暂存目录位于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output/staging/</code> ，是所有软件包安装的目录，包括它们的开发文件等。默认情况下，软件包不会安装到暂存目录，因为通常只有库需要安装到暂存目录：它们的开发文件需要用于编译依赖于它们的其他库或应用程序。同样，默认情况下，启用暂存安装时，软件包将使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make install</code> 命令安装在此位置。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 11, we tell Buildroot to not install the package to the
target directory. This directory contains what will become the root
filesystem running on the target. For purely static libraries, it is
not necessary to install them in the target directory because they will
not be used at runtime. By default, target installation is enabled; setting
this variable to NO is almost never needed. Also by default, packages are
installed in this location using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make install</code> command.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在
第 11 行，我们告诉 Buildroot 
不要将软件包安装到目标目录中。该目录包含将在目标设备上运行的根文件系统。对于纯静态库，不必将其安装到目标目录中，因为它们在运行时不会被使用。默认
情况下，目标安装是启用的；将此变量设置为 NO 几乎是不需要的。默认情况下，软件包使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make install</code> 命令安装在此位置。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 12, we tell Buildroot to pass custom options to CMake when it is
configuring the package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 12 行，我们告诉 Buildroot 在配置软件包时向 CMake 传递自定义选项。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 13, we declare our dependencies, so that they are built
before the build process of our package starts.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 13 行，我们声明我们的依赖关系，以便它们在我们的软件包构建过程开始之前构建。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Finally, on line line 15, we invoke the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cmake-package</code>
macro that generates all the Makefile rules that actually allows the
package to be built.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">最后，在第 15 行，我们调用生成实际允许构建软件包的所有 Makefile 规则的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cmake-package</code> 宏。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="cmake-package-reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.8.2.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cmake-package</code> reference<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.8.2. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cmake-package</code> 参考</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The main macro of the CMake package infrastructure is
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cmake-package</code>. It is similar to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> macro. The ability to
have target and host packages is also available, with the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-cmake-package</code> macro.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">CMake 软件包基础设施的主要宏是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cmake-package</code> 。它类似于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 宏。还可以使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-cmake-package</code> 宏来拥有目标和主机软件包。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Just like the generic infrastructure, the CMake infrastructure works
by defining a number of variables before calling the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cmake-package</code>
macro.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">就像通用基础设施一样，CMake 基础设施通过在调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cmake-package</code> 宏之前定义多个变量来工作。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First, all the package metadata information variables that exist in
the generic infrastructure also exist in the CMake infrastructure:
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_VERSION</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SOURCE</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PATCH</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SUBDIR</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_DEPENDENCIES</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，所有存在于通用基础设施中的软件包元数据信息变量也存在于 CMake 基础设施中： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_VERSION</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SOURCE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PATCH</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SUBDIR</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_DEPENDENCIES</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">A few additional variables, specific to the CMake infrastructure, can
also be defined. Many of them are only useful in very specific cases,
typical packages will therefore only use a few of them.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">还可以定义一些特定于 CMake 基础设施的附加变量。其中许多只在非常特定的情况下有用，典型的软件包因此只会使用其中的一部分。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SUBDIR</code> may contain the name of a subdirectory inside the
  package that contains the main CMakeLists.txt file. This is useful,
  if for example, the main CMakeLists.txt file is not at the root of
  the tree extracted by the tarball. If <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_SUBDIR</code> is not
  specified, it defaults to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SUBDIR</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SUBDIR</code> 可能包含包含主 CMakeLists.txt 文件的包内子目录的名称。例如，如果主 CMakeLists.txt 文件不在 tarball 提取的树的根目录下，这将很有用。如果未指定 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_SUBDIR</code> ，则默认为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SUBDIR</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CMAKE_BACKEND</code> specifies the cmake backend to use, one of
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> (to use the GNU Makefiles generator, the default) or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ninja</code>
  (to use the Ninja generator).
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CMAKE_BACKEND</code> 指定要使用的 CMake 后端之一，即 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> （使用 GNU Makefiles 生成器，默认值）或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ninja</code> （使用 Ninja 生成器）。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONF_ENV</code>, to specify additional environment variables to
  pass to CMake. By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONF_ENV</code> ，用于指定要传递给 CMake 的额外环境变量。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONF_OPTS</code>, to specify additional configure options to pass
  to CMake. By default, empty. A number of common CMake options are
  set by the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cmake-package</code> infrastructure; so it is normally not
  necessary to set them in the package’s <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*.mk</code> file unless you want
  to override them:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONF_OPTS</code> ，用于指定传递给 CMake 的额外配置选项。默认为空。一些常见的 CMake 选项由 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cmake-package</code> 基础设施设置；因此，通常不需要在软件包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*.mk</code> 文件中设置它们，除非您想要覆盖它们：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">CMAKE_BUILD_TYPE</code> is driven by <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ENABLE_RUNTIME_DEBUG</code>;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">CMAKE_BUILD_TYPE</code> 由 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ENABLE_RUNTIME_DEBUG</code> 驱动；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">CMAKE_INSTALL_PREFIX</code>;
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUILD_SHARED_LIBS</code> is driven by <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_STATIC_LIBS</code>;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUILD_SHARED_LIBS</code> 由 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_STATIC_LIBS</code> 驱动；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUILD_DOC</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUILD_DOCS</code> are disabled;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUILD_DOC</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUILD_DOCS</code> 已禁用；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUILD_EXAMPLE</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUILD_EXAMPLES</code> are disabled;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUILD_EXAMPLE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUILD_EXAMPLES</code> 已禁用；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUILD_TEST</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUILD_TESTS</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUILD_TESTING</code> are disabled.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUILD_TEST</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUILD_TESTS</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUILD_TESTING</code> 已禁用。</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_BUILD_ENV</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_BUILD_OPTS</code> to specify additional
  environment variables, or command line options, to pass to the backend
  at build time.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_BUILD_ENV</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_BUILD_OPTS</code> 用于在构建时指定额外的环境变量或命令行选项，传递给后端。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SUPPORTS_IN_SOURCE_BUILD = NO</code> should be set when the package
  cannot be built inside the source tree but needs a separate build
  directory.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当软件包无法在源代码树内构建，而需要单独的构建目录时，应设置 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SUPPORTS_IN_SOURCE_BUILD = NO</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_MAKE</code>, to specify an alternate <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> command. This is
  typically useful when parallel make is enabled in the configuration
  (using <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_JLEVEL</code>) but that this feature should be disabled for
  the given package, for one reason or another. By default, set to
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(MAKE)</code>. If parallel building is not supported by the package,
  then it should be set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_MAKE=$(MAKE1)</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_MAKE</code> ，以指定替代的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> 命令。当配置中启用并行构建（使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_JLEVEL</code> ）但对于某种原因应禁用此功能以针对特定软件包时，通常很有用。默认设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(MAKE)</code> 。如果软件包不支持并行构建，则应设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_MAKE=$(MAKE1)</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_MAKE_ENV</code>, to specify additional environment variables to
  pass to make in the build step. These are passed before the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code>
  command. By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_MAKE_ENV</code> ，以指定传递给构建步骤中 make 的额外环境变量。这些变量在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> 命令之前传递。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_MAKE_OPTS</code>, to specify additional variables to pass to make
  in the build step. These are passed after the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> command. By
  default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_MAKE_OPTS</code> ，以指定传递给构建步骤中 make 的额外变量。这些变量在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> 命令之后传递。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_OPTS</code> contains the make options used to
  install the package to the host directory. By default, the value
  is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">install</code>, which is correct for most CMake packages. It is still
  possible to override it.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_OPTS</code> 包含用于将软件包安装到主机目录的制作选项。默认情况下，该值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">install</code> ，对于大多数 CMake 软件包来说是正确的。仍然可以覆盖它。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING_OPTS</code> contains the make options used to
  install the package to the staging directory. By default, the value
  is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DESTDIR=$(STAGING_DIR) install/fast</code>, which is correct for most
  CMake packages. It is still possible to override it.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING_OPTS</code> 包含用于将软件包安装到暂存目录的制作选项。默认情况下，该值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DESTDIR=$(STAGING_DIR) install/fast</code> ，对于大多数 CMake 软件包来说是正确的。仍然可以覆盖它。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET_OPTS</code> contains the make options used to
  install the package to the target directory. By default, the value
  is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DESTDIR=$(TARGET_DIR) install/fast</code>. The default value is correct
  for most CMake packages, but it is still possible to override it if
  needed.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET_OPTS</code> 包含用于将软件包安装到目标目录的制作选项。默认情况下，该值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DESTDIR=$(TARGET_DIR) install/fast</code> 。大多数 CMake 软件包的默认值是正确的，但如果需要，仍然可以覆盖它。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">With the CMake infrastructure, all the steps required to build and
install the packages are already defined, and they generally work well
for most CMake-based packages. However, when required, it is still
possible to customize what is done in any particular step:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 CMake 基础设施，构建和安装软件包所需的所有步骤已经定义好，通常适用于大多数基于 CMake 的软件包。但是，如果需要，仍然可以自定义任何特定步骤中所做的工作：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
By adding a post-operation hook (after extract, patch, configure,
  build or install). See <a class="xref" href="#hooks" title="18.23.&nbsp;Hooks available in the various build steps" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;18.23, “Hooks available in the various build steps”</a> for details.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过添加后操作挂钩（在提取、打补丁、配置、构建或安装之后）。有关详细信息，请参阅第 18.23 节“各构建步骤中可用的挂钩”。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
By overriding one of the steps. For example, even if the CMake
  infrastructure is used, if the package <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file defines its own
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONFIGURE_CMDS</code> variable, it will be used instead of the
  default CMake one. However, using this method should be restricted
  to very specific cases. Do not use it in the general case.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过覆盖其中一个步骤。例如，即使使用了 CMake 基础设施，如果软件包 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件定义了自己的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONFIGURE_CMDS</code> 变量，它将被用来替代默认的 CMake 变量。然而，应该将此方法限制在非常特定的情况下使用。不要在一般情况下使用它。</font></font></font></li></ul></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_infrastructure_for_python_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.9.&nbsp;Infrastructure for Python packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.9. Python 软件包的基础设施</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This infrastructure applies to Python packages that use the standard
Python setuptools, pep517, flit or maturin mechanisms as their build
system, generally recognizable by the usage of a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setup.py</code> script or
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pyproject.toml</code> file.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">该基础设施适用于使用标准 Python setuptools、pep517、flit 或 maturin 机制作为构建系统的 Python 软件包，通常通过使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setup.py</code> 脚本或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pyproject.toml</code> 文件来识别。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="python-package-tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.9.1.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-package</code> tutorial<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.9.1. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-package</code> 教程</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First, let’s see how to write a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file for a Python package,
with an example :<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，让我们看看如何为 Python 软件包编写 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件，附带一个示例：</font></font></font></p><pre class="screen">01: ################################################################################
02: #
03: # python-foo
04: #
05: ################################################################################
06:
07: PYTHON_FOO_VERSION = 1.0
08: PYTHON_FOO_SOURCE = python-foo-$(PYTHON_FOO_VERSION).tar.xz
09: PYTHON_FOO_SITE = http://www.foosoftware.org/download
10: PYTHON_FOO_LICENSE = BSD-3-Clause
11: PYTHON_FOO_LICENSE_FILES = LICENSE
12: PYTHON_FOO_ENV = SOME_VAR=1
13: PYTHON_FOO_DEPENDENCIES = libmad
14: PYTHON_FOO_SETUP_TYPE = setuptools
15:
16: $(eval $(python-package))</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 7, we declare the version of the package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 7 行，我们声明了包的版本。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 8 and 9, we declare the name of the tarball (xz-ed tarball
recommended) and the location of the tarball on the Web. Buildroot
will automatically download the tarball from this location.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 8 和 9 行，我们声明了 tarball 的名称（建议使用 xz-ed tarball）和 tarball 在 Web 上的位置。Buildroot 将自动从此位置下载 tarball。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 10 and 11, we give licensing details about the package (its
license on line 10, and the file containing the license text on line
11).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 10 行和第 11 行，我们提供有关软件包的许可详细信息（第 10 行上的许可证，以及第 11 行上包含许可证文本的文件）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 12, we tell Buildroot to pass custom options to the Python
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setup.py</code> script when it is configuring the package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 12 行，我们告诉 Buildroot 在配置软件包时将自定义选项传递给 Python <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setup.py</code> 脚本。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 13, we declare our dependencies, so that they are built
before the build process of our package starts.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 13 行，我们声明我们的依赖关系，以便它们在我们的软件包构建过程开始之前构建。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 14, we declare the specific Python build system being used. In
this case the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setuptools</code> Python build system is used. The five
supported ones are <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">flit</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pep517</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setuptools</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setuptools-rust</code>
and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">maturin</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 14 行，我们声明正在使用的特定 Python 构建系统。在这种情况下，使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setuptools</code> Python 构建系统。支持的五种构建系统是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">flit</code> 、 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pep517</code> 、 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setuptools</code> 、 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setuptools-rust</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">maturin</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Finally, on line 16, we invoke the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-package</code> macro that
generates all the Makefile rules that actually allow the package to be
built.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">最后，在第 16 行，我们调用生成实际允许构建软件包的所有 Makefile 规则的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-package</code> 宏。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="python-package-reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.9.2.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-package</code> reference<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.9.2. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-package</code> 参考</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">As a policy, packages that merely provide Python modules should all be
named <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-&lt;something&gt;</code> in Buildroot. Other packages that use the
Python build system, but are not Python modules, can freely choose
their name (existing examples in Buildroot are <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">scons</code> and
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">supervisor</code>).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">作为政策，仅提供 Python 模块的软件包在 Buildroot 中应全部命名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-&lt;something&gt;</code> 。其他使用 Python 构建系统但不是 Python 模块的软件包可以自由选择它们的名称（Buildroot 中的现有示例是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">scons</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">supervisor</code> ）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The main macro of the Python package infrastructure is
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-package</code>. It is similar to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> macro. It is
also possible to create Python host packages with the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-python-package</code> macro.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Python 软件包基础设施的主要宏是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-package</code> 。它类似于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 宏。还可以使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-python-package</code> 宏创建 Python 主机软件包。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Just like the generic infrastructure, the Python infrastructure works
by defining a number of variables before calling the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-package</code>
or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-python-package</code> macros.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">就像通用基础设施一样，Python 基础设施通过在调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-package</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-python-package</code> 宏之前定义多个变量来工作。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">All the package metadata information variables that exist in the
<a class="link" href="#generic-package-reference" title="18.6.2.&nbsp;generic-package reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic package infrastructure</a> also
exist in the Python infrastructure: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_VERSION</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_SOURCE</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_PATCH</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_SITE</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_SUBDIR</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_DEPENDENCIES</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_LICENSE</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_LICENSE_FILES</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_INSTALL_STAGING</code>, etc.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">所有存在于通用软件包基础设施中的软件包元数据信息变量也存在于 Python 基础设施中： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_VERSION</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_SOURCE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_PATCH</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_SITE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_SUBDIR</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_DEPENDENCIES</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_LICENSE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_LICENSE_FILES</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_INSTALL_STAGING</code> ，等。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Note that:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
It is not necessary to add <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-python</code> in the
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_DEPENDENCIES</code> variable of a package, since these basic
   dependencies are automatically added as needed by the Python
   package infrastructure.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在软件包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_DEPENDENCIES</code> 变量中不需要添加 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-python</code> ，因为这些基本依赖项会根据需要自动添加到 Python 软件包基础设施中。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Similarly, it is not needed to add <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-python-setuptools</code> to
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_DEPENDENCIES</code> for setuptools-based packages, since it’s
   automatically added by the Python infrastructure as needed.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">类似地，对于基于 setuptools 的软件包，不需要将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-python-setuptools</code> 添加到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_DEPENDENCIES</code> 中，因为 Python 基础设施会根据需要自动添加它。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">One variable specific to the Python infrastructure is mandatory:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Python 基础设施中一个特定的变量是强制性的：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_SETUP_TYPE</code>, to define which Python build system is used
  by the package. The five supported values are <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">flit</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pep517</code> and
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setuptools</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setuptools-rust</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">maturin</code>. If you don’t know
  which one is used in your package, look at the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setup.py</code> or
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pyproject.toml</code> file in your package source code, and see whether
  it imports things from the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">flit</code> module or the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setuptools</code>
  module. If the package is using a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pyproject.toml</code> file without any
  build-system requires and with a local in-tree backend-path one
  should use <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pep517</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_SETUP_TYPE</code> ，用于定义包使用的 Python 构建系统。支持的五个值分别是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">flit</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pep517</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setuptools</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setuptools-rust</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">maturin</code> 。如果您不知道包中使用的是哪个，请查看包源代码中的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setup.py</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pyproject.toml</code> 文件，看它是否从 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">flit</code> 模块或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setuptools</code> 模块导入内容。如果包使用一个没有任何构建系统要求和带有本地 in-tree 后端路径的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pyproject.toml</code> 文件，则应使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pep517</code> 。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">A few additional variables, specific to the Python infrastructure, can
optionally be defined, depending on the package’s needs. Many of them
are only useful in very specific cases, typical packages will
therefore only use a few of them, or none.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Python 基础设施中还可以选择定义一些额外的变量，具体取决于包的需求。其中许多变量只在非常特定的情况下有用，因此典型的包可能只使用其中的一些，或者一个也不使用。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_SUBDIR</code> may contain the name of a subdirectory inside the
  package that contains the main <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setup.py</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pyproject.toml</code> file.
  This is useful, if for example, the main <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setup.py</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pyproject.toml</code>
  file is not at the root of the tree extracted by the tarball. If
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_PYTHON_FOO_SUBDIR</code> is not specified, it defaults to
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_SUBDIR</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_SUBDIR</code> 可能包含包含主 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setup.py</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pyproject.toml</code> 文件的包内子目录的名称。例如，如果主 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setup.py</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pyproject.toml</code> 文件不在 tarball 提取的树的根目录下，则这是有用的。如果未指定 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_PYTHON_FOO_SUBDIR</code> ，则默认为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_SUBDIR</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_ENV</code>, to specify additional environment variables to
  pass to the Python <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setup.py</code> script (for setuptools packages) or
  the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">support/scripts/pyinstaller.py</code> script (for flit/pep517
  packages) for both the build and install steps. Note that the
  infrastructure is automatically passing several standard variables,
  defined in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PKG_PYTHON_SETUPTOOLS_ENV</code> (for setuptools target
  packages), <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_PKG_PYTHON_SETUPTOOLS_ENV</code> (for setuptools host
  packages), <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PKG_PYTHON_PEP517_ENV</code> (for flit/pep517 target packages)
  and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_PKG_PYTHON_PEP517_ENV</code> (for flit/pep517 host packages).
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_ENV</code> ，用于指定要传递给 Python <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setup.py</code> 脚本（用于 setuptools 包）或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">support/scripts/pyinstaller.py</code> 脚本（用于 flit/pep517 包）的附加环境变量，用于构建和安装步骤。请注意，基础设施会自动传递几个标准变量，定义在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PKG_PYTHON_SETUPTOOLS_ENV</code> （用于 setuptools 目标包）、 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_PKG_PYTHON_SETUPTOOLS_ENV</code> （用于 setuptools 主机包）、 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PKG_PYTHON_PEP517_ENV</code> （用于 flit/pep517 目标包）和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_PKG_PYTHON_PEP517_ENV</code> （用于 flit/pep517 主机包）中。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_BUILD_OPTS</code>, to specify additional options to pass to
  the Python <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setup.py</code> script during the build step, this generally
  only makes sense to use for setuptools based packages as flit/pep517
  based packages do not pass these options to a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setup.py</code> script but
  instead pass them to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">support/scripts/pyinstaller.py</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_BUILD_OPTS</code> ，用于在构建步骤期间传递给 Python <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setup.py</code> 脚本的附加选项，这通常只对基于 setuptools 的包有意义，因为基于 flit/pep517 的包不会将这些选项传递给 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setup.py</code> 脚本，而是将它们传递给 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">support/scripts/pyinstaller.py</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_INSTALL_TARGET_OPTS</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_INSTALL_STAGING_OPTS</code>,
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_PYTHON_FOO_INSTALL_OPTS</code> to specify additional options to pass
  to the Python <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setup.py</code> script (for setuptools packages) or
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">support/scripts/pyinstaller.py</code> (for flit/pep517 packages) during
  the target installation step, the staging installation step or the
  host installation, respectively.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_INSTALL_TARGET_OPTS</code> , <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_INSTALL_STAGING_OPTS</code> , <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_PYTHON_FOO_INSTALL_OPTS</code> 来指定传递给 Python <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setup.py</code> 脚本（用于 setuptools 包）或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">support/scripts/pyinstaller.py</code> （用于 flit/pep517 包）的额外选项，分别在目标安装步骤、分段安装步骤或主机安装期间。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">With the Python infrastructure, all the steps required to build and
install the packages are already defined, and they generally work well
for most Python-based packages. However, when required, it is still
possible to customize what is done in any particular step:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 Python 基础设施，构建和安装软件包所需的所有步骤已经定义，并且它们通常适用于大多数基于 Python 的软件包。但是，如果需要，仍然可以自定义在任何特定步骤中执行的操作。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
By adding a post-operation hook (after extract, patch, configure,
  build or install). See <a class="xref" href="#hooks" title="18.23.&nbsp;Hooks available in the various build steps" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;18.23, “Hooks available in the various build steps”</a> for details.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过添加后操作挂钩（在提取、打补丁、配置、构建或安装之后）。有关详细信息，请参阅第 18.23 节“各构建步骤中可用的挂钩”。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
By overriding one of the steps. For example, even if the Python
  infrastructure is used, if the package <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file defines its own
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_BUILD_CMDS</code> variable, it will be used instead of the
  default Python one. However, using this method should be restricted
  to very specific cases. Do not use it in the general case.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过覆盖其中一个步骤。例如，即使使用了 Python 基础设施，如果包 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件定义了自己的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_BUILD_CMDS</code> 变量，它将被使用，而不是默认的 Python 变量。但是，应该将使用此方法限制在非常特定的情况下。不要在一般情况下使用它。</font></font></font></li></ul></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="scanpypi" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.9.3.&nbsp;Generating a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-package</code> from a PyPI repository<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.9.3. 从 PyPI 存储库生成 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-package</code> </font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If the Python package for which you would like to create a Buildroot
package is available on PyPI, you may want to use the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">scanpypi</code> tool
located in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">utils/</code> to automate the process.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您想为其创建 Buildroot 软件包的 Python 软件包在 PyPI 上可用，您可能希望使用位于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">utils/</code> 的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">scanpypi</code> 工具来自动化该过程。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">You can find the list of existing PyPI packages
<a class="ulink" href="https://pypi.python.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">here</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您可以在此处找到现有 PyPI 软件包的列表。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">scanpypi</code> requires Python’s <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setuptools</code> package to be installed on
your host.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">scanpypi</code> 需要在您的主机上安装 Python 的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setuptools</code> 包。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When at the root of your buildroot directory just do :<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当在您的构建根目录时，只需执行：</font></font></font></p><pre class="screen">utils/scanpypi foo bar -o package</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This will generate packages <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-foo</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-bar</code> in the package
folder if they exist on <a class="ulink" href="https://pypi.python.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">https://pypi.python.org</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果它们存在于 https://pypi.python.org 上，这将在包文件夹中生成 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-foo</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-bar</code> 包。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Find the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">external python modules</code> menu and insert your package inside.
Keep in mind that the items inside a menu should be in alphabetical order.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">找到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">external python modules</code> 菜单并将您的软件包插入其中。请记住，菜单中的项目应按字母顺序排列。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Please keep in mind that you’ll most likely have to manually check the
package for any mistakes as there are things that cannot be guessed by
the generator (e.g.  dependencies on any of the python core modules
such as BR2_PACKAGE_PYTHON_ZLIB).  Also, please take note that the
license and license files are guessed and must be checked. You also
need to manually add the package to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/Config.in</code> file.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请
记住，您很可能需要手动检查软件包是否存在任何错误，因为有些内容生成器无法猜测（例如，对任何 Python 核心模块的依赖项，如 
BR2_PACKAGE_PYTHON_ZLIB）。另外，请注意，许可证和许可证文件是猜测的，必须进行检查。您还需要手动将软件包添加到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/Config.in</code> 文件中。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If your Buildroot package is not in the official Buildroot tree but in
a br2-external tree, use the -o flag as follows:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您的 Buildroot 软件包不在官方 Buildroot 树中，而是在 br2-external 树中，请使用-o 标志，如下所示：</font></font></font></p><pre class="screen">utils/scanpypi foo bar -o other_package_dir</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This will generate packages <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-foo</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-bar</code> in the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">other_package_directory</code> instead of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这将在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">other_package_directory</code> 中生成 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-foo</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-bar</code> 包，而不是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Option <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-h</code> will list the available options:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">选项 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-h</code> 将列出可用选项：</font></font></font></p><pre class="screen">utils/scanpypi -h</pre></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="python-package-cffi-backend" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.9.4.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-package</code> CFFI backend<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.9.4. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-package</code> CFFI 后端</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">C Foreign Function Interface for Python (CFFI) provides a convenient
and reliable way to call compiled C code from Python using interface
declarations written in C. Python packages relying on this backend can
be identified by the appearance of a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cffi</code> dependency in the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">install_requires</code> field of their <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setup.py</code> file.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Python 的 C Foreign Function Interface（CFFI）提供了一种方便可靠的方式，使用在 C 中编写的接口声明从 Python 调用编译的 C 代码。依赖于这个后端的 Python 软件包可以通过在其 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">setup.py</code> 文件的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">install_requires</code> 字段中出现 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cffi</code> 依赖来识别。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Such a package should:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这样的软件包应该：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
add <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-cffi</code> as a runtime dependency in order to install the
compiled C library wrapper on the target. This is achieved by adding
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select BR2_PACKAGE_PYTHON_CFFI</code> to the package <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">python-cffi</code> 作为运行时依赖项，以便在目标上安装编译的 C 库包装器。这可以通过将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select BR2_PACKAGE_PYTHON_CFFI</code> 添加到软件包 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 中来实现。</font></font></font></li></ul></div><pre class="screen">config BR2_PACKAGE_PYTHON_FOO
        bool "python-foo"
        select BR2_PACKAGE_PYTHON_CFFI # runtime</pre><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
add <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-python-cffi</code> as a build-time dependency in order to
cross-compile the C wrapper. This is achieved by adding
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-python-cffi</code> to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_DEPENDENCIES</code> variable.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为了交叉编译 C 包装器，请将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-python-cffi</code> 添加为构建时依赖项。这可以通过将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-python-cffi</code> 添加到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PYTHON_FOO_DEPENDENCIES</code> 变量来实现。</font></font></font></li></ul></div><pre class="screen">################################################################################
#
# python-foo
#
################################################################################

...

PYTHON_FOO_DEPENDENCIES = host-python-cffi

$(eval $(python-package))</pre></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_infrastructure_for_luarocks_based_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.10.&nbsp;Infrastructure for LuaRocks-based packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.10. 基于 LuaRocks 的软件包基础设施</font></font></font></h2></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="luarocks-package-tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.10.1.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">luarocks-package</code> tutorial<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.10.1. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">luarocks-package</code> 教程</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First, let’s see how to write a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file for a LuaRocks-based package,
with an example :<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，让我们看看如何为基于 LuaRocks 的软件包编写一个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件，示例如下：</font></font></font></p><pre class="screen">01: ################################################################################
02: #
03: # lua-foo
04: #
05: ################################################################################
06:
07: LUA_FOO_VERSION = 1.0.2-1
08: LUA_FOO_NAME_UPSTREAM = foo
09: LUA_FOO_DEPENDENCIES = bar
10:
11: LUA_FOO_BUILD_OPTS += BAR_INCDIR=$(STAGING_DIR)/usr/include
12: LUA_FOO_BUILD_OPTS += BAR_LIBDIR=$(STAGING_DIR)/usr/lib
13: LUA_FOO_LICENSE = luaFoo license
14: LUA_FOO_LICENSE_FILES = $(LUA_FOO_SUBDIR)/COPYING
15:
16: $(eval $(luarocks-package))</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 7, we declare the version of the package (the same as in the rockspec,
which is the concatenation of the upstream version and the rockspec revision,
separated by a hyphen <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-</em></span>).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 7 行，我们声明软件包的版本（与 rockspec 中相同，即上游版本和 rockspec 修订版的连接，用连字符 - 分隔）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 8, we declare that the package is called "foo" on LuaRocks. In
Buildroot, we give Lua-related packages a name that starts with "lua", so the
Buildroot name is different from the upstream name. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_NAME_UPSTREAM</code>
makes the link between the two names.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 8 行，我们声明该软件包在 LuaRocks 上称为"foo"。在 Buildroot 中，我们给 Lua 相关的软件包命名以"lua"开头，因此 Buildroot 的名称与上游名称不同。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_NAME_UPSTREAM</code> 建立了这两个名称之间的联系。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 9, we declare our dependencies against native libraries, so that they
are built before the build process of our package starts.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 9 行，我们声明我们依赖于本地库，以便在我们的软件包构建过程开始之前构建它们。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On lines 11-12, we tell Buildroot to pass custom options to LuaRocks when it is
building the package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 11-12 行，我们告诉 Buildroot 在构建软件包时向 LuaRocks 传递自定义选项。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On lines 13-14, we specify the licensing terms for the package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 13-14 行，我们指定了软件包的许可条款。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Finally, on line 16, we invoke the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">luarocks-package</code>
macro that generates all the Makefile rules that actually allows the
package to be built.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">最后，在第 16 行，我们调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">luarocks-package</code> 宏，生成所有实际允许构建软件包的 Makefile 规则。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Most of these details can be retrieved from the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rock</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rockspec</code>.
So, this file and the Config.in file can be generated by running the
command <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">luarocks buildroot foo lua-foo</code> in the Buildroot
directory. This command runs a specific Buildroot addon of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">luarocks</code>
that will automatically generate a Buildroot package. The result must
still be manually inspected and possibly modified.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这些细节大多可以从 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rock</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rockspec</code> 中检索。因此，可以通过在 Buildroot 目录中运行命令 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">luarocks buildroot foo lua-foo</code> 来生成此文件和 Config.in 文件。此命令运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">luarocks</code> 的特定 Buildroot 附加组件，将自动生成一个 Buildroot 软件包。结果仍须手动检查并可能进行修改。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/Config.in</code> file has to be updated manually to include the
  generated Config.in files.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">必须手动更新 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/Config.in</code> 文件，以包含生成的 Config.in 文件。</font></font></font></li></ul></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="luarocks-package-reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.10.2.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">luarocks-package</code> reference<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.10.2. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">luarocks-package</code> 参考</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">LuaRocks is a deployment and management system for Lua modules, and supports
various <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">build.type</code>: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">builtin</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cmake</code>. In the context of
Buildroot, the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">luarocks-package</code> infrastructure only supports the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">builtin</code>
mode. LuaRocks packages that use the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cmake</code> build mechanisms
should instead be packaged using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cmake-package</code>
infrastructures in Buildroot, respectively.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">LuaRocks 是 Lua 模块的部署和管理系统，支持各种 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">build.type</code> ： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">builtin</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cmake</code> 。在 Buildroot 的上下文中， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">luarocks-package</code> 基础设施仅支持 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">builtin</code> 模式。应该使用 Buildroot 中的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cmake-package</code> 基础设施打包使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cmake</code> 构建机制的 LuaRocks 软件包。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The main macro of the LuaRocks package infrastructure is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">luarocks-package</code>:
like <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> it works by defining a number of variables providing
metadata information about the package, and then calling <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">luarocks-package</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">LuaRocks 软件包基础设施的主要宏是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">luarocks-package</code> ：类似于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> ，它通过定义一些变量来提供关于软件包的元数据信息，然后调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">luarocks-package</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Just like the generic infrastructure, the LuaRocks infrastructure works
by defining a number of variables before calling the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">luarocks-package</code>
macro.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">就像通用基础设施一样，LuaRocks 基础设施通过在调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">luarocks-package</code> 宏之前定义一些变量来工作。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First, all the package metadata information variables that exist in
the generic infrastructure also exist in the LuaRocks infrastructure:
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_VERSION</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_SOURCE</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_SITE</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_DEPENDENCIES</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_LICENSE</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_LICENSE_FILES</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，所有在通用基础设施中存在的软件包元数据信息变量也存在于 LuaRocks 基础设施中： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_VERSION</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_SOURCE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_SITE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_DEPENDENCIES</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_LICENSE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_LICENSE_FILES</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Two of them are populated by the LuaRocks infrastructure (for the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">download</code> step). If your package is not hosted on the LuaRocks mirror
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(BR2_LUAROCKS_MIRROR)</code>, you can override them:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">两者由 LuaRocks 基础设施填充（用于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">download</code> 步骤）。如果您的软件包未托管在 LuaRocks 镜像 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(BR2_LUAROCKS_MIRROR)</code> 上，则可以覆盖它们：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_SITE</code>, which defaults to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(BR2_LUAROCKS_MIRROR)</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_SITE</code> ，默认为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(BR2_LUAROCKS_MIRROR)</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_SOURCE</code>, which defaults to
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(lowercase LUA_FOO_NAME_UPSTREAM)-$(LUA_FOO_VERSION).src.rock</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_SOURCE</code> ，默认为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(lowercase LUA_FOO_NAME_UPSTREAM)-$(LUA_FOO_VERSION).src.rock</code> </font></font></font>
</li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">A few additional variables, specific to the LuaRocks infrastructure, are
also defined. They can be overridden in specific cases.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">LuaRocks 基础设施中还定义了一些特定的附加变量。它们可以在特定情况下被覆盖。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_NAME_UPSTREAM</code>, which defaults to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">lua-foo</code>, i.e. the Buildroot
  package name
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_NAME_UPSTREAM</code> ，默认为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">lua-foo</code> ，即 Buildroot 包名称</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_ROCKSPEC</code>, which defaults to
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(lowercase LUA_FOO_NAME_UPSTREAM)-$(LUA_FOO_VERSION).rockspec</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_ROCKSPEC</code> ，默认为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(lowercase LUA_FOO_NAME_UPSTREAM)-$(LUA_FOO_VERSION).rockspec</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_SUBDIR</code>, which defaults to
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(LUA_FOO_NAME_UPSTREAM)-$(LUA_FOO_VERSION_WITHOUT_ROCKSPEC_REVISION)</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_SUBDIR</code> ，默认为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(LUA_FOO_NAME_UPSTREAM)-$(LUA_FOO_VERSION_WITHOUT_ROCKSPEC_REVISION)</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_BUILD_OPTS</code> contains additional build options for the
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">luarocks build</code> call.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LUA_FOO_BUILD_OPTS</code> 包含 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">luarocks build</code> 调用的额外构建选项。</font></font></font></li></ul></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_infrastructure_for_perl_cpan_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.11.&nbsp;Infrastructure for Perl/CPAN packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.11. Perl/CPAN 软件包的基础设施</font></font></font></h2></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="perl-package-tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.11.1.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl-package</code> tutorial<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.11.1. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl-package</code> 教程</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First, let’s see how to write a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file for a Perl/CPAN package,
with an example :<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，让我们看看如何为 Perl/CPAN 软件包编写一个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件，附带示例：</font></font></font></p><pre class="screen">01: ################################################################################
02: #
03: # perl-foo-bar
04: #
05: ################################################################################
06:
07: PERL_FOO_BAR_VERSION = 0.02
08: PERL_FOO_BAR_SOURCE = Foo-Bar-$(PERL_FOO_BAR_VERSION).tar.gz
09: PERL_FOO_BAR_SITE = $(BR2_CPAN_MIRROR)/authors/id/M/MO/MONGER
10: PERL_FOO_BAR_DEPENDENCIES = perl-strictures
11: PERL_FOO_BAR_LICENSE = Artistic or GPL-1.0+
12: PERL_FOO_BAR_LICENSE_FILES = LICENSE
13: PERL_FOO_BAR_DISTNAME = Foo-Bar
14:
15: $(eval $(perl-package))</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 7, we declare the version of the package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 7 行，我们声明了包的版本。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 8 and 9, we declare the name of the tarball and the location
of the tarball on a CPAN server. Buildroot will automatically download
the tarball from this location.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 8 和 9 行，我们声明 tarball 的名称和在 CPAN 服务器上的位置。Buildroot 将自动从此位置下载 tarball。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 10, we declare our dependencies, so that they are built
before the build process of our package starts.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 10 行，我们声明我们的依赖关系，以便它们在我们的软件包构建过程开始之前构建。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 11 and 12, we give licensing details about the package (its
license on line 11, and the file containing the license text on line
12).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 11 行和第 12 行，我们提供有关软件包的许可详细信息（第 11 行是许可证，第 12 行是包含许可证文本的文件）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 13, the name of the distribution as needed by the script
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">utils/scancpan</code> (in order to regenerate/upgrade these package files).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 13 行，脚本所需的分发名称为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">utils/scancpan</code> （以重新生成/升级这些软件包文件）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Finally, on line 15, we invoke the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl-package</code> macro that
generates all the Makefile rules that actually allow the package to be
built.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">最后，在第 15 行，我们调用生成实际允许构建软件包的所有 Makefile 规则的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl-package</code> 宏。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Most of these data can be retrieved from <a class="ulink" href="https://metacpan.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">https://metacpan.org/</a>.
So, this file and the Config.in can be generated by running
the script <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">utils/scancpan Foo-Bar</code> in the Buildroot directory
(or in a br2-external tree).
This script creates a Config.in file and foo-bar.mk file for the
requested package, and also recursively for all dependencies specified by
CPAN. You should still manually edit the result. In particular, the
following things should be checked.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这些数据大多可以从 https://metacpan.org/检索到。因此，可以通过在 Buildroot 目录（或 br2-external 树中）运行脚本 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">utils/scancpan Foo-Bar</code> 来生成此文件和 Config.in 文件。此脚本为请求的软件包创建一个 Config.in 文件和 foo-bar.mk 文件，并递归为 CPAN 指定的所有依赖项创建。您仍应手动编辑结果。特别是，应检查以下内容。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
If the perl module links with a shared library that is provided by
  another (non-perl) package, this dependency is not added automatically.
  It has to be added manually to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_BAR_DEPENDENCIES</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果 perl 模块链接到由另一个（非 perl）软件包提供的共享库，则不会自动添加此依赖项。必须手动将其添加到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_BAR_DEPENDENCIES</code> 中。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/Config.in</code> file has to be updated manually to include the
  generated Config.in files. As a hint, the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">scancpan</code> script prints out
  the required <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">source "…"</code> statements, sorted alphabetically.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">必须手动更新 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/Config.in</code> 文件，以包含生成的 Config.in 文件。提示： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">scancpan</code> 脚本会按字母顺序打印所需的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">source "…"</code> 语句。</font></font></font></li></ul></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="perl-package-reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.11.2.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl-package</code> reference<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.11.2. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl-package</code> 参考</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">As a policy, packages that provide Perl/CPAN modules should all be
named <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl-&lt;something&gt;</code> in Buildroot.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">作为政策，提供 Perl/CPAN 模块的软件包应全部在 Buildroot 中命名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl-&lt;something&gt;</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This infrastructure handles various Perl build systems :
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ExtUtils-MakeMaker</code> (EUMM), <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Module-Build</code> (MB) and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Module-Build-Tiny</code>.
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Build.PL</code> is preferred by default when a package provides a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Makefile.PL</code>
and a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Build.PL</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">该基础设施处理各种 Perl 构建系统： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ExtUtils-MakeMaker</code> （EUMM）、 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Module-Build</code> （MB）和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Module-Build-Tiny</code> 。当一个软件包提供 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Makefile.PL</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Build.PL</code> 时，默认情况下首选 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Build.PL</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The main macro of the Perl/CPAN package infrastructure is
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl-package</code>. It is similar to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> macro. The ability to
have target and host packages is also available, with the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-perl-package</code> macro.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Perl/CPAN 软件包基础设施的主要宏是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl-package</code> 。它类似于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 宏。还可以使用目标和主机软件包，使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-perl-package</code> 宏。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Just like the generic infrastructure, the Perl/CPAN infrastructure
works by defining a number of variables before calling the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl-package</code> macro.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">就像通用基础设施一样，Perl/CPAN 基础设施通过在调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl-package</code> 宏之前定义多个变量来工作。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First, all the package metadata information variables that exist in the
generic infrastructure also exist in the Perl/CPAN infrastructure:
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_VERSION</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_SOURCE</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_PATCH</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_SITE</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_SUBDIR</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_DEPENDENCIES</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_INSTALL_TARGET</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，在通用基础设施中存在的所有软件包元数据信息变量也存在于 Perl/CPAN 基础设施中： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_VERSION</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_SOURCE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_PATCH</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_SITE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_SUBDIR</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_DEPENDENCIES</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_INSTALL_TARGET</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Note that setting <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_INSTALL_STAGING</code> to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> has no effect
unless a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_INSTALL_STAGING_CMDS</code> variable is defined. The perl
infrastructure doesn’t define these commands since Perl modules generally
don’t need to be installed to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">staging</code> directory.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_INSTALL_STAGING</code> 设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> ，除非定义了 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_INSTALL_STAGING_CMDS</code> 变量，否则不会产生任何效果。Perl 基础设施不定义这些命令，因为 Perl 模块通常不需要安装到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">staging</code> 目录。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">A few additional variables, specific to the Perl/CPAN infrastructure,
can also be defined. Many of them are only useful in very specific
cases, typical packages will therefore only use a few of them.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">还可以定义一些特定于 Perl/CPAN 基础设施的附加变量。其中许多只在非常特定的情况下有用，因此典型软件包通常只使用其中的一部分。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_PREFER_INSTALLER</code>/<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_PERL_FOO_PREFER_INSTALLER</code>,
  specifies the preferred installation method. Possible values are
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">EUMM</code> (for <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Makefile.PL</code> based installation using
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ExtUtils-MakeMaker</code>) and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">MB</code> (for <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Build.PL</code> based installation
  using <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Module-Build</code>). This variable is only used when the package
  provides both installation methods.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_PREFER_INSTALLER</code> / <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_PERL_FOO_PREFER_INSTALLER</code> ，指定首选安装方法。可能的值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">EUMM</code> （用于基于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ExtUtils-MakeMaker</code> 的安装，使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ExtUtils-MakeMaker</code> ）和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">MB</code> （用于基于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Build.PL</code> 的安装，使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Module-Build</code> ）。仅当软件包提供两种安装方法时才使用此变量。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_CONF_ENV</code>/<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_PERL_FOO_CONF_ENV</code>, to specify additional
  environment variables to pass to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl Makefile.PL</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl Build.PL</code>.
  By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_CONF_ENV</code> / <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_PERL_FOO_CONF_ENV</code> ，用于指定要传递给 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl Makefile.PL</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl Build.PL</code> 的附加环境变量。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_CONF_OPTS</code>/<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_PERL_FOO_CONF_OPTS</code>, to specify additional
  configure options to pass to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl Makefile.PL</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl Build.PL</code>.
  By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_CONF_OPTS</code> / <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_PERL_FOO_CONF_OPTS</code> ，用于指定要传递给 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl Makefile.PL</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl Build.PL</code> 的附加配置选项。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_BUILD_OPTS</code>/<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_PERL_FOO_BUILD_OPTS</code>, to specify additional
  options to pass to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make pure_all</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl Build build</code> in the build step.
  By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_BUILD_OPTS</code> / <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_PERL_FOO_BUILD_OPTS</code> ，用于在构建步骤中传递给 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make pure_all</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl Build build</code> 的其他选项。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_INSTALL_TARGET_OPTS</code>, to specify additional options to
  pass to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make pure_install</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl Build install</code> in the install step.
  By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">PERL_FOO_INSTALL_TARGET_OPTS</code> ，用于在安装步骤中传递给 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make pure_install</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl Build install</code> 的其他选项。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_PERL_FOO_INSTALL_OPTS</code>, to specify additional options to
  pass to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make pure_install</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl Build install</code> in the install step.
  By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_PERL_FOO_INSTALL_OPTS</code> ，用于在安装步骤中传递给 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make pure_install</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">perl Build install</code> 的其他选项。默认为空。</font></font></font></li></ul></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_infrastructure_for_virtual_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.12.&nbsp;Infrastructure for virtual packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.12. 为虚拟包提供基础设施</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="virtual-package-tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>In Buildroot, a virtual package is a package whose functionalities are
provided by one or more packages, referred to as <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">providers</em></span>. The virtual
package management is an extensible mechanism allowing the user to choose
the provider used in the rootfs.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 Buildroot 中，虚拟包是由一个或多个包提供功能的包，称为提供者。虚拟包管理是一种可扩展的机制，允许用户选择在 rootfs 中使用的提供者。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For example, <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">OpenGL ES</em></span> is an API for 2D and 3D graphics on embedded systems.
The implementation of this API is different for the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Allwinner Tech Sunxi</em></span> and
the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Texas Instruments OMAP35xx</em></span> platforms. So <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libgles</code> will be a virtual
package and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sunxi-mali-utgard</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ti-gfx</code> will be the providers.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">例如，OpenGL ES 是用于嵌入式系统上的 2D 和 3D 图形的 API。该 API 的实现对于 Allwinner Tech Sunxi 和 Texas Instruments OMAP35xx 平台是不同的。因此， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libgles</code> 将是一个虚拟包， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sunxi-mali-utgard</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ti-gfx</code> 将是提供者。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_literal_virtual_package_literal_tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.12.1.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">virtual-package</code> tutorial<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.12.1. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">virtual-package</code> 教程</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In the following example, we will explain how to add a new virtual package
(<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">something-virtual</em></span>) and a provider for it (<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">some-provider</em></span>).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在以下示例中，我们将解释如何添加一个新的虚拟包（something-virtual）以及为其提供者（some-provider）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First, let’s create the virtual package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，让我们创建虚拟包。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_virtual_package_8217_s_literal_config_in_literal_file" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.12.2.&nbsp;Virtual package’s <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> file<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.12.2. 虚拟包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> file of virtual package <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">something-virtual</em></span> should contain:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">虚拟包 something-virtual 的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件应包含：</font></font></font></p><pre class="screen">01: config BR2_PACKAGE_HAS_SOMETHING_VIRTUAL
02:     bool
03:
04: config BR2_PACKAGE_PROVIDES_SOMETHING_VIRTUAL
05:     depends on BR2_PACKAGE_HAS_SOMETHING_VIRTUAL
06:     string</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In this file, we declare two options, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_HAS_SOMETHING_VIRTUAL</code> and
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_PROVIDES_SOMETHING_VIRTUAL</code>, whose values will be used by the
providers.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在此文件中，我们声明两个选项， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_HAS_SOMETHING_VIRTUAL</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_PROVIDES_SOMETHING_VIRTUAL</code> ，它们的值将由提供者使用。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_virtual_package_8217_s_literal_mk_literal_file" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.12.3.&nbsp;Virtual package’s <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.12.3. 虚拟包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> for the virtual package should just evaluate the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">virtual-package</code> macro:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">虚拟包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 应该只评估 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">virtual-package</code> 宏：</font></font></font></p><pre class="screen">01: ################################################################################
02: #
03: # something-virtual
04: #
05: ################################################################################
06:
07: $(eval $(virtual-package))</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The ability to have target and host packages is also available, with the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-virtual-package</code> macro.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">也可以使用目标和主机包，使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-virtual-package</code> 宏。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_provider_8217_s_literal_config_in_literal_file" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.12.4.&nbsp;Provider’s <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> file<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.12.4. 供应商的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When adding a package as a provider, only the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> file requires some
modifications.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当将一个软件包添加为供应商时，只有 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件需要进行一些修改。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> file of the package <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">some-provider</em></span>, which provides the
functionalities of <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">something-virtual</em></span>, should contain:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">软件包 some-provider 的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件，该软件包提供了 something-virtual 的功能，应包含：</font></font></font></p><pre class="screen">01: config BR2_PACKAGE_SOME_PROVIDER
02:     bool "some-provider"
03:     select BR2_PACKAGE_HAS_SOMETHING_VIRTUAL
04:     help
05:       This is a comment that explains what some-provider is.
06:
07:       http://foosoftware.org/some-provider/
08:
09: if BR2_PACKAGE_SOME_PROVIDER
10: config BR2_PACKAGE_PROVIDES_SOMETHING_VIRTUAL
11:     default "some-provider"
12: endif</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 3, we select <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_HAS_SOMETHING_VIRTUAL</code>, and on line 11, we
set the value of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_PROVIDES_SOMETHING_VIRTUAL</code> to the name of the
provider, but only if it is selected.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 3 行，我们选择 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_HAS_SOMETHING_VIRTUAL</code> ，在第 11 行，如果已选择，则将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_PROVIDES_SOMETHING_VIRTUAL</code> 的值设置为提供者的名称。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_provider_8217_s_literal_mk_literal_file" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.12.5.&nbsp;Provider’s <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.12.5. 供应商的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file should also declare an additional variable
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SOME_PROVIDER_PROVIDES</code> to contain the names of all the virtual
packages it is an implementation of:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件还应声明一个额外的变量 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SOME_PROVIDER_PROVIDES</code> ，以包含其实现的所有虚拟包的名称：</font></font></font></p><pre class="screen">01: SOME_PROVIDER_PROVIDES = something-virtual</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Of course, do not forget to add the proper build and runtime dependencies for
this package!<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当然，不要忘记为此软件包添加适当的构建和运行时依赖项！</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_notes_on_depending_on_a_virtual_package" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.12.6.&nbsp;Notes on depending on a virtual package<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.12.6.&nbsp;依赖虚拟包时的注意事项</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When adding a package that requires a certain <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FEATURE</code> provided by a virtual
package, you have to use <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on BR2_PACKAGE_HAS_FEATURE</code>, like so:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当添加一个需要虚拟包提供的特定 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FEATURE</code> 的软件包时，您必须使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on BR2_PACKAGE_HAS_FEATURE</code> ，如下所示：</font></font></font></p><pre class="screen">config BR2_PACKAGE_HAS_FEATURE
    bool

config BR2_PACKAGE_FOO
    bool "foo"
    depends on BR2_PACKAGE_HAS_FEATURE</pre></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_notes_on_depending_on_a_specific_provider" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.12.7.&nbsp;Notes on depending on a specific provider<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.12.7. 依赖特定提供商的注意事项</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If your package really requires a specific provider, then you’ll have to
make your package <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code> this provider; you can <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">not</em></span> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select</code> a
provider.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您的软件包确实需要特定的提供者，那么您将不得不使您的软件包 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on</code> 这个提供者；您不能 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select</code> 一个提供者。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Let’s take an example with two providers for a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FEATURE</code>:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">让我们以一个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FEATURE</code> 有两个提供者的示例来说明：</font></font></font></p><pre class="screen">config BR2_PACKAGE_HAS_FEATURE
    bool

config BR2_PACKAGE_FOO
    bool "foo"
    select BR2_PACKAGE_HAS_FEATURE

config BR2_PACKAGE_BAR
    bool "bar"
    select BR2_PACKAGE_HAS_FEATURE</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">And you are adding a package that needs <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FEATURE</code> as provided by <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code>,
but not as provided by <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bar</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">而您正在添加一个需要 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FEATURE</code> 的软件包，该软件包由 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> 提供，而不是由 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bar</code> 提供。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you were to use <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select BR2_PACKAGE_FOO</code>, then the user would still
be able to select <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_BAR</code> in the menuconfig. This would create
a configuration inconsistency, whereby two providers of the same <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FEATURE</code>
would be enabled at once, one explicitly set by the user, the other
implicitly by your <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select BR2_PACKAGE_FOO</code> ，那么用户仍然可以在 menuconfig 中选择 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_BAR</code> 。这将创建配置不一致，即同时启用两个相同 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FEATURE</code> 的提供者，一个由用户明确设置，另一个由您的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select</code> 隐式设置。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Instead, you have to use <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on BR2_PACKAGE_FOO</code>, which avoids any
implicit configuration inconsistency.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">相反，您必须使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on BR2_PACKAGE_FOO</code> ，这样可以避免任何隐式配置不一致。</font></font></font></p></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_infrastructure_for_packages_using_kconfig_for_configuration_files" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.13.&nbsp;Infrastructure for packages using kconfig for configuration files<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.13. 使用 kconfig 为配置文件的软件包提供基础设施</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">A popular way for a software package to handle user-specified
configuration is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kconfig</code>. Among others, it is used by the Linux
kernel, Busybox, and Buildroot itself. The presence of a .config file
and a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">menuconfig</code> target are two well-known symptoms of kconfig being
used.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">软件包处理用户指定配置的一种流行方式是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kconfig</code> 。在其他情况下，它被 Linux 内核，Busybox 和 Buildroot 本身使用。.config 文件的存在和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">menuconfig</code> 目标是使用 kconfig 的两个众所周知的症状。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot features an infrastructure for packages that use kconfig for
their configuration. This infrastructure provides the necessary logic to
expose the package’s <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">menuconfig</code> target as <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo-menuconfig</code> in
Buildroot, and to handle the copying back and forth of the configuration
file in a correct way.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 具有用于使用 kconfig 进行配置的软件包的基础设施。该基础设施提供了将软件包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">menuconfig</code> 目标在 Buildroot 中公开为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo-menuconfig</code> ，并以正确方式处理配置文件的复制的必要逻辑。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kconfig-package</code> infrastructure is based on the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code>
infrastructure. All variables supported by <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> are
available in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kconfig-package</code> as well. See
<a class="xref" href="#generic-package-reference" title="18.6.2.&nbsp;generic-package reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;18.6.2, “<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> reference”</a> for more details.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kconfig-package</code> 基础设施是基于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 基础设施的。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 支持的所有变量在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kconfig-package</code> 中也都可用。有关更多详细信息，请参阅第 18.6.2 节“ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 参考”。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In order to use the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kconfig-package</code> infrastructure for a Buildroot
package, the minimally required lines in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file, in addition to
the variables required by the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> infrastructure, are:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为了使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kconfig-package</code> 基础设施构建 Buildroot 软件包，除了 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 基础设施需要的变量外，在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件中最少需要的行是：</font></font></font></p><pre class="screen">FOO_KCONFIG_FILE = reference-to-source-configuration-file

$(eval $(kconfig-package))</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This snippet creates the following make targets:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此代码片段创建以下 make 目标：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo-menuconfig</code>, which calls the package’s <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">menuconfig</code> target
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo-menuconfig</code> ，调用软件包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">menuconfig</code> 目标</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo-update-config</code>, which copies the configuration back to the
  source configuration file. It is not possible to use this target
  when fragment files are set.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo-update-config</code> ，将配置复制回源配置文件。在设置片段文件时，无法使用此目标。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo-update-defconfig</code>, which copies the configuration back to the
  source configuration file. The configuration file will only list the
  options that differ from the default values. It is not possible to
  use this target when fragment files are set.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo-update-defconfig</code> ，将配置复制回源配置文件。配置文件仅列出与默认值不同的选项。在设置片段文件时，无法使用此目标。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo-diff-config</code>, which outputs the differences between the current
  configuration and the one defined in the Buildroot configuration for
  this kconfig package. The output is useful to identify the
  configuration changes that may have to be propagated to
  configuration fragments for example.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo-diff-config</code> ，输出当前配置与为此 kconfig 软件包的 Buildroot 配置定义的配置之间的差异。输出有助于识别可能需要传播到配置片段的配置更改。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">and ensures that the source configuration file is copied to the build
directory at the right moment.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">并确保源配置文件在正确的时刻复制到构建目录。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">There are two options to specify a configuration file to use, either
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_KCONFIG_FILE</code> (as in the example, above) or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_KCONFIG_DEFCONFIG</code>.
It is mandatory to provide either, but not both:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有两种选项可以指定要使用的配置文件，即 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_KCONFIG_FILE</code> （如上例所示）或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_KCONFIG_DEFCONFIG</code> 。必须提供其中之一，但不能同时提供两者：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_KCONFIG_FILE</code> specifies the path to a defconfig or full-config file
  to be used to configure the package.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_KCONFIG_FILE</code> 指定要用于配置软件包的 defconfig 或 full-config 文件的路径。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_KCONFIG_DEFCONFIG</code> specifies the defconfig <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</em></span> rule to call to
  configure the package.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_KCONFIG_DEFCONFIG</code> 指定要调用以配置软件包的 defconfig make 规则。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In addition to these minimally required lines, several optional variables can
be set to suit the needs of the package under consideration:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">除了这些最低要求的行之外，还可以设置几个可选变量以满足所考虑软件包的需求：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_KCONFIG_EDITORS</code>: a space-separated list of kconfig editors to
  support, for example <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">menuconfig xconfig</em></span>. By default, <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">menuconfig</em></span>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_KCONFIG_EDITORS</code> ：支持的 kconfig 编辑器的空格分隔列表，例如 menuconfig xconfig。默认为 menuconfig。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_KCONFIG_FRAGMENT_FILES</code>: a space-separated list of configuration
  fragment files that are merged to the main configuration file.
  Fragment files are typically used when there is a desire to stay in sync
  with an upstream (def)config file, with some minor modifications.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_KCONFIG_FRAGMENT_FILES</code> ：一组以空格分隔的配置片段文件列表，这些文件将合并到主配置文件中。当希望与上游（def）配置文件保持同步并进行一些微小修改时，通常会使用片段文件。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_KCONFIG_OPTS</code>: extra options to pass when calling the kconfig
  editors. This may need to include <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(FOO_MAKE_OPTS)</em></span>, for example. By
  default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_KCONFIG_OPTS</code> ：调用 kconfig 编辑器时传递的额外选项。例如，这可能需要包括$(FOO_MAKE_OPTS)。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_KCONFIG_FIXUP_CMDS</code>: a list of shell commands needed to fixup the
  configuration file after copying it or running a kconfig editor. Such
  commands may be needed to ensure a configuration consistent with other
  configuration of Buildroot, for example. By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_KCONFIG_FIXUP_CMDS</code> ：在复制配置文件或运行 kconfig 编辑器后需要修复配置文件的一组 shell 命令列表。这些命令可能需要确保与 Buildroot 的其他配置一致的配置。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_KCONFIG_DOTCONFIG</code>: path (with filename) of the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> file,
  relative to the package source tree. The default, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code>, should
  be well suited for all packages that use the standard kconfig
  infrastructure as inherited from the Linux kernel; some packages use
  a derivative of kconfig that use a different location.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_KCONFIG_DOTCONFIG</code> ： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> 文件的路径（包括文件名），相对于软件包源树。默认情况下， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> 对于所有使用从 Linux 内核继承的标准 kconfig 基础设施的软件包非常合适；一些软件包使用 kconfig 的衍生版本，其位置不同。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_KCONFIG_DEPENDENCIES</code>: the list of packages (most probably, host
  packages) that need to be built before this package’s kconfig is
  interpreted. Seldom used. By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_KCONFIG_DEPENDENCIES</code> ：需要在解释此软件包的 kconfig 之前构建的软件包列表（很可能是主机软件包）。很少使用。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_KCONFIG_SUPPORTS_DEFCONFIG</code>: whether the package’s kconfig system
  supports using defconfig files; few packages do not. By default, <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</em></span>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_KCONFIG_SUPPORTS_DEFCONFIG</code> ：软件包的 kconfig 系统是否支持使用 defconfig 文件；很少有软件包不支持。默认为 YES。</font></font></font></li></ul></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_infrastructure_for_rebar_based_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.14.&nbsp;Infrastructure for rebar-based packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.14. 用于基于钢筋的软件包的基础设施</font></font></font></h2></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="rebar-package-tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.14.1.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar-package</code> tutorial<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.14.1. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar-package</code> 教程</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First, let’s see how to write a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file for a rebar-based package,
with an example :<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，让我们看看如何为基于钢筋的软件包编写 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件，附带一个示例：</font></font></font></p><pre class="screen">01: ################################################################################
02: #
03: # erlang-foobar
04: #
05: ################################################################################
06:
07: ERLANG_FOOBAR_VERSION = 1.0
08: ERLANG_FOOBAR_SOURCE = erlang-foobar-$(ERLANG_FOOBAR_VERSION).tar.xz
09: ERLANG_FOOBAR_SITE = http://www.foosoftware.org/download
10: ERLANG_FOOBAR_DEPENDENCIES = host-libaaa libbbb
11:
12: $(eval $(rebar-package))</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 7, we declare the version of the package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 7 行，我们声明了包的版本。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 8 and 9, we declare the name of the tarball (xz-ed tarball
recommended) and the location of the tarball on the Web. Buildroot
will automatically download the tarball from this location.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 8 和 9 行，我们声明了 tarball 的名称（建议使用 xz-ed tarball）和 tarball 在 Web 上的位置。Buildroot 将自动从此位置下载 tarball。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 10, we declare our dependencies, so that they are built
before the build process of our package starts.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 10 行，我们声明我们的依赖关系，以便它们在我们的软件包构建过程开始之前构建。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Finally, on line 12, we invoke the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar-package</code> macro that
generates all the Makefile rules that actually allows the package to
be built.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">最后，在第 12 行，我们调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar-package</code> 宏，生成所有实际允许构建软件包的 Makefile 规则。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="rebar-package-reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.14.2.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar-package</code> reference<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.14.2. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar-package</code> 参考</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The main macro of the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar</code> package infrastructure is
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar-package</code>. It is similar to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> macro. The
ability to have host packages is also available, with the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-rebar-package</code> macro.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar</code> 包基础设施的主要宏是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar-package</code> 。它类似于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 宏。还可以使用主机包，使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-rebar-package</code> 宏。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Just like the generic infrastructure, the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar</code> infrastructure works
by defining a number of variables before calling the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar-package</code>
macro.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">就像通用基础设施一样， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar</code> 基础设施通过在调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar-package</code> 宏之前定义多个变量来工作。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First, all the package metadata information variables that exist in
the generic infrastructure also exist in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar</code> infrastructure:
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_VERSION</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_SOURCE</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_PATCH</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_SITE</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_SUBDIR</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_DEPENDENCIES</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_INSTALL_STAGING</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_INSTALL_TARGET</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_LICENSE</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_LICENSE_FILES</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，在通用基础设施中存在的所有软件包元数据信息变量也存在于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar</code> 基础设施中： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_VERSION</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_SOURCE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_PATCH</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_SITE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_SUBDIR</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_DEPENDENCIES</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_INSTALL_STAGING</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_INSTALL_TARGET</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_LICENSE</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_LICENSE_FILES</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">A few additional variables, specific to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar</code> infrastructure,
can also be defined. Many of them are only useful in very specific
cases, typical packages will therefore only use a few of them.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">还可以定义一些特定于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar</code> 基础设施的附加变量。其中许多只在非常特定的情况下有用，典型的软件包因此只会使用其中的一部分。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_USE_AUTOCONF</code>, to specify that the package uses
  <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autoconf</em></span> at the configuration step.  When a package sets this
  variable to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code>, the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autotools</code> infrastructure is used.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_USE_AUTOCONF</code> ，用于指定软件包在配置步骤中使用 autoconf。当软件包将此变量设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> 时，将使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autotools</code> 基础设施。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note.&nbsp;</strong>You can also use some of the variables from the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autotools</code>
  infrastructure: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_CONF_ENV</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_CONF_OPTS</code>,
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_AUTORECONF</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_AUTORECONF_ENV</code> and
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_AUTORECONF_OPTS</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意。您还可以使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autotools</code> 基础设施中的一些变量： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_CONF_ENV</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_CONF_OPTS</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_AUTORECONF</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_AUTORECONF_ENV</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_AUTORECONF_OPTS</code> 。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_USE_BUNDLED_REBAR</code>, to specify that the package has
  a bundled version of <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar</em></span> <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">and</strong></span> that it shall be used. Valid
  values are <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code> (the default).
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_USE_BUNDLED_REBAR</code> ，指定软件包具有 rebar 的捆绑版本，并将其用于。有效值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code> （默认值）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note.&nbsp;</strong>If the package bundles a <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar</em></span> utility, but can use the generic
  one that Buildroot provides, just say <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code> (i.e., do not specify
  this variable). Only set if it is mandatory to use the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar</em></span>
  utility bundled in this package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意。如果软件包捆绑了 rebar 实用程序，但可以使用 Buildroot 提供的通用实用程序，只需说 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code> （即，不指定此变量）。仅在必须使用此软件包中捆绑的 rebar 实用程序时设置。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_REBAR_ENV</code>, to specify additional environment
  variables to pass to the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar</em></span> utility.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_REBAR_ENV</code> ，用于指定传递给 rebar 实用程序的额外环境变量。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_KEEP_DEPENDENCIES</code>, to keep the dependencies
  described in the rebar.config file. Valid values are <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code>
  (the default). Unless this variable is set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code>, the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebar</em></span>
  infrastructure removes such dependencies in a post-patch hook to
  ensure rebar does not download nor compile them.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_KEEP_DEPENDENCIES</code> ，用于保留 rebar.config 文件中描述的依赖项。有效值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code> （默认值）。除非将此变量设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> ，否则 rebar 基础结构会在 post-patch 钩子中删除这些依赖项，以确保 rebar 不会下载也不会编译它们。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">With the rebar infrastructure, all the steps required to build
and install the packages are already defined, and they generally work
well for most rebar-based packages. However, when required, it is
still possible to customize what is done in any particular step:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过 rebar 基础结构，构建和安装软件包所需的所有步骤已经定义，并且它们通常适用于大多数基于 rebar 的软件包。但是，如果需要，仍然可以自定义在任何特定步骤中执行的操作：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
By adding a post-operation hook (after extract, patch, configure,
  build or install). See <a class="xref" href="#hooks" title="18.23.&nbsp;Hooks available in the various build steps" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;18.23, “Hooks available in the various build steps”</a> for details.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过添加后操作挂钩（在提取、打补丁、配置、构建或安装之后）。有关详细信息，请参阅第 18.23 节“各构建步骤中可用的挂钩”。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
By overriding one of the steps. For example, even if the rebar
  infrastructure is used, if the package <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file defines its
  own <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_BUILD_CMDS</code> variable, it will be used instead
  of the default rebar one. However, using this method should be
  restricted to very specific cases. Do not use it in the general
  case.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过覆盖其中一个步骤。例如，即使使用了钢筋基础设施，如果包 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件定义了自己的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ERLANG_FOOBAR_BUILD_CMDS</code> 变量，它将被用来代替默认的钢筋。然而，应该将使用这种方法限制在非常特定的情况下。不要在一般情况下使用它。</font></font></font></li></ul></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_infrastructure_for_waf_based_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.15.&nbsp;Infrastructure for Waf-based packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.15. Waf-based 软件包的基础设施</font></font></font></h2></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="waf-package-tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.15.1.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">waf-package</code> tutorial<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.15.1. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">waf-package</code> 教程</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First, let’s see how to write a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file for a Waf-based package, with
an example :<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，让我们看看如何为基于 Waf 的软件包编写一个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件，附带一个示例：</font></font></font></p><pre class="screen">01: ################################################################################
02: #
03: # libfoo
04: #
05: ################################################################################
06:
07: LIBFOO_VERSION = 1.0
08: LIBFOO_SOURCE = libfoo-$(LIBFOO_VERSION).tar.gz
09: LIBFOO_SITE = http://www.foosoftware.org/download
10: LIBFOO_CONF_OPTS = --enable-bar --disable-baz
11: LIBFOO_DEPENDENCIES = bar
12:
13: $(eval $(waf-package))</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 7, we declare the version of the package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 7 行，我们声明了包的版本。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 8 and 9, we declare the name of the tarball (xz-ed tarball
recommended) and the location of the tarball on the Web. Buildroot
will automatically download the tarball from this location.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 8 和 9 行，我们声明了 tarball 的名称（建议使用 xz-ed tarball）和 tarball 在 Web 上的位置。Buildroot 将自动从此位置下载 tarball。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 10, we tell Buildroot what options to enable for libfoo.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 10 行，我们告诉 Buildroot 要为 libfoo 启用哪些选项。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 11, we tell Buildroot the dependencies of libfoo.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 11 行，我们告诉 Buildroot libfoo 的依赖关系。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Finally, on line line 13, we invoke the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">waf-package</code>
macro that generates all the Makefile rules that actually allows the
package to be built.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">最后，在第 13 行，我们调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">waf-package</code> 宏，生成所有实际允许构建软件包的 Makefile 规则。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="waf-package-reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.15.2.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">waf-package</code> reference<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.15.2. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">waf-package</code> 参考</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The main macro of the Waf package infrastructure is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">waf-package</code>.
It is similar to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> macro.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Waf 软件包基础设施的主要宏是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">waf-package</code> 。它类似于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 宏。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Just like the generic infrastructure, the Waf infrastructure works
by defining a number of variables before calling the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">waf-package</code>
macro.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">就像通用基础设施一样，Waf 基础设施通过在调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">waf-package</code> 宏之前定义多个变量来工作。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First, all the package metadata information variables that exist in
the generic infrastructure also exist in the Waf infrastructure:
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_VERSION</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SOURCE</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PATCH</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SUBDIR</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_DEPENDENCIES</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，所有存在于通用基础设施中的软件包元数据信息变量也存在于 Waf 基础设施中： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_VERSION</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SOURCE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PATCH</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SUBDIR</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_DEPENDENCIES</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">An additional variable, specific to the Waf infrastructure, can
also be defined.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">可以定义一个特定于 Waf 基础设施的附加变量。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SUBDIR</code> may contain the name of a subdirectory inside the
  package that contains the main wscript file. This is useful,
  if for example, the main wscript file is not at the root of
  the tree extracted by the tarball. If <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_SUBDIR</code> is not
  specified, it defaults to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SUBDIR</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SUBDIR</code> 可能包含包内包含主 wscript 文件的子目录的名称。例如，如果主 wscript 文件不在 tarball 提取的树的根目录下，则这很有用。如果未指定 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_LIBFOO_SUBDIR</code> ，则默认为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SUBDIR</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_NEEDS_EXTERNAL_WAF</code> can be set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code> to tell
  Buildroot to use the bundled <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">waf</code> executable. If set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code>, the
  default, then Buildroot will use the waf executable provided in the
  package source tree; if set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code>, then Buildroot will download,
  install waf as a host tool and use it to build the package.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_NEEDS_EXTERNAL_WAF</code> 可设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code> ，以告诉 Buildroot 使用捆绑的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">waf</code> 可执行文件。如果设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">NO</code> ，则默认情况下，Buildroot 将使用包源树中提供的 waf 可执行文件；如果设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> ，则 Buildroot 将下载、安装 waf 作为主机工具，并使用它构建包。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_WAF_OPTS</code>, to specify additional options to pass to the
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">waf</code> script at every step of the package build process: configure,
  build and installation. By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_WAF_OPTS</code> ，用于在软件包构建过程的每个步骤（配置、构建和安装）中传递给 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">waf</code> 脚本的额外选项。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONF_OPTS</code>, to specify additional options to pass to the
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">waf</code> script for the configuration step. By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONF_OPTS</code> ，用于在配置步骤中传递给 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">waf</code> 脚本的额外选项。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_BUILD_OPTS</code>, to specify additional options to pass to the
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">waf</code> script during the build step. By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_BUILD_OPTS</code> ，用于在构建步骤中传递给 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">waf</code> 脚本的额外选项。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING_OPTS</code>, to specify additional options to pass
  to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">waf</code> script during the staging installation step.  By default,
  empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING_OPTS</code> ，在分阶段安装过程中传递给 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">waf</code> 脚本的附加选项。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET_OPTS</code>, to specify additional options to pass
  to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">waf</code> script during the target installation step.  By default,
  empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET_OPTS</code> ，在目标安装步骤中传递给 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">waf</code> 脚本的附加选项。默认为空。</font></font></font></li></ul></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_infrastructure_for_meson_based_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.16.&nbsp;Infrastructure for Meson-based packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.16. 基于 Meson 的软件包基础设施</font></font></font></h2></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="meson-package-tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.16.1.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">meson-package</code> tutorial<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.16.1. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">meson-package</code> 教程</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a class="ulink" href="http://mesonbuild.com/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Meson</a> is an open source build system meant to be both
extremely fast, and, even more importantly, as user friendly as possible. It
uses <a class="ulink" href="https://ninja-build.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Ninja</a> as a companion tool to perform the actual
build operations.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Meson 是一个开源构建系统，旨在既快速又尽可能用户友好。它使用 Ninja 作为辅助工具来执行实际的构建操作。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Let’s see how to write a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file for a Meson-based package, with an example:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">让我们看看如何为基于 Meson 的软件包编写 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件，附带一个示例：</font></font></font></p><pre class="screen">01: ################################################################################
02: #
03: # foo
04: #
05: ################################################################################
06:
07: FOO_VERSION = 1.0
08: FOO_SOURCE = foo-$(FOO_VERSION).tar.gz
09: FOO_SITE = http://www.foosoftware.org/download
10: FOO_LICENSE = GPL-3.0+
11: FOO_LICENSE_FILES = COPYING
12: FOO_INSTALL_STAGING = YES
13:
14: FOO_DEPENDENCIES = host-pkgconf bar
15:
16: ifeq ($(BR2_PACKAGE_BAZ),y)
17: FOO_CONF_OPTS += -Dbaz=true
18: FOO_DEPENDENCIES += baz
19: else
20: FOO_CONF_OPTS += -Dbaz=false
21: endif
22:
23: $(eval $(meson-package))</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The Makefile starts with the definition of the standard variables for package
declaration (lines 7 to 11).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Makefile 以标准变量的定义开始，用于包声明（第 7 至 11 行）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line line 23, we invoke the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">meson-package</code> macro that generates all the
Makefile rules that actually allows the package to be built.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 23 行，我们调用生成所有 Makefile 规则的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">meson-package</code> 宏，实际上允许构建软件包。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In the example, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-pkgconf</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bar</code> are declared as dependencies in
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES</code> at line 14 because the Meson build file of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> uses
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pkg-config</code> to determine the compilation flags and libraries of package <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bar</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在示例中， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-pkgconf</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bar</code> 被声明为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> 的 Meson 构建文件中的依赖项，因为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> 的 Meson 构建文件使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pkg-config</code> 来确定软件包 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bar</code> 的编译标志和库。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Note that it is not necessary to add <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-meson</code> in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES</code>
variable of a package, since this basic dependency is automatically added as
needed by the Meson package infrastructure.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，在软件包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES</code> 变量中不需要添加 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-meson</code> ，因为这个基本依赖项会根据 Meson 软件包基础设施的需要自动添加。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If the "baz" package is selected, then support for the "baz" feature in "foo" is
activated by adding <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-Dbaz=true</code> to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_CONF_OPTS</code> at line 17, as specified in
the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">meson_options.txt</code> file in "foo" source tree. The "baz" package is also
added to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES</code>. Note that the support for <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">baz</code> is explicitly
disabled at line 20, if the package is not selected.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果选择了“baz”包，则通过在第 17 行将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-Dbaz=true</code> 添加到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_CONF_OPTS</code> 中来激活“foo”中“baz”功能，如“foo”源树中的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">meson_options.txt</code> 文件中所指定的那样。“baz”包也被添加到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES</code> 中。请注意，如果未选择该包，则在第 20 行明确禁用对 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">baz</code> 的支持。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To sum it up, to add a new meson-based package, the Makefile example can be
copied verbatim then edited to replace all occurences of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO</code> with the
uppercase name of the new package and update the values of the standard
variables.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">总而言之，要添加一个基于 meson 的新包，可以直接复制 Makefile 示例，然后编辑以将所有 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO</code> 的出现替换为新包的大写名称，并更新标准变量的值。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="meson-package-reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.16.2.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">meson-package</code> reference<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.16.2. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">meson-package</code> 参考</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The main macro of the Meson package infrastructure is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">meson-package</code>. It is
similar to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> macro. The ability to have target and host
packages is also available, with the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-meson-package</code> macro.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Meson 软件包基础设施的主要宏是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">meson-package</code> 。它类似于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 宏。还可以使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-meson-package</code> 宏来实现目标和主机软件包的功能。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Just like the generic infrastructure, the Meson infrastructure works by defining
a number of variables before calling the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">meson-package</code> macro.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">就像通用基础设施一样，Meson 基础设施通过在调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">meson-package</code> 宏之前定义多个变量来工作。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First, all the package metadata information variables that exist in the generic
infrastructure also exist in the Meson infrastructure: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_VERSION</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SOURCE</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_PATCH</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SITE</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SUBDIR</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_INSTALL_STAGING</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_INSTALL_TARGET</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，所有在通用基础设施中存在的软件包元数据信息变量在 Meson 基础设施中也存在： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_VERSION</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SOURCE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_PATCH</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SITE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SUBDIR</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_INSTALL_STAGING</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_INSTALL_TARGET</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">A few additional variables, specific to the Meson infrastructure, can also be
defined. Many of them are only useful in very specific cases, typical packages
will therefore only use a few of them.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一些额外的变量，特定于 Meson 基础设施，也可以被定义。其中许多只在非常特定的情况下有用，典型的软件包因此只会使用其中的一部分。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SUBDIR</code> may contain the name of a subdirectory inside the
  package that contains the main meson.build file. This is useful,
  if for example, the main meson.build file is not at the root of
  the tree extracted by the tarball. If <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_FOO_SUBDIR</code> is not
  specified, it defaults to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SUBDIR</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SUBDIR</code> 可能包含包内包含主 meson.build 文件的子目录的名称。例如，如果主 meson.build 文件不在 tarball 提取的树的根目录下，则这将非常有用。如果未指定 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_FOO_SUBDIR</code> ，则默认为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SUBDIR</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_CONF_ENV</code>, to specify additional environment variables to pass to
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">meson</code> for the configuration step. By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_CONF_ENV</code> ，用于指定传递给 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">meson</code> 进行配置步骤的额外环境变量。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_CONF_OPTS</code>, to specify additional options to pass to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">meson</code> for the
  configuration step. By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_CONF_OPTS</code> ，用于指定传递给配置步骤中的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">meson</code> 的附加选项。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_CFLAGS</code>, to specify compiler arguments added to the package specific
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cross-compile.conf</code> file <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">c_args</code> property. By default, the value of
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TARGET_CFLAGS</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_CFLAGS</code> ，用于指定添加到特定软件包 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cross-compile.conf</code> 文件 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">c_args</code> 属性的编译器参数。默认情况下，值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TARGET_CFLAGS</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_CXXFLAGS</code>, to specify compiler arguments added to the package specific
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cross-compile.conf</code> file <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cpp_args</code> property. By default, the value of
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TARGET_CXXFLAGS</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_CXXFLAGS</code> ，用于指定添加到特定软件包 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cross-compile.conf</code> 文件 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cpp_args</code> 属性的编译器参数。默认情况下，值为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TARGET_CXXFLAGS</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_LDFLAGS</code>, to specify compiler arguments added to the package specific
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cross-compile.conf</code> file <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">c_link_args</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cpp_link_args</code> properties. By
  default, the value of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TARGET_LDFLAGS</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_LDFLAGS</code> ，用于指定添加到特定软件包 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cross-compile.conf</code> 文件 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">c_link_args</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cpp_link_args</code> 属性的编译器参数。默认情况下， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TARGET_LDFLAGS</code> 的值。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_MESON_EXTRA_BINARIES</code>, to specify a space-separated list of programs
  to add to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[binaries]</code> section of the meson <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cross-compilation.conf</code>
  configuration file. The format is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">program-name='/path/to/program'</code>, with
  no space around the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">=</code> sign, and with the path of the program between
  single quotes. By default, empty. Note that Buildroot already sets the
  correct values for <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">c</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cpp</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ar</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">strip</code>, and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pkgconfig</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_MESON_EXTRA_BINARIES</code> ，用于指定要添加到 meson <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cross-compilation.conf</code> 配置文件的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[binaries]</code> 部分的程序的空格分隔列表。格式为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">program-name='/path/to/program'</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">=</code> 符号周围没有空格，并且程序的路径在单引号之间。默认为空。请注意，Buildroot 已经为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">c</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cpp</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ar</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">strip</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pkgconfig</code> 设置了正确的值。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_MESON_EXTRA_PROPERTIES</code>, to specify a space-separated list of
  properties to add to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[properties]</code> section of the meson
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cross-compilation.conf</code> configuration file. The format is
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">property-name=&lt;value&gt;</code> with no space around the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">=</code> sign, and with
  single quotes around string values. By default, empty. Note that
  Buildroot already sets values for <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">needs_exe_wrapper</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">c_args</code>,
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">c_link_args</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cpp_args</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cpp_link_args</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sys_root</code>, and
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pkg_config_libdir</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_MESON_EXTRA_PROPERTIES</code> ，用于指定要添加到 meson <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cross-compilation.conf</code> 配置文件的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[properties]</code> 部分的属性的空格分隔列表。格式为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">property-name=&lt;value&gt;</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">=</code> 符号周围没有空格，并且字符串值在单引号之间。默认为空。请注意，Buildroot 已经为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">needs_exe_wrapper</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">c_args</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">c_link_args</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cpp_args</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cpp_link_args</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sys_root</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pkg_config_libdir</code> 设置了值。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_NINJA_ENV</code>, to specify additional environment variables to pass to
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ninja</code>, meson companion tool in charge of the build operations. By default,
  empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_NINJA_ENV</code> ，用于指定要传递给 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ninja</code> 的额外环境变量， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ninja</code> 是负责构建操作的 meson 辅助工具。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_NINJA_OPTS</code>, to specify a space-separated list of targets to build. By
  default, empty, to build the default target(s).
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_NINJA_OPTS</code> ，用于指定要构建的以空格分隔的目标列表。默认情况下为空，表示构建默认目标。</font></font></font></li></ul></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_infrastructure_for_cargo_based_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.17.&nbsp;Infrastructure for Cargo-based packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.17. 基于 Cargo 的软件包基础设施</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Cargo is the package manager for the Rust programming language. It allows the
user to build programs or libraries written in Rust, but it also downloads and
manages their dependencies, to ensure repeatable builds. Cargo packages are
called "crates".<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Cargo 是 Rust 编程语言的软件包管理器。它允许用户构建用 Rust 编写的程序或库，还可以下载和管理它们的依赖项，以确保可重复构建。Cargo 软件包被称为 "crates"。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="cargo-package-tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.17.1.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cargo-package</code> tutorial<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.17.1. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cargo-package</code> 教程</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> file of Cargo-based package <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</em></span> should contain:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">基于 Cargo 的包 foo 的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件应包含：</font></font></font></p><pre class="screen">01: config BR2_PACKAGE_FOO
02:     bool "foo"
03:     depends on BR2_PACKAGE_HOST_RUSTC_TARGET_ARCH_SUPPORTS
04:     select BR2_PACKAGE_HOST_RUSTC
05:     help
06:       This is a comment that explains what foo is.
07:
08:       http://foosoftware.org/foo/</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">And the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file for this package should contain:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这个软件包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件应包含：</font></font></font></p><pre class="screen">01: ################################################################################
02: #
03: # foo
04: #
05: ################################################################################
06:
07: FOO_VERSION = 1.0
08: FOO_SOURCE = foo-$(FOO_VERSION).tar.gz
09: FOO_SITE = http://www.foosoftware.org/download
10: FOO_LICENSE = GPL-3.0+
11: FOO_LICENSE_FILES = COPYING
12:
13: $(eval $(cargo-package))</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The Makefile starts with the definition of the standard variables for
package declaration (lines 7 to 11).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Makefile 以标准变量的定义开始，用于包声明（第 7 至 11 行）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">As seen in line 13, it is based on the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cargo-package</code>
infrastructure. Cargo will be invoked automatically by this
infrastructure to build and install the package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">正如第 13 行所示，它基于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cargo-package</code> 基础设施。货物将被此基础设施自动调用以构建和安装软件包。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">It is still possible to define custom build commands or install
commands (i.e.  with FOO_BUILD_CMDS and FOO_INSTALL_TARGET_CMDS).
Those will then replace the commands from the cargo infrastructure.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">仍然可以定义自定义构建命令或安装命令（即使用 FOO_BUILD_CMDS 和 FOO_INSTALL_TARGET_CMDS）。然后，这些命令将替换货物基础设施中的命令。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_literal_cargo_package_literal_reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.17.2.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cargo-package</code> reference<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.17.2. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cargo-package</code> 参考</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The main macros for the Cargo package infrastructure are
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cargo-package</code> for target packages and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-cargo-package</code> for host
packages.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Cargo 软件包基础设施的主要宏是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cargo-package</code> 用于目标软件包， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-cargo-package</code> 用于主机软件包。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Just like the generic infrastructure, the Cargo infrastructure works
by defining a number of variables before calling the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cargo-package</code>
or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-cargo-package</code> macros.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">就像通用基础设施一样，Cargo 基础设施通过在调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cargo-package</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-cargo-package</code> 宏之前定义多个变量来工作。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First, all the package metadata information variables that exist in
the generic infrastructure also exist in the Cargo infrastructure:
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_VERSION</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SOURCE</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_PATCH</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SITE</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_LICENSE</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_LICENSE_FILES</code>, etc.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，所有存在于通用基础设施中的软件包元数据信息变量也存在于 Cargo 基础设施中： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_VERSION</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SOURCE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_PATCH</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SITE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_LICENSE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_LICENSE_FILES</code> 等。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">A few additional variables, specific to the Cargo infrastructure, can
also be defined. Many of them are only useful in very specific cases,
typical packages will therefore only use a few of them.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">还可以定义一些与货物基础设施相关的额外变量。其中许多只在非常特定的情况下有用，因此典型的包裹通常只会使用其中的一些。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SUBDIR</code> may contain the name of a subdirectory inside the package
  that contains the Cargo.toml file. This is useful, if for example, it
  is not at the root of the tree extracted by the tarball. If
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_FOO_SUBDIR</code> is not specified, it defaults to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SUBDIR</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SUBDIR</code> 可能包含包含 Cargo.toml 文件的包中子目录的名称。例如，如果它不在 tarball 提取的树的根目录下，这将很有用。如果未指定 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_FOO_SUBDIR</code> ，则默认为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SUBDIR</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_CARGO_ENV</code> can be used to pass additional variables in the
  environment of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cargo</code> invocations. It used at both build and
  installation time
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_CARGO_ENV</code> 可用于在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cargo</code> 调用的环境中传递附加变量。它在构建和安装时使用</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_CARGO_BUILD_OPTS</code> can be used to pass additional options to
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cargo</code> at build time.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_CARGO_BUILD_OPTS</code> 可用于在构建时向 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cargo</code> 传递附加选项。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_CARGO_INSTALL_OPTS</code> can be used to pass additional options to
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cargo</code> at install time.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_CARGO_INSTALL_OPTS</code> 可用于在安装时向 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cargo</code> 传递附加选项。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">A crate can depend on other libraries from crates.io or git
repositories, listed in its <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Cargo.toml</code> file. Buildroot automatically
takes care of downloading such dependencies as part of the download
step of packages that use the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cargo-package</code> infrastructure. Such
dependencies are then kept together with the package source code in
the tarball cached in Buildroot’s <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DL_DIR</code>, and therefore the hash of
the package’s tarball includes such dependencies.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一个板条箱可以依赖于来自 crates.io 或 git 存储库的其他库，这些库在其 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Cargo.toml</code> 文件中列出。 Buildroot 会自动在使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cargo-package</code> 基础设施的软件包的下载步骤中下载这些依赖项。然后，这些依赖项将与软件包源代码一起保存在 Buildroot 的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DL_DIR</code> 中的 tarball 中，因此软件包的 tarball 的哈希值包括这些依赖项。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This mechanism ensures that any change in the dependencies will be
detected, and allows the build to be performed completely offline.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这种机制确保会检测到依赖关系的任何更改，并允许完全脱机执行构建。</font></font></font></p></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_infrastructure_for_go_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.18.&nbsp;Infrastructure for Go packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.18. 用于 Go 软件包的基础设施</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This infrastructure applies to Go packages that use the standard
build system and use bundled dependencies.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此基础设施适用于使用标准构建系统和捆绑依赖项的 Go 包。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="golang-package-tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.18.1.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">golang-package</code> tutorial<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.18.1. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">golang-package</code> 教程</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First, let’s see how to write a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file for a go package,
with an example :<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，让我们看看如何为 Go 包编写一个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件，附带一个示例：</font></font></font></p><pre class="screen">01: ################################################################################
02: #
03: # foo
04: #
05: ################################################################################
06:
07: FOO_VERSION = 1.0
08: FOO_SITE = $(call github,bar,foo,$(FOO_VERSION))
09: FOO_LICENSE = BSD-3-Clause
10: FOO_LICENSE_FILES = LICENSE
11:
12: $(eval $(golang-package))</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 7, we declare the version of the package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 7 行，我们声明了包的版本。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 8, we declare the upstream location of the package, here
fetched from Github, since a large number of Go packages are hosted on
Github.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 8 行，我们声明了软件包的上游位置，这里是从 Github 获取的，因为许多 Go 软件包都托管在 Github 上。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 9 and 10, we give licensing details about the package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 9 行和第 10 行，我们提供有关软件包的许可详细信息。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Finally, on line 12, we invoke the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">golang-package</code> macro that
generates all the Makefile rules that actually allow the package to be
built.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">最后，在第 12 行，我们调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">golang-package</code> 宏，该宏生成所有实际允许构建软件包的 Makefile 规则。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="golang-package-reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.18.2.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">golang-package</code> reference<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.18.2. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">golang-package</code> 参考</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In their <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> file, packages using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">golang-package</code>
infrastructure should depend on <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_HOST_GO_TARGET_ARCH_SUPPORTS</code>
because Buildroot will automatically add a dependency on <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-go</code>
to such packages.
If you need CGO support in your package, you must add a dependency on
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_HOST_GO_TARGET_CGO_LINKING_SUPPORTS</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在他们的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件中，使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">golang-package</code> 基础设施的软件包应该依赖于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_HOST_GO_TARGET_ARCH_SUPPORTS</code> ，因为 Buildroot 会自动为这些软件包添加对 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-go</code> 的依赖。如果您的软件包需要 CGO 支持，您必须添加对 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_HOST_GO_TARGET_CGO_LINKING_SUPPORTS</code> 的依赖。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The main macro of the Go package infrastructure is
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">golang-package</code>. It is similar to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> macro. The
ability to build host packages is also available, with the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-golang-package</code> macro.
Host packages built by <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-golang-package</code> macro should depend on
BR2_PACKAGE_HOST_GO_HOST_ARCH_SUPPORTS.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Go 软件包基础设施的主要宏是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">golang-package</code> 。它类似于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 宏。还可以构建主机软件包，使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-golang-package</code> 宏。由 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-golang-package</code> 宏构建的主机软件包应该依赖于 BR2_PACKAGE_HOST_GO_HOST_ARCH_SUPPORTS。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Just like the generic infrastructure, the Go infrastructure works
by defining a number of variables before calling the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">golang-package</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">就像通用基础设施一样，Go 基础设施是通过在调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">golang-package</code> 之前定义一些变量来工作的。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">All the package metadata information variables that exist in the
<a class="link" href="#generic-package-reference" title="18.6.2.&nbsp;generic-package reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic package infrastructure</a> also
exist in the Go infrastructure: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_VERSION</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SOURCE</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_PATCH</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SITE</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SUBDIR</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_LICENSE</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_LICENSE_FILES</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_INSTALL_STAGING</code>, etc.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">所有存在于通用软件包基础设施中的软件包元数据信息变量也存在于 Go 基础设施中： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_VERSION</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SOURCE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_PATCH</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SITE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SUBDIR</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_LICENSE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_LICENSE_FILES</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_INSTALL_STAGING</code> ，等等。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Note that it is not necessary to add <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-go</code> in the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES</code> variable of a package, since this basic dependency
is automatically added as needed by the Go package infrastructure.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，在软件包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES</code> 变量中不需要添加 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-go</code> ，因为这种基本依赖关系会根据 Go 软件包基础设施的需要自动添加。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">A few additional variables, specific to the Go infrastructure, can
optionally be defined, depending on the package’s needs. Many of them
are only useful in very specific cases, typical packages will
therefore only use a few of them, or none.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">根据包的需求，可以选择性地定义一些特定于 Go 基础设施的附加变量。其中许多变量仅在非常特定的情况下有用，因此典型的包通常只会使用其中的一些，或者根本不使用。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The package must specify its Go module name in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_GOMOD</code>
  variable. If not specified, it defaults to
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">URL-domain/1st-part-of-URL/2nd-part-of-URL</code>, e.g <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_GOMOD</code> will
  take the value <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">github.com/bar/foo</code> for a package that specifies
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SITE = $(call github,bar,foo,$(FOO_VERSION))</code>. The Go package
  infrastructure will automatically generate a minimal <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">go.mod</code> file
  in the package source tree if it doesn’t exist.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">包必须在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_GOMOD</code> 变量中指定其 Go 模块名称。如果未指定，则默认为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">URL-domain/1st-part-of-URL/2nd-part-of-URL</code> ，例如，对于指定 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SITE = $(call github,bar,foo,$(FOO_VERSION))</code> 的包， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_GOMOD</code> 将取值 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">github.com/bar/foo</code> 。如果包源代码树中不存在，Go 包基础设施将自动生成一个最小的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">go.mod</code> 文件。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_LDFLAGS</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_TAGS</code> can be used to pass respectively the
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LDFLAGS</code> or the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TAGS</code> to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">go</code> build command.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_LDFLAGS</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_TAGS</code> 可分别用于将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LDFLAGS</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TAGS</code> 传递给 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">go</code> 构建命令。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_BUILD_TARGETS</code> can be used to pass the list of targets that
  should be built. If <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_BUILD_TARGETS</code> is not specified, it
  defaults to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.</code>. We then have two cases:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_BUILD_TARGETS</code> 可用于传递应构建的目标列表。如果未指定 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_BUILD_TARGETS</code> ，则默认为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.</code> 。然后有两种情况：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_BUILD_TARGETS</code> is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.</code>. In this case, we assume only one binary
   will be produced, and that by default we name it after the package
   name. If that is not appropriate, the name of the produced binary
   can be overridden using <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_BIN_NAME</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_BUILD_TARGETS</code> 是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.</code> 。在这种情况下，我们假设只会生成一个二进制文件，默认情况下我们将其命名为包名称。如果不合适，可以使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_BIN_NAME</code> 覆盖生成的二进制文件的名称。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_BUILD_TARGETS</code> is not <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.</code>. In this case, we iterate over the
   values to build each target, and for each produced a binary that is
   the non-directory component of the target. For example if
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_BUILD_TARGETS = cmd/docker cmd/dockerd</code> the binaries produced
   are <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">docker</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dockerd</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_BUILD_TARGETS</code> 不是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.</code> 。在这种情况下，我们遍历值以构建每个目标，并为每个生成一个二进制文件，该文件是目标的非目录组件。例如，如果 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_BUILD_TARGETS = cmd/docker cmd/dockerd</code> 生成的二进制文件是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">docker</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dockerd</code> 。</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_INSTALL_BINS</code> can be used to pass the list of binaries that
  should be installed in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/usr/bin</code> on the target. If
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_INSTALL_BINS</code> is not specified, it defaults to the lower-case
  name of package.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_INSTALL_BINS</code> 可用于传递应安装在目标 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/usr/bin</code> 上的二进制文件列表。如果未指定 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_INSTALL_BINS</code> ，则默认为软件包的小写名称。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">With the Go infrastructure, all the steps required to build and
install the packages are already defined, and they generally work well
for most Go-based packages. However, when required, it is still
possible to customize what is done in any particular step:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 Go 基础设施，构建和安装软件包所需的所有步骤已经定义，并且它们通常适用于大多数基于 Go 的软件包。但是，如果需要，仍然可以自定义特定步骤中的操作：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
By adding a post-operation hook (after extract, patch, configure,
  build or install). See <a class="xref" href="#hooks" title="18.23.&nbsp;Hooks available in the various build steps" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;18.23, “Hooks available in the various build steps”</a> for details.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过添加后操作挂钩（在提取、打补丁、配置、构建或安装之后）。有关详细信息，请参阅第 18.23 节“各构建步骤中可用的挂钩”。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
By overriding one of the steps. For example, even if the Go
  infrastructure is used, if the package <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file defines its own
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_BUILD_CMDS</code> variable, it will be used instead of the default Go
  one. However, using this method should be restricted to very
  specific cases. Do not use it in the general case.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过覆盖其中一个步骤。例如，即使使用了 Go 基础设施，如果软件包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件定义了自己的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_BUILD_CMDS</code> 变量，则会使用它，而不是默认的 Go 变量。但是，应该将此方法限制在非常特定的情况下使用。不要在一般情况下使用它。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">A Go package can depend on other Go modules, listed in its <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">go.mod</code>
file. Buildroot automatically takes care of downloading such
dependencies as part of the download step of packages that use the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">golang-package</code> infrastructure. Such dependencies are then kept
together with the package source code in the tarball cached in
Buildroot’s <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DL_DIR</code>, and therefore the hash of the package’s tarball
includes such dependencies.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一个 Go 包可以依赖于其他 Go 模块，这些模块在其 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">go.mod</code> 文件中列出。Buildroot 会自动在使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">golang-package</code> 基础设施的软件包的下载步骤中下载这些依赖项。这些依赖项随后会与软件包源代码一起保存在 Buildroot 的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DL_DIR</code> 中的 tarball 中，因此软件包的 tarball 的哈希值包括这些依赖项。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This mechanism ensures that any change in the dependencies will be
detected, and allows the build to be performed completely offline.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这种机制确保任何依赖关系的更改都将被检测到，并允许完全离线执行构建。</font></font></font></p></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_infrastructure_for_qmake_based_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.19.&nbsp;Infrastructure for QMake-based packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.19. 基于 QMake 的软件包基础设施</font></font></font></h2></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="qmake-package-tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.19.1.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">qmake-package</code> tutorial<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.19.1. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">qmake-package</code> 教程</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First, let’s see how to write a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file for a QMake-based package, with
an example :<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，让我们看看如何为基于 QMake 的软件包编写 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件，附带示例：</font></font></font></p><pre class="screen">01: ################################################################################
02: #
03: # libfoo
04: #
05: ################################################################################
06:
07: LIBFOO_VERSION = 1.0
08: LIBFOO_SOURCE = libfoo-$(LIBFOO_VERSION).tar.gz
09: LIBFOO_SITE = http://www.foosoftware.org/download
10: LIBFOO_CONF_OPTS = QT_CONFIG+=bar QT_CONFIG-=baz
11: LIBFOO_DEPENDENCIES = bar
12:
13: $(eval $(qmake-package))</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 7, we declare the version of the package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 7 行，我们声明了包的版本。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 8 and 9, we declare the name of the tarball (xz-ed tarball
recommended) and the location of the tarball on the Web. Buildroot
will automatically download the tarball from this location.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 8 和 9 行，我们声明了 tarball 的名称（建议使用 xz-ed tarball）和 tarball 在 Web 上的位置。Buildroot 将自动从此位置下载 tarball。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 10, we tell Buildroot what options to enable for libfoo.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 10 行，我们告诉 Buildroot 要为 libfoo 启用哪些选项。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 11, we tell Buildroot the dependencies of libfoo.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 11 行，我们告诉 Buildroot libfoo 的依赖关系。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Finally, on line line 13, we invoke the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">qmake-package</code>
macro that generates all the Makefile rules that actually allows the
package to be built.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">最后，在第 13 行，我们调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">qmake-package</code> 宏，生成所有实际允许构建软件包的 Makefile 规则。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="qmake-package-reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.19.2.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">qmake-package</code> reference<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.19.2. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">qmake-package</code> 参考</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The main macro of the QMake package infrastructure is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">qmake-package</code>.
It is similar to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> macro.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">QMake 软件包基础设施的主要宏是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">qmake-package</code> 。它类似于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 宏。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Just like the generic infrastructure, the QMake infrastructure works
by defining a number of variables before calling the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">qmake-package</code>
macro.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">就像通用基础设施一样，QMake 基础设施在调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">qmake-package</code> 宏之前通过定义一些变量来工作。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First, all the package metadata information variables that exist in
the generic infrastructure also exist in the QMake infrastructure:
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_VERSION</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SOURCE</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PATCH</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SUBDIR</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_DEPENDENCIES</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING</code>,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，在通用基础设施中存在的所有软件包元数据信息变量也存在于 QMake 基础设施中： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_VERSION</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SOURCE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PATCH</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SITE</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SUBDIR</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_DEPENDENCIES</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">An additional variable, specific to the QMake infrastructure, can
also be defined.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">还可以定义一个特定于 QMake 基础设施的附加变量。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONF_ENV</code>, to specify additional environment variables to
  pass to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">qmake</code> script for the configuration step. By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONF_ENV</code> ，用于指定传递给配置步骤的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">qmake</code> 脚本的附加环境变量。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONF_OPTS</code>, to specify additional options to pass to the
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">qmake</code> script for the configuration step. By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_CONF_OPTS</code> ，用于在配置步骤中传递给 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">qmake</code> 脚本的额外选项。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_MAKE_ENV</code>, to specify additional environment variables to the
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> command during the build and install steps. By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_MAKE_ENV</code> ，在构建和安装步骤期间向 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> 命令指定额外的环境变量。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_MAKE_OPTS</code>, to specify additional targets to pass to the
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> command during the build step. By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_MAKE_OPTS</code> ，在构建步骤期间向 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> 命令指定额外的目标。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING_OPTS</code>, to specify additional targets to pass
  to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> command during the staging installation step. By default,
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">install</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_STAGING_OPTS</code> ，在分阶段安装步骤期间向 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> 命令指定额外的目标。默认为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">install</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET_OPTS</code>, to specify additional targets to pass
  to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> command during the target installation step. By default,
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">install</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_INSTALL_TARGET_OPTS</code> ，在目标安装步骤期间传递给 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</code> 命令的额外目标。默认情况下， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">install</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SYNC_QT_HEADERS</code>, to run syncqt.pl before qmake. Some packages
  need this to have a properly populated include directory before
  running the build.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SYNC_QT_HEADERS</code> ，在运行 qmake 之前运行 syncqt.pl。有些软件包需要在运行构建之前具有正确填充的包含目录。</font></font></font></li></ul></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_infrastructure_for_packages_building_kernel_modules" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.20.&nbsp;Infrastructure for packages building kernel modules<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.20. 用于构建内核模块的软件包构建基础设施</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot offers a helper infrastructure to make it easy to write packages that
build and install Linux kernel modules. Some packages only contain a kernel
module, other packages contain programs and libraries in addition to kernel
modules. Buildroot’s helper infrastructure supports either case.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 提供了一个辅助基础设施，使编写构建和安装 Linux 内核模块的软件包变得容易。一些软件包只包含一个内核模块，其他软件包除内核模块外还包含程序和库。Buildroot 的辅助基础设施支持这两种情况。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="kernel-module-tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.20.1.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kernel-module</code> tutorial<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.20.1. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kernel-module</code> 教程</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Let’s start with an example on how to prepare a simple package that only
builds a kernel module, and no other component:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">让我们从一个示例开始，介绍如何准备一个只构建内核模块而不包含其他组件的简单软件包：</font></font></font></p><pre class="screen">01: ################################################################################
02: #
03: # foo
04: #
05: ################################################################################
06:
07: FOO_VERSION = 1.2.3
08: FOO_SOURCE = foo-$(FOO_VERSION).tar.xz
09: FOO_SITE = http://www.foosoftware.org/download
10: FOO_LICENSE = GPL-2.0
11: FOO_LICENSE_FILES = COPYING
12:
13: $(eval $(kernel-module))
14: $(eval $(generic-package))</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Lines 7-11 define the usual meta-data to specify the version, archive name,
remote URI where to find the package source, licensing information.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 7-11 行定义了通常的元数据，用于指定版本、存档名称、远程 URI 以及包源的许可信息。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 13, we invoke the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kernel-module</code> helper infrastructure, that
generates all the appropriate Makefile rules and variables to build
that kernel module.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 13 行，我们调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kernel-module</code> 助手基础设施，生成所有适当的 Makefile 规则和变量来构建该内核模块。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Finally, on line 14, we invoke the
<a class="link" href="#generic-package-tutorial" title="18.6.1.&nbsp;generic-package tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> infrastructure</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">最后，在第 14 行，我们调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 基础设施。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The dependency on <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux</code> is automatically added, so it is not needed to
specify it in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux</code> 的依赖性会自动添加，因此在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES</code> 中不需要指定它。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">What you may have noticed is that, unlike other package infrastructures,
we explicitly invoke a second infrastructure. This allows a package to
build a kernel module, but also, if needed, use any one of other package
infrastructures to build normal userland components (libraries,
executables…). Using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kernel-module</code> infrastructure on its own is
not sufficient; another package infrastructure <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">must</strong></span> be used.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">你可能已经注意到，与其他软件包基础设施不同的是，我们明确调用了第二个基础设施。这允许软件包构建内核模块，但如果需要，也可以使用其他软件包基础设施中的任何一个来构建正常的用户空间组件（库、可执行文件等）。仅仅使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kernel-module</code> 基础设施是不够的；必须使用另一个软件包基础设施。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Let’s look at a more complex example:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">让我们看一个更复杂的例子：</font></font></font></p><pre class="screen">01: ################################################################################
02: #
03: # foo
04: #
05: ################################################################################
06:
07: FOO_VERSION = 1.2.3
08: FOO_SOURCE = foo-$(FOO_VERSION).tar.xz
09: FOO_SITE = http://www.foosoftware.org/download
10: FOO_LICENSE = GPL-2.0
11: FOO_LICENSE_FILES = COPYING
12:
13: FOO_MODULE_SUBDIRS = driver/base
14: FOO_MODULE_MAKE_OPTS = KVERSION=$(LINUX_VERSION_PROBED)
15:
16: ifeq ($(BR2_PACKAGE_LIBBAR),y)
17: FOO_DEPENDENCIES += libbar
18: FOO_CONF_OPTS += --enable-bar
19: FOO_MODULE_SUBDIRS += driver/bar
20: else
21: FOO_CONF_OPTS += --disable-bar
22: endif
23:
24: $(eval $(kernel-module))
26: $(eval $(autotools-package))</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Here, we see that we have an autotools-based package, that also builds
the kernel module located in sub-directory <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">driver/base</code> and, if libbar
is enabled, the kernel module located in sub-directory <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">driver/bar</code>, and
defines the variable <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">KVERSION</code> to be passed to the Linux buildsystem
when building the module(s).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在这里，我们看到一个基于 autotools 的软件包，还构建了位于子目录 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">driver/base</code> 中的内核模块，如果启用了 libbar，则构建位于子目录 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">driver/bar</code> 中的内核模块，并定义变量 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">KVERSION</code> 以在构建模块时传递给 Linux 构建系统。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="kernel-module-reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.20.2.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kernel-module</code> reference<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.20.2. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kernel-module</code> 参考</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The main macro for the  kernel module infrastructure is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kernel-module</code>.
Unlike other package infrastructures, it is not stand-alone, and requires
any of the other <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*-package</code> macros be called after it.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">内核模块基础设施的主要宏是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kernel-module</code> 。与其他软件包基础设施不同，它不是独立的，并且需要在其后调用任何其他 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*-package</code> 宏。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kernel-module</code> macro defines post-build and post-target-install
hooks to build the kernel modules. If the package’s <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> needs access
to the built kernel modules, it should do so in a post-build hook,
<span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">registered after</strong></span> the call to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kernel-module</code>. Similarly, if the
package’s <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> needs access to the kernel module after it has been
installed, it should do so in a post-install hook, <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">registered after</strong></span>
the call to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kernel-module</code>. Here’s an example:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kernel-module</code> 宏定义了构建内核模块的后构建和后目标安装挂钩。如果软件包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 需要访问构建的内核模块，则应在调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kernel-module</code> 后注册后构建挂钩。类似地，如果软件包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 需要在安装后访问内核模块，则应在调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">kernel-module</code> 后注册后安装挂钩。这里是一个示例：</font></font></font></p><pre class="screen">$(eval $(kernel-module))

define FOO_DO_STUFF_WITH_KERNEL_MODULE
    # Do something with it...
endef
FOO_POST_BUILD_HOOKS += FOO_DO_STUFF_WITH_KERNEL_MODULE

$(eval $(generic-package))</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Finally, unlike the other package infrastructures, there is no
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-kernel-module</code> variant to build a host kernel module.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">最后，与其他软件包基础设施不同，没有 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-kernel-module</code> 变体来构建主机内核模块。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The following additional variables can optionally be defined to further
configure the build of the kernel module:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">可以选择定义以下附加变量来进一步配置内核模块的构建：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_MODULE_SUBDIRS</code> may be set to one or more sub-directories (relative
  to the package source top-directory) where the kernel module sources are.
  If empty or not set, the sources for the kernel module(s) are considered
  to be located at the top of the package source tree.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_MODULE_SUBDIRS</code> 可以设置为一个或多个子目录（相对于软件包源顶级目录），其中包含内核模块的源代码。如果为空或未设置，则认为内核模块的源代码位于软件包源树的顶部。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_MODULE_MAKE_OPTS</code> may be set to contain extra variable definitions
  to pass to the Linux buildsystem.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_MODULE_MAKE_OPTS</code> 可以设置为包含要传递给 Linux 构建系统的额外变量定义。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="kernel-variables" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>You may also reference (but you may <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">not</strong></span> set!) those variables:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您还可以引用（但不可以设置！）这些变量：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LINUX_DIR</code> contains the path to where the Linux kernel has been
   extracted and built.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LINUX_DIR</code> 包含了 Linux 内核被提取和构建的路径。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LINUX_VERSION</code> contains the version string as configured by the user.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LINUX_VERSION</code> 包含用户配置的版本字符串。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LINUX_VERSION_PROBED</code> contains the real version string of the kernel,
   retrieved with running <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make -C $(LINUX_DIR) kernelrelease</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LINUX_VERSION_PROBED</code> 包含内核的实际版本字符串，通过运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make -C $(LINUX_DIR) kernelrelease</code> 检索。</font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">KERNEL_ARCH</code> contains the name of the current architecture, like <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">arm</code>,
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mips</code>…
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">KERNEL_ARCH</code> 包含当前架构的名称，如 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">arm</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mips</code> ...</font></font></font></li></ul></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_infrastructure_for_asciidoc_documents" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.21.&nbsp;Infrastructure for asciidoc documents<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.21. 用于 asciidoc 文档的基础设施</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="asciidoc-documents-tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>The Buildroot manual, which you are currently reading, is entirely written
using the <a class="ulink" href="http://asciidoc.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">AsciiDoc</a> mark-up syntax. The manual is then
rendered to many formats:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您当前正在阅读的 Buildroot 手册完全使用 AsciiDoc 标记语法编写。然后将手册呈现为多种格式：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
html
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
split-html
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">分割 HTML</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
pdf
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
epub
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">电子书</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
text
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">文本</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Although Buildroot only contains one document written in AsciiDoc, there
is, as for packages, an infrastructure for rendering documents using the
AsciiDoc syntax.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">虽然 Buildroot 只包含一个用 AsciiDoc 编写的文档，但对于软件包而言，有一个基础设施可用于使用 AsciiDoc 语法渲染文档。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Also as for packages, the AsciiDoc infrastructure is available from a
<a class="link" href="#outside-br-custom" title="9.2.&nbsp;Keeping customizations outside of Buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">br2-external tree</a>. This allows documentation for
a br2-external tree to match the Buildroot documentation, as it will be
rendered to the same formats and use the same layout and theme.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">同样对于软件包，AsciiDoc 基础设施可以从 br2-external 树中获得。这使得 br2-external 树的文档可以与 Buildroot 文档匹配，因为它将呈现为相同的格式，并使用相同的布局和主题。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_literal_asciidoc_document_literal_tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.21.1.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">asciidoc-document</code> tutorial<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.21.1. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">asciidoc-document</code> 教程</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Whereas package infrastructures are suffixed with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-package</code>, the document
infrastructures are suffixed with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-document</code>. So, the AsciiDoc infrastructure
is named <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">asciidoc-document</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">虽然软件包基础设施的后缀为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-package</code> ，但文档基础设施的后缀为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-document</code> 。因此，AsciiDoc 基础设施被命名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">asciidoc-document</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Here is an example to render a simple AsciiDoc document.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这里有一个简单的 AsciiDoc 文档渲染示例。</font></font></font></p><pre class="screen">01: ################################################################################
02: #
03: # foo-document
04: #
05: ################################################################################
06:
07: FOO_SOURCES = $(sort $(wildcard $(FOO_DOCDIR)/*))
08: $(eval $(call asciidoc-document))</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 7, the Makefile declares what the sources of the document are.
Currently, it is expected that the document’s sources are only local;
Buildroot will not attempt to download anything to render a document.
Thus, you must indicate where the sources are. Usually, the string
above is sufficient for a document with no sub-directory structure.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 7 行，Makefile 声明文档的来源。目前，预期文档的来源仅为本地；Buildroot 不会尝试下载任何内容来渲染文档。因此，您必须指示来源在哪里。通常，上述字符串对于没有子目录结构的文档就足够了。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 8, we call the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">asciidoc-document</code> function, which generates all
the Makefile code necessary to render the document.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 8 行，我们调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">asciidoc-document</code> 函数，该函数生成呈现文档所需的所有 Makefile 代码。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_literal_asciidoc_document_literal_reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.21.2.&nbsp;<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">asciidoc-document</code> reference<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.21.2. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">asciidoc-document</code> 参考</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The list of variables that can be set in a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file to give metadata
information is (assuming the document name is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code>) :<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">可以在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件中设置的变量列表，以提供元数据信息（假设文档名称为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> ）：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SOURCES</code>, mandatory, defines the source files for the document.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SOURCES</code> ，必填项，定义文档的源文件。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_RESOURCES</code>, optional, may contain a space-separated list of paths
  to one or more directories containing so-called resources (like CSS or
  images). By default, empty.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_RESOURCES</code> ，可选项，可以包含一个或多个目录路径的空格分隔列表，这些目录包含所谓的资源（如 CSS 或图像）。默认为空。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES</code>, optional, the list of packages (most probably,
  host-packages) that must be built before building this document.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_DEPENDENCIES</code> ，可选项，构建此文档之前必须构建的软件包列表（很可能是主机软件包）。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_TOC_DEPTH</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_TOC_DEPTH_&lt;FMT&gt;</code>, optionals, the depth of the
  table of content for this document, which can be overridden for the
  specified format <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;FMT&gt;</code>  (see the list of rendered formats, above,
  but in uppercase, and with dash replaced by underscore; see example,
  below). By default: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">1</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_TOC_DEPTH</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_TOC_DEPTH_&lt;FMT&gt;</code> ，可选项，此文档的内容表深度，可以被指定格式 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;FMT&gt;</code> 覆盖（参见上面呈现的格式列表，但大写，并用下划线替换破折号；参见下面的示例）。默认值为： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">1</code> 。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">There are also additional hooks (see <a class="xref" href="#hooks" title="18.23.&nbsp;Hooks available in the various build steps" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;18.23, “Hooks available in the various build steps”</a> for general information
on hooks), that a document may set to define extra actions to be done at
various steps:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">还有其他附加钩子（参见第 18.23 节，“各构建步骤中可用的钩子”以获取有关钩子的一般信息），文档可以设置这些钩子以定义在各个步骤执行的额外操作：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_POST_RSYNC_HOOKS</code> to run additional commands after the sources
  have been copied by Buildroot. This can for example be used to
  generate part of the manual with information extracted from the
  tree. As an example, Buildroot uses this hook to generate the tables
  in the appendices.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_POST_RSYNC_HOOKS</code> 在 Buildroot 复制源代码后运行额外命令。例如，可以使用此功能从树中提取信息生成手册的一部分。例如，Buildroot 使用此钩子在附录中生成表格。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_CHECK_DEPENDENCIES_HOOKS</code> to run additional tests on required
  components to generate the document. In AsciiDoc, it is possible to
  call filters, that is, programs that will parse an AsciiDoc block and
  render it appropriately (e.g. <a class="ulink" href="http://ditaa.sourceforge.net/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">ditaa</a> or
  <a class="ulink" href="https://pythonhosted.org/aafigure/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">aafigure</a>).
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_CHECK_DEPENDENCIES_HOOKS</code> 运行额外的测试以生成文档所需的组件。在 AsciiDoc 中，可以调用过滤器，即可以解析 AsciiDoc 块并适当地呈现它的程序（例如 ditaa 或 aafigure）。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_CHECK_DEPENDENCIES_&lt;FMT&gt;_HOOKS</code>, to run additional tests for
  the specified format <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;FMT&gt;</code> (see the list of rendered formats, above).
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_CHECK_DEPENDENCIES_&lt;FMT&gt;_HOOKS</code> ，为指定格式 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;FMT&gt;</code> 运行额外的测试（请参阅上面呈现格式的列表）。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot sets the following variable that can be used in the definitions
above:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 设置了以下变量，可以在上述定义中使用：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(FOO_DOCDIR)</code>, similar to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(FOO_PKGDIR)</code>, contains the path to the
  directory containing <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo.mk</code>. It can be used to refer to the document
  sources, and can be used in the hooks, especially the post-rsync hook
  if parts of the documentation needs to be generated.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(FOO_DOCDIR)</code> ，类似于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(FOO_PKGDIR)</code> ，包含了包含 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo.mk</code> 的目录路径。它可用于引用文档源，并可在钩子中使用，特别是如果需要生成文档的部分后同步钩子。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(@D)</code>, as for traditional packages, contains the path to the directory
  where the document will be copied and built.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(@D)</code> ，对于传统包，包含了文档将被复制和构建的目录路径。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Here is a complete example that uses all variables and all hooks:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这里是一个使用所有变量和所有钩子的完整示例：</font></font></font></p><pre class="screen">01: ################################################################################
02: #
03: # foo-document
04: #
05: ################################################################################
06:
07: FOO_SOURCES = $(sort $(wildcard $(FOO_DOCDIR)/*))
08: FOO_RESOURCES = $(sort $(wildcard $(FOO_DOCDIR)/ressources))
09:
10: FOO_TOC_DEPTH = 2
11: FOO_TOC_DEPTH_HTML = 1
12: FOO_TOC_DEPTH_SPLIT_HTML = 3
13:
14: define FOO_GEN_EXTRA_DOC
15:     /path/to/generate-script --outdir=$(@D)
16: endef
17: FOO_POST_RSYNC_HOOKS += FOO_GEN_EXTRA_DOC
18:
19: define FOO_CHECK_MY_PROG
20:     if ! which my-prog &gt;/dev/null 2&gt;&amp;1; then \
21:         echo "You need my-prog to generate the foo document"; \
22:         exit 1; \
23:     fi
24: endef
25: FOO_CHECK_DEPENDENCIES_HOOKS += FOO_CHECK_MY_PROG
26:
27: define FOO_CHECK_MY_OTHER_PROG
28:     if ! which my-other-prog &gt;/dev/null 2&gt;&amp;1; then \
29:         echo "You need my-other-prog to generate the foo document as PDF"; \
30:         exit 1; \
31:     fi
32: endef
33: FOO_CHECK_DEPENDENCIES_PDF_HOOKS += FOO_CHECK_MY_OTHER_PROG
34:
35: $(eval $(call asciidoc-document))</pre></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="linux-kernel-specific-infra" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.22.&nbsp;Infrastructure specific to the Linux kernel package<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.22. 专用于 Linux 内核包的基础设施</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The Linux kernel package can use some specific infrastructures based on package
hooks for building Linux kernel tools or/and building Linux kernel extensions.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Linux 内核软件包可以使用基于软件包挂钩的特定基础设施来构建 Linux 内核工具和/或构建 Linux 内核扩展。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="linux-kernel-tools" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.22.1.&nbsp;linux-kernel-tools<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.22.1. linux-kernel-tools</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot offers a helper infrastructure to build some userspace tools
for the target available within the Linux kernel sources. Since their
source code is part of the kernel source code, a special package,
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux-tools</code>, exists and re-uses the sources of the Linux kernel that
runs on the target.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 提供了一个辅助基础设施，用于为 Linux 内核源代码中可用的目标构建一些用户空间工具。由于它们的源代码是内核源代码的一部分，因此存在一个特殊的软件包， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux-tools</code> ，它使用运行在目标上的 Linux 内核的源代码。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Let’s look at an example of a Linux tool. For a new Linux tool named
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code>, create a new menu entry in the existing
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/linux-tools/Config.in</code>.  This file will contain the option
descriptions related to each kernel tool that will be used and
displayed in the configuration tool. It would basically look like:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">让我们看一个 Linux 工具的例子。对于一个名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> 的新 Linux 工具，在现有的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/linux-tools/Config.in</code> 中创建一个新的菜单项。该文件将包含与将要使用和显示在配置工具中的每个内核工具相关的选项描述。基本上看起来像这样：</font></font></font></p><pre class="screen">01: config BR2_PACKAGE_LINUX_TOOLS_FOO
02:     bool "foo"
03:     select BR2_PACKAGE_LINUX_TOOLS
04:     help
05:       This is a comment that explains what foo kernel tool is.
06:
07:       http://foosoftware.org/foo/</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The name of the option starts with the prefix <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_LINUX_TOOLS_</code>,
followed by the uppercase name of the tool (like is done for packages).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">选项的名称以前缀 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_LINUX_TOOLS_</code> 开头，后面跟着工具的大写名称（就像为软件包所做的那样）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note.&nbsp;</strong>Unlike other packages, the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux-tools</code> package options appear in the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux</code> kernel menu, under the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Linux Kernel Tools</code> sub-menu, not under
the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Target packages</code> main menu.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意。与其他软件包不同， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux-tools</code> 软件包选项出现在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux</code> 内核菜单中，而不是在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Target packages</code> 主菜单下的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Linux Kernel Tools</code> 子菜单中。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Then for each linux tool, add a new <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk.in</code> file named
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/linux-tools/linux-tool-foo.mk.in</code>. It would basically look like:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后对于每个 Linux 工具，添加一个名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/linux-tools/linux-tool-foo.mk.in</code> 的新 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk.in</code> 文件。基本上看起来像：</font></font></font></p><pre class="screen">01: ################################################################################
02: #
03: # foo
04: #
05: ################################################################################
06:
07: LINUX_TOOLS += foo
08:
09: FOO_DEPENDENCIES = libbbb
10:
11: define FOO_BUILD_CMDS
12:     $(TARGET_MAKE_ENV) $(MAKE) -C $(LINUX_DIR)/tools foo
13: endef
14:
15: define FOO_INSTALL_STAGING_CMDS
16:     $(TARGET_MAKE_ENV) $(MAKE) -C $(LINUX_DIR)/tools \
17:             DESTDIR=$(STAGING_DIR) \
18:             foo_install
19: endef
20:
21: define FOO_INSTALL_TARGET_CMDS
22:     $(TARGET_MAKE_ENV) $(MAKE) -C $(LINUX_DIR)/tools \
23:             DESTDIR=$(TARGET_DIR) \
24:             foo_install
25: endef</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 7, we register the Linux tool <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> to the list of available
Linux tools.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 7 行，我们将 Linux 工具 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> 注册到可用 Linux 工具列表中。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 9, we specify the list of dependencies this tool relies on. These
dependencies are added to the Linux package dependencies list only when the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> tool is selected.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 9 行，我们指定了此工具依赖的依赖项列表。仅当选择 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> 工具时，这些依赖项才会添加到 Linux 软件包依赖项列表中。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The rest of the Makefile, lines 11-25 defines what should be done at the
different steps of the Linux tool build process like for a
<a class="link" href="#generic-package-tutorial" title="18.6.1.&nbsp;generic-package tutorial" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic package</code></a>. They will actually be
used only when the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> tool is selected. The only supported commands are
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">_BUILD_CMDS</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">_INSTALL_STAGING_CMDS</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">_INSTALL_TARGET_CMDS</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Makefile 的其余部分，第 11-25 行定义了在 Linux 工具构建过程的不同步骤中应该执行的操作，比如对于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic package</code> 。只有在选择 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> 工具时才会实际使用它们。唯一支持的命令是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">_BUILD_CMDS</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">_INSTALL_STAGING_CMDS</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">_INSTALL_TARGET_CMDS</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note.&nbsp;</strong>One <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">must not</strong></span> call <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(eval $(generic-package))</code> or any other
package infrastructure! Linux tools are not packages by themselves,
they are part of the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux-tools</code> package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意。不能调用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(eval $(generic-package))</code> 或任何其他软件包基础设施！Linux 工具本身不是软件包，它们是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux-tools</code> 软件包的一部分。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="linux-kernel-ext" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.22.2.&nbsp;linux-kernel-extensions<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.22.2.&nbsp;Linux 内核扩展</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Some packages provide new features that require the Linux kernel tree
to be modified. This can be in the form of patches to be applied on
the kernel tree, or in the form of new files to be added to the
tree. The Buildroot’s Linux kernel extensions infrastructure provides
a simple solution to automatically do this, just after the kernel
sources are extracted and before the kernel patches are
applied. Examples of extensions packaged using this mechanism are the
real-time extensions Xenomai and RTAI, as well as the set of
out-of-tree LCD screens drivers <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">fbtft</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一
些软件包提供了需要修改 Linux 内核树的新功能。这可以是要应用于内核树的补丁，也可以是要添加到树中的新文件。Buildroot 的 
Linux 
内核扩展基础设施提供了一个简单的解决方案，可以在提取内核源代码后自动执行此操作，而在应用内核补丁之前。使用此机制打包的扩展示例包括实时扩展 
Xenomai 和 RTAI，以及一组非内核 LCD 屏幕驱动程序 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">fbtft</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Let’s look at an example on how to add a new Linux extension <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">让我们看一个如何添加新的 Linux 扩展 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> 的示例。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First, create the package <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> that provides the extension: this
package is a standard package; see the previous chapters on how to
create such a package. This package is in charge of downloading the
sources archive, checking the hash, defining the licence informations
and building user space tools if any.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，创建提供扩展的包 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> ：这个包是一个标准包；请参阅前几章关于如何创建这样的包。这个包负责下载源代码存档，检查哈希值，定义许可信息，并构建用户空间工具（如果有的话）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Then create the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Linux extension</em></span> proper: create a new menu entry in
the existing <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux/Config.ext.in</code>. This file contains the option
descriptions related to each kernel extension that will be used and
displayed in the configuration tool. It would basically look like:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后创建适当的 Linux 扩展：在现有的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux/Config.ext.in</code> 中创建一个新的菜单条目。该文件包含与将在配置工具中使用和显示的每个内核扩展相关的选项描述。它基本上会看起来像：</font></font></font></p><pre class="screen">01: config BR2_LINUX_KERNEL_EXT_FOO
02:     bool "foo"
03:     help
04:       This is a comment that explains what foo kernel extension is.
05:
06:       http://foosoftware.org/foo/</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Then for each linux extension, add a new <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file named
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux/linux-ext-foo.mk</code>. It should basically contain:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后对于每个 Linux 扩展，添加一个名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">linux/linux-ext-foo.mk</code> 的新 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件。它应该基本包含：</font></font></font></p><pre class="screen">01: ################################################################################
02: #
03: # foo
04: #
05: ################################################################################
06:
07: LINUX_EXTENSIONS += foo
08:
09: define FOO_PREPARE_KERNEL
10:     $(FOO_DIR)/prepare-kernel-tree.sh --linux-dir=$(@D)
11: endef</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 7, we add the Linux extension <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> to the list of available
Linux extensions.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 7 行，我们将 Linux 扩展 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> 添加到可用 Linux 扩展列表中。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On line 9-11, we define what should be done by the extension to modify
the Linux kernel tree; this is specific to the linux extension and can
use the variables defined by the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> package, like: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(FOO_DIR)</code> or
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(FOO_VERSION)</code>… as well as all the Linux variables, like:
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(LINUX_VERSION)</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(LINUX_VERSION_PROBED)</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(KERNEL_ARCH)</code>…
See the <a class="link" href="#kernel-variables" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">definition of those kernel variables</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在第 9-11 行，我们定义扩展应该如何修改 Linux 内核树；这是特定于 Linux 扩展的，可以使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> 包定义的变量，如： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(FOO_DIR)</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(FOO_VERSION)</code> …以及所有 Linux 变量，如： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(LINUX_VERSION)</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(LINUX_VERSION_PROBED)</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(KERNEL_ARCH)</code> …请参阅这些内核变量的定义。</font></font></font></p></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="hooks" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.23.&nbsp;Hooks available in the various build steps<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.23. 各种构建步骤中可用的钩子</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The generic infrastructure (and as a result also the derived autotools
and cmake infrastructures) allow packages to specify hooks.
These define further actions to perform after existing steps.
Most hooks aren’t really useful for generic packages, since the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code>
file already has full control over the actions performed in each step
of the package construction.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通用基础设施（因此也包括派生的 autotools 和 cmake 基础设施）允许软件包指定钩子。这些定义了在现有步骤之后执行的进一步操作。大多数钩子对于通用软件包并不真正有用，因为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件已经完全控制了软件包构建每个步骤中执行的操作。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The following hook points are available:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">可用的以下钩子点：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PRE_DOWNLOAD_HOOKS</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_POST_DOWNLOAD_HOOKS</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PRE_EXTRACT_HOOKS</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_POST_EXTRACT_HOOKS</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PRE_RSYNC_HOOKS</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_POST_RSYNC_HOOKS</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PRE_PATCH_HOOKS</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_POST_PATCH_HOOKS</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PRE_CONFIGURE_HOOKS</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_POST_CONFIGURE_HOOKS</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PRE_BUILD_HOOKS</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_POST_BUILD_HOOKS</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PRE_INSTALL_HOOKS</code> (for host packages only)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PRE_INSTALL_HOOKS</code> （仅适用于主机软件包）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_POST_INSTALL_HOOKS</code> (for host packages only)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_POST_INSTALL_HOOKS</code> （仅适用于主机软件包）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PRE_INSTALL_STAGING_HOOKS</code> (for target packages only)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PRE_INSTALL_STAGING_HOOKS</code> （仅适用于目标软件包）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_POST_INSTALL_STAGING_HOOKS</code> (for target packages only)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_POST_INSTALL_STAGING_HOOKS</code> （仅适用于目标软件包）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PRE_INSTALL_TARGET_HOOKS</code> (for target packages only)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PRE_INSTALL_TARGET_HOOKS</code> （仅适用于目标软件包）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_POST_INSTALL_TARGET_HOOKS</code> (for target packages only)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_POST_INSTALL_TARGET_HOOKS</code> （仅适用于目标软件包）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PRE_INSTALL_IMAGES_HOOKS</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_POST_INSTALL_IMAGES_HOOKS</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_PRE_LEGAL_INFO_HOOKS</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_POST_LEGAL_INFO_HOOKS</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_TARGET_FINALIZE_HOOKS</code>
</li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">These variables are <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">lists</em></span> of variable names containing actions to be
performed at this hook point. This allows several hooks to be
registered at a given hook point. Here is an example:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这些变量是包含要在此挂钩点执行的操作的变量名称列表。这允许在给定的挂钩点注册多个挂钩。这里是一个例子：</font></font></font></p><pre class="screen">define LIBFOO_POST_PATCH_FIXUP
        action1
        action2
endef

LIBFOO_POST_PATCH_HOOKS += LIBFOO_POST_PATCH_FIXUP</pre><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="hooks-rsync" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.23.1.&nbsp;Using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">POST_RSYNC</code> hook<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.23.1. 使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">POST_RSYNC</code> 挂钩</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">POST_RSYNC</code> hook is run only for packages that use a local source,
either through the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">local</code> site method or the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">OVERRIDE_SRCDIR</code>
mechanism. In this case, package sources are copied using <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rsync</code> from
the local location into the buildroot build directory. The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rsync</code>
command does not copy all files from the source directory, though.
Files belonging to a version control system, like the directories
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.git</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hg</code>, etc. are not copied. For most packages this is
sufficient, but a given package can perform additional actions using
the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">POST_RSYNC</code> hook.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">POST_RSYNC</code> 钩子仅用于使用本地源的软件包，可以通过 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">local</code> 站点方法或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">OVERRIDE_SRCDIR</code> 机制。在这种情况下，软件包源使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rsync</code> 从本地位置复制到构建根目录中。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rsync</code> 命令并不会复制源目录中的所有文件。属于版本控制系统的文件，如目录 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.git</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hg</code> 等，不会被复制。对于大多数软件包来说，这是足够的，但是特定软件包可以使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">POST_RSYNC</code> 钩子执行额外操作。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In principle, the hook can contain any command you want. One specific
use case, though, is the intentional copying of the version control
directory using <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rsync</code>. The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rsync</code> command you use in the hook can, among
others, use the following variables:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">原则上，挂钩可以包含任何您想要的命令。 一个特定的用例是有意复制版本控制目录使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rsync</code> 。您在挂钩中使用的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rsync</code> 命令可以使用以下变量之一：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(SRCDIR)</code>: the path to the overridden source directory
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(SRCDIR)</code> ：覆盖源目录的路径</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(@D)</code>: the path to the build directory
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(@D)</code> ：构建目录的路径</font></font></font></li></ul></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_target_finalize_hook" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.23.2.&nbsp;Target-finalize hook<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.23.2. 目标-完成钩子</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Packages may also register hooks in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_TARGET_FINALIZE_HOOKS</code>.
These hooks are run after all packages are built, but before the
filesystem images are generated. They are seldom used, and your
package probably do not need them.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">软件包也可以在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_TARGET_FINALIZE_HOOKS</code> 中注册钩子。这些钩子在所有软件包构建完成后运行，但在生成文件系统映像之前运行。它们很少被使用，您的软件包可能不需要它们。</font></font></font></p></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_gettext_integration_and_interaction_with_packages" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.24.&nbsp;Gettext integration and interaction with packages<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.24.&nbsp;Gettext 集成和与软件包的交互</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Many packages that support internationalization use the gettext
library. Dependencies for this library are fairly complicated and
therefore, deserve some explanation.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">许多支持国际化的软件包使用 gettext 库。该库的依赖关系相当复杂，因此值得一些解释。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">glibc</em></span> C library integrates a full-blown implementation of
<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gettext</em></span>, supporting translation. Native Language Support is
therefore built-in in <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">glibc</em></span>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">glibc C 库集成了完整的 gettext 实现，支持翻译。因此，本地语言支持已内置在 glibc 中。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On the other hand, the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uClibc</em></span> and <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">musl</em></span> C libraries only provide a
stub implementation of the gettext functionality, which allows to
compile libraries and programs using gettext functions, but without
providing the translation capabilities of a full-blown gettext
implementation. With such C libraries, if real Native Language Support
is necessary, it can be provided by the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libintl</code> library of the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gettext</code> package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">另一方面，uClibc 和 musl C 库只提供了 gettext 功能的存根实现，允许使用 gettext 函数编译库和程序，但没有提供完整 gettext 实现的翻译功能。对于这样的 C 库，如果需要真正的本地语言支持，可以通过 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gettext</code> 软件包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libintl</code> 库提供。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Due to this, and in order to make sure that Native Language Support is
properly handled, packages in Buildroot that can use NLS support
should:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">因此，为了确保本地语言支持得到正确处理，Buildroot 中可以使用 NLS 支持的软件包应该：</font></font></font></p><div class="orderedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ol class="orderedlist" type="1" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Ensure NLS support is enabled when <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_SYSTEM_ENABLE_NLS=y</code>. This
   is done automatically for <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autotools</em></span> packages and therefore should
   only be done for packages using other package infrastructures.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">确保在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_SYSTEM_ENABLE_NLS=y</code> 时启用 NLS 支持。对于使用 autotools 包的软件包，这将自动完成，因此只应对使用其他软件包基础设施的软件包执行此操作。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Add <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(TARGET_NLS_DEPENDENCIES)</code> to the package
   <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkg&gt;_DEPENDENCIES</code> variable. This addition should be done
   unconditionally: the value of this variable is automatically
   adjusted by the core infrastructure to contain the relevant list of
   packages. If NLS support is disabled, this variable is empty. If
   NLS support is enabled, this variable contains <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-gettext</code> so
   that tools needed to compile translation files are available on the
   host. In addition, if <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uClibc</em></span> or <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">musl</em></span> are used, this variable
   also contains <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gettext</code> in order to get the full-blown <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gettext</em></span>
   implementation.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(TARGET_NLS_DEPENDENCIES)</code> 添加到软件包 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkg&gt;_DEPENDENCIES</code> 变量中。此添加应无条件进行：此变量的值会自动调整为包含相关软件包列表的核心基础设施。如果禁用 NLS 支持，则此变量为空。如果启用 NLS 支持，则此变量包含 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">host-gettext</code> ，以便主机上可用于编译翻译文件的工具。此外，如果使用 uClibc 或 musl，则此变量还包含 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gettext</code> ，以获取完整的 gettext 实现。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
If needed, add <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(TARGET_NLS_LIBS)</code> to the linker flags, so that
   the package gets linked with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libintl</code>. This is generally not
   needed with <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autotools</em></span> packages as they usually detect
   automatically that they should link with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libintl</code>. However,
   packages using other build systems, or problematic autotools-based
   packages may need this. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(TARGET_NLS_LIBS)</code> should be added
   unconditionally to the linker flags, as the core automatically
   makes it empty or defined to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-lintl</code> depending on the
   configuration.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如有需要，将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(TARGET_NLS_LIBS)</code> 添加到链接器标志中，以便将软件包链接到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libintl</code> 。这通常不适用于 autotools 软件包，因为它们通常会自动检测到应该链接到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libintl</code> 。但是，使用其他构建系统的软件包或存在问题的基于 autotools 的软件包可能需要此操作。应无条件将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(TARGET_NLS_LIBS)</code> 添加到链接器标志中，因为核心会根据配置使其为空或定义为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-lintl</code> 。</font></font></font></li></ol></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">No changes should be made to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> file to support NLS.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">不应更改 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件以支持 NLS。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Finally, certain packages need some gettext utilities on the target,
such as the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gettext</code> program itself, which allows to retrieve
translated strings, from the command line. In such a case, the package
should:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">最后，某些软件包需要在目标上安装一些 gettext 实用程序，例如 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gettext</code> 程序本身，它允许从命令行检索翻译后的字符串。在这种情况下，软件包应该：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
use <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select BR2_PACKAGE_GETTEXT</code> in their <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> file,
  indicating in a comment above that it’s a runtime dependency only.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在其 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件中使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">select BR2_PACKAGE_GETTEXT</code> ，在上面的注释中指出这只是一个运行时依赖。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
not add any <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gettext</code> dependency in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DEPENDENCIES</code> variable of
  their <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在他们的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DEPENDENCIES</code> 变量中不添加任何 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gettext</code> 依赖项。</font></font></font></li></ul></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_tips_and_tricks" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.25.&nbsp;Tips and tricks<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.25. 技巧和窍门</font></font></font></h2></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="package-name-variable-relation" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.25.1.&nbsp;Package name, config entry name and makefile variable relationship<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.25.1. 包名称、配置条目名称和 makefile 变量关系</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In Buildroot, there is some relationship between:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 Buildroot 中，有一些关系：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package name</em></span>, which is the package directory name (and the
  name of the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*.mk</code> file);
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">包名称，即包目录名称（以及 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*.mk</code> 文件的名称）之间的关系；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
the config entry name that is declared in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> file;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件中声明的配置条目名称之间的关系；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
the makefile variable prefix.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">makefile 变量前缀。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">It is mandatory to maintain consistency between these elements,
using the following rules:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">必须保持这些元素之间的一致性，使用以下规则：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
the package directory and the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*.mk</code> name are the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package name</em></span>
  itself (e.g.: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/foo-bar_boo/foo-bar_boo.mk</code>);
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">包目录和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*.mk</code> 名称是包名称本身（例如： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/foo-bar_boo/foo-bar_boo.mk</code> ）；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make</em></span> target name is the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package name</em></span> itself (e.g.:
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo-bar_boo</code>);
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">制作目标名称是包名称本身（例如： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo-bar_boo</code> ）;</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
the config entry is the upper case <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package name</em></span> with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-</code>
  characters substituted with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">_</code>, prefixed with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_</code> (e.g.:
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_FOO_BAR_BOO</code>);
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">配置条目是大写包名称，其中 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-</code> 个字符替换为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">_</code> ，前缀为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_</code> （例如： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_PACKAGE_FOO_BAR_BOO</code> ）;</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*.mk</code> file variable prefix is the upper case <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package name</em></span>
  with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-</code> characters substituted with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">_</code> (e.g.:
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_BAR_BOO_VERSION</code>).
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*.mk</code> 文件变量前缀是大写包名称，其中 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-</code> 个字符替换为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">_</code> （例如： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_BAR_BOO_VERSION</code> ）。</font></font></font></li></ul></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="check-package" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.25.2.&nbsp;How to check the coding style<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.25.2. 如何检查编码风格</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot provides a script in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">utils/check-package</code> that checks new or
changed files for coding style. It is not a complete language validator,
but it catches many common mistakes. It is meant to run in the actual
files you created or modified, before creating the patch for submission.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">utils/check-package</code> 中提供了一个脚本，用于检查新文件或更改的文件的编码风格。它不是一个完整的语言验证器，但可以捕捉到许多常见的错误。它旨在在您创建或修改的实际文件中运行，在创建提交补丁之前运行。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This script can be used for packages, filesystem makefiles, Config.in
files, etc. It does not check the files defining the package
infrastructures and some other files containing similar common code.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此脚本可用于软件包、文件系统 makefiles、Config.in 文件等。它不会检查定义软件包基础设施的文件以及一些包含类似通用代码的其他文件。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To use it, run the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">check-package</code> script, by telling which files you
created or changed:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要使用它，请运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">check-package</code> 脚本，并告诉您创建或更改了哪些文件：</font></font></font></p><pre class="screen">$ ./utils/check-package package/new-package/*</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you have the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">utils</code> directory in your path you can also run:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您的路径中有 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">utils</code> 目录，您也可以运行：</font></font></font></p><pre class="screen">$ cd package/new-package/
$ check-package *</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The tool can also be used for packages in a br2-external:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">该工具也可用于 br2-external 中的软件包：</font></font></font></p><pre class="screen">$ check-package -b /path/to/br2-ext-tree/package/my-package/*</pre></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="testing-package" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.25.3.&nbsp;How to test your package<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.25.3. 如何测试您的软件包</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Once you have added your new package, it is important that you test it
under various conditions: does it build for all architectures? Does it
build with the different C libraries? Does it need threads, NPTL? And
so on…<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一旦您添加了新软件包，重要的是在各种条件下对其进行测试：它是否适用于所有架构？它是否与不同的 C 库一起构建？它是否需要线程、NPTL 等等…</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot runs <a class="ulink" href="http://autobuild.buildroot.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">autobuilders</a> which
continuously test random configurations. However, these only build the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">master</code> branch of the git tree, and your new fancy package is not yet
there.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 运行自动构建器，不断测试随机配置。但是，这些只构建 git 树的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">master</code> 分支，而您的新奇软件包还没有在那里。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot provides a script in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">utils/test-pkg</code> that uses the same base
configurations as used by the autobuilders so you can test your package
in the same conditions.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">utils/test-pkg</code> 中提供了一个脚本，该脚本使用与自动构建器相同的基本配置，因此您可以在相同的条件下测试您的软件包。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First, create a config snippet that contains all the necessary options
needed to enable your package, but without any architecture or toolchain
option. For example, let’s create a config snippet that just enables
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libcurl</code>, without any TLS backend:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，创建一个配置片段，其中包含启用软件包所需的所有必要选项，但不包括任何架构或工具链选项。例如，让我们创建一个仅启用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libcurl</code> 的配置片段，而不包括任何 TLS 后端：</font></font></font></p><pre class="screen">$ cat libcurl.config
BR2_PACKAGE_LIBCURL=y</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If your package needs more configuration options, you can add them to the
config snippet. For example, here’s how you would test <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libcurl</code> with
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">openssl</code> as a TLS backend and the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">curl</code> program:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您的软件包需要更多配置选项，可以将它们添加到配置片段中。例如，这是您如何使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">openssl</code> 作为 TLS 后端和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">curl</code> 程序测试 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">libcurl</code> 的方法：</font></font></font></p><pre class="screen">$ cat libcurl.config
BR2_PACKAGE_LIBCURL=y
BR2_PACKAGE_LIBCURL_CURL=y
BR2_PACKAGE_OPENSSL=y</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Then run the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">test-pkg</code> script, by telling it what config snippet to use
and what package to test:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">test-pkg</code> 脚本，告诉它要使用哪个配置片段以及要测试哪个软件包：</font></font></font></p><pre class="screen">$ ./utils/test-pkg -c libcurl.config -p libcurl</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">By default, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">test-pkg</code> will build your package against a subset of the
toolchains used by the autobuilders, which has been selected by the
Buildroot developers as being the most useful and representative
subset. If you want to test all toolchains, pass the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-a</code> option. Note
that in any case, internal toolchains are excluded as they take too
long to build.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">默认情况下， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">test-pkg</code> 将使用由 Buildroot 开发人员选择的最有用和代表性的工具链子集来构建您的软件包。如果您想测试所有工具链，请传递 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-a</code> 选项。请注意，在任何情况下，内部工具链都被排除在外，因为构建时间太长。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The output lists all toolchains that are tested and the corresponding
result (excerpt, results are fake):<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">输出列出了所有经过测试的工具链以及相应的结果（摘录，结果为虚构）：</font></font></font></p><pre class="screen">$ ./utils/test-pkg -c libcurl.config -p libcurl
                armv5-ctng-linux-gnueabi [ 1/11]: OK
              armv7-ctng-linux-gnueabihf [ 2/11]: OK
                        br-aarch64-glibc [ 3/11]: SKIPPED
                           br-arcle-hs38 [ 4/11]: SKIPPED
                            br-arm-basic [ 5/11]: FAILED
                  br-arm-cortex-a9-glibc [ 6/11]: OK
                   br-arm-cortex-a9-musl [ 7/11]: FAILED
                   br-arm-cortex-m4-full [ 8/11]: OK
                             br-arm-full [ 9/11]: OK
                    br-arm-full-nothread [10/11]: FAILED
                      br-arm-full-static [11/11]: OK
11 builds, 2 skipped, 2 build failed, 1 legal-info failed</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The results mean:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">结果的含义为：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">OK</code>: the build was successful.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">OK</code> ：构建成功。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SKIPPED</code>: one or more configuration options listed in the config
  snippet were not present in the final configuration. This is due to
  options having dependencies not satisfied by the toolchain, such as
  for example a package that <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">depends on BR2_USE_MMU</code> with a noMMU
  toolchain. The missing options are reported in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">missing.config</code> in
  the output build directory (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">~/br-test-pkg/TOOLCHAIN_NAME/</code> by
  default).
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SKIPPED</code> ：配置片段中列出的一个或多个配置选项在最终配置中不存在。这是由于选项具有依赖项，而工具链无法满足这些依赖项，例如一个与 noMMU 工具链不兼容的软件包。缺失的选项将在输出构建目录中的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">missing.config</code> 中报告（默认为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">~/br-test-pkg/TOOLCHAIN_NAME/</code> ）。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FAILED</code>: the build failed. Inspect the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">logfile</code> file in the output
  build  directory to see what went wrong:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FAILED</code> ：构建失败。检查输出构建目录中的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">logfile</code> 文件，查看出了什么问题：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
the actual build failed,
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">实际构建失败，</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
the legal-info failed,
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">法律信息失败，</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
one of the preliminary steps (downloading the config file, applying
   the configuration, running <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dirclean</code> for the package) failed.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">初步步骤之一（下载配置文件，应用配置，为软件包运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">dirclean</code> ）失败。</font></font></font></li></ul></div></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When there are failures, you can just re-run the script with the same
options (after you fixed your package); the script will attempt to
re-build the package specified with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-p</code> for all toolchains, without
the need to re-build all the dependencies of that package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当出现失败时，您可以使用相同的选项重新运行脚本（在修复软件包后）；脚本将尝试为所有工具链重新构建指定为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-p</code> 的软件包，而无需重新构建该软件包的所有依赖项。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">test-pkg</code> script accepts a few options, for which you can get some
help by running:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">test-pkg</code> 脚本接受一些选项，您可以通过运行以下命令获得一些帮助：</font></font></font></p><pre class="screen">$ ./utils/test-pkg -h</pre></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="github-download-url" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.25.4.&nbsp;How to add a package from GitHub<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.25.4. 如何从 GitHub 添加软件包</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Packages on GitHub often don’t have a download area with release tarballs.
However, it is possible to download tarballs directly from the repository
on GitHub. As GitHub is known to have changed download mechanisms in the
past, the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">github</em></span> helper function should be used as shown below.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">GitHub 上的软件包通常没有带有发布 tarballs 的下载区域。但是，可以直接从 GitHub 存储库下载 tarballs。由于众所周知 GitHub 在过去改变了下载机制，因此应使用如下所示的 github 助手函数。</font></font></font></p><pre class="screen"># Use a tag or a full commit ID
FOO_VERSION = 1.0
FOO_SITE = $(call github,&lt;user&gt;,&lt;package&gt;,v$(FOO_VERSION))</pre><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Notes<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意事项</font></font></font></strong></p><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The FOO_VERSION can either be a tag or a commit ID.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">FOO_VERSION 可以是标签或提交 ID。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The tarball name generated by github matches the default one from
  Buildroot (e.g.: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo-f6fb6654af62045239caed5950bc6c7971965e60.tar.gz</code>),
  so it is not necessary to specify it in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">GitHub 生成的 tarball 名称与 Buildroot 的默认名称匹配（例如： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo-f6fb6654af62045239caed5950bc6c7971965e60.tar.gz</code> ），因此在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件中不需要指定它。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
When using a commit ID as version, you should use the full 40 hex characters.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当使用提交 ID 作为版本时，应使用完整的 40 个十六进制字符。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
When the tag contains a prefix such as <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">v</code> in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">v1.0</code>, then the
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">VERSION</code> variable should contain just <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">1.0</code>, and the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">v</code> should be
  added directly in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SITE</code> variable, as illustrated above. This
  ensures that the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">VERSION</code> variable value can be used to match
  against <a class="ulink" href="http://www.release-monitoring.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">release-monitoring.org</a>
  results.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当标签包含前缀，如 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">v</code> 在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">v1.0</code> 中时， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">VERSION</code> 变量应该只包含 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">1.0</code> ，并且 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">v</code> 应该直接添加到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">SITE</code> 变量中，如上所示。这样可以确保 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">VERSION</code> 变量值可用于与 release-monitoring.org 的结果进行匹配。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If the package you wish to add does have a release section on GitHub, the
maintainer may have uploaded a release tarball, or the release may just point
to the automatically generated tarball from the git tag. If there is a
release tarball uploaded by the maintainer, we prefer to use that since it
may be slightly different (e.g. it contains a configure script so we don’t
need to do AUTORECONF).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如
果您希望添加的软件包在 GitHub 上有一个发布部分，维护者可能已经上传了一个发布 tar 包，或者发布可能只是指向从 git 标签自动生成的
 tar 包。如果维护者上传了一个发布 tar 包，我们更倾向于使用它，因为它可能略有不同（例如，它包含一个配置脚本，因此我们不需要执行 
AUTORECONF）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">You can see on the release page if it’s an uploaded tarball or a git tag:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您可以在发布页面上看到它是一个上传的 tar 包还是一个 git 标签：</font></font></font></p><div class="informalfigure" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="mediaobject" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><img src="github_hash_mongrel2.png" alt="github_hash_mongrel2.png" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></div></div><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
If it looks like the image above then it was uploaded by the
  maintainer and you should use that link (in that example:
  <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mongrel2-v1.9.2.tar.bz2</em></span>) to specify <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SITE</code>, and not use the
  <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">github</em></span> helper.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果看起来像上面的图像，那么它是由维护者上传的，您应该使用该链接（在此示例中为 mongrel2-v1.9.2.tar.bz2）来指定 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">FOO_SITE</code> ，而不使用 github 助手。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
On the other hand, if there’s is <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">only</strong></span> the "Source code" link, then
  it’s an automatically generated tarball and you should use the
  <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">github</em></span> helper function.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">另一方面，如果只有“源代码”链接，那么这是一个自动生成的 tarball，您应该使用 github 助手功能。</font></font></font></li></ul></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="gitlab-download-url" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.25.5.&nbsp;How to add a package from Gitlab<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.25.5. 如何从 Gitlab 添加软件包</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In a similar way to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">github</code> macro described in
<a class="xref" href="#github-download-url" title="18.25.4.&nbsp;How to add a package from GitHub" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;18.25.4, “How to add a package from GitHub”</a>, Buildroot also provides the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gitlab</code> macro
to download from Gitlab repositories. It can be used to download
auto-generated tarballs produced by Gitlab, either for specific tags
or commits:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">与第 18.25.4 节“如何从 GitHub 添加软件包”中描述的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">github</code> 宏类似，Buildroot 还提供了 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gitlab</code> 宏用于从 Gitlab 存储库下载。它可用于下载由 Gitlab 生成的 tarballs，可以是特定的标签或提交：</font></font></font></p><pre class="screen"># Use a tag or a full commit ID
FOO_VERSION = 1.0
FOO_SITE = $(call gitlab,&lt;user&gt;,&lt;package&gt;,v$(FOO_VERSION))</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">By default, it will use a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.tar.gz</code> tarball, but Gitlab also provides
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.tar.bz2</code> tarballs, so by adding a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkg&gt;_SOURCE</code> variable, this
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.tar.bz2</code> tarball can be used:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">默认情况下，它将使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.tar.gz</code> tarball，但 Gitlab 还提供 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.tar.bz2</code> tarballs，因此通过添加 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;pkg&gt;_SOURCE</code> 变量，可以使用此 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.tar.bz2</code> tarball：</font></font></font></p><pre class="screen"># Use a tag or a full commit ID
FOO_VERSION = 1.0
FOO_SITE = $(call gitlab,&lt;user&gt;,&lt;package&gt;,v$(FOO_VERSION))
FOO_SOURCE = foo-$(FOO_VERSION).tar.bz2</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If there is a specific tarball uploaded by the upstream developers in
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">https://gitlab.com/&lt;project&gt;/releases/</code>, do not use this macro, but
rather use directly the link to the tarball.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果上游开发人员在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">https://gitlab.com/&lt;project&gt;/releases/</code> 中上传了特定的 tarball，请勿使用此宏，而是直接使用 tarball 的链接。</font></font></font></p></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_conclusion" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>18.26.&nbsp;Conclusion<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">18.26. 结论</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">As you can see, adding a software package to Buildroot is simply a
matter of writing a Makefile using an existing example and modifying it
according to the compilation process required by the package.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">正如您所看到的，将软件包添加到 Buildroot 只是编写一个 Makefile 的问题，使用现有示例并根据软件包所需的编译过程进行修改。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you package software that might be useful for other people, don’t
forget to send a patch to the Buildroot mailing list (see
<a class="xref" href="#submitting-patches" title="22.5.&nbsp;Submitting patches" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;22.5, “Submitting patches”</a>)!<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您打包的软件可能对其他人有用，请不要忘记向 Buildroot 邮件列表发送补丁（请参阅第 22.5 节“提交补丁”）！</font></font></font></p></div></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="patch-policy" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;19.&nbsp;Patching a package<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 19 章。打补丁一个软件包</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">While integrating a new package or updating an existing one, it may be
necessary to patch the source of the software to get it cross-built within
Buildroot.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在集成新软件包或更新现有软件包时，可能需要打补丁软件源代码，以便在 Buildroot 中进行交叉构建。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot offers an infrastructure to automatically handle this during
the builds. It supports three ways of applying patch sets: downloaded patches,
patches supplied within buildroot and patches located in a user-defined
global patch directory.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 提供了一个基础设施，在构建过程中自动处理此问题。它支持三种应用补丁集的方式：下载的补丁、在 buildroot 内提供的补丁和位于用户定义的全局补丁目录中的补丁。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_providing_patches" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>19.1.&nbsp;Providing patches<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">19.1. 提供补丁</font></font></font></h2></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_downloaded" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>19.1.1.&nbsp;Downloaded<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">19.1.1. 下载</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If it is necessary to apply a patch that is available for download, then add it
to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;_PATCH</code> variable. If an entry contains <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">://</code>,
then Buildroot will assume it is a full URL and download the patch
from this location. Otherwise, Buildroot will assume that the patch should be
downloaded from <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;_SITE</code>. It can be a single patch,
or a tarball containing a patch series.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果需要应用可下载的补丁，则将其添加到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;_PATCH</code> 变量中。如果条目包含 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">://</code> ，则 Buildroot 将假定它是完整的 URL，并从此位置下载补丁。否则，Buildroot 将假定应从 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;_SITE</code> 下载补丁。它可以是单个补丁，也可以是包含补丁系列的 tarball。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Like for all downloads, a hash should be added to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;.hash</code>
file.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">与所有下载一样，应向 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;.hash</code> 文件添加哈希。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This method is typically used for packages from Debian.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此方法通常用于来自 Debian 的软件包。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_within_buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>19.1.2.&nbsp;Within Buildroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">19.1.2. 在 Buildroot 内部</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Most patches are provided within Buildroot, in the package
directory; these typically aim to fix cross-compilation, libc support,
or other such issues.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">大多数补丁都在 Buildroot 中提供，在软件包目录中；这些补丁通常旨在修复交叉编译、libc 支持或其他类似问题。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">These patch files should be named <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;number&gt;-&lt;description&gt;.patch</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这些补丁文件应命名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;number&gt;-&lt;description&gt;.patch</code> 。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Notes<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意事项</font></font></font></strong></p><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The patch files coming with Buildroot should not contain any package version
  reference in their filename.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">与 Buildroot 一起提供的补丁文件不应在文件名中包含任何软件包版本引用。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The field <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;number&gt;</code> in the patch file name refers to the <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">apply order</em></span>,
  and shall start at 1; It is preferred to pad the number with zeros up to 4
  digits, like <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git-format-patch</em></span> does. E.g.: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">0001-foobar-the-buz.patch</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">补丁文件名中的字段 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;number&gt;</code> 指的是应用顺序，应从 1 开始；最好用 0 填充数字，直到 4 位数，就像 git-format-patch 一样。例如： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">0001-foobar-the-buz.patch</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
The patch email subject prefix shall not be numbered. Patches shall
  be generated with the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git format-patch -N</code> command, since this
  numbering is automatically added for series. For example, the patch
  subject line should look like <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Subject: [PATCH] foobar the buz</code> rather
  than <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Subject: [PATCH n/m] foobar the buz</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">补丁电子邮件主题前缀不应编号。应使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git format-patch -N</code> 命令生成补丁，因为此编号会自动添加到系列中。例如，补丁主题行应该是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Subject: [PATCH] foobar the buz</code> ，而不是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Subject: [PATCH n/m] foobar the buz</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Previously, it was mandatory for patches to be prefixed with the name of
  the package, like <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;package&gt;-&lt;number&gt;-&lt;description&gt;.patch</code>, but that is
  no longer the case. Existing packages will be fixed as time passes. <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Do
  not prefix patches with the package name.</em></span><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">以前，补丁必须以软件包名称为前缀，如 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;package&gt;-&lt;number&gt;-&lt;description&gt;.patch</code> ，但现在不再需要。随着时间的推移，现有软件包将被修复。不要以软件包名称为前缀。</font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Previously, a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">series</code> file, as used by <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">quilt</code>, could also be added in
  the package directory. In that case, the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">series</code> file defines the patch
  application order. This is deprecated, and will be removed in the future.
  <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Do not use a series file.</em></span><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">以前， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">quilt</code> 使用的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">series</code> 文件也可以添加到包目录中。在这种情况下， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">series</code> 文件定义了补丁应用顺序。这已被弃用，并将在将来移除。不要使用系列文件。</font></font></font>
</li></ul></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_global_patch_directory" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>19.1.3.&nbsp;Global patch directory<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">全局补丁目录</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> configuration file option can be
used to specify a space separated list of one or more directories
containing global package patches. See <a class="xref" href="#customize-patches" title="9.8.1.&nbsp;Providing extra patches" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;9.8.1, “Providing extra patches”</a> for
details.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">" <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> "配置文件选项可用于指定一个或多个包含全局软件包补丁的空格分隔列表。有关详细信息，请参阅第 9.8.1 节“提供额外补丁”。</font></font></font></p></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="patch-apply-order" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>19.2.&nbsp;How patches are applied<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">补丁如何应用</font></font></font></h2></div></div></div><div class="orderedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ol class="orderedlist" type="1" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Run the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;_PRE_PATCH_HOOKS</code> commands if defined;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果已定义，请运行" <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;_PRE_PATCH_HOOKS</code> "命令；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Cleanup the build directory, removing any existing <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*.rej</code> files;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">清理构建目录，删除任何现有的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*.rej</code> 文件；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
If <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;_PATCH</code> is defined, then patches from these
  tarballs are applied;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;_PATCH</code> 已定义，则应用这些 tar 包中的补丁；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
If there are some <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*.patch</code> files in the package’s Buildroot
  directory or in a package subdirectory named <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packageversion&gt;</code>,
  then:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果在软件包的构建目录中或在名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packageversion&gt;</code> 的软件包子目录中存在一些 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*.patch</code> 文件，则：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
If a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">series</code> file exists in the package directory, then patches are
  applied according to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">series</code> file;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果软件包目录中存在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">series</code> 文件，则根据 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">series</code> 文件应用补丁；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Otherwise, patch files matching <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*.patch</code> are applied in alphabetical
  order.
  So, to ensure they are applied in the right order, it is highly
  recommended to name the patch files like this:
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;number&gt;-&lt;description&gt;.patch</code>, where <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;number&gt;</code> refers to the
  <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">apply order</em></span>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">否则，按字母顺序应用与 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*.patch</code> 匹配的补丁文件。因此，为确保它们按正确顺序应用，强烈建议将补丁文件命名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;number&gt;-&lt;description&gt;.patch</code> ，其中 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;number&gt;</code> 表示应用顺序。</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
If <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> is defined, the directories will be
  enumerated in the order they are specified. The patches are applied
  as described in the previous step.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果定义了 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_GLOBAL_PATCH_DIR</code> ，则目录将按照指定的顺序枚举。补丁将按照上一步骤中描述的方式应用。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Run the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;_POST_PATCH_HOOKS</code> commands if defined.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果定义了 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;_POST_PATCH_HOOKS</code> ，则运行相应的命令。</font></font></font></li></ol></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If something goes wrong in the steps <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">3</em></span> or <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">4</em></span>, then the build fails.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果在第 3 步或第 4 步出现问题，则构建将失败。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_format_and_licensing_of_the_package_patches" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>19.3.&nbsp;Format and licensing of the package patches<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">19.3. 软件包补丁的格式和许可证</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Patches are released under the same license as the software they apply
to (see <a class="xref" href="#legal-info-buildroot" title="13.2.&nbsp;Complying with the Buildroot license" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;13.2, “Complying with the Buildroot license”</a>).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">补丁以与其应用的软件相同的许可证发布（请参阅第 13.2 节“遵守 Buildroot 许可证”）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">A message explaining what the patch does, and why it is needed, should
be added in the header commentary of the patch.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">应在补丁的头部注释中添加解释补丁功能及其必要性的消息。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">You should add a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Signed-off-by</code> statement in the header of the each
patch to help with keeping track of the changes and to certify that the
patch is released under the same license as the software that is modified.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您应该在每个补丁的标题中添加一个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Signed-off-by</code> 语句，以帮助跟踪更改并证明该补丁是在修改的软件相同许可证下发布的。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If the software is under version control, it is recommended to use the
upstream SCM software to generate the patch set.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果软件处于版本控制之下，建议使用上游 SCM 软件生成补丁集。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Otherwise, concatenate the header with the output of the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">diff -purN package-version.orig/ package-version/</code> command.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">否则，将标题与 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">diff -purN package-version.orig/ package-version/</code> 命令的输出连接起来。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you update an existing patch (e.g. when bumping the package version),
make sure the existing From header and Signed-off-by tags are not
removed, but do update the rest of the patch comment when appropriate.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您更新现有的补丁（例如，当提升软件包版本时），请确保不删除现有的发件人标头和已签署标签，但在适当时更新补丁评论的其余部分。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">At the end, the patch should look like:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">最后，补丁应该如下所示：</font></font></font></p><pre class="screen">configure.ac: add C++ support test

Signed-off-by: John Doe &lt;john.doe@noname.org&gt;

--- configure.ac.orig
+++ configure.ac
@@ -40,2 +40,12 @@

AC_PROG_MAKE_SET
+
+AC_CACHE_CHECK([whether the C++ compiler works],
+               [rw_cv_prog_cxx_works],
+               [AC_LANG_PUSH([C++])
+                AC_LINK_IFELSE([AC_LANG_PROGRAM([], [])],
+                               [rw_cv_prog_cxx_works=yes],
+                               [rw_cv_prog_cxx_works=no])
+                AC_LANG_POP([C++])])
+
+AM_CONDITIONAL([CXX_WORKS], [test "x$rw_cv_prog_cxx_works" = "xyes"])</pre></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_additional_patch_documentation" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>19.4.&nbsp;Additional patch documentation<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">19.4.&nbsp;额外的补丁文档</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Ideally, all patches should document an upstream patch or patch submission, when
applicable, via the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Upstream</code> trailer.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">理想情况下，所有补丁应该记录一个上游补丁或补丁提交，如果适用的话，通过 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Upstream</code> trailer。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When backporting an upstream patch that has been accepted into mainline, it is
preferred that the URL to the commit is referenced:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当将已被主线接受的上游补丁进行回溯时，最好引用提交的提交 URL：</font></font></font></p><pre class="screen">Upstream: &lt;URL to upstream commit&gt;</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If a new issue is identified in Buildroot and upstream is generally affected by
the issue (it’s not a Buildroot specific issue), users should submit the patch
upstream and provide a link to that submission when possible:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果在 Buildroot 中发现了一个新问题，并且上游通常受到该问题的影响（这不是一个 Buildroot 特定的问题），用户应该将补丁提交到上游，并在可能时提供该提交的链接：</font></font></font></p><pre class="screen">Upstream: &lt;URL to upstream mailing list submission or merge request&gt;</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Patches that have been submitted but were denied upstream should note that and
include comments about why the patch is being used despite the upstream status.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">已提交但被上游拒绝的补丁应该注明，并包括有关为何尽管上游状态被使用的评论。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Note: in any of the above scenarios, it is also sensible to add a few words
about any changes to the patch that may have been necessary.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意：在上述任何情况下，还应该添加几句话，说明可能需要对补丁进行的任何更改。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If a patch does not apply upstream then this should be noted with a comment:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果补丁无法应用到上游，则应在注释中注明。</font></font></font></p><pre class="screen">Upstream: N/A &lt;additional information about why patch is Buildroot specific&gt;</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Adding this documentation helps streamline the patch review process during
package version updates.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加此文档有助于在软件包版本更新期间简化补丁审查流程。</font></font></font></p></div></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="download-infra" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;20.&nbsp;Download infrastructure<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 20 章 下载基础设施</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">TODO<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">待办事项</font></font></font></p></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="debugging-buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;21.&nbsp;Debugging Buildroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 21 章.&nbsp;调试 Buildroot</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">It is possible to instrument the steps <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Buildroot</code> does when building
packages. Define the variable <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_INSTRUMENTATION_SCRIPTS</code> to contain
the path of one or more scripts (or other executables), in a
space-separated list, you want called before and after each step. The
scripts are called in sequence, with three parameters:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">可以在构建软件包时对步骤 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Buildroot</code> 进行检测。定义变量 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_INSTRUMENTATION_SCRIPTS</code> 以包含一个或多个脚本（或其他可执行文件）的路径，以空格分隔的列表形式，您希望在每个步骤之前和之后调用这些脚本。这些脚本按顺序调用，具有三个参数：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">start</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">end</code> to denote the start (resp. the end) of a step;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">start</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">end</code> 表示步骤的开始（或结束）。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
the name of the step about to be started, or which just ended;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">即将开始或刚刚结束的步骤名称;</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
the name of the package.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">包的名称。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">For example :<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">例如：</font></font></font></p><pre class="screen">make BR2_INSTRUMENTATION_SCRIPTS="/path/to/my/script1 /path/to/my/script2"</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The list of steps is:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">步骤列表如下：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">extract</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">patch</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">configure</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">build</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">install-host</code>, when a host-package is installed in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(HOST_DIR)</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">install-host</code> ，当主机包安装在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(HOST_DIR)</code> 时</font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">install-target</code>, when a target-package is installed in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(TARGET_DIR)</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">install-target</code> ，当目标包安装在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(TARGET_DIR)</code> 时</font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">install-staging</code>, when a target-package is installed in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(STAGING_DIR)</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">install-staging</code> ，当目标软件包安装在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(STAGING_DIR)</code> 时</font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">install-image</code>, when a target-package installs files in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(BINARIES_DIR)</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">install-image</code> ，当目标软件包在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(BINARIES_DIR)</code> 安装文件时</font></font></font>
</li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The script has access to the following variables:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">脚本可以访问以下变量：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_CONFIG</code>: the path to the Buildroot .config file
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_CONFIG</code> ：Buildroot .config 文件的路径</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_DIR</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">STAGING_DIR</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TARGET_DIR</code>: see
    <a class="xref" href="#generic-package-reference" title="18.6.2.&nbsp;generic-package reference" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;18.6.2, “<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> reference”</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">HOST_DIR</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">STAGING_DIR</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TARGET_DIR</code> ：请参阅第 18.6.2 节，“ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">generic-package</code> 参考”</font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUILD_DIR</code>: the directory where packages are extracted and built
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BUILD_DIR</code> ：包被提取和构建的目录</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BINARIES_DIR</code>: the place where all binary files (aka images) are
    stored
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BINARIES_DIR</code> ：存储所有二进制文件（也称为图像）的位置</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BASE_DIR</code>: the base output directory
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BASE_DIR</code> ：基本输出目录</font></font></font></li></ul></div></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_contributing_to_buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;22.&nbsp;Contributing to Buildroot<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 22 章。贡献到 Buildroot</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">There are many ways in which you can contribute to Buildroot: analyzing
and fixing bugs, analyzing and fixing package build failures detected by
the autobuilders, testing and reviewing patches sent by other
developers, working on the items in our TODO list and sending your own
improvements to Buildroot or its manual. The following sections give a
little more detail on each of these items.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有
许多方式可以为 Buildroot 
做出贡献：分析和修复错误，分析和修复自动构建器检测到的软件包构建失败，测试和审查其他开发人员发送的补丁，处理我们的 TODO 
列表中的项目，并将您自己的改进发送到 Buildroot 或其手册。以下各节将更详细地介绍这些项目。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you are interested in contributing to Buildroot, the first thing you
should do is to subscribe to the Buildroot mailing list. This list is
the main way of interacting with other Buildroot developers and to send
contributions to. If you aren’t subscribed yet, then refer to
<a class="xref" href="#community-resources" title="Chapter&nbsp;5.&nbsp;Community resources" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Chapter&nbsp;5, <em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Community resources</em></a> for the subscription link.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您有兴趣为 Buildroot 做出贡献，首先要做的是订阅 Buildroot 邮件列表。这个列表是与其他 Buildroot 开发人员互动和发送贡献的主要方式。如果您还没有订阅，请参考第 5 章，社区资源，获取订阅链接。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you are going to touch the code, it is highly recommended to use a
git repository of Buildroot, rather than starting from an extracted
source code tarball. Git is the easiest way to develop from and directly
send your patches to the mailing list. Refer to <a class="xref" href="#getting-buildroot" title="Chapter&nbsp;3.&nbsp;Getting Buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Chapter&nbsp;3, <em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Getting Buildroot</em></a>
for more information on obtaining a Buildroot git tree.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如
果您打算触及代码，请强烈建议使用 Buildroot 的 git 存储库，而不是从提取的源代码 tarball 开始。 Git 
是从中开发并直接将补丁发送到邮件列表的最简单方法。有关获取 Buildroot git 树的更多信息，请参阅第 3 章“获取 
Buildroot”。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_reproducing_analyzing_and_fixing_bugs" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>22.1.&nbsp;Reproducing, analyzing and fixing bugs<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.1. 重现、分析和修复错误</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">A first way of contributing is to have a look at the open bug reports in
the <a class="ulink" href="https://bugs.buildroot.org/buglist.cgi?product=buildroot" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Buildroot bug
tracker</a>. As we strive to keep the bug count as small as possible, all
help in reproducing, analyzing and fixing reported bugs is more than
welcome. Don’t hesitate to add a comment to bug reports reporting your
findings, even if you don’t yet see the full picture.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">贡献的第一种方式是查看 Buildroot 错误跟踪器中的开放错误报告。由于我们努力将错误数量保持在尽可能小的范围内，因此欢迎所有在重现、分析和修复报告的错误方面提供帮助。请随时向错误报告添加评论，报告您的发现，即使您尚未看到完整的图片。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_analyzing_and_fixing_autobuild_failures" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>22.2.&nbsp;Analyzing and fixing autobuild failures<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.2. 分析和修复自动构建失败</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The Buildroot autobuilders are a set of build machines that continuously
run Buildroot builds based on random configurations. This is done for
all architectures supported by Buildroot, with various toolchains, and
with a random selection of packages. With the large commit activity on
Buildroot, these autobuilders are a great help in detecting problems
very early after commit.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot
 自动构建器是一组构建机器，它们根据随机配置连续运行 Buildroot 构建。这是针对 Buildroot 
支持的所有架构完成的，使用各种工具链，并选择随机的软件包。由于 Buildroot 
的大量提交活动，这些自动构建器在提交后非常早期就能帮助检测问题。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">All build results are available at <a class="ulink" href="http://autobuild.buildroot.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">http://autobuild.buildroot.org</a>,
statistics are at <a class="ulink" href="http://autobuild.buildroot.org/stats.php" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">http://autobuild.buildroot.org/stats.php</a>. Every day,
an overview of all failed packages is sent to the mailing list.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">所有构建结果都可以在 http://autobuild.buildroot.org 找到，统计数据在 http://autobuild.buildroot.org/stats.php。每天，所有失败软件包的概述都会发送到邮件列表。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Detecting problems is great, but obviously these problems have to be
fixed as well. Your contribution is very welcome here! There are
basically two things that can be done:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">检测问题是很好的，但显然这些问题也必须被解决。您的贡献在这里非常受欢迎！基本上有两件事可以做：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Analyzing the problems. The daily summary mails do not contain details
  about the actual failures: in order to see what’s going on you have to
  open the build log and check the last output. Having someone doing
  this for all packages in the mail is very useful for other developers,
  as they can make a quick initial analysis based on this output alone.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">分析问题。每日摘要邮件不包含有关实际失败的详细信息：为了了解发生了什么，您必须打开构建日志并检查最后的输出。让某人为邮件中的所有软件包执行此操作对其他开发人员非常有用，因为他们可以仅根据此输出进行快速初步分析。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Fixing a problem. When fixing autobuild failures, you should follow
  these steps:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">解决问题。在修复自动构建失败时，您应遵循以下步骤：</font></font></font></p><div class="orderedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ol class="orderedlist" type="1" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Check if you can reproduce the problem by building with the same
    configuration. You can do this manually, or use the
    <a class="ulink" href="http://git.buildroot.org/buildroot-test/tree/utils/br-reproduce-build" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">br-reproduce-build</a>
    script that will automatically clone a Buildroot git repository,
    checkout the correct revision, download and set the right
    configuration, and start the build.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">检查是否可以通过使用相同的配置来重现问题。您可以手动执行此操作，也可以使用 br-reproduce-build 脚本，该脚本将自动克隆 Buildroot git 存储库，检出正确的修订版，下载并设置正确的配置，然后开始构建。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Analyze the problem and create a fix.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">分析问题并创建修复方案。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Verify that the problem is really fixed by starting from a clean
    Buildroot tree and only applying your fix.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过从干净的 Buildroot 树开始并仅应用您的修复方案来验证问题是否真正已解决。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Send the fix to the Buildroot mailing list (see
    <a class="xref" href="#submitting-patches" title="22.5.&nbsp;Submitting patches" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;22.5, “Submitting patches”</a>). In case you created a patch against the
    package sources, you should also send the patch upstream so that the
    problem will be fixed in a later release, and the patch in Buildroot
    can be removed.
    In the commit message of a patch fixing an autobuild failure, add a
    reference to the build result directory, as follows:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">将
修复发送到 Buildroot 邮件列表（请参阅第 22.5 
节“提交补丁”）。如果您针对软件包源代码创建了补丁，还应将补丁发送到上游，以便问题在后续版本中得到修复，并且可以删除 Buildroot 
中的补丁。在修复自动构建失败的补丁的提交消息中，添加对构建结果目录的引用，如下所示：</font></font></font></li></ol></div></li></ul></div><pre class="screen">Fixes: http://autobuild.buildroot.org/results/51000a9d4656afe9e0ea6f07b9f8ed374c2e4069</pre></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_reviewing_and_testing_patches" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>22.3.&nbsp;Reviewing and testing patches<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.3.&nbsp;审查和测试补丁</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">With the amount of patches sent to the mailing list each day, the
maintainer has a very hard job to judge which patches are ready to apply
and which ones aren’t. Contributors can greatly help here by reviewing
and testing these patches.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">每天发送到邮件列表的补丁数量很多，维护者很难判断哪些补丁准备好可以应用，哪些不行。贡献者可以通过审查和测试这些补丁来极大地帮助。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In the review process, do not hesitate to respond to patch submissions
for remarks, suggestions or anything that will help everyone to
understand the patches and make them better. Please use internet
style replies in plain text emails when responding to patch
submissions.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在审查过程中，请毫不犹豫地回应有关备注、建议或任何有助于大家理解补丁并使其更好的补丁提交。请在回复补丁提交时使用互联网风格的纯文本电子邮件回复。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To indicate approval of a patch, there are three formal tags that keep
track of this approval. To add your tag to a patch, reply to it with the
approval tag below the original author’s Signed-off-by line. These tags
will be picked up automatically by patchwork (see
<a class="xref" href="#apply-patches-patchwork" title="22.3.1.&nbsp;Applying Patches from Patchwork" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;22.3.1, “Applying Patches from Patchwork”</a>) and will be part of the commit log when
the patch is accepted.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要
表示对补丁的批准，有三个正式标记可用于跟踪此批准。要将您的标记添加到补丁中，请在原作者的 Signed-off-by 
行下方回复带有批准标记的内容。这些标记将被 patchwork 自动捕获（请参阅第 22.3.1 节，“从 Patchwork 
应用补丁”），并在补丁被接受时成为提交日志的一部分。</font></font></font></p><div class="variablelist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dl class="variablelist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="term" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Tested-by
</span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Indicates that the patch has been tested successfully.
  You are encouraged to specify what kind of testing you performed
  (compile-test on architecture X and Y, runtime test on target A,
  …). This additional information helps other testers and the
  maintainer.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">表示补丁已经成功测试。鼓励您指定执行了什么类型的测试（在架构 X 和 Y 上进行编译测试，针对目标 A 进行运行时测试等）。这些额外信息有助于其他测试人员和维护者。</font></font></font></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="term" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Reviewed-by
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">审查者</font></font></font></span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Indicates that you code-reviewed the patch and did your
  best in spotting problems, but you are not sufficiently familiar with
  the area touched to provide an Acked-by tag. This means that there
  may be remaining problems in the patch that would be spotted by
  someone with more experience in that area. Should such problems be
  detected, your Reviewed-by tag remains appropriate and you cannot
  be blamed.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">表
示您已对补丁进行了代码审查，并尽力发现问题，但您对所涉领域不够熟悉，无法提供 Acked-by 
标记。这意味着在补丁中可能存在未被发现的问题，这些问题可能会被在该领域具有更多经验的人员发现。如果发现此类问题，则您的 Reviewed-by 
标记仍然适用，您不会受到责备。</font></font></font></dd><dt data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><span class="term" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Acked-by
</span></dt><dd data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Indicates that you code-reviewed the patch and you are
  familiar enough with the area touched to feel that the patch can be
  committed as-is (no additional changes required). In case it later
  turns out that something is wrong with the patch, your Acked-by could
  be considered inappropriate. The difference between Acked-by and
  Reviewed-by is thus mainly that you are prepared to take the blame on
  Acked patches, but not on Reviewed ones.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">表
示您已对补丁进行了代码审查，并且对所涉领域足够熟悉，认为可以原样提交补丁（不需要额外更改）。如果以后发现补丁有问题，您的 Acked-by 
可能被视为不恰当。因此，Acked-by 和 Reviewed-by 之间的区别主要在于您愿意为 Acked 补丁承担责任，但不愿为 
Reviewed 补丁承担责任。</font></font></font></dd></dl></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you reviewed a patch and have comments on it, you should simply reply
to the patch stating these comments, without providing a Reviewed-by or
Acked-by tag. These tags should only be provided if you judge the patch
to be good as it is.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您审查了一个补丁并对其有评论，您应该简单地回复补丁，说明这些评论，而不提供 Reviewed-by 或 Acked-by 标记。只有在您认为补丁很好时才应提供这些标记。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">It is important to note that neither Reviewed-by nor Acked-by imply
that testing has been performed. To indicate that you both reviewed and
tested the patch, provide two separate tags (Reviewed/Acked-by and
Tested-by).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">需要注意的是，Reviewed-by 和 Acked-by 都不意味着已经进行了测试。要表明您已经审查并测试了补丁，请提供两个单独的标记（Reviewed/Acked-by 和 Tested-by）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Note also that <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">any developer</em></span> can provide Tested/Reviewed/Acked-by
tags, without exception, and we encourage everyone to do this. Buildroot
does not have a defined group of <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">core</em></span> developers, it just so happens
that some developers are more active than others. The maintainer will
value tags according to the track record of their submitter. Tags
provided by a regular contributor will naturally be trusted more than
tags provided by a newcomer. As you provide tags more regularly, your
<span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">trustworthiness</em></span> (in the eyes of the maintainer) will go up, but <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">any</em></span>
tag provided is valuable.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">还
要注意，任何开发人员都可以提供 Tested/Reviewed/Acked-by 标记，没有例外，并且我们鼓励每个人都这样做。Buildroot
 
没有一个明确定义的核心开发人员组，只是一些开发人员比其他人更活跃。维护者将根据提交者的记录价值化标记。由常规贡献者提供的标记自然会比新手提供的标
记更可信。随着您更经常提供标记，您的可信度（在维护者眼中）会提高，但提供的任何标记都是有价值的。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot’s Patchwork website can be used to pull in patches for testing
purposes. Please see <a class="xref" href="#apply-patches-patchwork" title="22.3.1.&nbsp;Applying Patches from Patchwork" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;22.3.1, “Applying Patches from Patchwork”</a> for more
information on using Buildroot’s Patchwork website to apply patches.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 的 Patchwork 网站可用于拉取补丁以进行测试。有关如何使用 Buildroot 的 Patchwork 网站应用补丁的更多信息，请参阅第 22.3.1 节“从 Patchwork 应用补丁”。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="apply-patches-patchwork" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>22.3.1.&nbsp;Applying Patches from Patchwork<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.3.1. 从 Patchwork 应用补丁</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The main use of Buildroot’s Patchwork website for a developer is for
pulling in patches into their local git repository for testing
purposes.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于开发人员来说，Buildroot 的 Patchwork 网站的主要用途是将补丁拉入他们的本地 git 存储库以进行测试。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When browsing patches in the patchwork management interface, an <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mbox</code>
link is provided at the top of the page. Copy this link address and
run the following commands:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 patchwork 管理界面中浏览补丁时，页面顶部提供了一个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mbox</code> 链接。复制此链接地址并运行以下命令：</font></font></font></p><pre class="screen">$ git checkout -b &lt;test-branch-name&gt;
$ wget -O - &lt;mbox-url&gt; | git am</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Another option for applying patches is to create a bundle. A bundle is
a set of patches that you can group together using the patchwork
interface. Once the bundle is created and the bundle is made public,
you can copy the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mbox</code> link for the bundle and apply the bundle
using the above commands.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">另一种应用补丁的选项是创建一个捆绑包。捆绑包是一组补丁，您可以使用补丁工作界面将其分组在一起。一旦捆绑包被创建并且捆绑包被公开，您可以复制捆绑包的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mbox</code> 链接，并使用上述命令应用捆绑包。</font></font></font></p></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_work_on_items_from_the_todo_list" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>22.4.&nbsp;Work on items from the TODO list<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.4. 从 TODO 列表中处理项目</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you want to contribute to Buildroot but don’t know where to start,
and you don’t like any of the above topics, you can always work on items
from the <a class="ulink" href="http://elinux.org/Buildroot#Todo_list" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Buildroot TODO list</a>.
Don’t hesitate to discuss an item first on the mailing list or on IRC.
Do edit the wiki to indicate when you start working on an item, so we
avoid duplicate efforts.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您想为 Buildroot 做贡献但不知道从哪里开始，又不喜欢上述任何主题，您总是可以从 Buildroot 的 TODO 列表中处理项目。不要犹豫在邮件列表或 IRC 上首先讨论一个项目。请编辑维基以指示您何时开始处理一个项目，以避免重复努力。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="submitting-patches" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>22.5.&nbsp;Submitting patches<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.5.&nbsp;提交补丁</font></font></font></h2></div></div></div><div class="note" style="margin-left: 0; margin-right: 10%;" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Note<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意</font></font></font></h3><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Please, do not attach patches to bugs, send them to the mailing list
instead</em></span>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请不要将补丁附加到错误中，而是将它们发送到邮件列表。</font></font></font></p></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you made some changes to Buildroot and you would like to contribute
them to the Buildroot project, proceed as follows.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您对 Buildroot 进行了一些更改，并希望将它们贡献给 Buildroot 项目，请按照以下步骤进行。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_the_formatting_of_a_patch" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>22.5.1.&nbsp;The formatting of a patch<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.5.1. 补丁的格式化</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">We expect patches to be formatted in a specific way. This is necessary
to make it easy to review patches, to be able to apply them easily to
the git repository, to make it easy to find back in the history how
and why things have changed, and to make it possible to use <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git
bisect</code> to locate the origin of a problem.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">我们期望补丁以特定方式格式化。这是为了便于审查补丁，能够轻松将其应用到 git 存储库中，便于在历史记录中找回更改的方式和原因，以及使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git
bisect</code> 定位问题的来源。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">First of all, it is essential that the patch has a good commit
message. The commit message should start with a separate line with a
brief summary of the change, prefixed by the area touched by the
patch. A few examples of good commit titles:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，补丁必须有一个良好的提交消息是至关重要的。提交消息应以一个单独的行开始，其中包含更改的简要摘要，前面带有补丁触及的区域。一些良好的提交标题示例：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/linuxptp: bump version to 2.0</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">configs/imx23evk: bump Linux version to 4.19</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/pkg-generic: postpone evaluation of dependency conditions</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">boot/uboot: needs host-{flex,bison}</code>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">support/testing: add python-ubjson tests</code>
</li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The description that follows the prefix should start with a lower case
letter (i.e "bump", "needs", "postpone", "add" in the above examples).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">前缀后面的描述应以小写字母开头（即上述示例中的“bump”、“needs”、“postpone”、“add”）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Second, the body of the commit message should describe <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">why</em></span> this
change is needed, and if necessary also give details about <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">how</em></span> it
was done. When writing the commit message, think of how the reviewers
will read it, but also think about how you will read it when you look
at this change again a few years down the line.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">其次，提交消息的主体应描述为什么需要进行此更改，如果必要，还应提供有关如何执行此更改的详细信息。在编写提交消息时，考虑审阅者将如何阅读，但也考虑一下几年后再次查看此更改时您将如何阅读。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Third, the patch itself should do only one change, but do it
completely. Two unrelated or weakly related changes should usually be
done in two separate patches. This usually means that a patch affects
only a single package. If several changes are related, it is often
still possible to split them up in small patches and apply them in a
specific order. Small patches make it easier to review, and often
make it easier to understand afterwards why a change was done.
However, each patch must be complete. It is not allowed that the
build is broken when only the first but not the second patch is
applied. This is necessary to be able to use <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git bisect</code> afterwards.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第
三，补丁本身应仅执行一个更改，但应完全执行该更改。通常应将两个不相关或弱相关的更改分别放在两个独立的补丁中。这通常意味着一个补丁仅影响一个软件
包。如果几个更改相关，则通常仍然可以将它们拆分为小补丁并按特定顺序应用。小补丁使审查更容易，并且通常使之后更容易理解为什么进行了更改。但是，每个
补丁必须是完整的。当仅应用第一个补丁而不是第二个补丁时，不允许构建失败。这是为了能够之后使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git bisect</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Of course, while you’re doing your development, you’re probably going
back and forth between packages, and certainly not committing things
immediately in a way that is clean enough for submission. So most
developers rewrite the history of commits to produce a clean set of
commits that is appropriate for submission. To do this, you need to
use <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">interactive rebasing</em></span>. You can learn about it
<a class="ulink" href="https://git-scm.com/book/en/v2/Git-Tools-Rewriting-History" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">in the Pro
Git book</a>. Sometimes, it is even easier to discard you history with
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git reset --soft origin/master</code> and select individual changes with
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git add -i</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git add -p</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当
然，在进行开发时，您可能会在各个软件包之间来回切换，并且肯定不会立即提交内容，以便以足够干净的方式提交。因此，大多数开发人员会重写提交历史，以生
成一组干净的提交，适合提交使用。要做到这一点，您需要使用交互式变基。您可以在《Pro 
Git》书中了解有关此内容。有时，甚至更容易放弃您的历史记录，并使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git reset --soft origin/master</code> 选择单个更改或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git add -i</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git add -p</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Finally, the patch should be signed off. This is done by adding
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Signed-off-by: Your Real Name &lt;<a class="ulink" href="mailto:your@email.address" target="_top">your@email.address</a>&gt;</code> at the end of the
commit message. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git commit -s</code> does that for you, if configured
properly. The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Signed-off-by</code> tag means that you publish the patch
under the Buildroot license (i.e. GPL-2.0+, except for package patches,
which have the upstream license), and that you are allowed to do so.
See <a class="ulink" href="http://developercertificate.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">the Developer Certificate of
Origin</a> for details.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">最后，补丁应该被签名。这是通过在提交消息的末尾添加 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Signed-off-by: Your Real Name &lt;<a class="ulink" href="mailto:your@email.address" target="_top">your@email.address</a>&gt;</code> 来完成的。如果配置正确， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git commit -s</code> 会为您执行此操作。 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Signed-off-by</code> 标签意味着您以 Buildroot 许可证（即 GPL-2.0+，除了软件包补丁，其具有上游许可证）发布补丁，并且您有权这样做。有关详细信息，请参阅开发者原产地证书。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To give credits to who sponsored the creation of a patch or the process of
upstreaming it, you may use
<a class="ulink" href="https://datatracker.ietf.org/doc/html/rfc5233" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">email subaddressing</a> for
your git identity (i.e. what is used as commit author and email <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">From:</code>
field, as well as your Signed-off-by tag); add suffix to the local part,
separated from it by a plus <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">+</code> sign. E.g.:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为了给赞助创建补丁或上游过程的人以功劳，您可以使用电子邮件子地址作为您的 git 身份（即用作提交作者和电子邮件 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">From:</code> 字段，以及您的 Signed-off-by 标签）；在本地部分后面添加后缀，用加号 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">+</code> 分隔。例如：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
for a company which sponsored the submitted work, use the company name
  as the detail (suffix) part:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于赞助提交工作的公司，请使用公司名称作为详细信息（后缀）部分：</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Your-Name Your-Surname &lt;your-name.your-surname+companyname@mail.com&gt;</code></p></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
for an individual who sponsored the submitted work, use
  their name and surname:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于赞助提交工作的个人，请使用他们的名字和姓氏：</font></font></font></p><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Your-Name Your-Surname &lt;your-name.your-surname+their-name.their-surname@mail.com&gt;</code></p></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When adding new packages, you should submit every package in a
separate patch. This patch should have the update to
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/Config.in</code>, the package <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> file, the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> file, the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> file, any init script, and all package patches. If the package
has many sub-options, these are sometimes better added as separate
follow-up patches. The summary line should be something like
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;: new package</code>. The body of the commit message can be
empty for simple packages, or it can contain the description of the
package (like the Config.in help text). If anything special has to be
done to build the package, this should also be explained explicitly in
the commit message body.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在添加新软件包时，您应该将每个软件包提交为单独的补丁。此补丁应包含对 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/Config.in</code> 的更新，软件包 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Config.in</code> 文件， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.mk</code> 文件， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> 文件，任何初始化脚本以及所有软件包补丁。如果软件包有许多子选项，最好将它们作为单独的后续补丁添加。摘要行应该类似于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;: new package</code> 。提交消息正文可以为空，用于简单软件包，或者可以包含软件包的描述（例如 Config.in 帮助文本）。如果构建软件包需要执行任何特殊操作，则还应在提交消息正文中明确说明。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When you bump a package to a new version, you should also submit a
separate patch for each package. Don’t forget to update the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code>
file, or add it if it doesn’t exist yet. Also don’t forget to check if
the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">_LICENSE</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">_LICENSE_FILES</code> are still valid. The summary line
should be something like <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;: bump to version &lt;new
version&gt;</code>. If the new version only contains security updates compared
to the existing one, the summary should be <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;: security
bump to version &lt;new version&gt;</code> and the commit message body should show
the CVE numbers that are fixed. If some package patches can be removed
in the new version, it should be explained explicitly why they can be
removed, preferably with the upstream commit ID. Also any other
required changes should be explained explicitly, like configure
options that no longer exist or are no longer needed.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当您将软件包升级到新版本时，您还应为每个软件包提交单独的补丁。不要忘记更新 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.hash</code> 文件，如果尚不存在，则添加它。还要检查 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">_LICENSE</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">_LICENSE_FILES</code> 是否仍然有效。摘要行应该类似于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;: bump to version &lt;new
version&gt;</code> 。如果新版本仅包含与现有版本相比的安全更新，则摘要应为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">&lt;packagename&gt;: security
bump to version &lt;new version&gt;</code> ，提交消息正文应显示已修复的 CVE 编号。如果某些软件包的补丁可以在新版本中删除，应明确说明为什么可以删除，最好附带上游提交 ID。还应明确说明任何其他必需的更改，例如不再存在或不再需要的配置选项。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you are interested in getting notified of build failures and of
further changes in the packages you added or modified, please add
yourself to the DEVELOPERS file. This should be done in the same patch
creating or modifying the package. See <a class="link" href="#DEVELOPERS" title="Chapter&nbsp;23.&nbsp;DEVELOPERS file and get-developers" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">the DEVELOPERS file</a>
for more information.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您希望在构建失败时收到通知，并了解您添加或修改的软件包的进一步更改，请将自己添加到 DEVELOPERS 文件中。这应在创建或修改软件包的相同补丁中完成。有关更多信息，请参阅 DEVELOPERS 文件。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot provides a handy tool to check for common coding style
mistakes on files you created or modified, called <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">check-package</code> (see
<a class="xref" href="#check-package" title="18.25.2.&nbsp;How to check the coding style" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;18.25.2, “How to check the coding style”</a> for more information).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 提供了一个方便的工具，用于检查您创建或修改的文件中常见的编码风格错误，称为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">check-package</code> （有关更多信息，请参见第 18.25.2 节“如何检查编码风格”）。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_preparing_a_patch_series" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>22.5.2.&nbsp;Preparing a patch series<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.5.2. 准备补丁系列</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Starting from the changes committed in your local git view, <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">rebase</em></span>
your development branch on top of the upstream tree before generating
a patch set. To do so, run:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">从您本地 git 视图中提交的更改开始，在生成补丁集之前，将您的开发分支重新基于上游树。要执行此操作，请运行：</font></font></font></p><pre class="screen">$ git fetch --all --tags
$ git rebase origin/master</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Now check the coding style for the changes you committed:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">现在检查您提交的更改的编码风格：</font></font></font></p><pre class="screen">$ utils/docker-run make check-package</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Now, you are ready to generate then submit your patch set.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">现在，您已准备好生成并提交您的补丁集。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To generate it, run:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要生成它，请运行：</font></font></font></p><pre class="screen">$ git format-patch -M -n -s -o outgoing origin/master</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This will generate patch files in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">outgoing</code> subdirectory,
automatically adding the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Signed-off-by</code> line.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这将在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">outgoing</code> 子目录中生成补丁文件，并自动添加 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Signed-off-by</code> 行。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Once patch files are generated, you can review/edit the commit message
before submitting them, using your favorite text editor.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">生成补丁文件后，您可以使用您喜欢的文本编辑器在提交之前查看/编辑提交消息。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot provides a handy tool to know to whom your patches should be
sent, called <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">get-developers</code> (see <a class="xref" href="#DEVELOPERS" title="Chapter&nbsp;23.&nbsp;DEVELOPERS file and get-developers" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Chapter&nbsp;23, <em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DEVELOPERS file and get-developers</em></a> for more
information). This tool reads your patches and outputs the appropriate
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git send-email</code> command to use:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 提供了一个方便的工具，用于了解应将您的补丁发送给谁，称为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">get-developers</code> （请参阅第 23 章，DEVELOPERS 文件和 get-developers 以获取更多信息）。此工具读取您的补丁并输出适当的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git send-email</code> 命令以使用：</font></font></font></p><pre class="screen">$ ./utils/get-developers outgoing/*</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Use the output of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">get-developers</code> to send your patches:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">get-developers</code> 的输出发送您的补丁：</font></font></font></p><pre class="screen">$ git send-email --to buildroot@buildroot.org --cc bob --cc alice outgoing/*</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Alternatively, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">get-developers -e</code> can be used directly with the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--cc-cmd</code> argument to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git send-email</code> to automatically CC the
affected developers:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">或者，可以直接使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">get-developers -e</code> 参数与 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--cc-cmd</code> 参数一起使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git send-email</code> ，以自动抄送受影响的开发人员：</font></font></font></p><pre class="screen">$ git send-email --to buildroot@buildroot.org \
      --cc-cmd './utils/get-developers -e' origin/master</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git</code> can be configured to automatically do this out of the box with:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git</code> 可以配置为开箱即用地自动执行此操作：</font></font></font></p><pre class="screen">$ git config sendemail.to buildroot@buildroot.org
$ git config sendemail.ccCmd "$(pwd)/utils/get-developers -e"</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">And then just do:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后只需执行：</font></font></font></p><pre class="screen">$ git send-email origin/master</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Note that <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git</code> should be configured to use your mail account.
To configure <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git</code>, see <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">man git-send-email</code> or <a class="ulink" href="https://git-send-email.io/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">https://git-send-email.io/</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git</code> 应配置为使用您的邮件帐户。要配置 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git</code> ，请参阅 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">man git-send-email</code> 或 https://git-send-email.io/。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you do not use <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git send-email</code>, make sure posted <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">patches are not
line-wrapped</strong></span>, otherwise they cannot easily be applied. In such a case,
fix your e-mail client, or better yet, learn to use <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git send-email</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您不使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git send-email</code> ，请确保发布的补丁未换行，否则无法轻松应用。在这种情况下，请修复您的电子邮件客户端，或者更好地学习如何使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git send-email</code> 。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a class="ulink" href="https://sr.ht/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">https://sr.ht</a> also has a light-weight UI for
<a class="ulink" href="https://man.sr.ht/git.sr.ht/#sending-patches-upstream" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">preparing patchseries</a>
and can also send out the patches for you. There are a few drawbacks to
this, as you cannot edit your patches' status in Patchwork and you
currently can’t edit your display name with which the match emails are
sent out but it is an option if you cannot get git send-email to work
with your mail provider (i.e. O365); it shall not be considered the
official way of sending patches, but just a fallback.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">https://
sr.ht 还具有一个轻量级的用户界面，用于准备补丁系列，并可以为您发送补丁。这种方法有一些缺点，例如您无法在 Patchwork 
中编辑您的补丁状态，目前也无法编辑发送匹配电子邮件的显示名称，但如果您无法使 git send-email 与您的邮件提供商（即 
O365）配合工作，则可以选择此选项；这不应被视为发送补丁的官方方式，而只是一种备用方法。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_cover_letter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>22.5.3.&nbsp;Cover letter<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.5.3.&nbsp;封面信</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you want to present the whole patch set in a separate mail, add
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--cover-letter</code> to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git format-patch</code> command (see <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">man
git-format-patch</code> for further information). This will generate a
template for an introduction e-mail to your patch series.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您想在单独的邮件中展示整个补丁集，请在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git format-patch</code> 命令中添加 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--cover-letter</code> （有关详细信息，请参见 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">man
git-format-patch</code> ）。这将为您的补丁系列生成一封介绍电子邮件的模板。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">A <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">cover letter</em></span> may be useful to introduce the changes you propose
in the following cases:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在以下情况下，封面信可能有助于介绍您提出的更改：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
large number of commits in the series;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">系列中的大量提交;</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
deep impact of the changes in the rest of the project;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对项目其余部分变化的深远影响;</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
RFC <a href="#ftn.idm6023" class="footnote" id="idm6023" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><sup class="footnote" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[4]</sup></a>;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">RFC <sup class="footnote" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[4]</sup> ;</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
whenever you feel it will help presenting your work, your choices,
  the review process, etc.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">每当您觉得它有助于展示您的工作、您的选择、审查过程等。</font></font></font></li></ul></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_patches_for_maintenance_branches" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>22.5.4.&nbsp;Patches for maintenance branches<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.5.4. 维护分支的补丁</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When fixing bugs on a maintenance branch, bugs should be fixed on the
master branch first. The commit log for such a patch may then contain a
post-commit note specifying what branches are affected:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在维护分支上修复错误时，应首先在主分支上修复错误。此类补丁的提交日志可能包含一个后提交说明，指定受影响的分支。</font></font></font></p><pre class="screen">package/foo: fix stuff

Signed-off-by: Your Real Name &lt;your@email.address&gt;
---
Backport to: 2020.02.x, 2020.05.x
(2020.08.x not affected as the version was bumped)</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Those changes will then be backported by a maintainer to the affected
branches.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这些更改将由维护者回溯到受影响的分支。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">However, some bugs may apply only to a specific release, for example
because it is using an older version of a package. In that case, patches
should be based off the maintenance branch, and the patch subject prefix
must include the maintenance branch name (for example "[PATCH 2020.02.x]").
This can be done with the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git format-patch</code> flag <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--subject-prefix</code>:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然而，一些错误可能仅适用于特定版本，例如因为它正在使用较旧版本的软件包。在这种情况下，补丁应基于维护分支，并且补丁主题前缀必须包含维护分支名称（例如“[PATCH 2020.02.x]”）。这可以通过 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git format-patch</code> 标志 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--subject-prefix</code> 完成：</font></font></font></p><pre class="screen">$ git format-patch --subject-prefix "PATCH 2020.02.x" \
    -M -s -o outgoing origin/2020.02.x</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Then send the patches with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git send-email</code>, as described above.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后按照上述描述使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git send-email</code> 发送补丁。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_patch_revision_changelog" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>22.5.5.&nbsp;Patch revision changelog<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.5.5. 补丁修订日志</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When improvements are requested, the new revision of each commit
should include a changelog of the modifications between each
submission. Note that when your patch series is introduced by a cover
letter, an overall changelog may be added to the cover letter in
addition to the changelog in the individual commits.
The best thing to rework a patch series is by interactive rebasing:
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git rebase -i origin/master</code>. Consult the git manual for more
information.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当需要改进时，每个提交的新修订版本应包括每次提交之间的修改日志。请注意，当您的补丁系列由一封附加信介绍时，除了各个提交的日志外，还可以在附加信中添加总体变更日志。重新处理补丁系列的最佳方法是通过交互式变基： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git rebase -i origin/master</code> 。请参考 git 手册获取更多信息。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When added to the individual commits, this changelog is added when
editing the commit message. Below the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Signed-off-by</code> section, add
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">---</code> and your changelog.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">将此变更日志添加到各个提交时，可在编辑提交消息时添加此变更日志。在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Signed-off-by</code> 部分下方，添加 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">---</code> 和您的变更日志。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Although the changelog will be visible for the reviewers in the mail
thread, as well as in
<a class="ulink" href="https://patchwork.ozlabs.org/project/buildroot/list/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">patchwork</a>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git</code>
will automatically ignores lines below <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">---</code> when the patch will be
merged. This is the intended behavior: the changelog is not meant to
be preserved forever in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git</code> history of the project.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">尽管变更日志将在邮件线程中对审阅者可见，以及在 patchwork 中，当补丁合并时， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git</code> 将自动忽略 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">---</code> 以下的行。这是预期的行为：变更日志不应永远保留在项目的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git</code> 历史记录中。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Hereafter the recommended layout:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">以下是推荐的布局：</font></font></font></p><pre class="screen">Patch title: short explanation, max 72 chars

A paragraph that explains the problem, and how it manifests itself. If
the problem is complex, it is OK to add more paragraphs. All paragraphs
should be wrapped at 72 characters.

A paragraph that explains the root cause of the problem. Again, more
than one paragraph is OK.

Finally, one or more paragraphs that explain how the problem is solved.
Don't hesitate to explain complex solutions in detail.

Signed-off-by: John DOE &lt;john.doe@example.net&gt;

---
Changes v2 -&gt; v3:
  - foo bar  (suggested by Jane)
  - bar buz

Changes v1 -&gt; v2:
  - alpha bravo  (suggested by John)
  - charly delta</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Any patch revision should include the version number. The version number
is simply composed of the letter <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">v</code> followed by an <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">integer</code> greater or
equal to two (i.e. "PATCH v2", "PATCH v3" …).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">任何补丁修订版都应包括版本号。版本号简单地由字母 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">v</code> 后跟大于或等于两个的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">integer</code> 组成（即“PATCH v2”，“PATCH v3”…）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This can be easily handled with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git format-patch</code> by using the option
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--subject-prefix</code>:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用选项 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--subject-prefix</code> ，可以很容易地通过 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git format-patch</code> 处理：</font></font></font></p><pre class="screen">$ git format-patch --subject-prefix "PATCH v4" \
    -M -s -o outgoing origin/master</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Since git version 1.8.1, you can also use <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-v &lt;n&gt;</code> (where &lt;n&gt; is the
version number):<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">自 git 版本 1.8.1 起，您还可以使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-v &lt;n&gt;</code> （其中  是版本号）：</font></font></font></p><pre class="screen">$ git format-patch -v4 -M -s -o outgoing origin/master</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When you provide a new version of a patch, please mark the old one as
superseded in
<a class="ulink" href="https://patchwork.ozlabs.org/project/buildroot/list/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">patchwork</a>. You
need to create an account on
<a class="ulink" href="https://patchwork.ozlabs.org/project/buildroot/list/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">patchwork</a> to be
able to modify the status of your patches. Note that you can only change
the status of patches you submitted yourself, which means the email
address you register in
<a class="ulink" href="https://patchwork.ozlabs.org/project/buildroot/list/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">patchwork</a> should
match the one you use for sending patches to the mailing list.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当
您提供一个补丁的新版本时，请在 patchwork 中将旧版本标记为已废弃。您需要在 patchwork 
上创建一个帐户，以便能够修改您的补丁的状态。请注意，您只能更改您自己提交的补丁的状态，这意味着您在 patchwork 
中注册的电子邮件地址应与您用于向邮件列表发送补丁的地址匹配。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">You can also add the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--in-reply-to &lt;message-id&gt;</code> option when
submitting a patch to the mailing list. The id of the mail to reply to
can be found under the "Message Id" tag on
<a class="ulink" href="https://patchwork.ozlabs.org/project/buildroot/list/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">patchwork</a>. The
advantage of <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">in-reply-to</strong></span> is that patchwork will automatically mark
the previous version of the patch as superseded.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在将补丁提交到邮件列表时，您还可以添加 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--in-reply-to &lt;message-id&gt;</code> 选项。要回复的邮件的 ID 可以在 patchwork 的“消息 ID”标签下找到。in-reply-to 的优点是，patchwork 将自动将补丁的先前版本标记为已取代。</font></font></font></p></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="reporting-bugs" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>22.6.&nbsp;Reporting issues/bugs or getting help<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.6. 报告问题/错误或获取帮助</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Before reporting any issue, please check in
<a class="link" href="#community-resources" title="Chapter&nbsp;5.&nbsp;Community resources" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">the mailing list archive</a> whether someone has
already reported and/or fixed a similar problem.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在报告任何问题之前，请在邮件列表存档中检查是否已经有人报告和/或修复了类似的问题。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">However you choose to report bugs or get help, either by
opening a bug in the <a class="link" href="#community-resources" title="Chapter&nbsp;5.&nbsp;Community resources" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bug tracker</a> or by
<a class="link" href="#community-resources" title="Chapter&nbsp;5.&nbsp;Community resources" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">sending a mail to the mailing list</a>, there are
a number of details to provide in order to help people reproduce and
find a solution to the issue.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">无论您选择如何报告错误或寻求帮助，无论是通过在错误跟踪器中打开错误还是通过发送电子邮件到邮件列表，都需要提供一些详细信息，以帮助他人重现并找到问题的解决方案。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Try to think as if you were trying to help someone else; in
that case, what would you need?<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">尽量想象自己在帮助别人；在那种情况下，您会需要什么？</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Here is a short list of details to provide in such case:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">以下是在这种情况下需要提供的简要详细信息列表：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
host machine (OS/release)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">主机机器（操作系统/版本）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
version of Buildroot
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 版本</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
target for which the build fails
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">构建失败的目标</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
package(s) for which the build fails
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">构建失败的软件包</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
the command that fails and its output
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">失败的命令及其输出</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
any information you think that may be relevant
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您认为可能相关的任何信息</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Additionally, you should add the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> file (or if you know how, a
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">defconfig</code>; see <a class="xref" href="#customize-store-buildroot-config" title="9.3.&nbsp;Storing the Buildroot configuration" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;9.3, “Storing the Buildroot configuration”</a>).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">另外，您应该添加 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> 文件（或者如果您知道如何，一个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">defconfig</code> ；请参阅第 9.3 节“存储 Buildroot 配置”）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If some of these details are too large, do not hesitate to use a
pastebin service. Note that not all available pastebin services will
preserve Unix-style line terminators when downloading raw pastes.
Following pastebin services are known to work correctly:
- <a class="ulink" href="https://gist.github.com/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">https://gist.github.com/</a>
- <a class="ulink" href="http://code.bulix.org/" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">http://code.bulix.org/</a><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如
果这些细节中有些太大，请不要犹豫使用 pastebin 服务。请注意，并非所有可用的 pastebin 服务在下载原始粘贴时都会保留 Unix 
风格的行终止符。以下 pastebin 服务已知可以正常工作：- https://gist.github.com/ - 
http://code.bulix.org/</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_using_the_runtime_tests_framework" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>22.7.&nbsp;Using the runtime tests framework<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.7. 使用运行时测试框架</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Buildroot includes a run-time testing framework built upon Python
scripting and QEMU runtime execution. The goals of the framework are
the following:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 包含一个基于 Python 脚本和 QEMU 运行时执行构建的运行时测试框架。该框架的目标如下：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
build a well defined Buildroot configuration
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">构建一个明确定义的 Buildroot 配置</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
optionally, verify some properties of the build output
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">可选地，验证构建输出的一些属性</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
optionally, boot the build results under Qemu, and verify that a
  given feature is working as expected
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">可选地，使用 Qemu 引导构建结果，并验证特定功能是否按预期工作</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The entry point to use the runtime tests framework is the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">support/testing/run-tests</code> tool, which has a series of options
documented in the tool’s help <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-h</em></span> description. Some common options
include setting the download folder, the output folder, keeping build
output, and for multiple test cases, you can set the JLEVEL for each.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用运行时测试框架的入口点是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">support/testing/run-tests</code> 工具，该工具有一系列选项在工具的帮助-h 描述中有文档记录。一些常见选项包括设置下载文件夹、输出文件夹、保留构建输出，对于多个测试用例，您可以为每个设置 JLEVEL。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Here is an example walk through of running a test case.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这是运行测试用例的示例演练。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
For a first step, let us see what all the test case options are. The test
cases can be listed by executing <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">support/testing/run-tests -l</code>. These tests
can all be run individually during test development from the console. Both
one at a time and selectively as a group of a subset of tests.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">作为第一步，让我们看看所有的测试用例选项是什么。可以通过执行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">support/testing/run-tests -l</code> 列出测试用例。在测试开发过程中，可以从控制台逐个运行这些测试。也可以逐个运行或选择性地作为一组测试的子集。</font></font></font></li></ul></div><pre class="screen">$ support/testing/run-tests -l
List of tests
test_run (tests.utils.test_check_package.TestCheckPackage)
test_run (tests.toolchain.test_external.TestExternalToolchainBuildrootMusl) ... ok
test_run (tests.toolchain.test_external.TestExternalToolchainBuildrootuClibc) ... ok
test_run (tests.toolchain.test_external.TestExternalToolchainCCache) ... ok
test_run (tests.toolchain.test_external.TestExternalToolchainCtngMusl) ... ok
test_run (tests.toolchain.test_external.TestExternalToolchainLinaroArm) ... ok
test_run (tests.toolchain.test_external.TestExternalToolchainSourceryArmv4) ... ok
test_run (tests.toolchain.test_external.TestExternalToolchainSourceryArmv5) ... ok
test_run (tests.toolchain.test_external.TestExternalToolchainSourceryArmv7) ... ok
[snip]
test_run (tests.init.test_systemd.TestInitSystemSystemdRoFull) ... ok
test_run (tests.init.test_systemd.TestInitSystemSystemdRoIfupdown) ... ok
test_run (tests.init.test_systemd.TestInitSystemSystemdRoNetworkd) ... ok
test_run (tests.init.test_systemd.TestInitSystemSystemdRwFull) ... ok
test_run (tests.init.test_systemd.TestInitSystemSystemdRwIfupdown) ... ok
test_run (tests.init.test_systemd.TestInitSystemSystemdRwNetworkd) ... ok
test_run (tests.init.test_busybox.TestInitSystemBusyboxRo) ... ok
test_run (tests.init.test_busybox.TestInitSystemBusyboxRoNet) ... ok
test_run (tests.init.test_busybox.TestInitSystemBusyboxRw) ... ok
test_run (tests.init.test_busybox.TestInitSystemBusyboxRwNet) ... ok

Ran 157 tests in 0.021s

OK</pre><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Then, to run one test case:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后，运行一个测试用例：</font></font></font></li></ul></div><pre class="screen">$ support/testing/run-tests -d dl -o output_folder -k tests.init.test_busybox.TestInitSystemBusyboxRw
15:03:26 TestInitSystemBusyboxRw                  Starting
15:03:28 TestInitSystemBusyboxRw                  Building
15:08:18 TestInitSystemBusyboxRw                  Building done
15:08:27 TestInitSystemBusyboxRw                  Cleaning up
.
Ran 1 test in 301.140s

OK</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The standard output indicates if the test is successful or not. By
default, the output folder for the test is deleted automatically
unless the option <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-k</code> is passed to <span class="strong" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">keep</strong></span> the output directory.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">标准输出指示测试是否成功。默认情况下，测试的输出文件夹会被自动删除，除非传递选项 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-k</code> 以保留输出目录。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_creating_a_test_case" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>22.7.1.&nbsp;Creating a test case<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.7.1. 创建一个测试用例</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Within the Buildroot repository, the testing framework is organized at the
top level in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">support/testing/</code> by folders of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">conf</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">infra</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">tests</code>.
All the test cases live under the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">tests</code> folder and are organized in various
folders representing the category of test.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 Buildroot 存储库中，测试框架在顶层通过 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">support/testing/</code> 、 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">conf</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">infra</code> 文件夹进行组织。所有测试用例都位于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">tests</code> 文件夹下，并以表示测试类别的各种文件夹进行组织。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The best way to get familiar with how to create a test case is to look
at a few of the basic file system <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">support/testing/tests/fs/</code> and init
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">support/testing/tests/init/</code> test scripts. Those tests give good
examples of a basic tests that include both checking the build
results, and doing runtime tests. There are other more advanced cases
that use things like nested <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">br2-external</code> folders to provide
skeletons and additional packages.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">熟悉如何创建测试用例的最佳方法是查看一些基本文件系统 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">support/testing/tests/fs/</code> 和 init <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">support/testing/tests/init/</code> 测试脚本。这些测试提供了基本测试的良好示例，包括检查构建结果和进行运行时测试。还有其他更高级的情况，使用嵌套 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">br2-external</code> 文件夹等内容来提供框架和额外的软件包。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Creating a basic test case involves:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">创建基本测试用例涉及：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Defining a test class that inherits from <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">infra.basetest.BRTest</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">定义一个测试类，该类继承自 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">infra.basetest.BRTest</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Defining the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">config</code> member of the test class, to the Buildroot
  configuration to build for this test case. It can optionally rely on
  configuration snippets provided by the runtime test infrastructure:
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">infra.basetest.BASIC_TOOLCHAIN_CONFIG</code> to get a basic
  architecture/toolchain configuration, and
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">infra.basetest.MINIMAL_CONFIG</code> to not build any filesystem. The
  advantage of using <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">infra.basetest.BASIC_TOOLCHAIN_CONFIG</code> is that a
  matching Linux kernel image is provided, which allows to boot the
  resulting image in Qemu without having to build a Linux kernel image
  as part of the test case, therefore significant decreasing the build
  time required for the test case.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">定义测试类的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">config</code> 成员，以构建此测试用例的 Buildroot 配置。它可以选择依赖运行时测试基础设施提供的配置片段： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">infra.basetest.BASIC_TOOLCHAIN_CONFIG</code> 以获取基本的架构/工具链配置， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">infra.basetest.MINIMAL_CONFIG</code> 以不构建任何文件系统。使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">infra.basetest.BASIC_TOOLCHAIN_CONFIG</code> 的优势在于提供了匹配的 Linux 内核映像，这允许在 Qemu 中引导生成的映像，而无需构建 Linux 内核映像作为测试用例的一部分，因此显著减少了测试用例所需的构建时间。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Implementing a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">def test_run(self):</code> function to implement the
  actual tests to run after the build has completed. They may be tests
  that verify the build output, by running command on the host using
  the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">run_cmd_on_host()</code> helper function. Or they may boot the
  generated system in Qemu using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Emulator</code> object available as
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">self.emulator</code> in the test case. For example <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">self.emulator.boot()</code>
  allows to boot the system in Qemu, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">self.emulator.login()</code> allows to
  login, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">self.emulator.run()</code> allows to run shell commands inside
  Qemu.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">实现一个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">def test_run(self):</code> 函数来实现在构建完成后运行的实际测试。它们可以是验证构建输出的测试，通过在主机上使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">run_cmd_on_host()</code> 辅助函数运行命令来进行。或者它们可以使用测试用例中作为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">self.emulator</code> 可用的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Emulator</code> 对象在 Qemu 中引导生成的系统。例如 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">self.emulator.boot()</code> 允许在 Qemu 中引导系统， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">self.emulator.login()</code> 允许登录， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">self.emulator.run()</code> 允许在 Qemu 中运行 shell 命令。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">After creating the test script, add yourself to the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DEVELOPERS</code> file to
be the maintainer of that test case.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">创建测试脚本后，将自己添加到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DEVELOPERS</code> 文件中，成为该测试用例的维护者。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_debugging_a_test_case" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>22.7.2.&nbsp;Debugging a test case<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.7.2.&nbsp;调试测试用例</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When a test case runs, the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output_folder</code> will contain the following:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当测试用例运行时， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output_folder</code> 将包含以下内容：</font></font></font></p><pre class="screen">$ ls output_folder/
TestInitSystemBusyboxRw/
TestInitSystemBusyboxRw-build.log
TestInitSystemBusyboxRw-run.log</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TestInitSystemBusyboxRw/</code> is the Buildroot output directory, and it
is preserved only if the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-k</code> option is passed.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TestInitSystemBusyboxRw/</code> 是 Buildroot 输出目录，仅在传递 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-k</code> 选项时保留。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TestInitSystemBusyboxRw-build.log</code> is the log of the Buildroot build.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TestInitSystemBusyboxRw-build.log</code> 是 Buildroot 构建的日志。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TestInitSystemBusyboxRw-run.log</code> is the log of the Qemu boot and
test. This file will only exist if the build was successful and the
test case involves booting under Qemu.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TestInitSystemBusyboxRw-run.log</code> 是 Qemu 引导和测试的日志。仅当构建成功且测试案例涉及在 Qemu 下引导时，此文件才会存在。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you want to manually run Qemu to do manual tests of the build
result, the first few lines of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TestInitSystemBusyboxRw-run.log</code>
contain the Qemu command line to use.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您想手动运行 Qemu 来对构建结果进行手动测试， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">TestInitSystemBusyboxRw-run.log</code> 的前几行包含要使用的 Qemu 命令行。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">You can also make modifications to the current sources inside the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output_folder</code> (e.g. for debug purposes) and rerun the standard
Buildroot make targets (in order to regenerate the complete image with
the new modifications) and then rerun the test.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您还可以在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">output_folder</code> 中对当前源代码进行修改（例如，用于调试目的），然后重新运行标准 Buildroot 构建目标（以便使用新的修改重新生成完整的镜像），然后重新运行测试。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h3 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_runtime_tests_and_gitlab_ci" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>22.7.3.&nbsp;Runtime tests and Gitlab CI<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">22.7.3. 运行时测试和 Gitlab CI</font></font></font></h3></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">All runtime tests are regularly executed by Buildroot Gitlab CI
infrastructure, see .gitlab.yml and
<a class="ulink" href="https://gitlab.com/buildroot.org/buildroot/-/jobs" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">https://gitlab.com/buildroot.org/buildroot/-/jobs</a>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">所有运行时测试都定期由 Buildroot Gitlab CI 基础设施执行，请参阅.gitlab.yml 和 https://gitlab.com/buildroot.org/buildroot/-/jobs。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">You can also use Gitlab CI to test your new test cases, or verify that
existing tests continue to work after making changes in Buildroot.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您还可以使用 Gitlab CI 来测试您的新测试用例，或在 Buildroot 中进行更改后验证现有测试是否继续工作。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In order to achieve this, you need to create a fork of the Buildroot
project on Gitlab, and be able to push branches to your Buildroot fork
on Gitlab.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为了实现这一点，您需要在 Gitlab 上创建 Buildroot 项目的分支，并能够将分支推送到 Gitlab 上的 Buildroot 分支。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The name of the branch that you push will determine if a Gitlab CI
pipeline will be triggered or not, and for which test cases.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">推送的分支名称将决定是否触发 Gitlab CI 流水线，以及触发哪些测试用例。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">In the examples below, the &lt;name&gt; component of the branch name is an
arbitrary string you choose.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在下面的示例中，分支名称的 &lt;name&gt; 部分是您选择的任意字符串。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
To trigger all run-test test case jobs, push a branch that ends with
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-runtime-tests</code>:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要触发所有 run-test 测试用例作业，请推送以 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-runtime-tests</code> 结尾的分支。</font></font></font></li></ul></div><pre class="screen"> $ git push gitlab HEAD:&lt;name&gt;-runtime-tests</pre><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
To trigger one or several test case jobs, push a branch that ends
  with the complete test case name
  (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">tests.init.test_busybox.TestInitSystemBusyboxRo</code>) or with the name
  of a category of tests (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">tests.init.test_busybox</code>):
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要触发一个或多个测试用例作业，请推送以完整测试用例名称（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">tests.init.test_busybox.TestInitSystemBusyboxRo</code> ）或测试类别名称（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">tests.init.test_busybox</code> ）结尾的分支：</font></font></font></li></ul></div><pre class="screen"> $ git push gitlab HEAD:&lt;name&gt;-&lt;test case name&gt;</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Example to run one test:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">运行一个测试的示例：</font></font></font></p><pre class="screen"> $ git push gitlab HEAD:foo-tests.init.test_busybox.TestInitSystemBusyboxRo</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Examples to run several tests part of the same group:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">运行同一组中的多个测试的示例：</font></font></font></p><pre class="screen"> $ git push gitlab HEAD:foo-tests.init.test_busybox
 $ git push gitlab HEAD:foo-tests.init</pre></div></div><div class="footnotes" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><br data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><hr style="width:100; text-align:left;margin-left: 0"><div id="ftn.idm6023" class="footnote" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a href="#idm6023" class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><sup class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[4] </sup></a>RFC: (Request for comments) change proposal<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <sup class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[4] </sup> RFC：（请求评论）更改建议</font></font></font></p></div></div></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="DEVELOPERS" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;23.&nbsp;DEVELOPERS file and get-developers<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 23 章 DEVELOPERS 文件和 get-developers</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The main Buildroot directory contains a file named <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DEVELOPERS</code> that
lists the developers involved with various areas of Buildroot. Thanks
to this file, the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">get-developers</code> tool allows to:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">主 Buildroot 目录包含一个名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DEVELOPERS</code> 的文件，列出了涉及 Buildroot 各个领域的开发人员。由于这个文件， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">get-developers</code> 工具可以：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Calculate the list of developers to whom patches should be sent, by
  parsing the patches and matching the modified files with the
  relevant developers. See <a class="xref" href="#submitting-patches" title="22.5.&nbsp;Submitting patches" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;22.5, “Submitting patches”</a> for details.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过解析补丁并将修改的文件与相关开发人员进行匹配，计算应将补丁发送给哪些开发人员的列表。有关详细信息，请参见第 22.5 节“提交补丁”。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Find which developers are taking care of a given architecture or
  package, so that they can be notified when a build failure occurs on
  this architecture or package. This is done in interaction with
  Buildroot’s autobuild infrastructure.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">查找负责特定架构或软件包的开发人员，以便在此架构或软件包发生构建失败时通知他们。这是与 Buildroot 的自动构建基础设施互动完成的。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">We ask developers adding new packages, new boards, or generally new
functionality in Buildroot, to register themselves in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DEVELOPERS</code>
file. As an example, we expect a developer contributing a new package
to include in his patch the appropriate modification to the
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DEVELOPERS</code> file.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">我们要求向 Buildroot 中添加新软件包、新板或通常新功能的开发人员在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DEVELOPERS</code> 文件中注册自己。例如，我们期望开发人员在贡献新软件包时，在其补丁中包含对 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DEVELOPERS</code> 文件的适当修改。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DEVELOPERS</code> file format is documented in detail inside the file
itself.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DEVELOPERS</code> 文件格式在文件本身内详细记录。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">get-developers</code> tool, located in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">utils/</code> allows to use
the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DEVELOPERS</code> file for various tasks:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">位于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">utils/</code> 的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">get-developers</code> 工具允许使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DEVELOPERS</code> 文件执行各种任务：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
When passing one or several patches as command line argument,
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">get-developers</code> will return the appropriate <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git send-email</code>
  command. If the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-e</code> option is passed, only the email addresses are
  printed in a format suitable for <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git send-email --cc-cmd</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当将一个或多个补丁作为命令行参数传递时， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">get-developers</code> 将返回适当的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git send-email</code> 命令。如果传递了 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-e</code> 选项，则仅以适合 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git send-email --cc-cmd</code> 的格式打印电子邮件地址。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
When using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-a &lt;arch&gt;</code> command line option, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">get-developers</code> will
  return the list of developers in charge of the given architecture.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-a &lt;arch&gt;</code> 命令行选项时， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">get-developers</code> 将返回负责给定架构的开发人员列表。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
When using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-p &lt;package&gt;</code> command line option, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">get-developers</code>
  will return the list of developers in charge of the given package.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-p &lt;package&gt;</code> 命令行选项时， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">get-developers</code> 将返回负责给定软件包的开发人员列表。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
When using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-c</code> command line option, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">get-developers</code> will look
  at all files under version control in the Buildroot repository, and
  list the ones that are not handled by any developer. The purpose of
  this option is to help completing the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DEVELOPERS</code> file.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-c</code> 命令行选项时， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">get-developers</code> 将查看 Buildroot 存储库中版本控制下的所有文件，并列出未由任何开发人员处理的文件。此选项的目的是帮助完成 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">DEVELOPERS</code> 文件。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
When using the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-v</code> command line option, it validates the integrity
  of the DEVELOPERS file and will note WARNINGS for items that don’t
  match.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当使用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-v</code> 命令行选项时，它会验证 DEVELOPERS 文件的完整性，并对不匹配的项目进行警告。</font></font></font></li></ul></div></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="RELENG" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;24.&nbsp;Release Engineering<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 24 章 发布工程</font></font></font></h2></div></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_releases" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>24.1.&nbsp;Releases<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">24.1. 发布</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The Buildroot project makes quarterly releases with monthly bugfix
releases.  The first release of each year is a long term support
release, LTS.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Buildroot 项目每季度发布一次，每月发布修复错误。每年的第一个发布版本是长期支持版本，LTS。</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Quarterly releases: 2020.02, 2020.05, 2020.08, and 2020.11
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">季度发布版本：2020.02、2020.05、2020.08 和 2020.11</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Bugfix releases: 2020.02.1, 2020.02.2, …
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">错误修复版本：2020.02.1、2020.02.2，...</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
LTS releases: 2020.02, 2021.02, …
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">LTS 版本：2020.02，2021.02，…</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Releases are supported until the first bugfix release of the next
release, e.g., 2020.05.x is EOL when 2020.08.1 is released.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">版本将受支持，直到下一个版本的第一个错误修复版本发布，例如，2020.05.x 在 2020.08.1 发布时到期。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">LTS releases are supported until the first bugfix release of the next
LTS, e.g., 2020.02.x is supported until 2021.02.1 is released.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">LTS 版本将受支持，直到下一个 LTS 的第一个错误修复版本发布，例如，2020.02.x 将在 2021.02.1 发布时受支持。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_development" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>24.2.&nbsp;Development<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">24.2. 发展</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Each release cycle consist of two months of development on the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">master</code>
branch and one month stabilization before the release is made.  During
this phase no new features are added to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">master</code>, only bugfixes.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">每个发布周期包括在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">master</code> 分支上进行两个月的开发，然后在发布之前进行一个月的稳定。在此阶段，不会向 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">master</code> 添加新功能，只会修复错误。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The stabilization phase starts with tagging <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-rc1</code>, and every week until
the release, another release candidate is tagged.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">稳定阶段从标记 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-rc1</code> 开始，直到发布之前的每周都会标记另一个发布候选版本。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To handle new features and version bumps during the stabilization phase,
a <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">next</code> branch may be created for these features.  Once the current
release has been made, the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">next</code> branch is merged into <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">master</code> and
the development cycle for the next release continues there.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在稳定阶段处理新功能和版本升级时，可以为这些功能创建一个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">next</code> 分支。一旦当前版本发布完成， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">next</code> 分支将合并到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">master</code> ，下一个版本的开发周期将在那里继续。</font></font></font></p></div></div></div><div class="part" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h1 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_appendix" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Part&nbsp;IV.&nbsp;Appendix<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第四部分. 附录</font></font></font></h1></div></div></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="makedev-syntax" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;25.&nbsp;Makedev syntax documentation<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 25 章. Makedev 语法文档</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The makedev syntax is used in several places in Buildroot to
define changes to be made for permissions, or which device files to
create and how to create them, in order to avoid calls to mknod.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">makedev 语法在 Buildroot 中的几个地方用于定义权限更改或要创建的设备文件以及如何创建它们，以避免调用 mknod。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This syntax is derived from the makedev utility, and more complete
documentation can be found in the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/makedevs/README</code> file.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此语法源自 makedev 实用程序，更完整的文档可以在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">package/makedevs/README</code> 文件中找到。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">It takes the form of a space separated list of fields, one file per
line; the fields are:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">它采取了一种以空格分隔的字段列表形式，每行一个文件；字段包括：</font></font></font></p><div class="informaltable" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><table class="informaltable" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><colgroup data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_1" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_2" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_3" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_4" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_5" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_6" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_7" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_8" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_9" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_10" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></colgroup><tbody data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>name</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>type</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>mode</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>uid</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>gid</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>major</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>minor</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>start</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>inc</p></td><td style="" align="left" valign="top"><p>count</p></td></tr></tbody></table></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">There are a few non-trivial blocks:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有一些非平凡的块：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">name</code> is the path to the file you want to create/modify
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">name</code> 是您要创建/修改的文件的路径</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">type</code> is the type of the file, being one of:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">type</code> 是文件的类型之一，可以是以下之一：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: circle; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">f</code>: a regular file, which must already exist
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">f</code> ：普通文件，必须已经存在</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">F</code>: a regular file, which is ignored and not created if missing
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">F</code> ：普通文件，如果缺失则被忽略且不会创建</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">d</code>: a directory, which is created, as well as its parents, if missing
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">d</code> ：一个目录，如果缺失则创建它及其父目录</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">r</code>: a directory recursively, which must already exist
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">r</code> ：递归创建一个目录，该目录必须已经存在</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">c</code>: a character device file, which parent directory must exist
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">c</code> ：一个字符设备文件，其父目录必须存在</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">b</code>: a block device file, which parent directory must exist
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">b</code> ：一个块设备文件，其父目录必须存在</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">p</code>: a named pipe, which parent directory must exist
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">p</code> ：一个命名管道，其父目录必须存在</font></font></font></li></ul></div></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mode</code> are the usual permissions settings (only numerical values
  are allowed);
  for type <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">d</code>, the mode of existing parents is not changed, but the mode
  of created parents is set;
  for types <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">f</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">F</code>, and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">r</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mode</code> can also be set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-1</code> to not
  change the mode (and only change uid and gid)
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mode</code> 是通常的权限设置（只允许使用数字值）；对于类型 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">d</code> ，现有父目录的模式不会改变，但创建的父目录的模式会被设置；对于类型 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">f</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">F</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">r</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">mode</code> 也可以设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-1</code> 以不改变模式（仅更改 uid 和 gid）</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uid</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gid</code> are the UID and GID to set on this file; can be
  either numerical values or actual names
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uid</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gid</code> 是要设置在此文件上的 UID 和 GID；可以是数字值，也可以是实际名称</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">major</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">minor</code> are here for device files, set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-</code> for other
  files
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">major</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">minor</code> 是用于设备文件的，对于其他文件设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-</code> </font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">start</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">inc</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">count</code> are for when you want to create a batch
  of files, and can be reduced to a loop, beginning at <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">start</code>,
  incrementing its counter by <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">inc</code> until it reaches <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">count</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当您想要创建一批文件时， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">start</code> 、 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">inc</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">count</code> 可以简化为循环，从 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">start</code> 开始，递增计数器 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">inc</code> 直到达到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">count</code> 时</font></font></font>
</li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Let’s say you want to change the ownership and permissions of a given
file; using this syntax, you will need to write:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">假设您想要更改给定文件的所有权和权限；使用此语法，您需要编写：</font></font></font></p><pre class="screen">/usr/bin/foo f 755 0 0 - - - - -
/usr/bin/bar f 755 root root - - - - -
/data/buz f 644 buz-user buz-group - - - - -
/data/baz f -1 baz-user baz-group - - - - -</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Alternatively, if you want to change owner of a directory recursively,
you can write (to set UID to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> and GID to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bar</code> for the directory
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/usr/share/myapp</code> and all files and directories below it):<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">或者，如果您想要递归更改目录的所有者，您可以编写（为目录 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/usr/share/myapp</code> 及其下所有文件和目录设置 UID 为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> 和 GID 为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bar</code> ）：</font></font></font></p><pre class="screen">/usr/share/myapp r -1 foo bar - - - - -</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">On the other hand, if you want to create the device file <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/dev/hda</code>
and the corresponding 15 files for the partitions, you will need for
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/dev/hda</code>:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">另一方面，如果您想要创建设备文件 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/dev/hda</code> 和相应的 15 个分区文件，您需要为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/dev/hda</code> ：</font></font></font></p><pre class="screen">/dev/hda b 640 root root 3 0 0 0 -</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">and then for device files corresponding to the partitions of
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/dev/hda</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/dev/hdaX</code>, <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">X</code> ranging from 1 to 15:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后对应于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/dev/hda</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/dev/hdaX</code> ， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">X</code> 的设备文件，范围从 1 到 15：</font></font></font></p><pre class="screen">/dev/hda b 640 root root 3 1 1 1 15</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Extended attributes are supported if
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_DEVICE_TABLE_SUPPORTS_EXTENDED_ATTRIBUTES</code> is enabled.
This is done by adding a line starting with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">|xattr</code> after
the line describing the file. Right now, only capability
is supported as extended attribute.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果启用 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_ROOTFS_DEVICE_TABLE_SUPPORTS_EXTENDED_ATTRIBUTES</code> ，则支持扩展属性。方法是在描述文件的行后添加以 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">|xattr</code> 开头的行。目前，只支持作为扩展属性的功能。</font></font></font></p><div class="informaltable" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><table class="informaltable" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><colgroup data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_1" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_2" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></colgroup><tbody data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><td style="border-right: 1px solid #527bbd; " align="left" valign="top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">|xattr</p></td><td style="" align="left" valign="top"><p>capability</p></td></tr></tbody></table></div><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">|xattr</code> is a "flag" that indicate an extended attribute
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">|xattr</code> 是指示扩展属性的“标志”</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">capability</code> is a capability to add to the previous file
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">capability</code> 是添加到先前文件的功能</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you want to add the capability cap_sys_admin to the binary foo,
you will write :<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您想将能力 cap_sys_admin 添加到二进制文件 foo，您将编写：</font></font></font></p><pre class="screen">/usr/bin/foo f 755 root root - - - - -
|xattr cap_sys_admin+eip</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">You can add several capabilities to a file by using several <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">|xattr</code> lines.
If you want to add the capability cap_sys_admin and cap_net_admin to the
binary foo, you will write :<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通过使用多个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">|xattr</code> 行，您可以向文件添加多个功能。如果您想要将功能 cap_sys_admin 和 cap_net_admin 添加到二进制文件 foo 中，您将编写：</font></font></font></p><pre class="screen">/usr/bin/foo f 755 root root - - - - -
|xattr cap_sys_admin+eip
|xattr cap_net_admin+eip</pre></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="makeuser-syntax" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;26.&nbsp;Makeusers syntax documentation<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 26 章。Makeusers 语法文档</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The syntax to create users is inspired by the makedev syntax, above, but
is specific to Buildroot.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">创建用户的语法受到上面 makedev 语法的启发，但是特定于 Buildroot。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">The syntax for adding a user is a space-separated list of fields, one
user per line; the fields are:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加用户的语法是一个以空格分隔的字段列表，每行一个用户；字段包括：</font></font></font></p><div class="informaltable" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><table class="informaltable" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><colgroup data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_1" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_2" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_3" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_4" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_5" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_6" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_7" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_8" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><col class="col_9" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></colgroup><tbody data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><tr data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>username</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>uid</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>group</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>gid</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>password</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>home</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>shell</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>groups</p></td><td style="" align="left" valign="top"><p>comment</p></td></tr></tbody></table></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Where:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">其中：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">username</code> is the desired user name (aka login name) for the user.
  It can not be <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">root</code>, and must be unique. If set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-</code>, then just a
  group will be created.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">username</code> 是用户的期望用户名（也称为登录名）。它不能是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">root</code> ，必须是唯一的。如果设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-</code> ，那么只会创建一个组。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uid</code> is the desired UID for the user. It must be unique, and not
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">0</code>. If set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-1</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-2</code>, then a unique UID will be computed by
  Buildroot, with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-1</code> denoting a system UID from [100…999] and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-2</code>
  denoting a user UID from [1000…1999].
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uid</code> 是用户的期望 UID。它必须是唯一的，而且不能是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">0</code> 。如果设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-1</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-2</code> ，那么 Buildroot 将计算一个唯一的 UID，其中 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-1</code> 表示系统 UID 范围为 [100…999]， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-2</code> 表示用户 UID 范围为 [1000…1999]。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">group</code> is the desired name for the user’s main group. It can not
  be <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">root</code>. If the group does not exist, it will be created.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">group</code> 是用户主组的期望名称。它不能是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">root</code> 。如果该组不存在，它将被创建。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gid</code> is the desired GID for the user’s main group. It must be unique,
  and not <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">0</code>. If set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-1</code> or <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-2</code>, and the group does not already
  exist, then a unique GID will be computed by Buildroot, with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-1</code>
  denoting a system GID from [100…999] and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-2</code> denoting a user GID
  from [1000…1999].
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gid</code> 是用户主组的期望 GID。它必须是唯一的，而且不能是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">0</code> 。如果设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-1</code> 或 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-2</code> ，并且该组尚不存在，则 Buildroot 将计算一个唯一的 GID，其中 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-1</code> 表示系统 GID 范围为 [100…999]， <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-2</code> 表示用户 GID 范围为 [1000…1999]。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">password</code> is the crypt(3)-encoded password. If prefixed with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">!</code>,
  then login is disabled. If prefixed with <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">=</code>, then it is interpreted
  as clear-text, and will be crypt-encoded (using MD5). If prefixed with
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">!=</code>, then the password will be crypt-encoded (using MD5) and login
  will be disabled. If set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*</code>, then login is not allowed. If set to
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-</code>, then no password value will be set.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">password</code> 是 crypt(3) 编码的密码。如果前缀为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">!</code> ，则登录被禁用。如果前缀为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">=</code> ，则被解释为明文，并将被 crypt 编码（使用 MD5）。如果前缀为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">!=</code> ，则密码将被 crypt 编码（使用 MD5）并且登录被禁用。如果设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">*</code> ，则不允许登录。如果设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-</code> ，则不设置密码值。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">home</code> is the desired home directory for the user. If set to <span class="emphasis" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><em data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-</em></span>, no
  home directory will be created, and the user’s home will be <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/</code>.
  Explicitly setting <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">home</code> to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/</code> is not allowed.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">home</code> 是用户的期望主目录。如果设置为 -，则不会创建主目录，用户的主目录将是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/</code> 。明确将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">home</code> 设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/</code> 是不允许的。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">shell</code> is the desired shell for the user. If set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-</code>, then
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/bin/false</code> is set as the user’s shell.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">shell</code> 是用户的期望 shell。如果设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-</code> ，则 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/bin/false</code> 被设置为用户的 shell。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">groups</code> is the comma-separated list of additional groups the user
  should be part of. If set to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-</code>, then the user will be a member of
  no additional group. Missing groups will be created with an arbitrary
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gid</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">groups</code> 是用户应该加入的附加组的逗号分隔列表。如果设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-</code> ，那么用户将不是任何附加组的成员。缺少的组将使用任意 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gid</code> 创建。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">comment</code> (aka <a class="ulink" href="https://en.wikipedia.org/wiki/Gecos_field" target="_top" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">GECOS</a>
  field) is an almost-free-form text.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">comment</code> （又名 GECOS 字段）是几乎自由格式的文本。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">There are a few restrictions on the content of each field:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">每个字段的内容有一些限制：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
except for <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">comment</code>, all fields are mandatory.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">除了 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">comment</code> 外，所有字段都是必填的。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
except for <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">comment</code>, fields may not contain spaces.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">除了 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">comment</code> 外，字段不能包含空格。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
no field may contain a colon (<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">:</code>).
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">任何字段都不能包含冒号（ <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">:</code> ）。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">home</code> is not <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-</code>, then the home directory, and all files below,
will belong to the user and its main group.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">home</code> 不是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-</code> ，那么主目录和其下所有文件将属于该用户及其主要组。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Examples:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">例子：</font></font></font></p><pre class="screen">foo -1 bar -1 !=blabla /home/foo /bin/sh alpha,bravo Foo user</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This will create this user:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这将创建此用户：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">username</code> (aka login name) is: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">username</code> （又名登录名）是： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uid</code> is computed by Buildroot
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uid</code> 由 Buildroot 计算</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
main <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">group</code> is: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bar</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">主 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">group</code> 是： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bar</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
main group <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gid</code> is computed by Buildroot
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">主要组 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gid</code> 是由 Buildroot 计算的</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
clear-text <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">password</code> is: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">blabla</code>, will be crypt(3)-encoded, and login is disabled.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">明文 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">password</code> 是： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">blabla</code> ，将被 crypt(3) 编码，并且登录被禁用。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">home</code> is: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/home/foo</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">home</code> 是： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/home/foo</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">shell</code> is: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/bin/sh</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">shell</code> 是： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/bin/sh</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> is also a member of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">groups</code>: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">alpha</code> and <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bravo</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">foo</code> 也是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">groups</code> 的成员： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">alpha</code> 和 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">bravo</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">comment</code> is: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Foo user</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">comment</code> 是： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Foo user</code> </font></font></font>
</li></ul></div><pre class="screen">test 8000 wheel -1 = - /bin/sh - Test user</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This will create this user:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这将创建此用户：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">username</code> (aka login name) is: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">test</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">username</code> （又名登录名）是： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">test</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uid</code> is : <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">8000</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">uid</code> 是： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">8000</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
main <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">group</code> is: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">wheel</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">主 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">group</code> 是： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">wheel</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
main group <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gid</code> is computed by Buildroot, and will use the value defined in the rootfs skeleton
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">主组 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">gid</code> 由 Buildroot 计算，并将使用在 rootfs 骨架中定义的值</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">password</code> is empty (aka no password).
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">password</code> 为空（也就是没有密码）。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">home</code> is <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/</code> but will not belong to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">test</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">home</code> 是 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/</code> 但不会属于 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">test</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">shell</code> is: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/bin/sh</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">shell</code> 是： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">/bin/sh</code> </font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">test</code> is not a member of any additional <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">groups</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">test</code> 不是任何其他 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">groups</code> 的成员</font></font></font>
</li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
<code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">comment</code> is: <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Test user</code><font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">comment</code> 是： <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Test user</code> </font></font></font>
</li></ul></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="_caveat_with_automatic_uids_and_gids" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>26.1.&nbsp;Caveat with automatic UIDs and GIDs<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">26.1. 自动 UID 和 GID 的注意事项</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">When updating buildroot or when packages are added or removed to/from
the configuration, it is possible that the automatic UIDs and GIDs are
changed. This can be a problem if persistent files were created with
that user or group: after upgrade, they will suddenly have a different
owner.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当更新 buildroot 或者向配置中添加或删除软件包时，可能会更改自动 UID 和 GID。如果使用该用户或组创建了持久文件，这可能会成为一个问题：升级后，它们将突然拥有不同的所有者。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Therefore, it is advisable to perpetuate the automatic IDs. This can be
done by adding a users table with the generated IDs. It is only needed
to do this for UIDs that actually create persistent files, e.g. database.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">因此，建议保留自动生成的 ID。可以通过添加一个带有生成的 ID 的用户表来实现。只需要为实际创建持久文件的 UID 执行此操作，例如数据库。</font></font></font></p></div></div><div class="chapter" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="migrating-from-ol-versions" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>Chapter&nbsp;27.&nbsp;Migrating from older Buildroot versions<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第 27 章。从旧的 Buildroot 版本迁移</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Some versions have introduced backward incompatibilities. This section
explains those incompatibilities, and for each explains what to do to
complete the migration.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一些版本引入了向后不兼容性。本节解释了这些不兼容性，并针对每个不兼容性解释了完成迁移的操作。</font></font></font></p><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="migrating-approach" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>27.1.&nbsp;General approach<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">27.1. 一般方法</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">To migrate from an older Buildroot version, take the following steps.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要从旧的 Buildroot 版本迁移，请执行以下步骤。</font></font></font></p><div class="orderedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ol class="orderedlist" type="1" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
For all your configurations, do a build in the old Buildroot
  environment. Run <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make graph-size</code>. Save
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">graphs/file-size-stats.csv</code> in a different location. Run <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make
  clean</code> to remove the rest.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于所有配置，在旧的 Buildroot 环境中进行构建。运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make graph-size</code> 。将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">graphs/file-size-stats.csv</code> 保存在不同的位置。运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make
  clean</code> 来移除其余部分。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Review the specific migration notes below and make the required
  adaptations to external packages and custom build scripts.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请查看下面的具体迁移说明，并对外部软件包和自定义构建脚本进行必要的调整。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Update Buildroot.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">更新 Buildroot。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Run <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make menuconfig</code> starting from the existing <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">从现有的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">.config</code> 开始运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make menuconfig</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
If anything is enabled in the Legacy menu, check its help text,
  unselect it, and save the configuration.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果在传统菜单中启用了任何内容，请检查其帮助文本，取消选择它，然后保存配置。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
For more details, review the git commit messages for the packages that
  you need. Change into the <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">packages</code> directory and run
  <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git log &lt;old version&gt;.. — &lt;your packages&gt;</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">要了解更多详情，请查看您需要的软件包的 git 提交消息。切换到 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">packages</code> 目录并运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">git log &lt;old version&gt;.. — &lt;your packages&gt;</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Build in the new Buildroot environment.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在新的 Buildroot 环境中构建。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Fix build issues in external packages (usually due to updated
  dependencies).
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">修复外部软件包中的构建问题（通常是由于更新的依赖关系）。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Run <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make graph-size</code>.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">运行 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">make graph-size</code> 。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Compare the new <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">file-size-stats.csv</code> with the original one, to
  check if no required files have disappeared and if no new big unneeded
  files have appeared.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">将新的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">file-size-stats.csv</code> 与原始文件进行比较，以检查是否没有必需文件消失，以及是否出现了新的不必要的大文件。</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
For configuration (and other) files in a custom overlay that overwrite
  files created by Buildroot, check if there are changes in the
  Buildroot-generated file that need to be propagated to your custom
  file.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于在自定义覆盖中覆盖由 Buildroot 创建的文件的配置（和其他）文件，请检查 Buildroot 生成的文件中是否有需要传播到您的自定义文件的更改。</font></font></font></li></ol></div></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="br2-external-converting" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>27.2.&nbsp;Migrating to 2016.11<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">27.2. 迁移到 2016.11</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Before Buildroot 2016.11, it was possible to use only one br2-external
tree at once. With Buildroot 2016.11 came the possibility to use more
than one simultaneously (for details, see <a class="xref" href="#outside-br-custom" title="9.2.&nbsp;Keeping customizations outside of Buildroot" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Section&nbsp;9.2, “Keeping customizations outside of Buildroot”</a>).<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在
 Buildroot 2016.11 之前，一次只能使用一个 br2-external 树是可能的。随着 Buildroot 2016.11 
的到来，同时使用多个的可能性也出现了（有关详细信息，请参见第 9.2 节“将自定义内容保留在 Buildroot 之外”）。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This however means that older br2-external trees are not usable as-is.
A minor change has to be made: adding a name to your br2-external tree.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然而，这意味着旧的 br2-external 树不能直接使用。必须进行一些微小的更改：向您的 br2-external 树添加一个名称。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">This can be done very easily in just a few steps:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这可以很容易地在几个步骤中完成：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
First, create a new file named <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">external.desc</code>, at the root of your
   br2-external tree, with a single line defining the name of your
   br2-external tree:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">首先，在您的 br2-external 树的根目录创建一个名为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">external.desc</code> 的新文件，并在其中添加一行，定义您的 br2-external 树的名称：</font></font></font></p><pre class="screen">$ echo 'name: NAME_OF_YOUR_TREE' &gt;external.desc</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note.&nbsp;</strong>Be careful when choosing a name: It has to be unique and be made
with only ASCII characters from the set <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[A-Za-z0-9_]</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意。选择名称时要小心：它必须是唯一的，并且只能使用来自集合 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">[A-Za-z0-9_]</code> 的 ASCII 字符。</font></font></font></p></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><p class="simpara" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
Then, change every occurence of <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_EXTERNAL</code> in your br2-external
   tree with the new variable:
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后，在您的 br2-external 树中更改每个 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">BR2_EXTERNAL</code> 的出现为新变量：</font></font></font></p><pre class="screen">$ find . -type f | xargs sed -i 's/BR2_EXTERNAL/BR2_EXTERNAL_NAME_OF_YOUR_TREE_PATH/g'</pre></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Now, your br2-external tree can be used with Buildroot 2016.11 onward.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">现在，您的 br2-external 树可以与 Buildroot 2016.11 及更高版本一起使用。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><strong data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">Note:&nbsp;</strong>This change makes your br2-external tree incompatible with Buildroot
before 2016.11.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注意：此更改使您的 br2-external 树与 2016.11 之前的 Buildroot 不兼容。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="migrating-host-usr" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>27.3.&nbsp;Migrating to 2017.08<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">27.3. 迁移到 2017.08</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Before Buildroot 2017.08, host packages were installed in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(HOST_DIR)/usr</code>
(with e.g. the autotools' <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--prefix=$(HOST_DIR)/usr</code>). With Buildroot
2017.08, they are now installed directly in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(HOST_DIR)</code>.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 Buildroot 2017.08 之前，主机软件包安装在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(HOST_DIR)/usr</code> 中（例如，autotools 的 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">--prefix=$(HOST_DIR)/usr</code> ）。从 Buildroot 2017.08 开始，它们现在直接安装在 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(HOST_DIR)</code> 中。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Whenever a package installs an executable that is linked with a library
in <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(HOST_DIR)/lib</code>, it must have an RPATH pointing to that directory.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">每当一个软件包安装一个与 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(HOST_DIR)/lib</code> 中的库链接的可执行文件时，它必须有一个指向该目录的 RPATH。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">An RPATH pointing to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(HOST_DIR)/usr/lib</code> is no longer accepted.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">不再接受指向 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">$(HOST_DIR)/usr/lib</code> 的 RPATH。</font></font></font></p></div><div class="section" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div class="titlepage" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><div data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><h2 class="title" style="clear: both" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1"><a id="migrating-svn-externals" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></a>27.4.&nbsp;Migrating to 2023.11<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">27.4.&nbsp;迁移到 2023.11</font></font></font></h2></div></div></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Before Buildroot 2023.11, the subversion download backend unconditionally
retrieved the external references (objects with an <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">svn:externals</code>
property). Starting with 2023.11, externals are no longer retrieved by
default; if you need them, set <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SVN_EXTERNALS</code> to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code>. This
change implies that:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 Buildroot 2023.11 之前，子版本下载后端无条件地检索外部引用（具有 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">svn:externals</code> 属性的对象）。从 2023.11 开始，默认情况下不再检索外部引用；如果需要它们，请将 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">LIBFOO_SVN_EXTERNALS</code> 设置为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">YES</code> 。这一变化意味着：</font></font></font></p><div class="itemizedlist" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><ul class="itemizedlist" style="list-style-type: disc; " data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
the generated archive content may change, and thus the hashes may need
  to be updated appropriately;
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">生成的存档内容可能会更改，因此哈希可能需要适当更新；</font></font></font></li><li class="listitem" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">
the archive version suffix has been updated to <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-br3</code>, so the hash
  files must be updated appropriately.
<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">存档版本后缀已更新为 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">-br3</code> ，因此哈希文件必须适当更新。</font></font></font></li></ul></div><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Before Buildroot 2023.11, it was possible (but undocumented and unused)
to apply architecture-specific patches, by prefixing the patch filename
with the architecture, e.g. <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">0001-some-changes.patch.arm</code> and such a
patch would only be applied for that architecture. With Buildroot 2023.11,
this is no longer supported, and such patches are no longer applied at
all.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 Buildroot 2023.11 之前，可以（但未记录且未使用）通过在补丁文件名前加上架构来应用特定于架构的补丁，例如 <code class="literal" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">0001-some-changes.patch.arm</code> ，这样的补丁只会应用于该架构。从 Buildroot 2023.11 开始，不再支持这样做，这样的补丁将不再被应用。</font></font></font></p><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">If you still need per-architecture patches, then you may provide a
<a class="link" href="#hooks" title="18.23.&nbsp;Hooks available in the various build steps" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52">pre-patch hook</a> that copies the patches applicable to the
configured architecture, e.g.:<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果您仍然需要特定于架构的补丁，则可以提供一个预补丁钩子，用于复制适用于配置架构的补丁，例如：</font></font></font></p><pre class="screen">define LIBFOO_ARCH_PATCHES
    $(foreach p,$(wildcard $(LIBFOO_PKGDIR)/*.patch.$(ARCH)), \
        cp -f $(p) $(patsubst %.$(ARCH),%,$(p))
    )
endef
LIBFOO_PRE_PATCH_HOOKS += LIBFOO_ARCH_PATCHES</pre><p data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52" data-immersive-translate-paragraph="1">Note that no package in Buildroot has architecture-specific patches, and
that such patches will most probably not be accepted.<font class="notranslate immersive-translate-target-wrapper" lang="zh-CN" data-immersive-translate-translation-element-mark="1"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请注意，Buildroot 中没有任何软件包具有特定于架构的补丁，并且这样的补丁很可能不会被接受。</font></font></font></p></div></div></div></div><div id="sourcegraph-app-background" data-platform="firefox-extension" data-version="23.10.9.2250" style="display: none;" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></div><div id="immersive-translate-popup" style="all: initial"></div><grammarly-desktop-integration data-grammarly-shadow-root="true" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></grammarly-desktop-integration><div id="__yetone-openai-translator" style="z-index: 2147483647;" data-immersive-translate-walked="cfb1dc59-a72d-45e1-85ad-8df85c1d9b52"></div></body><div id="immersive-translate-popup" style="all: initial"></div></html>