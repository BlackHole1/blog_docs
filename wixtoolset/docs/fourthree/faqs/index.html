<html><head><style data-id="immersive-translate-default-injected-css">:root {
  --immersive-translate-theme-underline-borderColor: #72ece9;
  --immersive-translate-theme-nativeUnderline-borderColor: #72ece9;
  --immersive-translate-theme-nativeDashed-borderColor: #72ece9;
  --immersive-translate-theme-nativeDotted-borderColor: #72ece9;
  --immersive-translate-theme-highlight-backgroundColor: #ffff00;
  --immersive-translate-theme-dashed-borderColor: #59c1bd;
  --immersive-translate-theme-blockquote-borderColor: #cc3355;
  --immersive-translate-theme-thinDashed-borderColor: #ff374f;
  --immersive-translate-theme-dashedBorder-borderColor: #94a3b8;
  --immersive-translate-theme-dashedBorder-borderRadius: 0;
  --immersive-translate-theme-solidBorder-borderColor: #94a3b8;
  --immersive-translate-theme-solidBorder-borderRadius: 0;
  --immersive-translate-theme-dotted-borderColor: #94a3b8;
  --immersive-translate-theme-wavy-borderColor: #72ece9;
  --immersive-translate-theme-dividingLine-borderColor: #94a3b8;
  --immersive-translate-theme-grey-textColor: #2f4f4f;
  --immersive-translate-theme-marker-backgroundColor: #fbda41;
  --immersive-translate-theme-marker-backgroundColor-rgb: 251, 218, 65;
  --immersive-translate-theme-marker2-backgroundColor: #ffff00;
  --immersive-translate-theme-opacity-opacity: 10;
}

.immersive-translate-target-translation-pre-whitespace {
  white-space: pre-wrap !important;
}

.immersive-translate-pdf-target-container {
  position: absolute;
  background-color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
    sans-serif;
  top: 0;
  width: 600px;
  height: 100%;
  z-index: 2;
  line-height: 1.3;
  font-size: 16px;
}
.immersive-translate-target-wrapper[dir='rtl'] {
  text-align: right;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper {
  color: rgb(0, 0, 0);
  white-space: normal;
  position: absolute;
}

.immersive-translate-pdf-target-container .immersive-translate-target-wrapper font {
  color: inherit;
  white-space: inherit;
  position: unset;
}

.immersive-translate-state-dual>br {
  display: none;
}

.immersive-translate-target-translation-block-wrapper {
  margin: 8px 0 !important;
  display: inline-block;
}

.immersive-translate-target-translation-pdf-block-wrapper {
  margin: 0 !important;
  display: block;
}

.immersive-translate-target-translation-theme-grey-inner {
  color: var(--immersive-translate-theme-grey-textColor);
}


.immersive-translate-target-translation-theme-underline-inner {
  border-bottom: 1px solid var(--immersive-translate-theme-underline-borderColor) !important;
}

.immersive-translate-target-translation-theme-nativeUnderline-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeUnderline-borderColor) !important;
}

.immersive-translate-target-translation-block-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-dashedBorder {
  border: 1px dashed var(--immersive-translate-theme-dashedBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-dashedBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 6px;
  margin-top: 2px;
  display: block;
}

.immersive-translate-target-translation-inline-wrapper-theme-solidBorder {
  border: 1px solid var(--immersive-translate-theme-solidBorder-borderColor) !important;
  border-radius: var(--immersive-translate-theme-solidBorder-borderRadius) !important;
  padding: 2px;
}

.immersive-translate-target-translation-theme-nativeDashed-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDashed-borderColor) !important;
  text-decoration-style: dashed !important;
}

.immersive-translate-target-translation-theme-thinDashed-inner {
  border-bottom: 1px dashed var(--immersive-translate-theme-thinDashed-borderColor) !important;
}

.immersive-translate-target-translation-theme-dotted-inner {
  background-image: linear-gradient(to right,
      var(--immersive-translate-theme-dotted-borderColor) 30%,
      rgba(255, 255, 255, 0) 0%);
  background-position: bottom;
  background-size: 5px 1px;
  background-repeat: repeat-x;
  padding-bottom: 3px;
}

.immersive-translate-target-translation-theme-nativeDotted-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-nativeDotted-borderColor) !important;
  text-decoration-style: dotted !important;
}

.immersive-translate-target-translation-theme-wavy-inner {
  text-decoration: underline !important;
  text-decoration-color: var(--immersive-translate-theme-wavy-borderColor) !important;
  text-decoration-style: wavy !important;
}

.immersive-translate-target-translation-theme-dashed-inner {
  background: linear-gradient(to right,
      var(--immersive-translate-theme-dashed-borderColor) 0%,
      var(--immersive-translate-theme-dashed-borderColor) 50%,
      transparent 50%,
      transparent 100%) repeat-x left bottom;
  background-size: 8px 2px;
  padding-bottom: 2px;
}

.immersive-translate-target-translation-block-wrapper-theme-dividingLine::before {
  content: "";
  display: block;
  max-width: 80px;
  width: 10%;
  border-top: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  padding-top: 8px;
}

.immersive-translate-target-translation-inline-wrapper-theme-dividingLine::before {
  content: "";
  border-left: 1px dashed var(--immersive-translate-theme-dividingLine-borderColor);
  max-height: 16px;
  height: 16px;
  padding-left: 8px;
}

.immersive-translate-target-translation-theme-highlight-inner {
  background: var(--immersive-translate-theme-highlight-backgroundColor);
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-block-wrapper-theme-marker {
  line-height: 1.5em;
}

.immersive-translate-target-translation-theme-marker2-inner {
  font-weight: bold;
  text-shadow: 10px 0px 3px var(--immersive-translate-theme-marker2-backgroundColor),
    16px 3px 9px var(--immersive-translate-theme-marker2-backgroundColor),
    2px 0px 6px var(--immersive-translate-theme-marker2-backgroundColor),
    -12px 0px 12px var(--immersive-translate-theme-marker2-backgroundColor) !important;
}

.immersive-translate-target-translation-theme-marker-inner {
  /* TODO: add more texture */
  background: linear-gradient(to right,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.1),
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 3%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 35%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.9) 70%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.8) 95%,
      rgba(var(--immersive-translate-theme-marker-backgroundColor-rgb), 0.3));
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

.immersive-translate-target-translation-theme-weakening {
  opacity: 0.618 !important;
}

.immersive-translate-target-translation-theme-italic {
  font-style: italic !important;
}

.immersive-translate-target-translation-theme-bold {
  font-weight: bold !important;
}

.immersive-translate-target-translation-block-wrapper-theme-paper {
  margin: 8px 0;
  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
  padding: 16px 32px;
  display: block;
}

.immersive-translate-target-translation-block-wrapper-theme-blockquote {
  border-left: 4px solid var(--immersive-translate-theme-blockquote-borderColor) !important;
  padding-left: 12px !important;
  margin-top: 4px;
  margin-bottom: 4px;
  padding-top: 4px;
  padding-bottom: 4px;
  display: block;
}

.immersive-translate-target-translation-theme-mask-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-mask-inner {
  filter: none !important;
}

[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner {
  filter: blur(5px) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}


/* opacity theme start */

.immersive-translate-target-translation-theme-opacity-inner {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

[data-immersive-translate-root-translation-theme="none"] .immersive-translate-target-translation-theme-opacity-inner {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner,.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: opacity(calc(var(--immersive-translate-theme-opacity-opacity) * 1%)) !important;
  transition: filter 0.3s ease !important;
  border-radius: 10px;
  display: inline-block;
}

.immersive-translate-target-translation-theme-opacity-inner:hover {
  filter: none !important;
}


.immersive-translate-target-translation-theme-mask-inner:hover {
  filter: none !important;
}
[data-immersive-translate-root-translation-theme="opacity"] .immersive-translate-target-inner:hover {
  filter: none !important;
}


[data-immersive-translate-root-translation-theme="mask"] .immersive-translate-target-inner:hover {
  filter: none !important;
}

/* opacity theme end */

/* vertical css , please remain it in the last one. */
.immersive-translate-target-translation-vertical-block-wrapper {
  margin: 0px 8px !important;
}

.immersive-translate-text {
  font-size: 15px !important;
}

.immersive-translate-error-toast {
  position: fixed;
  top: 5%;
  z-index: 99999999;
  left: 0;
  right: 0;
  margin: auto;
  max-width: 300px;
  padding: 16px;
  border-radius: 12px;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}

@media all and (min-width: 750px) {
  .immersive-translate-error-toast {
    max-width: 400px;
  }
}


.immersive-translate-clickable-button {
  cursor: pointer;
}

.immersive-translate-help-button {
  cursor: pointer;
}

.immersive-translate-loading-text:before {
  content: "...";
}


/* dark mode for loading */

@media only screen and (prefers-color-scheme: dark) {
  .immersive-translate-loading {
    border: 2px rgba(255, 255, 255, 0.25) solid !important;
    border-top: 2px rgba(255, 255, 255, 1) solid !important;
  }
}

.immersive-translate-error-wrapper {
  position: relative;
  display: inline-flex;
  padding: 6px;
  margin: 0 12px;
  white-space: nowrap;
  font-size: 0.9em;
}
[lang="zh-CN"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}
[lang="zh-TW"] .immersive-translate-error-wrapper {
  font-size: 0.75em;
}


.immersive-translate-tooltip {
  position: relative;
  display: inline-flex;
  /* little indicater to indicate it's hoverable */
}

.immersive-translate-tooltip-content {
  /* here's the magic */
  position: absolute;
  z-index: 100000000000;

  left: 50%;
  bottom: 0;
  transform: translate(-50%, 110%);
  line-height: 1;
  /* and add a small left margin */

  /* basic styles */
  width: max-content;
  max-width: 250px;
  word-wrap: break-word;
  white-space: pre-line;
  padding: 10px;
  border-radius: 10px;
  background: #000C;
  color: #fff;
  text-align: center;
  font-size: 14px;
  display: none;
  /* hide by default */
}

.immersive-translate-tooltip:hover .immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip:hover+.immersive-translate-tooltip-content {
  display: block;
}

.immersive-translate-tooltip-content-table {
  left: unset !important;
  bottom: unset !important;
  transform: translate(-10%, 50%) !important;
}


.immersive-translate-tooltip:hover:before {
  display: block;
}



.immersive-translate-loading-spinner {
  vertical-align: middle !important;
  width: 10px !important;
  height: 10px !important;
  display: inline-block !important;
  margin: 0 4px !important;
  border: 2px rgba(221, 244, 255, 0.6) solid !important;
  border-top: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-left: 2px rgba(0, 0, 0, 0.375) solid !important;
  border-radius: 50% !important;
  padding: 0 !important;
  -webkit-animation: immersive-translate-loading-animation 0.6s infinite linear !important;
  animation: immersive-translate-loading-animation 0.6s infinite linear !important;
}

@-webkit-keyframes immersive-translate-loading-animation {
  from {
    -webkit-transform: rotate(0deg);
  }

  to {
    -webkit-transform: rotate(359deg);
  }
}

@keyframes immersive-translate-loading-animation {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(359deg);
  }
}
</style><style data-id="immersive-translate-user-custom-style">:root {

.immersive-translate-target-inner { font-family: inherit; }
}
</style><style data-id="immersive-translate-dynamic-injected-css">.immersive-translate-target-wrapper[dir='rtl'] {text-align: right;}
.immersive-translate-target-wrapper[dir='rtl'] [data-immersive-translate-class-bak*='block-wrapper'] {display:block;}
.immersive-translate-target-wrapper {word-break: break-word;}
</style></head><body data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">


<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Frequently-asked questions | WiX Toolset</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.bugs.cc/wixtoolset/docs/fourthree/faqs/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Frequently-asked questions | WiX Toolset"><meta data-rh="true" name="description" content="Converting packages"><meta data-rh="true" property="og:description" content="Converting packages"><link data-rh="true" rel="icon" href="/wixtoolset/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.bugs.cc/wixtoolset/docs/fourthree/faqs/"><link data-rh="true" rel="alternate" href="https://docs.bugs.cc/wixtoolset/docs/fourthree/faqs/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.bugs.cc/wixtoolset/docs/fourthree/faqs/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/wixtoolset/news/rss.xml" title="WiX Toolset RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/wixtoolset/news/atom.xml" title="WiX Toolset Atom Feed"><link rel="stylesheet" href="/wixtoolset/assets/css/styles.f38540a7.css">
<link rel="preload" href="/wixtoolset/assets/js/runtime~main.d4837c13.js" as="script">
<link rel="preload" href="/wixtoolset/assets/js/main.81f55813.js" as="script">


<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">
<div role="region" aria-label="Skip to main content" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Skip to main content<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">跳到主要内容</font></font></font></a></div><div class="announcementBar_mb4j" style="background-color:#C70039;color:#fff" role="banner" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="announcementBarPlaceholder_vyr4" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"></div><div class="content_knG7 announcementBarContent_xLdY" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><span style="font-size:16px" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Get the latest WiX news sent to you. <a style="text-decoration-line:none;border-bottom:1px solid" href="https://www.firegiant.com/subscribe/?utm_source=wixtoolset.org&amp;utm_medium=Display&amp;utm_campaign=subscribe&amp;utm_term=subscribe&amp;utm_content=announcement_bar" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Subscribe to the FireGiant newsletter.</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">获取最新的 WiX 新闻。订阅 FireGiant 通讯。</font></font></font></span></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="navbar__inner" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="navbar__items" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/wixtoolset/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="navbar__logo" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><img src="/wixtoolset/img/logo-white-hollow-xs.png" alt="Logo" class="themedImage_ToTc themedImage--light_HNdA" width="53.6171875" height="22.5" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><img src="/wixtoolset/img/logo-black-hollow-xs.png" alt="Logo" class="themedImage_ToTc themedImage--dark_i4oU" width="53.6171875" height="22.5" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"></div><b class="navbar__title text--truncate" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">WiX Toolset<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">WiX 工具集</font></font></font></b></a></div><div class="navbar__items navbar__items--right" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a class="navbar__item navbar__link" href="/wixtoolset/news/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">News</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/wixtoolset/docs/intro/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Docs</a><a href="https://github.com/wixtoolset/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.firegiant.com/services/?utm_source=wixtoolset.org&amp;utm_medium=Display&amp;utm_term=enterprise+support&amp;utm_content=header" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Enterprise Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">新闻 文档 GitHub 企业支持</font></font></font><div class="toggle_vylO colorModeToggle_DEke" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="dsla-search-wrapper" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="dsla-search-field" data-tags="default,docs-default-current" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="sidebarViewport_Xe31" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="sidebar_njMd" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><ul class="theme-doc-sidebar-menu menu__list" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a class="menu__link" href="/wixtoolset/docs/intro/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Get started with WiX<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">开始使用 WiX</font></font></font></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a class="menu__link" href="/wixtoolset/docs/about/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">About<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">关于</font></font></font></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a class="menu__link" href="/wixtoolset/docs/releasenotes/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Release notes<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">发行说明</font></font></font></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a class="menu__link" href="/wixtoolset/docs/gethelp/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Get help<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">获取帮助</font></font></font></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="menu__list-item-collapsible" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/wixtoolset/docs/fivefour/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">WiX v5 for WiX v4 users<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">WiX v5 给 WiX v4 用户</font></font></font></a><button aria-label="Toggle the collapsible sidebar category 'WiX v5 for WiX v4 users'" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="menu__list-item-collapsible" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/wixtoolset/docs/fourthree/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">WiX v4 for WiX v3 users<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">WiX v4 给 WiX v3 用户</font></font></font></a><button aria-label="Toggle the collapsible sidebar category 'WiX v4 for WiX v3 users'" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/wixtoolset/docs/fourthree/faqs/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Frequently-asked questions<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">常见问题</font></font></font></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="menu__list-item-collapsible" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/wixtoolset/docs/tools/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">WiX tools and concepts<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">WiX 工具和概念</font></font></font></a><button aria-label="Toggle the collapsible sidebar category 'WiX tools and concepts'" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="menu__list-item-collapsible" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/wixtoolset/docs/api/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">WiX managed SDK<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">WiX 管理 SDK</font></font></font></a><button aria-label="Toggle the collapsible sidebar category 'WiX managed SDK'" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="menu__list-item-collapsible" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/wixtoolset/docs/schema/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Schema reference<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">架构参考</font></font></font></a><button aria-label="Toggle the collapsible sidebar category 'Schema reference'" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="menu__list-item-collapsible" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/wixtoolset/docs/development/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Development<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">开发</font></font></font></a><button aria-label="Toggle the collapsible sidebar category 'Development'" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a class="menu__link" href="/wixtoolset/docs/wix3/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">WiX v3</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="container padding-top--md padding-bottom--lg" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="row" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="col docItemCol_VOVn" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="docItemContainer_Djhp" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><article data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/wixtoolset/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/wixtoolset/docs/fourthree/"><span itemprop="name">WiX v4 for WiX v3 users</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Frequently-asked questions</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><h1 data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Frequently-asked questions<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">常见问题</font></font></font></h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="converting-packages" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Converting packages<a href="#converting-packages" class="hash-link" aria-label="Direct link to Converting packages" title="Direct link to Converting packages" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">转换包</font></font></font></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="converting-the-componentwin64-attribute" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Converting the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Component/@Win64</code> attribute<a href="#converting-the-componentwin64-attribute" class="hash-link" aria-label="Direct link to converting-the-componentwin64-attribute" title="Direct link to converting-the-componentwin64-attribute" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">转换 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Component/@Win64</code> 属性</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In WiX v3 authoring out in the wild, it's common to find code similar to the following:<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在野外使用 WiX v3 编写时，常常会发现类似以下的代码：</font></font></font></p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token prolog" style="color:#999988;font-style:italic">&lt;?if $(var.Platform) = "x64"?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?define IsWin64 = yes ?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?define ProgramFilesFolder = ProgramFiles64Folder ?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?elseif $(var.Platform) = "x86" ?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?define IsWin64 = no ?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?define ProgramFilesFolder = ProgramFilesFolder ?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?elseif $(var.Platform) ~= "Arm64" ?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?define IsWin64 = yes ?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?define ProgramFilesFolder = ProgramFiles64Folder ?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?endif?&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">and then repeated use of the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">IsWin64</code> preprocessor variable:<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">然后重复使用 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">IsWin64</code> 预处理器变量：</font></font></font></p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">Component</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">...</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Win64</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">$(var.IsWin64)</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">WiX v3 didn't require repeated use of the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Win64</code> attribute. First noted in <a href="https://www.joyofsetup.com/2010/05/14/working-hard-or-hardly-working/#manually-marking-package-and-component-bitness" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">the historical record back in 2010</a>, WiX automatically marks components according to the architecture specified when compiling them. WiX v4 continues that trend and replaces the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Win64</code> attribute with the clarifying <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Bitness</code> attribute to make it possible to override the default.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">WiX v3 不需要重复使用 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Win64</code> 属性。早在 2010 年的历史记录中首次提到，WiX 会根据编译时指定的架构自动标记组件。WiX v4 继续这一趋势，并用更清晰的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Bitness</code> 属性替换 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Win64</code> 属性，以便可以覆盖默认值。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">WiX v3 didn't have a solution for the root Program Files folder id. WiX v4 introduces the new "standard" directory <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">ProgramFiles6432Folder</code> to solve that problem. <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">ProgramFiles6432Folder</code> automatically resolves to <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">ProgramFilesFolder</code> for an x86 package and <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">ProgramFiles64Folder</code> for an x64 or Arm64 package.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">WiX v3 没有解决 root Program Files 文件夹 id 的方案。WiX v4 引入了新的“标准”目录 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">ProgramFiles6432Folder</code> 来解决这个问题。 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">ProgramFiles6432Folder</code> 会自动解析为 x86 包的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">ProgramFilesFolder</code> 和 x64 或 Arm64 包的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">ProgramFiles64Folder</code> 。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">For example:<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">例如：</font></font></font></p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">Fragment</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">StandardDirectory</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">ProgramFiles6432Folder</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">Directory</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">CompanyFolder</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">!(bind.Property.Manufacturer)</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">Directory</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">INSTALLFOLDER</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">!(bind.Property.ProductName)</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">Directory</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">StandardDirectory</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">Fragment</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">All this logic works off the platform you specify at build time, with with the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">-arch</code> switch at the wix.exe command line or the equivalent MSBuild property <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">InstallerPlatform</code>.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">所有这些逻辑都基于您在构建时指定的平台，在 wix.exe 命令行使用 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">-arch</code> 开关或等效的 MSBuild 属性 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">InstallerPlatform</code> 。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="wixext34" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">WiX v3 extensions in WiX v4<a href="#wixext34" class="hash-link" aria-label="Direct link to WiX v3 extensions in WiX v4" title="Direct link to WiX v3 extensions in WiX v4" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">WiX v3 扩展在 WiX v4 中</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">This table maps WiX v3 extensions to their WiX v4 equivalents:<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">此表将 WiX v3 扩展映射到其 WiX v4 等效项：</font></font></font></p><table data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><thead data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><th data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">WiX v3 Extension<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">WiX v3 扩展</font></font></font></th><th data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">WiX v4 Extension<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">WiX v4 扩展</font></font></font></th><th>Documentation</th></tr></thead><tbody data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><td>WixBalExtension</td><td>WixToolset.Bal.wixext</td><td data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="/wixtoolset/docs/schema/bal/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Bal schema<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Bal 架构</font></font></font></a></td></tr><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><td>WixComPlusExtension</td><td>WixToolset.ComPlus.wixext</td><td data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="/wixtoolset/docs/schema/complus/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Complus schema<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Complus 架构</font></font></font></a></td></tr><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><td>WixDependencyExtension</td><td>WixToolset.Dependency.wixext</td><td data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="/wixtoolset/docs/schema/dependency/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Dependency schema<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">依赖架构</font></font></font></a></td></tr><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><td>WixDifxAppExtension</td><td>WixToolset.DifxApp.wixext</td><td data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="/wixtoolset/docs/schema/difxapp/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Difxapp schema<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Difxapp 架构</font></font></font></a></td></tr><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><td>WixDirectXExtension</td><td>WixToolset.DirectX.wixext</td><td data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="/wixtoolset/docs/schema/directx/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Directx schema<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Directx 架构</font></font></font></a></td></tr><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><td>WixFirewallExtension</td><td>WixToolset.Firewall.wixext</td><td data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="/wixtoolset/docs/schema/firewall/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Firewall schema<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">防火墙架构</font></font></font></a></td></tr><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><td>WixGamingExtension</td><td data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">n/a</td><td data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Removed because the Windows feature is obsolete.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">已删除，因为该 Windows 功能已过时。</font></font></font></td></tr><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><td>WixHttpExtension</td><td>WixToolset.Http.wixext</td><td data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="/wixtoolset/docs/schema/http/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Http schema<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Http 架构</font></font></font></a></td></tr><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><td>WixIIsExtension</td><td>WixToolset.Iis.wixext</td><td data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="/wixtoolset/docs/schema/iis/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Iis schema<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">IIS 架构</font></font></font></a></td></tr><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><td>WixLuxExtension</td><td data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">n/a</td><td data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Lux was not brought forward to WiX v4.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Lux 没有被引入 WiX v4。</font></font></font></td></tr><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><td>WixMsmqExtension</td><td>WixToolset.Msmq.wixext</td><td data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="/wixtoolset/docs/schema/msmq/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Msmq schema<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">MSMQ 架构</font></font></font></a></td></tr><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><td>WixNetFxExtension</td><td>WixToolset.Netfx.wixext</td><td data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="/wixtoolset/docs/schema/netfx/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Netfx schema<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">.NET 架构</font></font></font></a></td></tr><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><td>WixPSExtension</td><td>WixToolset.PowerShell.wixext</td><td data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="/wixtoolset/docs/schema/powershell/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Powershell schema<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Powershell 架构</font></font></font></a></td></tr><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><td>WixSqlExtension</td><td>WixToolset.Sql.wixext</td><td data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="/wixtoolset/docs/schema/sql/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Sql schema<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Sql 架构</font></font></font></a></td></tr><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><td>WixTagExtension</td><td data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">n/a</td><td data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Software tag functionality now is built into the core toolset.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">软件标签功能现在内置于核心工具集中。</font></font></font></td></tr><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><td>WixUIExtension</td><td>WixToolset.UI.wixext</td><td data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="/wixtoolset/docs/schema/ui/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">UI schema<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">用户界面架构</font></font></font></a></td></tr><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><td>WixUtilExtension</td><td>WixToolset.Util.wixext</td><td data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="/wixtoolset/docs/schema/util/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Util schema<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">工具架构</font></font></font></a></td></tr><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><td>WixVSExtension</td><td>WixToolset.VisualStudio.wixext</td><td data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="/wixtoolset/docs/schema/vs/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Vs schema<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Vs 模式</font></font></font></a></td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="customactionids" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Converting custom action ids<a href="#customactionids" class="hash-link" aria-label="Direct link to Converting custom action ids" title="Direct link to Converting custom action ids" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">转换自定义操作 ID</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In WiX v4's extensions, custom action ids were renamed from their WiX v3 origins for two reasons:<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 WiX v4 的扩展中，自定义操作 ID 从 WiX v3 的起源重命名有两个原因：</font></font></font></p><ol data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">To support WiX v4's platform-specific custom actions for all three platforms that WiX v4 supports: x86, x64, and Arm64.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">支持 WiX v4 的特定平台自定义操作，适用于 WiX v4 支持的所有三个平台：x86、x64 和 Arm64。</font></font></font></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">To avoid conflicts when building a package with WiX v4 that merges a merge module that was built with WiX v3 and uses WiX v3 extension custom actions. (Yes, this is an annoying edge case.)<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">避免在使用 WiX v4 构建包时发生冲突，该包合并了使用 WiX v3 构建的合并模块并使用 WiX v3 扩展自定义操作。（是的，这是一个令人讨厌的边缘情况。）</font></font></font></li></ol><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">WiX v4 meets these requirements by adding a prefix that lets us version custom actions when they make changes that are incompatible with prior versions. Today, the prefix is <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Wix4</code> (because the WiX team is full of wildly imaginative people). In WiX v5, if a particular extension made a change that was incompatible with the custom tables produced by WiX v4, that extension would adopt a new prefix, perhaps something like <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Wix5</code>. But fixes and changes that are backward compatible would not require changing the prefix.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">WiX v4 通过添加一个前缀来满足这些要求，这个前缀使我们能够在自定义操作进行与先前版本不兼容的更改时进行版本控制。今天，前缀是 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Wix4</code> （因为 WiX 团队充满了极富想象力的人）。在 WiX v5 中，如果某个特定扩展进行了与 WiX v4 生成的自定义表不兼容的更改，该扩展将采用一个新的前缀，可能是 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Wix5</code> 。但向后兼容的修复和更改则不需要更改前缀。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The suffix distinguishes platforms:<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">后缀区分平台：</font></font></font></p><table data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><thead data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><th>Platform</th><th>Suffix</th></tr></thead><tbody data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><td>x86</td><td><code>_X86</code></td></tr><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><td>x64</td><td><code>_X64</code></td></tr><tr data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><td>Arm64</td><td><code>_A64</code></td></tr></tbody></table><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">For example, the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">QueryNativeMachine</code> custom action in WiX v3 is, in WiX v4, named:<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">例如，WiX v3 中的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">QueryNativeMachine</code> 自定义操作在 WiX v4 中被命名为：</font></font></font></p><ul data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Wix4QueryNativeMachine_X86</code></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Wix4QueryNativeMachine_X64</code></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Wix4QueryNativeMachine_A64</code></li></ul><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Some custom actions already have a <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Wix</code> prefix. For those, the new prefix replaces it. So, for example, the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixFailWhenDeferred</code> custom action in WiX v3 is now named:<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一些自定义操作已经有了 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Wix</code> 前缀。对于这些操作，新前缀将取代它。因此，例如，WiX v3 中的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixFailWhenDeferred</code> 自定义操作现在被命名为：</font></font></font></p><ul data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Wix4FailWhenDeferred_X86</code></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Wix4FailWhenDeferred_X64</code></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Wix4FailWhenDeferred_A64</code></li></ul><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Generally, this change is invisible because the extension handles the prefix and suffix for you. That was also true in WiX v3, but several custom actions, like <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixFailWhenDeferred</code> did not have a custom element in the extension. Usually, this was because there was no additional information required. In WiX v4, there's always at least one bit of additional information required: the platform the package is being built for. So WiX v4 includes custom elements like <a href="/wixtoolset/docs/schema/util/failwhendeferred/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">FailWhenDeferred</a> to include custom actions in your package so you don't have to worry about prefixes and suffixes.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">通常，这种变化是不可见的，因为扩展会为您处理前缀和后缀。在 WiX v3 中也是如此，但一些自定义操作，如 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixFailWhenDeferred</code> ，在扩展中没有自定义元素。通常，这是因为不需要额外的信息。在 WiX v4 中，总是需要至少一条额外的信息：正在构建的软件包的平台。因此，WiX v4 包括像 FailWhenDeferred 这样的自定义元素，以便在您的软件包中包含自定义操作，这样您就不必担心前缀和后缀。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Other references to WiX custom actions must use the full id, including prefix and suffix.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对 WiX 自定义操作的其他引用必须使用完整的 ID，包括前缀和后缀。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="referencing-the-standard-wixui-dialog-sets" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Referencing the standard WixUI dialog sets<a href="#referencing-the-standard-wixui-dialog-sets" class="hash-link" aria-label="Direct link to Referencing the standard WixUI dialog sets" title="Direct link to Referencing the standard WixUI dialog sets" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">参考标准的 WixUI 对话框集</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In WiX v3, you referenced a standard WixUI dialog set using the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">UIRef</code> element:<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 WiX v3 中，您使用 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">UIRef</code> 元素引用标准的 WixUI 对话框集：</font></font></font></p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">UIRef</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">WixUI_Mondo</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">WiX v4's addition of platform-specific custom actions means a compiler extension is used:<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">WiX v4 增加了特定平台的自定义操作，这意味着使用了编译器扩展：</font></font></font></p><ol data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Add a reference to the WixToolset.UI.wixext WiX extension.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">添加对 WixToolset.UI.wixext WiX 扩展的引用。</font></font></font></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Add the WixToolset.UI.wixext WiX extension namespace to your WiX authoring.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">将 WixToolset.UI.wixext WiX 扩展namespace添加到您的 WiX 编写中。</font></font></font></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Add the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixUI</code> element to your WiX authoring.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">将 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixUI</code> 元素添加到您的 WiX 编写中。</font></font></font></li></ol><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">For example:<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">例如：</font></font></font></p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">Wix</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">http://wixtoolset.org/schemas/v4/wxs</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">  </span><span class="token tag attr-name namespace" style="color:#00a4db;opacity:0.7">xmlns:</span><span class="token tag attr-name" style="color:#00a4db">ui</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">http://wixtoolset.org/schemas/v4/wxs/ui</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">Package</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">...</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag namespace" style="color:#00009f;opacity:0.7">ui:</span><span class="token tag" style="color:#00009f">WixUI</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag attr-name" style="color:#00a4db">Id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">WixUI_InstallDir</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag attr-name" style="color:#00a4db">InstallDirectory</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">INSTALLFOLDER</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">        </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">Package</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">Wix</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="converting-custom-wixui-dialog-sets" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Converting custom WixUI dialog sets<a href="#converting-custom-wixui-dialog-sets" class="hash-link" aria-label="Direct link to Converting custom WixUI dialog sets" title="Direct link to Converting custom WixUI dialog sets" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">转换自定义 WixUI 对话框集</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Because of <a href="#customactionids" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WiX v4's support for platform-specific custom actions</a>, customizing WixUI dialog sets, especially when adding and removing dialogs, requires some care. <a href="/wixtoolset/docs/tools/wixext/wixui/#addingremovingdialogs" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">The WixUI documentation describes what to do when creating a new custom dialog set.</a> You'll want to make the same kind of change when converting a custom dialog set you created using WiX v3 to WiX v4. The key point is to isolate any <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">DoAction</code> control events that call custom actions to create platform-specific variants. WixUI itself does this using a preprocessor <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">?foreach?</code> processing instruction to create three fragments, one each for x86, x64, and Arm64 platforms. Each of those fragments references the platform-neutral <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">UI</code>. You can see the WixUI definitions <a href="https://github.com/wixtoolset/wix4/tree/develop/src/ext/UI/wixlib" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">on GitHub</a>. Here's what a customized dialog set based on WixUI_InstallDir looks like:<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">由于 WiX v4 支持特定平台的自定义操作，定制 WixUI 对话框集（尤其是添加和删除对话框）需要一些注意。WixUI 文档描述了创建新的自定义对话框集时需要做的事情。在将使用 WiX v3 创建的自定义对话框集转换为 WiX v4 时，您需要进行同样的更改。关键点是隔离调用自定义操作的任何 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">DoAction</code> 控件事件，以创建特定平台的变体。WixUI 本身使用预处理器 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">?foreach?</code> 处理指令来创建三个片段，分别用于 x86、x64 和 Arm64 平台。这些片段中的每一个都引用了平台中立的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">UI</code> 。您可以在 GitHub 上看到 WixUI 的定义。以下是基于 WixUI_InstallDir 的自定义对话框集的样子：</font></font></font></p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token prolog" style="color:#999988;font-style:italic">&lt;?foreach WIXUIARCH in X86;X64;A64 ?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">Fragment</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">UI</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">InstallDir_SpecialDlg_$(WIXUIARCH)</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">Publish</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">Dialog</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">LicenseAgreementDlg</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">Control</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">Print</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">Event</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">DoAction</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">Value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">WixUIPrintEula_$(WIXUIARCH)</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">Publish</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">Dialog</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">BrowseDlg</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">Control</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">OK</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">Event</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">DoAction</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">Value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">WixUIValidatePath_$(WIXUIARCH)</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">Order</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">3</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">Condition</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">NOT WIXUI_DONTVALIDATEPATH</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">Publish</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">Dialog</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">InstallDirDlg</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">Control</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">Next</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">Event</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">DoAction</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">Value</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">WixUIValidatePath_$(WIXUIARCH)</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">Order</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">2</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag attr-name" style="color:#00a4db">Condition</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">NOT WIXUI_DONTVALIDATEPATH</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">          </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">UI</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">UIRef</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">InstallDir_SpecialDlg</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">Fragment</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token prolog" style="color:#999988;font-style:italic">&lt;?endforeach?&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">You can see the authoring and test code for this customized dialog set <a href="https://github.com/wixtoolset/wix4/tree/develop/src/ext/UI/test/WixToolsetTest.UI/TestData/InstallDir_SpecialDlg" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">on GitHub</a>.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">您可以在 GitHub 上看到这个自定义对话框集的创作和测试代码。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">When you use the <a href="/wixtoolset/docs/schema/ui/wixui/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixUI</code> element</a> to reference a WixUI dialog set or a customized dialog set derived from WixUI, it adds a reference to the platform-specific <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">UI</code> for the platform of the package being built. The platform-specific <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">UI</code> then adds a reference to the platform-neutral <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">UI</code>.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当您使用 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixUI</code> 元素引用 WixUI 对话框集或从 WixUI 派生的自定义对话框集时，它会为正在构建的软件包的平台添加对特定平台的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">UI</code> 的引用。然后，特定平台的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">UI</code> 会添加对平台无关的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">UI</code> 的引用。</font></font></font></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="converting-bundles" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Converting bundles<a href="#converting-bundles" class="hash-link" aria-label="Direct link to Converting bundles" title="Direct link to Converting bundles" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">转换捆绑包</font></font></font></h2><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Bundles and the Burn engine were originally released in WiX v3.6.
In general they worked reasonably well, especially for the use case that they were built for: the Visual Studio installer.
Over time, various edge cases became more visible than others.
A lot of real world feedback was received on design decisions that were essentially based on a coin flip.
v4 Bundles include a lot of rather small behavioral changes, along some new features, that add up to an installer that will just work for a wider audience.
In a real sense, v4 includes Burn v2.
This page is intended to cover all behavioral changes in the Burn engine from v3 to v4.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">捆绑包和 Burn 引擎最初在 WiX v3.6 中发布。总体来说，它们运行得相当好，特别是对于它们的构建用例：Visual Studio 安装程序。随着时间的推移，各种边缘情况变得比其他情况更明显。关于设计决策，收到了很多基于实际情况的反馈，这些决策基本上是基于抛硬币决定的。v4 捆绑包包括许多相当小的行为变化，以及一些新功能，这些变化和新功能加起来使安装程序能够为更广泛的受众正常工作。从实际意义上讲，v4 包括 Burn v2。本页面旨在涵盖 Burn 引擎从 v3 到 v4 的所有行为变化。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-v3-variables-string-type-is-now-called-formatted" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The v3 Variable's <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">string</code> type is now called <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">formatted</code><a href="#the-v3-variables-string-type-is-now-called-formatted" class="hash-link" aria-label="Direct link to the-v3-variables-string-type-is-now-called-formatted" title="Direct link to the-v3-variables-string-type-is-now-called-formatted" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">v3 变量的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">string</code> 类型现在称为 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">formatted</code> </font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In v3, the engine would almost always format a variable's value before using it.
For example, if the variable had the string value <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">[WixBundleName] Installation</code> and the value of the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixBundleName</code> was "My Bundle" then the formatted value was "My Bundle Installation".
This caused problems when the value of a variable contained a path with square brackets, like "C:<!-- -->\<!-- -->[WixBundleName]<!-- -->".
In this case, the formatted value needs to be "C:<!-- -->\<!-- -->[WixBundleName]<!-- -->" instead of "C:\My Bundle".
In v4, there is a new literal string type for this use case.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 v3 中，引擎几乎总是在使用变量值之前格式化它。例如，如果变量的字符串值是 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">[WixBundleName] Installation</code> ，而 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixBundleName</code> 的值是“我的捆绑包”，那么格式化后的值是“我的捆绑包安装”。当变量的值包含带方括号的路径时，这会导致问题，比如“C:\[WixBundleName]”。在这种情况下，格式化后的值需要是“C:\[WixBundleName]”而不是“C:\我的捆绑包”。在 v4 中，有一种新的文字字符串类型用于这种情况。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In v4, the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">formatted</code> type of the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Variable</code> element must be used to get the v3 behavior.
To specify a literal variable, use the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">string</code> type.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 v4 中，必须使用 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Variable</code> 元素的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">formatted</code> 类型来获得 v3 的行为。要指定文字变量，请使用 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">string</code> 类型。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In v4, all built-in searches will save the value as a literal variable.
wixstdba has functionality where it will let the user edit the value of a variable with a textbox.
When populating the textbox, it formats the variable first.
When saving the value from the textbox to the variable, it saves it as a literal variable.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 v4 中，所有内置搜索将把值保存为字面变量。wixstdba 具有功能，可以让用户使用文本框编辑变量的值。在填充文本框时，它首先格式化变量。从文本框将值保存到变量时，它将其保存为字面变量。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">One place that the v3 engine didn't format the variable when using it was when evaluating a condition.
In v4, it does format the variable.
For example in v3, if the value of <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">ParentVar</code> is "<!-- -->[NestedVar]<!-- -->" and the value of <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">NestedVar</code> is "ABC" then the condition <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">ParentVar = "ABC"</code> is false.
In v4, that condition is true if <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">ParentVar</code> is a formatted string variable but false if <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">ParentVar</code> is a literal string variable.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">v3 引擎在使用变量时没有格式化变量的一个地方是评估条件时。在 v4 中，它会格式化变量。例如在 v3 中，如果 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">ParentVar</code> 的值是“[NestedVar]”且 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">NestedVar</code> 的值是“ABC”，则条件 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">ParentVar = "ABC"</code> 为假。在 v4 中，如果 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">ParentVar</code> 是格式化的字符串变量，则该条件为真，但如果 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">ParentVar</code> 是字面字符串变量，则为假。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Another place that the v3 engine didn't format the variable was in the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Log</code> element's <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Prefix</code> attribute.
v4 will format it, and if it is an absolute path then it will use that path (<a href="https://github.com/wixtoolset/issues/issues/3816" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">3816</a>).<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">v3 引擎没有格式化变量的另一个地方是在 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Log</code> 元素的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Prefix</code> 属性中。v4 将格式化它，如果它是绝对路径，则将使用该路径（3816）。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-condition-operator--works-differently-with-empty-or-null-strings" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The condition operator <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">~&lt;&gt;</code> works differently with empty or null strings<a href="#the-condition-operator--works-differently-with-empty-or-null-strings" class="hash-link" aria-label="Direct link to the-condition-operator--works-differently-with-empty-or-null-strings" title="Direct link to the-condition-operator--works-differently-with-empty-or-null-strings" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">条件运算符 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">~&lt;&gt;</code> 在处理空字符串或空值时的工作方式不同</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">See <a href="https://github.com/wixtoolset/issues/issues/5372" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">issue 5372</a>.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">请参阅问题 5372。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="backwards-compatibility-guarantees-for-bootstrapper-applications" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Backwards compatibility guarantees for Bootstrapper Applications<a href="#backwards-compatibility-guarantees-for-bootstrapper-applications" class="hash-link" aria-label="Direct link to Backwards compatibility guarantees for Bootstrapper Applications" title="Direct link to Backwards compatibility guarantees for Bootstrapper Applications" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">启动程序应用程序的向后兼容性保证</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In v3, the BA must have been built against the same library (balutil for native BA's and BootstrapperCore.dll for managed BA's) that the bundle was built with.
This was build-time backwards compatibility since v3.x was never allowed to make breaking changes to the interfaces.
In v4, the guarantee has been swapped for binary compatibility.
If a BA is built against the v4.0 library, then it can be used for any bundle built by any version of WiX in the range <!-- -->[<!-- -->4.0, 5.0).
However, if the BA is built against v4.0.1 then some changes to the source code might be required.
For example, a new parameter was added to an existing event.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 v3 中，BA 必须针对与构建包相同的library（本机 BA 的 balutil 和托管 BA 的 BootstrapperCore.dll）进行构建。这是构建时的向后兼容性，因为 v3.x 从未允许对接口进行重大更改。在 v4 中，保证已转换为二进制兼容性。如果 BA 是针对 v4.0 library构建的，那么它可以用于由任何版本的 WiX 在[4.0, 5.0)范围内构建的任何包。但是，如果 BA 是针对 v4.0.1 构建的，则可能需要对源代码进行一些更改。例如，向现有事件添加了一个新参数。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">As a part of these changes, all events now return an HRESULT at the lowest level.
If an event needs the BA to return something like a desired action, there is a separate parameter for that with its own enum.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">作为这些更改的一部分，所有事件现在在最低级别返回 HRESULT。如果事件需要 BA 返回类似于所需操作的内容，则有一个单独的参数用于此，其具有自己的枚举。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="backwards-compatibility-guarantees-for-bafunctions-and-specifying-its-dll-at-build-time" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Backwards compatibility guarantees for BAFunctions and specifying its dll at build time<a href="#backwards-compatibility-guarantees-for-bafunctions-and-specifying-its-dll-at-build-time" class="hash-link" aria-label="Direct link to Backwards compatibility guarantees for BAFunctions and specifying its dll at build time" title="Direct link to Backwards compatibility guarantees for BAFunctions and specifying its dll at build time" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">BAFunctions 的向后兼容性保证及其在构建时指定 dll</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">v3 wixstdba supported an extensibility mechanism called BAFunctions where the user provided a native dll that was called for a handful of events.
This interface works the same as the BA interface so there is binary compatibility but not source compatibility.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">v3 wixstdba 支持一种称为 BAFunctions 的可扩展机制，用户提供一个本机 dll，该 dll 在一些事件中被调用。这个接口与 BA 接口的工作方式相同，因此有二进制兼容性，但没有源代码兼容性。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In v3, the dll had to be named <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BAFunctions.dll</code>.
In v4, the BAFunctions dll must be specified at build time with the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:BAFunctions</code> attribute.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 v3 中，dll 必须命名为 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BAFunctions.dll</code> 。在 v4 中，BAFunctions dll 必须在构建时通过 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:BAFunctions</code> 属性指定。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="x64-and-arm64-bundles" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">x64 and ARM64 bundles<a href="#x64-and-arm64-bundles" class="hash-link" aria-label="Direct link to x64 and ARM64 bundles" title="Direct link to x64 and ARM64 bundles" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">x64 和 ARM64 捆绑包</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In v3, only x86 bundles were available which meant all BA's had to be x86.
In v4, the bundle can be x86, x64, or ARM64.
All of the BA's dlls must be the same architecture as the bundle, or be a managed AnyCPU dll.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 v3 中，只提供了 x86 捆绑包，这意味着所有的 BA 都必须是 x86。在 v4 中，捆绑包可以是 x86、x64 或 ARM64。所有 BA 的 dll 必须与捆绑包具有相同的架构，或者是托管的 AnyCPU dll。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="wixstdba-behavior-changes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">wixstdba behavior changes<a href="#wixstdba-behavior-changes" class="hash-link" aria-label="Direct link to wixstdba behavior changes" title="Direct link to wixstdba behavior changes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">wixstdba 行为变化</font></font></font></h3><ul data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a href="https://github.com/wixtoolset/issues/issues/5267" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">5267</a> makes wixstdba skip checking <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:Condition</code> during layout.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">5267 使 wixstdba 在布局期间跳过检查 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:Condition</code> 。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a href="https://github.com/wixtoolset/issues/issues/5927" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">5927</a> makes wixstdba use <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">::DefDialogProc</code> instead of <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">::DefWindowProc</code> in the base case.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">5927 使 wixstdba 在基本情况下使用 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">::DefDialogProc</code> 而不是 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">::DefWindowProc</code> 。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a href="https://github.com/wixtoolset/issues/issues/6537" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">6537</a> makes wixstdba skip straight to the Success page if a newer version is installed and <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:SuppressDowngradeError="yes"</code>.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">6537 使 wixstdba 如果安装了更新版本并且 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:SuppressDowngradeError="yes"</code> ，则直接跳到成功页面。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The Files in Use dialog is now shown as a Task Dialog instead of a page in the theme (<a href="https://github.com/wixtoolset/wix4/pull/202" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">PR</a>).<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用中的文件对话框现在显示为任务对话框，而不是主题中的页面（PR）。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a href="https://github.com/wixtoolset/issues/issues/6856" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">6856</a> makes wixstdba (and other users of balretry) to not attempt to retry an MSI package that fails with error 1606.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">6856 使 wixstdba（以及其他使用 balretry 的用户）不会尝试重试因错误 1606 而失败的 MSI 包。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a href="https://github.com/wixtoolset/issues/issues/5499" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">5499</a> make wixstdba request elevation if the bundle requires a restart and the current process doesn't have permissions to do so.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">5499 使 wixstdba 在捆绑包需要重启且当前进程没有权限时请求提升权限。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">If not showing full UI, wixstdba will always use the action specified on the command line.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果不显示完整的 UI，wixstdba 将始终使用命令行中指定的操作。</font></font></font></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrading-v3-managed-bootstrapper-applications" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Upgrading v3 Managed Bootstrapper Applications<a href="#upgrading-v3-managed-bootstrapper-applications" class="hash-link" aria-label="Direct link to Upgrading v3 Managed Bootstrapper Applications" title="Direct link to Upgrading v3 Managed Bootstrapper Applications" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">升级 v3 管理的引导程序应用程序</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">v4 added the ability to use .NET Core managed BA's but that is not covered here since v3 only supported .NET Framework BA's.
Note that Microsoft chose a confusing naming convention for newer versions of .NET Core.
.NET 5+ is a completely different runtime from .NET Framework.
To use a BA written in .NET 6+, use <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:WixDotNetCoreBootstrapperApplicationHost</code> instead of <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:WixManagedBootstrapperApplicationHost</code>.
.NET 5 and earlier versions are not supported because they were already at end of life when v4 shipped.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">v4 增加了使用 .NET Core 管理的 BA 的功能，但这里不涉及，因为 v3 仅支持 .NET Framework BA。请注意，微软为更新版本的 .NET Core 选择了一个令人困惑的命名约定。.NET 5+ 是一个与 .NET Framework 完全不同的运行时。要使用 .NET 6+ 编写的 BA，请使用 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:WixDotNetCoreBootstrapperApplicationHost</code> 而不是 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:WixManagedBootstrapperApplicationHost</code> 。不支持 .NET 5 及更早版本，因为它们在 v4 发布时已经结束了生命周期。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Even though the WixBA is not currently shipping, it is still available at <a href="https://github.com/wixtoolset/wix4/tree/HEAD/src/test/burn/WixToolset.WixBA" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">https://github.com/wixtoolset/wix4/tree/HEAD/src/test/burn/WixToolset.WixBA</a>.
You can basically see a step-by-step example of upgrading a v3 MBA by looking at the history of that folder and <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixToolset.WixBA.csproj</code>.
Another folder that might be useful is <a href="https://github.com/wixtoolset/wix4/tree/HEAD/src/test/burn/TestData/TestBA" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">https://github.com/wixtoolset/wix4/tree/HEAD/src/test/burn/TestData/TestBA</a>.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">尽管 WixBA 目前没有发布，但它仍然可以在 https://github.com/wixtoolset/wix4/tree/HEAD/src/test/burn/WixToolset.WixBA 找到。您基本上可以通过查看该文件夹的历史记录和 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixToolset.WixBA.csproj</code> 来看到升级 v3 MBA 的分步示例。另一个可能有用的文件夹是 https://github.com/wixtoolset/wix4/tree/HEAD/src/test/burn/TestData/TestBA。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In v3, MBAs needed to be built against the same version of <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BootstrapperCore.dll</code> as the bundle.
They didn't need to include it as a payload because the Bal WiX extension automatically added it.
However, they did need to provide a <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BootstrapperCore.config</code> file to inform the MBA host which .NET Framework runtime it supported and which DLL contained the MBA.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 v3 中，MBA 需要针对与捆绑包相同版本的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BootstrapperCore.dll</code> 进行构建。它们不需要将其作为有效负载包含在内，因为 Bal WiX 扩展会自动添加它。然而，他们确实需要提供一个 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BootstrapperCore.config</code> 文件，以通知 MBA 主机它支持哪个.NET Framework 运行时以及哪个 DLL 包含 MBA。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In v4, the config file is named <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixToolset.Mba.Host.config</code>.
The MBA must use the WixToolset.Mba.Core nuget package, a sample config file is included in the package.
The Bal WiX extension does not add WixToolset.Mba.Core.dll or mbanative.dll so both must be added along with all the other dependencies of the MBA.
The MBA project should be an SDK-style project and built for a specific RID (e.g. win-x86).<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 v4 中，配置文件名为 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixToolset.Mba.Host.config</code> 。MBA 必须使用 WixToolset.Mba.Core nuget 包，包中包含一个示例配置文件。Bal WiX 扩展不会添加 WixToolset.Mba.Core.dll 或 mbanative.dll，因此必须添加这两个文件以及 MBA 的所有其他依赖项。MBA 项目应为 SDK 风格项目，并针对特定的 RID（例如 win-x86）进行构建。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The root namespace changed from <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Microsoft.Tools.WindowsInstallerXml.Bootstrapper</code> to <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixToolset.Mba.Core</code>.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">root namespace从 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Microsoft.Tools.WindowsInstallerXml.Bootstrapper</code> 更改为 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixToolset.Mba.Core</code> 。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In v3, the BootstrapperApplication was designated by the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BootstrapperApplication</code> attribute.
In v4, the BA assembly must have a <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BootstrapperApplicationFactory</code> attribute that designates the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">IBootstrapperApplicationFactory</code>.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 v3 中，BootstrapperApplication 由 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BootstrapperApplication</code> 属性指定。在 v4 中，BA 程序集必须具有指定 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">IBootstrapperApplicationFactory</code> 的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BootstrapperApplicationFactory</code> 属性。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="specifying-the-managed-ba-prerequisite" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Specifying the Managed BA prerequisite<a href="#specifying-the-managed-ba-prerequisite" class="hash-link" aria-label="Direct link to Specifying the Managed BA prerequisite" title="Direct link to Specifying the Managed BA prerequisite" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">指定托管 BA 的前提条件</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In v3, the prerequisite for the MBA was specified with the magic WixVariable <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixMbaPrereqPackageId</code>.
Any further prerequisites could be specified with the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:PrereqSupportPackage</code> attribute.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 v3 中，MBA 的前提条件是用魔法 WixVariable <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixMbaPrereqPackageId</code> 指定的。任何进一步的前提条件都可以用 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:PrereqSupportPackage</code> 属性指定。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In v4, the only way to specify prereqs for the MBA is through the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:PrereqPackage</code> attribute.
Because this attribute can't be specified on a <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">PackageGroupRef</code>, each of the NetFx package groups have a different version that is intended to be used with an MBA.
For example, use <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">NetFx481WebAsPrereq</code> for an MBA instead of <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">NetFx481Web</code>.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 v4 中，指定 MBA 的前提条件的唯一方法是通过 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:PrereqPackage</code> 属性。由于此属性不能在 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">PackageGroupRef</code> 上指定，每个 NetFx 包组都有一个不同的版本，旨在与 MBA 一起使用。例如，对于 MBA，请使用 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">NetFx481WebAsPrereq</code> 而不是 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">NetFx481Web</code> 。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prereq-ba-changes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Prereq BA changes<a href="#prereq-ba-changes" class="hash-link" aria-label="Direct link to Prereq BA changes" title="Direct link to Prereq BA changes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">前提条件 BA 更改</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">When running in full UI and the command line option to prohibit restarts was provided and a restart is required, show the Success screen (<a href="https://github.com/wixtoolset/issues/issues/3957" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">3957</a>) instead of a message box.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在全 UI 运行并提供禁止重启的命令行选项且需要重启时，显示成功屏幕（3957）而不是消息框。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">To implement <a href="https://github.com/wixtoolset/issues/issues/4718" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">4718</a>, the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:AlwaysInstallPrereqs</code> attribute was added to the MBA host elements. When "true", the host will always run the prereq BA before trying to start the .NET (Framework) runtime (the UI will not show if all prereqs are already installed). Otherwise, the host will only show the prereq BA if it couldn't load the MBA. Either way, the host will only attempt to run the prereq BA once. If the host can't load the MBA after letting the prereq BA install the prereqs, then it will show an error page with the prereq BA and then quit.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为了实现 4718，MBA 主机元素添加了 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:AlwaysInstallPrereqs</code> 属性。当为“true”时，主机将始终在尝试启动.NET（框架）运行时之前运行前提条件 BA（如果所有前提条件都已安装，UI 将不会显示）。否则，只有在无法加载 MBA 时，主机才会显示前提条件 BA。无论哪种方式，主机只会尝试运行一次前提条件 BA。如果在让前提条件 BA 安装前提条件后主机仍无法加载 MBA，则会显示带有前提条件 BA 的错误页面，然后退出。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="removal-of-displayinternalui" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Removal of DisplayInternalUI<a href="#removal-of-displayinternalui" class="hash-link" aria-label="Direct link to Removal of DisplayInternalUI" title="Direct link to Removal of DisplayInternalUI" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">移除 DisplayInternalUI</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In v3, a bundle could choose to let an <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">MsiPackage</code> show its internal UI during install with the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">DisplayInternalUI</code> attribute.
Many people requested the ability to show the internal UI during other operations as well as the ability to choose at runtime whether to show it.
So in v4, the engine gives the BA full control over the UI level of the MSI and the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">DisplayInternalUI</code> attribute was removed.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 v3 中，捆绑包可以选择让 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">MsiPackage</code> 在安装期间显示其内部 UI，使用 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">DisplayInternalUI</code> 属性。许多人要求在其他操作期间也能显示内部 UI，并且能够在运行时选择是否显示。因此在 v4 中，引擎赋予 BA 对 MSI 的 UI 级别的完全控制，并且移除了 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">DisplayInternalUI</code> 属性。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">There are two built-in BA's that support showing the MSI's internal UI. The first one is <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:WixInternalUIBootstrapperApplication</code>, a brand new built-in BA in v4. (TODO: link to documentation on new BA)<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有两个内置的 BA 支持显示 MSI 的内部 UI。第一个是 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:WixInternalUIBootstrapperApplication</code> ，这是 v4 中的一个全新内置 BA。（TODO：链接到新 BA 的文档）</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The second one is wixstdba.
Use the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:DisplayInternalUICondition</code> attribute to control when the MSI's UI should be shown.
To get the same behavior as v3, use <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:DisplayInternalUICondition="WixBundleAction = 6"</code>.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">第二个是 wixstdba。使用 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:DisplayInternalUICondition</code> 属性来控制何时显示 MSI 的 UI。要获得与 v3 相同的行为，请使用 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:DisplayInternalUICondition="WixBundleAction = 6"</code> 。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrading-custom-wixstdba-themes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Upgrading custom wixstdba themes<a href="#upgrading-custom-wixstdba-themes" class="hash-link" aria-label="Direct link to Upgrading custom wixstdba themes" title="Direct link to Upgrading custom wixstdba themes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">升级自定义 wixstdba 主题</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">There were so many breaking changes done to the UI library (thmutil), the XML schema, and the built-in themes that it wasn't worth time trying to build a tool to convert v3 themes into v4.
Look at the built-in themes and rebuild your theme from one of them: <a href="https://github.com/wixtoolset/wix4/tree/develop/src/ext/Bal/wixstdba/Resources" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">https://github.com/wixtoolset/wix4/tree/develop/src/ext/Bal/wixstdba/Resources</a>.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">UI library (thmutil)、XML 架构和内置主题进行了许多重大更改，不值得花时间尝试构建工具将 v3 主题转换为 v4。查看内置主题并从其中一个重建您的主题：https://github.com/wixtoolset/wix4/tree/develop/src/ext/Bal/wixstdba/Resources。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">(TODO: link to documentation about all the cool new features)<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">（待办事项：链接到有关所有酷新功能的文档）</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Here are some subtle changes:<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这里有一些细微的变化：</font></font></font></p><ul data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a href="https://github.com/wixtoolset/issues/issues/4906" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">4906</a> makes the Window's height and width now refer to the height and width of the window's client area instead of the window itself.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">4906 使窗口的高度和宽度现在指的是窗口客户区的高度和宽度，而不是窗口本身。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a href="https://github.com/wixtoolset/issues/issues/5843" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">5843</a> upgraded the RichEdit control from the ancient version that was used in v3.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">5843 将 RichEdit 控件从 v3 中使用的古老版本升级。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a href="https://github.com/wixtoolset/issues/issues/5250" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">5250</a> fixed a bug in custom ProgressBars where the right side was drawn with the left side's pixel.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">5250 修复了自定义进度条中的一个错误，其中右侧是用左侧的像素绘制的。</font></font></font></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="high-dpi-changes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">High DPI changes<a href="#high-dpi-changes" class="hash-link" aria-label="Direct link to High DPI changes" title="Direct link to High DPI changes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">高 DPI 更改</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">v3 bundles are always DPI unaware.
In v4, the default DPI awareness is Per-Monitor V2.
See the <a href="/wixtoolset/docs/schema/wxs/bootstrapperapplicationdll/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BootstrapperApplicationDll</code></a> element's <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">DpiAwareness</code> attribute for more information.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">v3 包始终不支持 DPI 感知。在 v4 中，默认的 DPI 感知是每监视器 V2。有关更多信息，请参见 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BootstrapperApplicationDll</code> 元素的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">DpiAwareness</code> 属性。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">This may cause changes for how images are shown in a custom wixstdba theme, or the bundle's splash screen.
This may also cause problems if a bundle claims it supports a level of DPI awareness that the BA's UI framework doesn't support.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这可能会导致自定义 wixstdba 主题或包的启动屏幕中显示的图像发生变化。如果包声称支持 BA 的 UI 框架不支持的 DPI 感知级别，这也可能会导致问题。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="balutil-and-wixtoolsetmbacore-breaking-changes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">balutil and WixToolset.Mba.Core breaking changes<a href="#balutil-and-wixtoolsetmbacore-breaking-changes" class="hash-link" aria-label="Direct link to balutil and WixToolset.Mba.Core breaking changes" title="Direct link to balutil and WixToolset.Mba.Core breaking changes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">balutil 和 WixToolset.Mba.Core 重大更改</font></font></font></h3><ul data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">There were several enums and events declared but never used by the engine so they were deleted.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">有几个枚举和事件被声明但从未被引擎使用，因此被删除。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnApplyNumberOfPhases</code> was merged into <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnApplyBegin</code>.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnApplyNumberOfPhases</code> 被合并到 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnApplyBegin</code> 。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">All events that have a <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Begin</code> event must have a corresponding <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Complete</code> event and vice versa. At runtime, if the engine sends the BA a <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Begin</code> event then it must send the corresponding <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Complete</code> event and vice versa.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">所有具有 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Begin</code> 事件的事件必须具有相应的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Complete</code> 事件，反之亦然。在运行时，如果引擎向 BA 发送 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Begin</code> 事件，则必须发送相应的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Complete</code> 事件，反之亦然。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a href="https://github.com/wixtoolset/issues/issues/5980" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">5980</a> requires the window handle passed to <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Apply</code> to be a valid window handle to avoid hangs when executing Windows Installer packages.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">5980 要求传递给 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Apply</code> 的窗口句柄是有效的窗口句柄，以避免在执行 Windows Installer 包时挂起。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnDetectTargetMsiPackage</code> and <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnPlanTargetMsiPackage</code> were renamed to <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnDetectPatchTargetPackage</code> and <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnPlanPatchTargetPackage</code>.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnDetectTargetMsiPackage</code> 和 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnPlanTargetMsiPackage</code> 被重命名为 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnDetectPatchTargetPackage</code> 和 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnPlanPatchTargetPackage</code> 。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Whether restarts are allowed is no longer provided by the engine.
Use <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BalInfoParseCommandLine</code> or the managed <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BootstrapperCommand.ParseCommandLine</code> to get this information.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">是否允许重启不再由引擎提供。使用 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BalInfoParseCommandLine</code> 或托管的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BootstrapperCommand.ParseCommandLine</code> 来获取此信息。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnSystemShutdown</code> event was removed.
The BA has to integrate with the OS if it wants to receive shutdown notifications because the notifications are time sensitive and the engine needs to respond promptly to avoid getting terminated.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnSystemShutdown</code> 事件已被移除。如果 BA 想要接收关机通知，必须与操作系统集成，因为通知是时间敏感的，引擎需要及时响应以避免被终止。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The source is now provided in <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnExecuteFilesInUse</code> and the engine passes back the return value from the BA without modifying it.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">现在在 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnExecuteFilesInUse</code> 中提供源，引擎返回 BA 的返回值而不进行修改。</font></font></font></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-to-msipackage-detection" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Changes to MsiPackage detection<a href="#changes-to-msipackage-detection" class="hash-link" aria-label="Direct link to Changes to MsiPackage detection" title="Direct link to Changes to MsiPackage detection" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对 MsiPackage 检测的更改</font></font></font></h3><ul data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a href="https://github.com/wixtoolset/issues/issues/3643" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">3643</a> changes the detection of an MSI package where it included a row in the Upgrade table for a different upgrade code than itself and the row was for detection only. In v3, this would be detected as a downgrade. In v4, it is treated as a related MSI package but will not be detected as a downgrade.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">3643 更改了 MSI 包的检测，其中包含了一个用于不同升级代码的升级表中的行，并且该行仅用于检测。在 v3 中，这将被检测为降级。在 v4 中，它被视为相关的 MSI 包，但不会被检测为降级。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a href="https://github.com/wixtoolset/issues/issues/6535" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">6535</a> makes the engine not detect minor upgrades as present when only the base package is installed.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">6535 使引擎在仅安装基本包时不会检测到次要升级。</font></font></font></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-to-related-bundle-detection" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Changes to related bundle detection<a href="#changes-to-related-bundle-detection" class="hash-link" aria-label="Direct link to Changes to related bundle detection" title="Direct link to Changes to related bundle detection" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">更改相关捆绑包检测</font></font></font></h3><ul data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Related bundles that were registered but not cached were ignored by the engine.
In v4, the BA is informed of all registered related bundles and whether they are cached during detect.
Uncached related bundles are still never planned.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">已注册但未缓存的相关捆绑包被引擎忽略。在 v4 中，BA 会在检测期间被告知所有已注册的相关捆绑包及其是否被缓存。未缓存的相关捆绑包仍然不会被计划。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The engine no longer provides the related operation during detect because it depended on the planned overall action which hasn't been decided yet.
If the BootstrapperApplication wants to know whether the current bundle would downgrade a related bundle, it must compare the versions itself.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">引擎在检测期间不再提供相关操作，因为它依赖于尚未决定的整体计划操作。如果 BootstrapperApplication 想知道当前捆绑包是否会降级相关捆绑包，它必须自己比较版本。</font></font></font></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-to-package-caching" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Changes to package caching<a href="#changes-to-package-caching" class="hash-link" aria-label="Direct link to Changes to package caching" title="Direct link to Changes to package caching" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">更改包缓存</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In v3, if a bundle's package is already installed then the engine would never try to cache it.
This led to issues when the bundle later wanted to repair the package since it wasn't available in the cache (<a href="https://github.com/wixtoolset/issues/issues/5125" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">5125</a>).
In v4, the bundle will always attempt to cache a package if it is performing the Cache/Install overall action and the package was requested to be present even if it was already installed.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 v3 中，如果一个包的包已经安装，那么引擎将永远不会尝试缓存它。这导致了当包后来想要修复包时出现问题，因为它在缓存中不可用（5125）。在 v4 中，如果包执行缓存/安装整体操作并且请求包存在，即使它已经安装，包也会始终尝试缓存包。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Between this new behavior and the confusion around why the engine was caching packages when the cache was set to "no", the cache types were renamed from "no", "yes", "always" to "remove", "keep", "force".<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在这种新行为和引擎在缓存设置为“否”时缓存包的困惑之间，缓存类型从“否”、“是”、“总是”重命名为“删除”、“保留”、“强制”。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Some package types like <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">MsiPackage</code> don't require the source to be uninstalled.
However, the source would be required for rollback.
The engine will now attempt to always cache packages for uninstall, but the cache action is considered "non-vital" for packages that can uninstall without source.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">某些包类型如 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">MsiPackage</code> 不需要卸载源代码。然而，回滚时需要源代码。引擎现在将尝试始终缓存卸载包，但对于可以在没有源代码的情况下卸载的包，缓存操作被认为是“非关键的”。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="timing-changes-for-detection" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Timing changes for detection<a href="#timing-changes-for-detection" class="hash-link" aria-label="Direct link to Timing changes for detection" title="Direct link to Timing changes for detection" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">检测的时间变化</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In v3 (and v4), the typical execution of a bundle goes like this: load the BA, Detect, Plan, Apply, close.
However, there are times where a BA will want to restart the cycle so it's important that all of the internal state in the engine gets reset appropriately.
In addition, one of the design goals was that only Detect would be querying for the state of the machine.
There were multiple places where code needed to be moved to make this happen:<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 v3（和 v4）中，捆绑包的典型执行过程如下：加载 BA，检测，计划，应用，关闭。然而，有时 BA 会希望重新启动循环，因此确保引擎中的所有内部状态都能适当重置是很重要的。此外，设计目标之一是只有检测会查询机器的状态。有多个地方需要移动代码以实现这一目标：</font></font></font></p><ul data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a href="https://github.com/wixtoolset/issues/issues/4392" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">4392</a> makes the engine always set WixBundleInstalled during Detect.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">4392 使引擎在检测期间始终设置 WixBundleInstalled。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The information required for dependency checking is gathered from the machine during Detect instead of Plan.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在检测期间从机器收集依赖性检查所需的信息，而不是在计划期间。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixBundleAction</code> is not set until Plan.
<code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixBundleCommandLineAction</code> can be used as a replacement though it is not recommended to rely on something that hasn't been decided yet.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixBundleAction</code> 直到计划阶段才设置。虽然可以使用 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixBundleCommandLineAction</code> 作为替代，但不建议依赖尚未决定的内容。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The built-in variable <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">RebootPending</code> is also reset everytime during Detect.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">内置变量 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">RebootPending</code> 在每次检测期间也会重置。</font></font></font></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="plan-changes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Plan changes<a href="#plan-changes" class="hash-link" aria-label="Direct link to Plan changes" title="Direct link to Plan changes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">计划变更</font></font></font></h3><ul data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a href="https://github.com/wixtoolset/issues/issues/4539" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">4539</a> makes sure related bundles aren't touched during the overall action of Cache.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">4539 确保在缓存的整体操作期间不触及相关的捆绑包。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Plan requires a successful Detect.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">计划需要成功的检测。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">All the requested states are gathered from the BA before building the plan.
This means that the planned actions for the package are given to the BA in the new <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnPlannedPackage</code> instead of <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnPlanPackageComplete</code>.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在构建计划之前，所有请求的状态都从 BA 收集。这意味着包的计划动作在新的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnPlannedPackage</code> 中而不是 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnPlanPackageComplete</code> 中给 BA。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The BA chooses whether to ignore forward compatible bundles during Plan instead of during Detect.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">BA 选择在计划期间而不是在检测期间忽略向前兼容的包。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In v3, the order of related bundles was determined by the order that they were enumerated from the registry.
In v4, they are sorted by relation type (Detect, AddOn, Patch, Dependent, Upgrade) and then by version (older bundles first).<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 v3 中，相关包的顺序由它们从注册表中枚举的顺序决定。在 v4 中，它们按关系类型（检测、附加、Patch、依赖、升级）排序，然后按版本排序（旧包优先）。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">For the request state <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BOOTSTRAPPER_REQUEST_STATE_FORCE_ABSENT</code>, the engine will plan to uninstall the package even if it wasn't detected as present.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于请求状态 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BOOTSTRAPPER_REQUEST_STATE_FORCE_ABSENT</code> ，即使未检测到包存在，引擎也会计划卸载该包。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In v3, the engine made some assumptions when planning dependency operations.
In v4, all dependency operations are planned individually so that they are only executed when they are needed and can be rolled back properly.
<a href="https://github.com/wixtoolset/issues/issues/6510" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">6510</a> is an example of incorrect behavior in v3.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 v3 中，引擎在规划依赖操作时做了一些假设。在 v4 中，所有依赖操作都是单独规划的，以便它们仅在需要时执行，并且可以正确回滚。6510 是 v3 中不正确行为的一个例子。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">If any related bundles are planned as downgrade, then the rest of the planning is skipped.
However, downgrade related bundles are ignored when the bundle was run from an upgrade related bundle or the bundle is being uninstalled.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果任何相关的捆绑包计划降级，则其余的计划将被跳过。但是，当捆绑包是从升级相关的捆绑包运行或捆绑包正在卸载时，降级相关的捆绑包将被忽略。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a href="https://github.com/wixtoolset/issues/issues/7147" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">7147</a> makes the engine not uninstall superseded MSI packages.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">7147 使引擎不会卸载被取代的 MSI 包。</font></font></font></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="execute-changes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Execute changes<a href="#execute-changes" class="hash-link" aria-label="Direct link to Execute changes" title="Direct link to Execute changes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">执行更改</font></font></font></h3><ul data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a href="https://github.com/wixtoolset/issues/issues/6195" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">6195</a> sends the desired working directory to <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">::CreateProcess</code> instead of changing the current directory when executing ExePackages.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">6195 将所需的工作目录发送到 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">::CreateProcess</code> 而不是在执行 ExePackages 时更改当前目录。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Apply requires a successful Plan.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">应用需要一个成功的计划。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">After a plan is executed, the BA must perform a new Detect and Plan before performing Apply again.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">计划执行后，BA 必须在再次执行应用之前执行新的检测和计划。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a href="https://github.com/wixtoolset/issues/issues/6668" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">6668</a> removes the bundle specific registry key that indicated that it required a reboot.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">6668 删除了指示需要重启的特定于捆绑包的注册表项。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In v3, the engine assumed that all ExePackages that used the Burn protocol were bundles.
In v4, to get the same behavior as v3 you must add <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Bundle="yes"</code> and can remove <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Protocol="burn"</code>.
It also automatically add "-norestart" to the command line.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 v3 中，引擎假定所有使用 Burn 协议的 ExePackages 都是捆绑包。在 v4 中，要获得与 v3 相同的行为，您必须添加 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Bundle="yes"</code> 并可以删除 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Protocol="burn"</code> 。它还会自动在命令行中添加 "-norestart"。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The bundle's dependency provider is only removed when the bundle's registration is also removed.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">只有在捆绑包的注册也被删除时，捆绑包的依赖提供程序才会被删除。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a href="https://github.com/wixtoolset/issues/issues/4039" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">4039</a> changes when the install size in updated in ARP.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当安装大小在 ARP 中更新时，4039 发生变化。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The engine now blocks critical shutdown during Apply in both the elevated process and the unelevated process.
When a critical shutdown request is received, it assumes that the currently executing package triggered the restart.
It responds so that the OS gives it as much time as possible to let the current package complete and gracefully close so that it can pick back up where it left off after the reboot.
v3 had attempted to complete the chain even though the elevated process shutdown.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">引擎现在在提升的进程和未提升的进程中阻止关键关闭。在收到关键关闭请求时，它假定当前正在执行的软件包触发了重启。它响应以便操作系统尽可能多地给予时间让当前的软件包完成并优雅地关闭，以便在重启后可以从中断的地方继续。v3 曾试图完成链条，即使提升的进程关闭了。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">All paths passed on the command line are resolved when the parsing the command line at startup.
For example, in v3 if the layout path was specified on the command line as a relative path and the BA changed the process's current directory then the target path would have been based off of the new current directory.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">启动时解析命令行时，命令行上传递的所有路径都会被解析。例如，在 v3 中，如果布局路径在命令行中指定为相对路径，并且 BA 更改了进程的当前目录，那么目标路径将基于新的当前目录。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The SxS manifest for the bundle exe specifies that it handles long paths.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">捆绑 exe 的 SxS 清单指定它处理长路径。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The exit code for <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">ExePackage</code>s were not always correctly translated due to restart related codes.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">由于重启相关代码， <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">ExePackage</code> 的退出代码并不总是正确翻译。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a href="https://github.com/wixtoolset/issues/issues/6762" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">6762</a> makes the engine aware of the failure restart codes and will return those when appropriate (<code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">ERROR_FAIL_REBOOT_REQUIRED</code> and <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">ERROR_FAIL_REBOOT_INITIATED</code>).<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">6762 使引擎意识到失败重启代码，并在适当时返回这些代码（ <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">ERROR_FAIL_REBOOT_REQUIRED</code> 和 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">ERROR_FAIL_REBOOT_INITIATED</code> ）。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The engine now uses the elevated process to restart the machine if it is available.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">现在引擎使用提升的进程重新启动机器（如果可用）。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a href="https://github.com/wixtoolset/issues/issues/3777" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">3777</a> makes the engine compare variable names without case sensitivity when masking variable values from the command line.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">3777 使引擎在从命令行屏蔽变量值时比较变量名时不区分大小写。</font></font></font></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="active-engine-changes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Active engine changes<a href="#active-engine-changes" class="hash-link" aria-label="Direct link to Active engine changes" title="Direct link to Active engine changes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">活动引擎更改</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">While the engine is running a phase like Apply, the engine is "active" and the BA is restricted from calling some functions like <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">IBootstrapperEngine::SetLocalSource</code>.
The timing of when the engine starts being "active" and finishes being "active" has subtly changed but shouldn't be noticable.
This restriction was added to <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">IBootstrapperEngine::SetUpdate</code>.
This restriction was lifted in v3 during certain calls to <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">IBootstrapperApplication</code> and was lifted in some more in v4 like the places where a BA would call <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">SetUpdate</code>.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当引擎运行类似应用的阶段时，引擎是“活跃的”，并且 BA 被限制调用某些函数如 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">IBootstrapperEngine::SetLocalSource</code> 。引擎开始“活跃”和结束“活跃”的时机有所改变，但不应该明显。这一限制被添加到 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">IBootstrapperEngine::SetUpdate</code> 。在 v3 中，在某些调用 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">IBootstrapperApplication</code> 时，这一限制被取消，并在 v4 中更多地方取消了，比如 BA 调用 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">SetUpdate</code> 的地方。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The engine now gets activated during <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Elevate</code> and <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Quit</code>.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">引擎现在在 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Elevate</code> 和 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Quit</code> 期间激活。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">All BA requests received after it starts to process the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Quit</code> are rejected.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在开始处理 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Quit</code> 后收到的所有 BA 请求都会被拒绝。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="version-handling" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Version handling<a href="#version-handling" class="hash-link" aria-label="Direct link to Version handling" title="Direct link to Version handling" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">版本处理</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In v3, all versions in the engine were represented as Major.Minor.Patch.Revision in a 64-bit value, where the max of each component was 65535.
In v4, all versions are represented as strings.
When the engine needs to compare strings, it uses a <a href="https://wixtoolset.org/docs/development/wips/burn-engine-semantic-versioning/" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WiX version</a> of SemVer 2.0.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 v3 中，所有版本在引擎中都表示为 Major.Minor.Patch.Revision 的 64 位值，其中每个组件的最大值为 65535。在 v4 中，所有版本都表示为字符串。当引擎需要比较字符串时，它使用 WiX 版本的 SemVer 2.0。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">util:ProductSearch will no longer ignore products that have versions that can't be parsed to the 64-bit representation.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">util:ProductSearch 将不再忽略那些无法解析为 64 位表示的产品。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">As requested in <a href="https://github.com/wixtoolset/issues/issues/4808" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">4808</a>, Burn will now upgrade a bundle if the existing version is the same as the installing bundle instead of installing them side by side.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">根据 4808 的要求，Burn 现在将升级捆绑包，如果现有版本与正在安装的捆绑包相同，而不是并排安装它们。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hidden-variables" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Hidden Variables<a href="#hidden-variables" class="hash-link" aria-label="Direct link to Hidden Variables" title="Direct link to Hidden Variables" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">隐藏变量</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Hidden variables are only to keep the engine from logging its value.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">隐藏变量只是为了防止引擎记录其值。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Hidden Variables are no longer encrypted since they would always have to be decrypted and sent to a separate process to be used with a package.
If encryption is desired, then it's the BA's responsibility for encrypting it before setting the variable and decrypting it when it needs to be used.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">隐藏变量不再加密，因为它们总是需要解密并发送到一个单独的进程中与包一起使用。如果需要加密，那么在设置变量之前加密它并在需要使用时解密它是业务分析师的责任。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">A Variable can no longer be both Hidden and Persisted.
Persisted variable values were always stored in cleartext in v3.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">变量不能再同时隐藏和持久化。持久化的变量值在 v3 中总是以明文存储。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="utilregistrysearch-changes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">util:RegistrySearch changes<a href="#utilregistrysearch-changes" class="hash-link" aria-label="Direct link to util:RegistrySearch changes" title="Direct link to util:RegistrySearch changes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">util:RegistrySearch 变更</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a href="https://github.com/wixtoolset/issues/issues/5355" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">5355</a> changes the behavior to not clear the variable when the target key or value is missing.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">5355 更改了行为，当目标键或值缺失时，不会清除变量。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="registration-changes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Registration changes<a href="#registration-changes" class="hash-link" aria-label="Direct link to Registration changes" title="Direct link to Registration changes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注册变更</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">As reported in multiple issues like <a href="https://github.com/wixtoolset/issues/issues/4822" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">4822</a>, v3 bundles would stay registered in certain cases where everyone thinks it shouldn't.
The registration state of the bundle should be more intuitive now, though the exact rules are too complex to document here.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如多个问题（如 4822）所报告的那样，在某些情况下，v3 捆绑包会保持注册状态，而每个人都认为不应该这样。现在捆绑包的注册状态应该更直观，尽管确切的规则过于复杂，无法在此记录。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">When the bundle unregisters, it will do its best to remove all dependency registrations that it could have added.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当捆绑包注销时，它将尽力删除它可能添加的所有依赖项注册。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">When the bundle performs Cache, Install, Uninstall, Modify, or Repair then it will ensure the bundle is registered and cached at the beginning of Apply regardless of whether it was already registered or cached (<a href="https://github.com/wixtoolset/issues/issues/5702" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">5702</a>).<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当捆绑包执行缓存、安装、卸载、修改或修复时，它将确保捆绑包在应用开始时已注册并缓存，无论它是否已经注册或缓存（5702）。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">To help users avoid using registry cleaners when a bundle's registration is "stuck", a couple of new command-line options were added.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为了帮助用户避免在捆绑包的注册“卡住”时使用注册表清理工具，添加了几个新的命令行选项。</font></font></font></p><ul data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">-burn.ignoredependencies=ALL means that the engine will skip dependency checks for packages and related bundles that it is going to uninstall.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">-burn.ignoredependencies=ALL 表示引擎将跳过它要卸载的软件包和相关捆绑包的依赖性检查。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">/unsafeuninstall means that the engine will always unregister itself at end of Apply.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">/unsafeuninstall 表示引擎将在应用结束时始终注销自身。</font></font></font></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cache-changes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Cache changes<a href="#cache-changes" class="hash-link" aria-label="Direct link to Cache changes" title="Direct link to Cache changes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">缓存更改</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In v3, the engine attempted to detect individual payloads so that it could plan them individually as well.
This caused problems because it didn't perform full verification during Detect and didn't give enough progress to the BA during Apply.
In v4, the package is considered to be cached if any of its payloads exist in the package cache.
This information is needed for the rules around when the bundle should keep its registration, and never used for whether the package should be cached during Apply.
The plan now only includes cache actions for packages and not payloads or containers.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 v3 中，引擎尝试检测单个有效负载，以便可以单独计划它们。这导致了问题，因为它在检测期间没有执行完全验证，并且在应用期间没有给 BA 足够的进度。在 v4 中，如果包缓存中存在其任何有效负载，则认为包已缓存。此信息对于捆绑包何时应保留其注册的规则是必需的，并且从未用于在应用期间是否应缓存包。现在的计划仅包括包的缓存操作，而不包括有效负载或容器。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The engine now does full verification for the package every time during Apply if it planned to cache it.
The BA is always informed of a payload's progress for acquisition (downloading or copying to the temp cache folder), staging (moving or copying the file from the temp cache folder to the package cache folder), and verification (verifying either the Authenticode signature or the hash and file size).<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果计划缓存包，则引擎现在在每次应用期间都会对包进行完全验证。BA 始终会被告知有效负载的获取（下载或复制到临时缓存文件夹）、暂存（从临时缓存文件夹移动或复制文件到包缓存文件夹）和验证（验证 Authenticode 签名或哈希和文件大小）的进度。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">For each individual payload in a package that is being cached, the engine will first attempt to verify the file in the package cache.
If it fails verification then it will be deleted from there and then will attempt to acquire it.
The engine will try to acquire it from the following sources in ranked order:<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于正在缓存的包中的每个单独有效负载，引擎将首先尝试验证包缓存中的文件。如果验证失败，则会从那里删除它，然后尝试获取它。引擎将尝试从以下来源按顺序获取它：</font></font></font></p><ol data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">If included in a container, the temp cache folder where it was extracted from the container.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果包含在容器中，则为从容器中提取的临时缓存文件夹。</font></font></font></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">If included in a container, the container.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果包含在容器中，则为容器。</font></font></font></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Local locations on the machine.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">机器上的本地位置。</font></font></font></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Download url.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">下载网址。</font></font></font></li></ol><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnCacheAcquireResolving</code> replaces <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnResolveSource</code>.
This allows the BA to override the preferred order above.
The BA can make the engine skip its resolve algorithm altogether by providing the source in <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnCacheAcquireBegin</code>.
The BA can also provide the source in <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnCacheAcquireResolving</code> or <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnCacheAcquireComplete</code> though it has to request a retry in that case.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnCacheAcquireResolving</code> 替换 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnResolveSource</code> 。这允许 BA 覆盖上述首选顺序。BA 可以通过在 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnCacheAcquireBegin</code> 中提供源来使引擎完全跳过其解析算法。BA 也可以在 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnCacheAcquireResolving</code> 或 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">OnCacheAcquireComplete</code> 中提供源，但在这种情况下必须请求重试。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Authenticode verification is only allowed when the user provided the certificate information in the bundle's source code.
Gathering the certificate information during the build is no longer supported.
There are some payloads that must have the source file available at build time, like the .msi for <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">MsiPackage</code>.
It is impossible to use Authenticode verification for these payloads.
Authenticode verification with the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Catalog</code> is no longer supported.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">只有当用户在捆绑包的源代码中提供证书信息时，才允许进行 Authenticode 验证。在构建过程中收集证书信息已不再受支持。有些有效载荷必须在构建时提供源文件，例如 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">MsiPackage</code> 的 .msi。对于这些有效载荷，无法使用 Authenticode 验证。 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Catalog</code> 的 Authenticode 验证已不再受支持。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">If the engine has a download URL for a payload and it can't find it locally, then it will recommend that it be downloaded. In v3, the BA always had to request the download but in v4 the BA will now have to take action if it doesn't want it downloaded.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">如果引擎有一个有效负载的下载 URL 并且在本地找不到它，那么它会建议下载它。在 v3 中，BA 总是必须请求下载，但在 v4 中，如果 BA 不希望下载它，现在必须采取行动。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">During layout, all caching operations are performed in the user-level process and not the elevated process.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在布局期间，所有缓存操作都在用户级进程中执行，而不是在提升的进程中执行。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">When <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixBundleOriginalSource</code> is set and the file at that location exists with the correct size, prefer that location for attached containers (<a href="https://github.com/wixtoolset/issues/issues/5586" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">5586</a>).<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">当 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">WixBundleOriginalSource</code> 被设置并且该位置的文件存在且大小正确时，优先选择该位置用于附加容器（5586）。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rollback-changes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Rollback changes<a href="#rollback-changes" class="hash-link" aria-label="Direct link to Rollback changes" title="Direct link to Rollback changes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">回滚更改</font></font></font></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="error-in-non-vital-rollback-boundary" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Error in non-vital rollback boundary<a href="#error-in-non-vital-rollback-boundary" class="hash-link" aria-label="Direct link to Error in non-vital rollback boundary" title="Direct link to Error in non-vital rollback boundary" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">非关键回滚边界中的错误</font></font></font></h4><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a href="https://github.com/wixtoolset/issues/issues/6309" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">6309</a> makes it work as documented - if a package fails inside of a non-vital rollback boundary then the chain should continue successfully at the next rollback boundary. In v3, the rest of the packages in the rollback boundary were executed.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">6309 使其按文档工作 - 如果包在非关键回滚边界内失败，则链应在下一个回滚边界成功继续。在 v3 中，回滚边界内的其余包被执行。</font></font></font></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="block-rollback-of-packages-that-have-dependents" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Block rollback of packages that have dependents<a href="#block-rollback-of-packages-that-have-dependents" class="hash-link" aria-label="Direct link to Block rollback of packages that have dependents" title="Direct link to Block rollback of packages that have dependents" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">阻止回滚有依赖项的软件包</font></font></font></h4><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">With custom provider keys, it's possible for a bundle's package to have dependents before it's installed.
In v4, the bundle will not rollback the package in this case.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">使用自定义提供程序密钥，捆绑包的软件包在安装之前可能会有依赖项。在 v4 中，捆绑包在这种情况下不会回滚软件包。</font></font></font></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="reinstall-upgrade-related-bundles" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Reinstall upgrade related bundles<a href="#reinstall-upgrade-related-bundles" class="hash-link" aria-label="Direct link to Reinstall upgrade related bundles" title="Direct link to Reinstall upgrade related bundles" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">重新安装升级相关的捆绑包</font></font></font></h4><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><a href="https://github.com/wixtoolset/issues/issues/3421" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">3421</a> - when a bundle fails installing and it has upgrade related bundles, it will run those bundles with the install action during rollback.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">3421 - 当一个捆绑包安装失败并且它有相关的升级捆绑包时，它将在回滚期间使用安装操作运行这些捆绑包。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="clean-room-path-for-elevated-processes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Clean room path for elevated processes<a href="#clean-room-path-for-elevated-processes" class="hash-link" aria-label="Direct link to Clean room path for elevated processes" title="Direct link to Clean room path for elevated processes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">提供给提升权限进程的干净路径</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The clean room path for elevated processes now respects the system level <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">TMP</code>/<code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">TEMP</code> environment variable instead of using the hardcoded Temp folder in the Windows directory.
On newer versions of Windows, if running as SYSTEM it uses C:\Windows\SystemTemp.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">提供给提升权限进程的干净路径现在遵循系统级别的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">TMP</code> / <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">TEMP</code> 环境变量，而不是使用 Windows 目录中硬编码的 Temp 文件夹。在较新版本的 Windows 上，如果以 SYSTEM 身份运行，它将使用 C:\Windows\SystemTemp。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">This can be overriden on the command line or through policy specified in the registry (<a href="https://github.com/wixtoolset/issues/issues/5856" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">5856</a>).<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">这可以在命令行上覆盖，或通过注册表中指定的策略覆盖（5856）。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mixing-bundle-elements-with-non-bundle-elements" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Mixing bundle elements with non-bundle elements<a href="#mixing-bundle-elements-with-non-bundle-elements" class="hash-link" aria-label="Direct link to Mixing bundle elements with non-bundle elements" title="Direct link to Mixing bundle elements with non-bundle elements" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">混合捆绑元素和非捆绑元素</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">A common mistake in v3 was to try to use MSI elements like the NetFx detection properties in a bundle.
In v4, this will generate warnings.
For example:<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">v3 中的一个常见错误是尝试在捆绑包中使用像 NetFx 检测属性这样的 MSI 元素。在 v4 中，这将生成警告。例如：</font></font></font></p><blockquote data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">warning WIX1150: The binder doesn't know how to place the following symbol into the output: SymbolName: 'CustomAction', Id: 'Wix4NetFxScheduleNativeImage_X64'<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">警告 WIX1150：绑定器不知道如何将以下符号放入输出中：符号名称：'CustomAction'，ID：'Wix4NetFxScheduleNativeImage_X64'</font></font></font></p></blockquote><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Unfortunately the changes that were necessary to make these warnings less cryptic were declined so it might be difficult to figure out exactly what is causing this error in your code.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">不幸的是，为了使这些警告不那么隐晦而必须进行的更改被拒绝了，因此可能很难确切地找出代码中导致此错误的原因。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="recommending-or-requiring-detectcondition" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Recommending or Requiring DetectCondition<a href="#recommending-or-requiring-detectcondition" class="hash-link" aria-label="Direct link to Recommending or Requiring DetectCondition" title="Direct link to Recommending or Requiring DetectCondition" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">推荐或要求检测条件</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The engine always knows how to install and uninstall Windows Installer packages, but needs help for uninstalling ExePackages.
v3 had some edge cases where it would try to uninstall an ExePackage even though the user hadn't specified any uninstall arguments or how to detect that it was installed.
There are now checks at build time to make sure that an ExePackage contains a sane combination of the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">DetectCondition</code>, <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">UninstallArguments</code>, and <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Permanent</code> attributes.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">引擎总是知道如何安装和卸载 Windows Installer 包，但需要帮助卸载 ExePackages。v3 有一些边缘情况，即使用户没有指定任何卸载参数或如何检测它是否已安装，它也会尝试卸载 ExePackage。现在在构建时进行检查，以确保 ExePackage 包含合理的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">DetectCondition</code> 、 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">UninstallArguments</code> 和 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Permanent</code> 属性组合。</font></font></font></p><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In v3, specifying an empty string for <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">UninstallCommand</code> was the same as not specifying it.
In v4, if the uninstall command line is empty then <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">UninstallArguements</code> must be specified with an empty string.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 v3 中，为 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">UninstallCommand</code> 指定一个空字符串与不指定它是一样的。在 v4 中，如果卸载命令行为空，则必须用空字符串指定 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">UninstallArguements</code> 。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="msupackages-are-no-longer-uninstallable" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">MsuPackages are no longer uninstallable<a href="#msupackages-are-no-longer-uninstallable" class="hash-link" aria-label="Direct link to MsuPackages are no longer uninstallable" title="Direct link to MsuPackages are no longer uninstallable" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">MsuPackages 不再可卸载</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">See <a href="https://github.com/wixtoolset/issues/issues/6749" target="_blank" rel="noopener noreferrer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">6749</a>.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">见 6749。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dropped-support-for-xp" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Dropped support for XP<a href="#dropped-support-for-xp" class="hash-link" aria-label="Direct link to Dropped support for XP" title="Direct link to Dropped support for XP" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">不再支持 XP</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Bundles are supported on Vista SP2, Server 2008 SP2, or newer.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Vista SP2、Server 2008 SP2 或更新版本支持捆绑包。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dropped-support-for-sha1" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Dropped support for SHA1<a href="#dropped-support-for-sha1" class="hash-link" aria-label="Direct link to Dropped support for SHA1" title="Direct link to Dropped support for SHA1" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">不再支持 SHA1</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Bundles use the SHA512 hash algorithm instead of SHA1 when verifying file hashes.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">捆绑包在验证文件哈希时使用 SHA512 哈希算法代替 SHA1。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="remove-bits-support" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Remove BITS support<a href="#remove-bits-support" class="hash-link" aria-label="Direct link to Remove BITS support" title="Direct link to Remove BITS support" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">移除 BITS 支持</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The BITS protocol is no longer supported in the engine.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">引擎不再支持 BITS 协议。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="change-to-the-default-for-the-visible-attribute-on-msipackage" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Change to the default for the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Visible</code> attribute on <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">MsiPackage</code><a href="#change-to-the-default-for-the-visible-attribute-on-msipackage" class="hash-link" aria-label="Direct link to change-to-the-default-for-the-visible-attribute-on-msipackage" title="Direct link to change-to-the-default-for-the-visible-attribute-on-msipackage" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">更改 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">MsiPackage</code> 上 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Visible</code> 属性的默认值</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">For an <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">MsiPackage</code> with <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Permanent="yes"</code>, the default for <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Visible</code> is now "yes" instead of "no".<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对于具有 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Permanent="yes"</code> 的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">MsiPackage</code> ， <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Visible</code> 的默认值现在是“是”而不是“否”。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="more-accurate-parsing-of-bundle-elements-that-contained-file-information" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">More accurate parsing of Bundle elements that contained file information<a href="#more-accurate-parsing-of-bundle-elements-that-contained-file-information" class="hash-link" aria-label="Direct link to More accurate parsing of Bundle elements that contained file information" title="Direct link to More accurate parsing of Bundle elements that contained file information" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">更准确地解析包含文件信息的 Bundle 元素</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The v3 compiler code for parsing <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Payload</code> elements was reused for other elements with file information, like <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BootstrapperApplication</code>. This means that it sometimes parsed attributes that shouldn't have been allowed on those other elements.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">v3 编译器代码用于解析 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Payload</code> 元素，并被重用于其他包含文件信息的元素，如 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BootstrapperApplication</code> 。这意味着它有时会解析不应在这些其他元素上允许的属性。</font></font></font></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-time-errors-to-prevent-runtime-errors" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Build time errors to prevent runtime errors<a href="#build-time-errors-to-prevent-runtime-errors" class="hash-link" aria-label="Direct link to Build time errors to prevent runtime errors" title="Direct link to Build time errors to prevent runtime errors" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">构建时错误以防止运行时错误</font></font></font></h3><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In v3, bundles could be built in such a way that the engine would work properly at runtime.
There are some scenarios that are now build errors to prevent these runtime errors:<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">在 v3 中，捆绑包可以以一种使引擎在运行时正常工作的方式构建。现在有一些场景会成为构建错误，以防止这些运行时错误：</font></font></font></p><ul data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Each package in the bundle has a cache id, which needs to be unique.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">捆绑包中的每个包都有一个缓存 ID，该 ID 需要是唯一的。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Each payload in the bundle has a relative file path that is used when the payload gets cached or extracted.
In v4, collisions are detected.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">捆绑包中的每个有效负载都有一个相对文件路径，该路径在有效负载被缓存或提取时使用。在 v4 中，会检测到冲突。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Payloads must either be for the BootstrapperApplication or for a package/external payload.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">负载必须是引导程序应用程序或包/外部负载。</font></font></font></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-time-errors-to-catch-likely-mistakes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Build time errors to catch likely mistakes<a href="#build-time-errors-to-catch-likely-mistakes" class="hash-link" aria-label="Direct link to Build time errors to catch likely mistakes" title="Direct link to Build time errors to catch likely mistakes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">构建时错误以捕捉可能的错误</font></font></font></h3><ul data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">A package can't be assigned to multiple containers because the engine only supports one.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">一个包不能分配给多个容器，因为引擎只支持一个。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">All packages and rollback boundaries must be included in the chain.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">所有包和回滚边界必须包含在链中。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">All payloads must be referenced by the BootstrapperApplication, a package, or as an external payload.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">所有有效负载必须由 BootstrapperApplication、包或作为外部有效负载引用。</font></font></font></p></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">More stringent checks to prohibit reserved bundle ids.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">更严格的检查以禁止保留的捆绑包 ID。</font></font></font></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-that-should-be-handled-by-wix-convert" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Changes that should be handled by <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">wix convert</code><a href="#changes-that-should-be-handled-by-wix-convert" class="hash-link" aria-label="Direct link to changes-that-should-be-handled-by-wix-convert" title="Direct link to changes-that-should-be-handled-by-wix-convert" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">应由 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">wix convert</code> 处理的更改</font></font></font></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bootstrapperapplicationdll" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">BootstrapperApplicationDll<a href="#bootstrapperapplicationdll" class="hash-link" aria-label="Direct link to BootstrapperApplicationDll" title="Direct link to BootstrapperApplicationDll" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">BootstrapperApplicationDll</font></font></font></h4><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">In order for the Bal extension to include the correct architecture, the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BootstrapperApplication</code> element changed to be something that can be specified multiple times.
The file information for that moved to the new <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BoostrapperApplicationDll</code> element.
The optional v3 elements <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:WixStandardBootstrapperApplication</code> or <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:WixManagedBootstrapperApplicationHost</code> are required in v4, and the theme is specified in the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Theme</code> attribute instead of using a <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BootstrapperApplicationRef</code>.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">为了使 Bal 扩展包含正确的架构， <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BootstrapperApplication</code> 元素已更改为可以多次指定的内容。该文件信息已移至新的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BoostrapperApplicationDll</code> 元素。可选的 v3 元素 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:WixStandardBootstrapperApplication</code> 或 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">bal:WixManagedBootstrapperApplicationHost</code> 在 v4 中是必需的，主题在 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Theme</code> 属性中指定，而不是使用 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BootstrapperApplicationRef</code> 。</font></font></font></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="replace-customtable-with-bundlecustomdata" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Replace CustomTable with BundleCustomData<a href="#replace-customtable-with-bundlecustomdata" class="hash-link" aria-label="Direct link to Replace CustomTable with BundleCustomData" title="Direct link to Replace CustomTable with BundleCustomData" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">将 CustomTable 替换为 BundleCustomData</font></font></font></h4><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Bundles include a file for the BA with data about the bundle in BootstrapperApplicationData.xml.
In v3, arbitrary data could be added to that file with <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">CustomTable</code>.
In v4, use <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BundleCustomData</code> instead.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">捆绑包包括一个文件 BA，其中包含有关捆绑包的数据，位于 BootstrapperApplicationData.xml 中。在 v3 中，可以使用 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">CustomTable</code> 将任意数据添加到该文件中。在 v4 中，请改用 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">BundleCustomData</code> 。</font></font></font></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="rename-exepackage-command-line-attributes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Rename ExePackage command line attributes<a href="#rename-exepackage-command-line-attributes" class="hash-link" aria-label="Direct link to Rename ExePackage command line attributes" title="Direct link to Rename ExePackage command line attributes" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">重命名 ExePackage 命令行属性</font></font></font></h4><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">InstallCommand</code>, <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">RepairCommand</code>, <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">UninstallCommand</code> renamed to <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">InstallArguments</code>, <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">RepairArguments</code>, <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">UninstallArguments</code>.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1"> <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">InstallCommand</code> , <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">RepairCommand</code> , <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">UninstallCommand</code> 重命名为 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">InstallArguments</code> , <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">RepairArguments</code> , <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">UninstallArguments</code> 。</font></font></font></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="redesign-remotepayload-and-each-of-the-package-elements" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Redesign RemotePayload and each of the Package elements<a href="#redesign-remotepayload-and-each-of-the-package-elements" class="hash-link" aria-label="Direct link to Redesign RemotePayload and each of the Package elements" title="Direct link to Redesign RemotePayload and each of the Package elements" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">​</a><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">重新设计 RemotePayload 和每个 Package 元素</font></font></font></h4><p data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Elements like <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">MsiPackage</code> actually contained two different concepts - the package's main file (e.g. <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">SourceFile</code> and <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">DownloadUrl</code>) and information about how and when to (un)install the package (e.g. <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">InstallCondition</code> and <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Permanent</code>).
In v4, information about the package's main file should be specified in a new element, e.g. <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">MsiPackagePayload</code> for <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">MsiPackage</code>.
For backwards compatibility, it was decided to continue to allow the core file information on the package element as long as the child package payload elements is not also specified.
<code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">RemotePayload</code> was removed and the appropriate package payload must be used instead.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">像 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">MsiPackage</code> 这样的元素实际上包含了两个不同的概念——包的主文件（例如 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">SourceFile</code> 和 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">DownloadUrl</code> ）以及有关如何和何时（卸载）安装包的信息（例如 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">InstallCondition</code> 和 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Permanent</code> ）。在 v4 中，有关包主文件的信息应在一个新元素中指定，例如 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">MsiPackagePayload</code> 用于 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">MsiPackage</code> 。为了向后兼容，决定继续允许在包元素上包含核心文件信息，只要不同时指定子包负载元素。 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">RemotePayload</code> 已被移除，必须使用适当的包负载。</font></font></font></p></div><footer class="theme-doc-footer docusaurus-mt-lg" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="theme-doc-footer-edit-meta-row row" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="col" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="https://github.com/wixtoolset/web/tree/master/src/Docusaurus/docs/fourthree/faqs.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">编辑此页面</font></font></font></a></div><div class="col lastUpdated_vwxv" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a class="pagination-nav__link pagination-nav__link--prev" href="/wixtoolset/docs/fourthree/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="pagination-nav__sublabel" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Previous<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">以前</font></font></font></div><div class="pagination-nav__label" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">WiX v4 for WiX v3 users<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">WiX v4 给 WiX v3 用户</font></font></font></div></a><a class="pagination-nav__link pagination-nav__link--next" href="/wixtoolset/docs/tools/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="pagination-nav__sublabel" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Next<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">下一步</font></font></font></div><div class="pagination-nav__label" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">WiX tools and concepts<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">WiX 工具和概念</font></font></font></div></a></nav></div></div><div class="col col--3" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><ul class="table-of-contents table-of-contents__left-border" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#converting-packages" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Converting packages<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">转换包</font></font></font></a><ul data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#converting-the-componentwin64-attribute" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Converting the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Component/@Win64</code> attribute<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">转换 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Component/@Win64</code> 属性</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#wixext34" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">WiX v3 extensions in WiX v4<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">WiX v3 扩展在 WiX v4 中</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#customactionids" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Converting custom action ids<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">转换自定义操作 ID</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#referencing-the-standard-wixui-dialog-sets" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Referencing the standard WixUI dialog sets<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">参考标准的 WixUI 对话框集</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#converting-custom-wixui-dialog-sets" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Converting custom WixUI dialog sets<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">转换自定义 WixUI 对话框集</font></font></font></a></li></ul></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#converting-bundles" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Converting bundles<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">转换捆绑包</font></font></font></a><ul data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#the-v3-variables-string-type-is-now-called-formatted" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The v3 Variable's <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">string</code> type is now called <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">formatted</code><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">v3 变量的 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">string</code> 类型现在称为 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">formatted</code> </font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#the-condition-operator--works-differently-with-empty-or-null-strings" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">The condition operator <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">~&lt;&gt;</code> works differently with empty or null strings<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">条件运算符 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">~&lt;&gt;</code> 在处理空字符串或 null 字符串时的工作方式不同</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#backwards-compatibility-guarantees-for-bootstrapper-applications" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Backwards compatibility guarantees for Bootstrapper Applications<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对引导程序应用程序的向后兼容性保证</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#backwards-compatibility-guarantees-for-bafunctions-and-specifying-its-dll-at-build-time" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Backwards compatibility guarantees for BAFunctions and specifying its dll at build time<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">对 BAFunctions 的向后兼容性保证以及在构建时指定其 dll</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#x64-and-arm64-bundles" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">x64 and ARM64 bundles<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">x64 和 ARM64 捆绑包</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#wixstdba-behavior-changes" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">wixstdba behavior changes<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">wixstdba 行为变化</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#upgrading-v3-managed-bootstrapper-applications" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Upgrading v3 Managed Bootstrapper Applications<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">升级 v3 管理引导程序应用程序</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#specifying-the-managed-ba-prerequisite" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Specifying the Managed BA prerequisite<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">指定托管 BA 的先决条件</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#prereq-ba-changes" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Prereq BA changes<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">先决条件 BA 更改</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#removal-of-displayinternalui" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Removal of DisplayInternalUI<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">删除 DisplayInternalUI</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#upgrading-custom-wixstdba-themes" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Upgrading custom wixstdba themes<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">升级自定义 wixstdba 主题</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#high-dpi-changes" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">High DPI changes<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">高 DPI 更改</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#balutil-and-wixtoolsetmbacore-breaking-changes" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">balutil and WixToolset.Mba.Core breaking changes<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">balutil 和 WixToolset.Mba.Core 重大更改</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#changes-to-msipackage-detection" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Changes to MsiPackage detection<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">MsiPackage 检测的更改</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#changes-to-related-bundle-detection" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Changes to related bundle detection<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">相关捆绑包检测的更改</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#changes-to-package-caching" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Changes to package caching<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">包缓存的更改</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#timing-changes-for-detection" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Timing changes for detection<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">检测时间变化</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#plan-changes" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Plan changes<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">计划变更</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#execute-changes" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Execute changes<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">执行变更</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#active-engine-changes" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Active engine changes<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">活动引擎更改</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#version-handling" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Version handling<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">版本处理</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#hidden-variables" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Hidden Variables<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">隐藏变量</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#utilregistrysearch-changes" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">util:RegistrySearch changes<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">util:注册表搜索更改</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#registration-changes" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Registration changes<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">注册更改</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#cache-changes" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Cache changes<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">缓存更改</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#rollback-changes" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Rollback changes<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">回滚更改</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#clean-room-path-for-elevated-processes" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Clean room path for elevated processes<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">清理提升进程的路径</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#mixing-bundle-elements-with-non-bundle-elements" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Mixing bundle elements with non-bundle elements<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">将捆绑元素与非捆绑元素混合</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#recommending-or-requiring-detectcondition" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Recommending or Requiring DetectCondition<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">推荐或要求检测条件</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#msupackages-are-no-longer-uninstallable" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">MsuPackages are no longer uninstallable<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">MsuPackages 不再可卸载</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#dropped-support-for-xp" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Dropped support for XP<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">不再支持 XP</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#dropped-support-for-sha1" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Dropped support for SHA1<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">不再支持 SHA1</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#remove-bits-support" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Remove BITS support<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">移除 BITS 支持</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#change-to-the-default-for-the-visible-attribute-on-msipackage" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Change to the default for the <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Visible</code> attribute on <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">MsiPackage</code><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">更改 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">MsiPackage</code> 上 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">Visible</code> 属性的默认值</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#more-accurate-parsing-of-bundle-elements-that-contained-file-information" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">More accurate parsing of Bundle elements that contained file information<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">更准确地解析包含文件信息的 Bundle 元素</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#build-time-errors-to-prevent-runtime-errors" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Build time errors to prevent runtime errors<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">构建时错误以防止运行时错误</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#build-time-errors-to-catch-likely-mistakes" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Build time errors to catch likely mistakes<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">构建时错误以捕捉可能的错误</font></font></font></a></li><li data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="#changes-that-should-be-handled-by-wix-convert" class="table-of-contents__link toc-highlight" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Changes that should be handled by <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">wix convert</code><font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">应由 <code data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">wix convert</code> 处理的更改</font></font></font></a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="container container-fluid" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="row footer__links" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="col footer__col" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="footer__title" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"></div><ul class="footer__items clean-list" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li class="footer__item" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">
                  <p class="footer_label" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Support provided by<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">提供的支持</font></font></font></p>
                  <a href="https://www.firegiant.com/?utm_source=wixtoolset.org&amp;utm_medium=Display&amp;utm_content=footer" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">
                    <img src="/img/firegiant.png" alt="FireGiant" width="83.6875" height="22.5" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5">
                  </a>
                </li></ul></div><div class="col footer__col" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="footer__title" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Community<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">社区</font></font></font></div><ul class="footer__items clean-list" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li class="footer__item" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="https://stackoverflow.com/questions/tagged/wix" target="_blank" rel="noopener noreferrer" class="footer__link-item" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Stack Overflow<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">Stack 溢出</font></font></font><svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="https://www.youtube.com/wixtoolset" target="_blank" rel="noopener noreferrer" class="footer__link-item" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="https://twitter.com/wixtoolset" target="_blank" rel="noopener noreferrer" class="footer__link-item" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Twitter<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">推特</font></font></font><svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="footer__title" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">More<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">更多</font></font></font></div><ul class="footer__items clean-list" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><li class="footer__item" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a class="footer__link-item" href="/wixtoolset/news/" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">News<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">新闻</font></font></font></a></li><li class="footer__item" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="https://www.firegiant.com/services/" target="_blank" rel="noopener noreferrer" class="footer__link-item" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Enterprise<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><font class="notranslate" data-immersive-translate-translation-element-mark="1">&nbsp;</font><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-inline-wrapper-theme-none immersive-translate-target-translation-inline-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">企业</font></font></font><svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><a href="https://github.com/wixtoolset/web" target="_blank" rel="noopener noreferrer" class="footer__link-item" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5"><div class="footer__copyright" data-immersive-translate-walked="a10657d2-ef2c-4022-a9cf-6b79b6ab4ce5" data-immersive-translate-paragraph="1">Copyright © 2024 .NET Foundation and contributors.<font class="notranslate immersive-translate-target-wrapper" data-immersive-translate-translation-element-mark="1" lang="zh-CN"><br><font class="notranslate immersive-translate-target-translation-theme-none immersive-translate-target-translation-block-wrapper-theme-none immersive-translate-target-translation-block-wrapper" data-immersive-translate-translation-element-mark="1"><font class="notranslate immersive-translate-target-inner immersive-translate-target-translation-theme-none-inner" data-immersive-translate-translation-element-mark="1">版权所有 © 2024 .NET 基金会及贡献者。</font></font></font></div></div></div></footer></div>
<script src="/wixtoolset/assets/js/runtime~main.d4837c13.js"></script>
<script src="/wixtoolset/assets/js/main.81f55813.js"></script>

</body></html>