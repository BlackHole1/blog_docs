"use strict";(self.webpackChunkwixweb=self.webpackChunkwixweb||[]).push([[42510],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>b});var r=t(67294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var l=r.createContext({}),u=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},c=function(e){var n=u(e.components);return r.createElement(l.Provider,{value:n},e.children)},g="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),g=u(t),d=i,b=g["".concat(l,".").concat(d)]||g[d]||p[d]||o;return t?r.createElement(b,a(a({ref:n},c),{},{components:t})):r.createElement(b,a({ref:n},c))}));function b(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var o=t.length,a=new Array(o);a[0]=d;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[g]="string"==typeof e?e:i,a[1]=s;for(var u=2;u<o;u++)a[u]=t[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},4202:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>b,frontMatter:()=>s,metadata:()=>u,toc:()=>g});t(67294);var r=t(3905);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function a(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}const s={title:"Insignia",layout:"documentation",after:"heat"},l="Insignia",u={unversionedId:"overview/insignia",id:"version-v3/overview/insignia",title:"Insignia",description:"Insignia is a tool used for inscribing an MSI with the digital signatures that its external CABs are signed with.",source:"@site/versioned_docs/version-v3/overview/insignia.md",sourceDirName:"overview",slug:"/overview/insignia",permalink:"/wixtoolset/docs/v3/overview/insignia",draft:!1,editUrl:"https://github.com/wixtoolset/web/tree/master/src/Docusaurus/versioned_docs/version-v3/overview/insignia.md",tags:[],version:"v3",frontMatter:{title:"Insignia",layout:"documentation",after:"heat"}},c={},g=[],p={toc:g},d="wrapper";function b(e){var{components:n}=e,t=a(e,["components"]);return(0,r.kt)(d,o(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){i(e,n,t[n])}))}return e}({},p,t),{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"insignia"},"Insignia"),(0,r.kt)("p",null,"Insignia is a tool used for inscribing an MSI with the digital signatures that its external CABs are signed with."),(0,r.kt)("p",null,"To sign your external cabs with Insignia, first build your MSI normally,\nand sign your cabs manually. Then call Insignia with the path to your MSI -\nInsignia will update your MSI with the digital signature information of its\nassociated external cabs. The file will be updated in-place. Then sign your MSI.\nThis will allow windows installer to verify, at install-time, that the external\ncabs haven","'","t changed since you built them. For example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"insignia -im setup.msi\n")),(0,r.kt)("p",null,"If you use MSBuild, an easier method for doing this exists. In your .wixproj file,\nset the ",'"',"SignOutput",'"'," property to ",'"',"true",'"',". Then override the ",'"',"SignCabs",'"'," target,\nusing the ",'"',"SignCabs",'"'," property as a list of cabs to sign, to sign the external cabs.\nHere","'","s an example signing those cabs using signtool.exe:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'  <Target Name="SignCabs">\n    <Exec Command="Signtool.exe sign /a &quot;%(SignCabs.FullPath)&quot;" />\n  </Target>\n')),(0,r.kt)("p",null,"Finally, override the ",'"',"SignMsi",'"'," target. Here","'","s a similar example, also using signtool.exe."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'  <Target Name="SignMsi">\n    <Exec Command="signtool.exe sign /a &quot;%(SignMsi.FullPath)&quot;" />\n  </Target>\n')),(0,r.kt)("p",null,"This will cause the build process, after linking the MSI, to sign any external cabs, inscribe your MSI\nwith the digital signatures of those cabs, and then sign the MSI, all at the appropriate times during the build process."),(0,r.kt)("p",null,"Insignia can also be used to detach and re-attach the burn engine from a bundle, so that\nit can be signed. For example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"insignia -ib bundle.exe -o engine.exe\n... sign engine.exe\ninsignia -ab engine.exe bundle.exe -o bundle.exe\n... sign bundle.exe\n")),(0,r.kt)("p",null,"Again, there is an easier method with MSBuild. Set the ",'"',"SignOutput",'"',"\nproperty to ",'"',"true",'"',", then override the ",'"',"SignBundleEngine",'"'," and\n",'"',"SignBundle",'"'," targets. For example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'  <Target Name="SignBundleEngine">\n    <Exec Command="Signtool.exe sign /a &quot;@(SignBundleEngine)&quot;" />\n  </Target>\n  <Target Name="SignBundle">\n    <Exec Command="Signtool.exe sign /a &quot;@(SignBundle)&quot;" />\n  </Target>\n')))}b.isMDXComponent=!0}}]);