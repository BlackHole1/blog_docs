"use strict";(self.webpackChunkwixweb=self.webpackChunkwixweb||[]).push([[2854],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>f});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),l=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=l(n),h=a,f=p["".concat(c,".").concat(h)]||p[h]||d[h]||o;return n?r.createElement(f,i(i({ref:t},u),{},{components:n})):r.createElement(f,i({ref:t},u))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=h;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[p]="string"==typeof e?e:a,i[1]=s;for(var l=2;l<o;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},24452:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>f,frontMatter:()=>s,metadata:()=>l,toc:()=>p});n(67294);var r=n(3905);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const s={title:"Define Searches Using Variables",layout:"documentation",after:"bundle_built_in_variables"},c="Define Searches Using Variables",l={unversionedId:"bundle/bundle_define_searches",id:"version-v3/bundle/bundle_define_searches",title:"Define Searches Using Variables",description:"Searches are used to detect if the target machine meets certain conditions. The result of a search is stored into a variable. Variables are then used to construct install conditions. The search schemas are in the WixUtilExtension. Here is the list of supported searches:",source:"@site/versioned_docs/version-v3/bundle/bundle_define_searches.md",sourceDirName:"bundle",slug:"/bundle/bundle_define_searches",permalink:"/wixtoolset/docs/v3/bundle/bundle_define_searches",draft:!1,editUrl:"https://github.com/wixtoolset/web/tree/master/src/Docusaurus/versioned_docs/version-v3/bundle/bundle_define_searches.md",tags:[],version:"v3",frontMatter:{title:"Define Searches Using Variables",layout:"documentation",after:"bundle_built_in_variables"}},u={},p=[],d={toc:p},h="wrapper";function f(e){var{components:t}=e,n=i(e,["components"]);return(0,r.kt)(h,o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}({},d,n),{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"define-searches-using-variables"},"Define Searches Using Variables"),(0,r.kt)("p",null,"Searches are used to detect if the target machine meets certain conditions. The result of a search is stored into a variable. Variables are then used to construct install conditions. The search schemas are in the WixUtilExtension. Here is the list of supported searches:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/wixtoolset/docs/v3/xsd/util/filesearch"},"FileSearch")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/wixtoolset/docs/v3/xsd/util/registrysearch"},"RegistrySearch")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/wixtoolset/docs/v3/xsd/util/directorysearch"},"DirectorySearch")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/wixtoolset/docs/v3/xsd/util/componentsearch"},"ComponentSearch")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/wixtoolset/docs/v3/xsd/util/productsearch"},"ProductSearch"))),(0,r.kt)("p",null,"A search can be dependent on the result of another search. Keep in mind that all searches are in the WiXUtilExtension. So remember to add the WiXUtilExtension namespace in the authoring. Here is an example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0"?>\n<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"\n     xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">\n  <Fragment>\n    <util:RegistrySearch Id="Path"\n        Variable="UniqueId"\n        Root="HKLM"\n        Key="Software\\MyCompany\\MyProduct\\Unique Id\\Product"\n        Result="Value" />\n    <util:RegistrySearch \n        Variable="patchLevel"\n        Root="HKLM"\n        Key="Software\\MyCompany\\MyProduct\\[UniqueId]\\Setup\\PatchLevel"\n        Result="Exists" \n        After="Path" />\n  </Fragment>\n</Wix>\n')),(0,r.kt)("p",null,"After the searches are defined and stored into variables, the variables can then be used in install conditions. For example, you can use the result of the registry searches in the install condition of your package by adding both the searches and the install conditions. Here","'","s an example of a complete fragment that contains a package definition with conditions and searches:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'<?xml version="1.0"?>\n <Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"\n      xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">\n  <Fragment>\n    <util:RegistrySearch Id="Path"\n        Variable="UniqueId"\n        Root="HKLM"\n        Key="Software\\MyCompany\\MyProduct\\Unique Id\\Product"\n        Result="Value" />\n    <util:RegistrySearch \n        Variable="patchLevel"\n        Root="HKLM"\n        Key="Software\\MyCompany\\MyProduct\\[UniqueId]\\Setup\\PatchLevel"\n        Result="Exists" \n        After="Path" />\n\n    <PackageGroup Id="MyPackage">\n      <ExePackage \n        SourceFile="[sources]\\packages\\shared\\MyPackage.exe"\n        DownloadURL="http://mywebdomain.com/?mypackage.exe"\n        InstallCommand="/q /ACTION=Install"\n        RepairCommand="/q ACTION=Repair /hideconsole"\n        UninstallCommand="/q ACTION=Uninstall /hideconsole"\n        InstallCondition="x86 = 1 AND OSVersion >= v5.0.5121.0 AND patchLevel = 0" />\n    </PackageGroup>\n  </Fragment>\n</Wix>\n')),(0,r.kt)("p",null,"Now you have a fully-defined fragment that can be shared to be consumed by other Burn packages. To see how to chain this package into a Burn package, see ",(0,r.kt)("a",{parentName:"p",href:"/wixtoolset/docs/v3/bundle/bundle_author_chain"},"Chain Packages into a Bundle"),"."))}f.isMDXComponent=!0}}]);