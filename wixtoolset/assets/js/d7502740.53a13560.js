"use strict";(self.webpackChunkwixweb=self.webpackChunkwixweb||[]).push([[89983],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>f});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(n),m=o,f=p["".concat(s,".").concat(m)]||p[m]||d[m]||a;return n?r.createElement(f,i(i({ref:t},u),{},{components:n})):r.createElement(f,i({ref:t},u))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:o,i[1]=l;for(var c=2;c<a;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},48329:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>f,frontMatter:()=>l,metadata:()=>c,toc:()=>p});n(67294);var r=n(3905);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const l={wip:4991,type:"Feature",by:"Sean Hall (r sean hall at gmail.com)",title:"Handling of related bundles missing from cache",draft:!1},s=void 0,c={unversionedId:"development/wips/handling-of-related-bundles-missing-from-cache",id:"development/wips/handling-of-related-bundles-missing-from-cache",title:"Handling of related bundles missing from cache",description:"User stories",source:"@site/docs/development/wips/4991-handling-of-related-bundles-missing-from-cache.md",sourceDirName:"development/wips",slug:"/development/wips/handling-of-related-bundles-missing-from-cache",permalink:"/wixtoolset/docs/development/wips/handling-of-related-bundles-missing-from-cache",draft:!1,editUrl:"https://github.com/wixtoolset/web/tree/master/src/Docusaurus/docs/development/wips/4991-handling-of-related-bundles-missing-from-cache.md",tags:[],version:"current",sidebarPosition:4991,frontMatter:{wip:4991,type:"Feature",by:"Sean Hall (r sean hall at gmail.com)",title:"Handling of related bundles missing from cache",draft:!1},sidebar:"docsSidebar",previous:{title:"Make BAFunctions Interface Binary and Forward All BA Messages",permalink:"/wixtoolset/docs/development/wips/make-bafunctions-interface-binary"},next:{title:"Prevent DLL Hijacking Burn with Clean Room",permalink:"/wixtoolset/docs/development/wips/burn-clean-room"}},u={},p=[{value:"User stories",id:"user-stories",level:2},{value:"Example scenario",id:"example-scenario",level:2},{value:"Proposal",id:"proposal",level:2},{value:"Considerations",id:"considerations",level:2},{value:"See Also",id:"see-also",level:2}],d={toc:p},m="wrapper";function f(e){var{components:t}=e,n=i(e,["components"]);return(0,r.kt)(m,a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},d,n),{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"user-stories"},"User stories"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"As a Setup developer I can receive notifications of related bundles that are installed but missing from the cache such that my bundle can successfully perform the requested action from the user.")),(0,r.kt)("h2",{id:"example-scenario"},"Example scenario"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Install BundleA v1.0."),(0,r.kt)("li",{parentName:"ol"},"Delete BundleA from the package cache (default for per-machine is C:\\ProgramData\\Package Cache)."),(0,r.kt)("li",{parentName:"ol"},"Run BundleA v1.1 which is supposed to do a major upgrade of BundleA v1.0 from step 1."),(0,r.kt)("li",{parentName:"ol"},"BA is not notified of BundleA v1.0 because it's not present in the package cache."),(0,r.kt)("li",{parentName:"ol"},"BundleA v1.1 installs as if BundleA v1.0 is not installed on the machine."),(0,r.kt)("li",{parentName:"ol"},"BundleA v1.1 and BundleA v1.0 are now both installed and the BA had no way to know this without manually checking for related bundles.")),(0,r.kt)("h2",{id:"proposal"},"Proposal"),(0,r.kt)("p",null,"To allow the BA to know about a related bundle that is registered in ARP but not in the package cache,\nadd a new parameter to ",(0,r.kt)("inlineCode",{parentName:"p"},"OnDetectRelatedBundle"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"// Indicates whether the related bundle is missing from the package cache.\nBOOL fMissingFromCache;\n")),(0,r.kt)("p",null,"During ",(0,r.kt)("inlineCode",{parentName:"p"},"Plan"),", related bundles that are missing from the cache will be skipped just as they are today.\nNo messages for that related bundle will be sent to the BA during planning since it is impossible to run the bundle if it's missing."),(0,r.kt)("h2",{id:"considerations"},"Considerations"),(0,r.kt)("p",null,"The functionality for helping the BA re-cache the bundle inside the chain was moved to the WIP for #5504."),(0,r.kt)("h2",{id:"see-also"},"See Also"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/wixtoolset/issues/issues/4991"},"WIXBUG:4991")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/wixtoolset/issues/issues/5504"},"WIXBUG:4991"))))}f.isMDXComponent=!0}}]);