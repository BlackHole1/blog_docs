"use strict";(self.webpackChunkwixweb=self.webpackChunkwixweb||[]).push([[80145],{3905:(e,t,o)=>{o.d(t,{Zo:()=>c,kt:()=>y});var r=o(67294);function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){i(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function a(e,t){if(null==e)return{};var o,r,i=function(e,t){if(null==e)return{};var o,r,i={},n=Object.keys(e);for(r=0;r<n.length;r++)o=n[r],t.indexOf(o)>=0||(i[o]=e[o]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}var s=r.createContext({}),u=function(e){var t=r.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):l(l({},t),e)),o},c=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var o=e.components,i=e.mdxType,n=e.originalType,s=e.parentName,c=a(e,["components","mdxType","originalType","parentName"]),p=u(o),h=i,y=p["".concat(s,".").concat(h)]||p[h]||d[h]||n;return o?r.createElement(y,l(l({ref:t},c),{},{components:o})):r.createElement(y,l({ref:t},c))}));function y(e,t){var o=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var n=o.length,l=new Array(n);l[0]=h;var a={};for(var s in t)hasOwnProperty.call(t,s)&&(a[s]=t[s]);a.originalType=e,a[p]="string"==typeof e?e:i,l[1]=a;for(var u=2;u<n;u++)l[u]=o[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,o)}h.displayName="MDXCreateElement"},20200:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>y,frontMatter:()=>a,metadata:()=>u,toc:()=>p});o(67294);var r=o(3905);function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function n(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})),e}function l(e,t){if(null==e)return{};var o,r,i=function(e,t){if(null==e)return{};var o,r,i={},n=Object.keys(e);for(r=0;r<n.length;r++)o=n[r],t.indexOf(o)>=0||(i[o]=e[o]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}const a={title:"Integrating WiX Projects Into Daily Builds",layout:"documentation"},s="Integrating WiX Projects Into Daily Builds",u={unversionedId:"msbuild/daily_builds",id:"version-v3/msbuild/daily_builds",title:"Integrating WiX Projects Into Daily Builds",description:"One of the most common reasons for using MSBuild with WiX project files is to integrate the build of an installer into an existing daily build process. This is often coupled with a need to build WiX projects without having to pre-install any WiX tools on the daily build machine. WiX projects and the WiX tools to build them can be added to most daily build processes that support MSBuild using a few simple steps.",source:"@site/versioned_docs/version-v3/msbuild/daily_builds.md",sourceDirName:"msbuild",slug:"/msbuild/daily_builds",permalink:"/wixtoolset/docs/v3/msbuild/daily_builds",draft:!1,editUrl:"https://github.com/wixtoolset/web/tree/master/src/Docusaurus/versioned_docs/version-v3/msbuild/daily_builds.md",tags:[],version:"v3",frontMatter:{title:"Integrating WiX Projects Into Daily Builds",layout:"documentation"}},c={},p=[{value:"Step 1: Check in the WiX Tools",id:"step-1-check-in-the-wix-tools",level:2},{value:"Step 2: Modify Your .wixproj File",id:"step-2-modify-your-wixproj-file",level:2},{value:"Step 3: Modernize Your .wixproj File",id:"step-3-modernize-your-wixproj-file",level:2}],d={toc:p},h="wrapper";function y(e){var{components:t}=e,o=l(e,["components"]);return(0,r.kt)(h,n(function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),r.forEach((function(t){i(e,t,o[t])}))}return e}({},d,o),{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"integrating-wix-projects-into-daily-builds"},"Integrating WiX Projects Into Daily Builds"),(0,r.kt)("p",null,"One of the most common reasons for using MSBuild with WiX project files is to integrate the build of an installer into an existing daily build process. This is often coupled with a need to build WiX projects without having to pre-install any WiX tools on the daily build machine. WiX projects and the WiX tools to build them can be added to most daily build processes that support MSBuild using a few simple steps."),(0,r.kt)("h2",{id:"step-1-check-in-the-wix-tools"},"Step 1: Check in the WiX Tools"),(0,r.kt)("p",null,"To avoid having to install WiX on build machines you can check all the tools necessary to build WiX projects into your source code control system. Here","'","s how:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Create a directory in your source code control system to hold the WiX tools. It","'","s common to create a numbered subdirectory matching the version of WiX that you","'","re checking in. Ex: ",(0,r.kt)("strong",{parentName:"li"},"wix311")),(0,r.kt)("li",{parentName:"ol"},"Unzip the contents of ",(0,r.kt)("strong",null,"wix311-binaries.zip","\\","*")," into the directory created in step 1."),(0,r.kt)("li",{parentName:"ol"},"If you use Deployment Tools Foundation or the WiX SDK header files and libraries, create a parallel directory tree to the one you created in step 1 and copy the contents of ",(0,r.kt)("strong",null,"wix311-binaries.zip\\sdk","\\","*")," into that directory."),(0,r.kt)("li",{parentName:"ol"},"Add and check in the files from steps 1 through 3.")),(0,r.kt)("h2",{id:"step-2-modify-your-wixproj-file"},"Step 2: Modify Your .wixproj File"),(0,r.kt)("p",null,"After checking the WiX tools into source code control the .wixproj file must be modified to point to the location of the checked in tools. Open the .wixproj file in any text editor, such as Visual Studio, and add the following to the file anywhere between the ","<","Project",">"," element before the ","<","Import",">"," element:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<PropertyGroup>\n  <WixToolPath>$(SourceCodeControlRoot)\\wix311\\</WixToolPath>\n  <WixTargetsPath>$(WixToolPath)Wix.targets</WixTargetsPath>\n  <WixTasksPath>$(WixToolPath)wixtasks.dll</WixTasksPath>\n</PropertyGroup>\n")),(0,r.kt)("p",null,"The WixToolPath must be set to point to the location of the WiX tools directory created in Step 1. The method used to reference the location will vary depending on your build system, but common choices are an MSBuild property that is set via an environment variable (such as ",(0,r.kt)("strong",{parentName:"p"},"$(BinariesRoot)")," in a Team Foundation Server build) or a custom property passed in on the command-line."),(0,r.kt)("p",null,"You can also use a relative path to the directory (such as ",(0,r.kt)("strong",null,"..","\\","..","\\","tools","\\"),"), but note that the WixTargetsPath property value must be relative to the .wixproj project file that uses it. The WixTasksPath property is used inside wix.targets to load WixTasks.dll; its value, if a relative path, must be relative to the wix.targets file. Those two files usually live together, so the value would be WixTasks.dll with no extra path information."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note that WixToolPath must end in a backslash.")),(0,r.kt)("h2",{id:"step-3-modernize-your-wixproj-file"},"Step 3: Modernize Your .wixproj File"),(0,r.kt)("p",null,"Finally, ensure your .wixproj is up to date to work properly in current MSBuild. The bottom of your .wixproj should look like the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<Import Project=\"$(WixTargetsPath)\" Condition=\" '$(WixTargetsPath)' != '' \" />\n<Import Project=\"$(MSBuildExtensionsPath32)\\Microsoft\\WiX\\v3.x\\wix.targets\" Condition=\" '$(WixTargetsPath)' == '' AND Exists('$(MSBuildExtensionsPath32)\\Microsoft\\WiX\\v3.x\\wix.targets') \" />\n<Target Name=\"EnsureWixToolsetInstalled\" Condition=\" '$(WixTargetsImported)' != 'true' \">\n  <Error Text=\"The WiX Toolset v3.11 build tools must be installed to build this project. To download the WiX Toolset, see https://wixtoolset.org/releases/v3.11/stable\" />\n</Target>\n")),(0,r.kt)("p",null,"The double ",(0,r.kt)("inlineCode",{parentName:"p"},"Import")," ensures that MSBuild can find the default installed location for ",(0,r.kt)("inlineCode",{parentName:"p"},"wix.targets")," when the ",(0,r.kt)("inlineCode",{parentName:"p"},"WixTargetsPath")," MSBuild Property is not set."))}y.isMDXComponent=!0}}]);