"use strict";(self.webpackChunkwixweb=self.webpackChunkwixweb||[]).push([[87265],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),l=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=l(n),f=o,m=p["".concat(c,".").concat(f)]||p[f]||d[f]||a;return n?r.createElement(m,i(i({ref:t},u),{},{components:n})):r.createElement(m,i({ref:t},u))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=f;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[p]="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},9318:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>m,frontMatter:()=>s,metadata:()=>l,toc:()=>p});n(67294);var r=n(3905);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const s={sidebar_position:95},c="Validation",l={unversionedId:"tools/validation",id:"tools/validation",title:"Validation",description:"Package validation checks the content of MSI packages to, among other things, ensure the internal database structure follows (at least some of) the rules for MSI packages.",source:"@site/docs/tools/validation.md",sourceDirName:"tools",slug:"/tools/validation",permalink:"/wixtoolset/docs/tools/validation",draft:!1,editUrl:"https://github.com/wixtoolset/web/tree/master/src/Docusaurus/docs/tools/validation.md",tags:[],version:"current",sidebarPosition:95,frontMatter:{sidebar_position:95},sidebar:"docsSidebar",previous:{title:"Code pages",permalink:"/wixtoolset/docs/tools/codepage"},next:{title:"Heat harvesting",permalink:"/wixtoolset/docs/tools/heat"}},u={},p=[{value:"Errors running validation",id:"errors-running-validation",level:2}],d={toc:p},f="wrapper";function m(e){var{components:t}=e,n=i(e,["components"]);return(0,r.kt)(f,a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},d,n),{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"validation"},"Validation"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/windows/win32/msi/package-validation"},"Package validation")," checks the content of MSI packages to, among other things, ensure the internal database structure follows (at least some of) the rules for MSI packages."),(0,r.kt)("p",null,"Building a package using ",(0,r.kt)("a",{parentName:"p",href:"/wixtoolset/docs/tools/msbuild"},"MSBuild")," automatically runs validation using the stock MSI SDK ",(0,r.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/windows/win32/msi/ice-reference"},"ICEs"),". To run validation when using the Wix.exe .NET tool, use the ",(0,r.kt)("a",{parentName:"p",href:"https://wixtoolset.org/docs/tools/wixexe/#msivalidate"},(0,r.kt)("inlineCode",{parentName:"a"},"wix msi validate")," subcommand"),"."),(0,r.kt)("h2",{id:"errors-running-validation"},"Errors running validation"),(0,r.kt)("p",null,"Because the stock MSI ICEs are implemented as custom actions that are executed after merging them into an MSI package being built, the user running validation must be able to run Windows Installer. That works fine on a typical developer machine. However, non-interactive, non-administrator system accounts typically cannot. (System accounts that are administrators typically ",(0,r.kt)("em",{parentName:"p"},"can"),".) Unfortunately, non-interactive system accounts are commonly used on continuous integration build machines. So if validation succeeds on your machine but fails during a CI build, you've run into this problem."),(0,r.kt)("p",null,"Anecdotal evidence suggests that typical hosted CI build machines use service accounts that are incompatible with validation and because the hosted machines cannot be configured, there is no workaround to run validation during the build. The only option is to suppress validation by setting ",(0,r.kt)("inlineCode",{parentName:"p"},"<SuppressValidation>true</SuppressValidation>")," in your WiX MSBuild project."),(0,r.kt)("p",null,"Self-hosted CI build machines can run validation if the service account is ",(0,r.kt)("inlineCode",{parentName:"p"},"LocalSystem")," or another administrator user."))}m.isMDXComponent=!0}}]);