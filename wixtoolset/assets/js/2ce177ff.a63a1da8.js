"use strict";(self.webpackChunkwixweb=self.webpackChunkwixweb||[]).push([[93286],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>f});var n=r(67294);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var l=n.createContext({}),p=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},c=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(r),m=i,f=u["".concat(l,".").concat(m)]||u[m]||d[m]||o;return r?n.createElement(f,a(a({ref:t},c),{},{components:r})):n.createElement(f,a({ref:t},c))}));function f(e,t){var r=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=r.length,a=new Array(o);a[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:i,a[1]=s;for(var p=2;p<o;p++)a[p]=r[p];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},69339:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>f,frontMatter:()=>s,metadata:()=>p,toc:()=>u});r(67294);var n=r(3905);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function a(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}const s={wip:4274,type:"Feature",by:"Rob Mensching (rob at firegiant.com)",title:"Simple Standard File Structure"},l=void 0,p={unversionedId:"development/wips/simple-standard-file-structure",id:"development/wips/simple-standard-file-structure",title:"Simple Standard File Structure",description:"User stories",source:"@site/docs/development/wips/4274-simple-standard-file-structure.md",sourceDirName:"development/wips",slug:"/development/wips/simple-standard-file-structure",permalink:"/wixtoolset/docs/development/wips/simple-standard-file-structure",draft:!1,editUrl:"https://github.com/wixtoolset/web/tree/master/src/Docusaurus/docs/development/wips/4274-simple-standard-file-structure.md",tags:[],version:"current",sidebarPosition:4274,frontMatter:{wip:4274,type:"Feature",by:"Rob Mensching (rob at firegiant.com)",title:"Simple Standard File Structure"},sidebar:"docsSidebar",previous:{title:"WiX Layering Improvements",permalink:"/wixtoolset/docs/development/wips/wix-layering-improvements"},next:{title:"Allow administrators and users to redefine the payload cache locations",permalink:"/wixtoolset/docs/development/wips/allow-administrators-and-users-to-redefine-the-payload-cache-locations"}},c={},u=[{value:"User stories",id:"user-stories",level:2},{value:"Proposal",id:"proposal",level:2},{value:"Considerations",id:"considerations",level:2},{value:"See Also",id:"see-also",level:2}],d={toc:u},m="wrapper";function f(e){var{components:t}=e,r=a(e,["components"]);return(0,n.kt)(m,o(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}({},d,r),{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"user-stories"},"User stories"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"As a WiX developer I can determine the format of a file such that I can go directly to loading the file without exceptions in the normal case.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"As a WiX extension developer I can develop my extension such that I am independent of native code (such as winterop.dll)."))),(0,n.kt)("h2",{id:"proposal"},"Proposal"),(0,n.kt)("p",null,"There is no standard for the WiX owned output file types such as .wixlib and .wixpdb. Some are just XML documents while others contain a cabinet with appended XML. Sometimes a file might be in either of those formats. This forces tools to try loading files in each format catching exceptions until the file loads successfully if at all."),(0,n.kt)("p",null,"This proposal suggests standardizing on a single simple file structure that can be read and written by the ",(0,n.kt)("inlineCode",{parentName:"p"},"WixToolset.Data.dll"),". The ",(0,n.kt)("inlineCode",{parentName:"p"},"WixToolset.Data.dll")," provides consistent programmatic access to the WiX file format with no dependencies beyond .NET."),(0,n.kt)("p",null,"The WiX output files are compound documents where most of the data is in a text format, namely JSON or XML. Those text formats compress well so the .zip file format is the obvious choice as a container for the WiX output file format."),(0,n.kt)("p",null,"As the WiX toolset proceeds through different stages of the build process, it adds and/or updates entries in the WiX output file. Some examples of entries included in a WiX output file are:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"wix-ir.json")," - stores the intermediate representation in JSON form"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"wix-wid.xml")," - stores the Windows Installer data in XML form"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"wix-burndata.xml")," - stores the Burn manifest data in XML format")),(0,n.kt)("p",null,'The WiX output file can also contain additional binary files, such as in the case of "binary .wixlibs".'),(0,n.kt)("h2",{id:"considerations"},"Considerations"),(0,n.kt)("p",null,"All output files types are binary files in this simple format. Diagnosing issues in the files requires opening the file as a .zip to find the desired internal stream. The output can be opened in a text editor and the XML data can be found intact at the end of this simple standard file format. This is less convenient when debugging the WiX toolset but is optimized for the common case (production and consumption by the tools)."),(0,n.kt)("p",null,"Embedded files were compressed in a cabinet. This simple format does not compress files to keep things simple. In the future, we could consider using some compression (such as LZMA) on each embedded file's bytes if the compression algorithm can be embedded in the ",(0,n.kt)("inlineCode",{parentName:"p"},"WixToolset.Data.dll"),"."),(0,n.kt)("h2",{id:"see-also"},"See Also"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"http://wixtoolset.org/issues/4274/"},"WIXFEAT:4274")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/wixtoolset/docs/development/wips/wix-layering-improvements"},"WIP:4273"))))}f.isMDXComponent=!0}}]);